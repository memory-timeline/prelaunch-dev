"use strict";(self.webpackChunkprelaunch=self.webpackChunkprelaunch||[]).push([[274],{38344:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(79105);function r(e,t,n,r){try{const o="/api/presigned-url",i={key:n,bucket:e,method:r};return a.Z.get(t,o,i).then((e=>e.Error?(console.log(e.Error),""):e.URL))}catch(o){return o}}async function o(e,t,n,a){try{const o=await r(e,t,n,"PUT"),i={body:a,method:"PUT"};return await fetch(o,i).then((e=>e))}catch(o){return console.log(o),o}}const i={getObjectUrl:r,validateDetails:async function(e,t,n){try{const a="/api/details/validate",r={bucket:e};let o="https://".concat(t).concat(a);o+="?".concat(new URLSearchParams(r).toString());const i={method:"POST",credentials:"include",headers:new Headers({"content-type":"application/json"}),body:n};return await fetch(o,i).then((e=>e.ok?e.json():{status:"error"}))}catch(a){return console.log(a),a}},upload:o,uploadMultipleImages:function(e,t,n,a){try{return n.map((async n=>{const r=await o(e,t,n.Key,n.Body);return a(),r}))}catch(r){return console.log(r),r}},getMemories:function(e){try{const t="authbridge-stage.mymemorystore.in",n="/api/memories",r={bucket:"mymemorystore-stage"};return e&&(r.next_token=e),a.Z.get(t,n,r)}catch(t){return t}},getPendingMemories:function(e){try{const t="authbridge-stage.mymemorystore.in",n="/api/memories/pending-memories",r={bucket:"mymemorystore-stage"};return e&&(r.memory_id=e),a.Z.get(t,n,r)}catch(t){return t}},getAcceptedMemories:function(e){try{const t="authbridge-stage.mymemorystore.in",n="/api/memories/accepted-memories",r={bucket:"mymemorystore-stage"};return e&&(r.next_token=e),a.Z.get(t,n,r)}catch(t){return t}},viewMemory:function(e,t,n){try{const r="/api/memory",o={bucket:e,memory_id:n};return a.Z.get(t,r,o)}catch(r){return r}},viewSharedMemory:function(e){try{const t="authbridge-stage.mymemorystore.in",n="/api/memory/shared",r={bucket:"mymemorystore-stage",memory_id:e};return a.Z.get(t,n,r)}catch(t){return t}},getThumbnails:function(e){try{const t="mymemorystore-stage",n="authbridge-stage.mymemorystore.in",r="/api/memory/thumbnail";return e.map((async e=>{const o={bucket:t,memory_id:e};return a.Z.get(n,r,o)}))}catch(t){return console.log(t),t}},getPendingThumbnails:function(e){try{const t="authbridge-stage.mymemorystore.in",n="/api/memory/thumbnail/pending-memories",r={bucket:"mymemorystore-stage",memory_id:e.memory_id};return a.Z.get(t,n,r)}catch(t){return console.log(t),t}},getAcceptedThumbnails:function(e){try{const t="mymemorystore-stage",n="authbridge-stage.mymemorystore.in",r="/api/memory/thumbnail/accepted-memories";return e.map((async e=>{const o={bucket:t,memory_id:e.memory_id};return a.Z.get(n,r,o)}))}catch(t){return console.log(t),t}},finalizeMemory:function(e,t,n){try{const r="/api/memory/finalize",o={bucket:e,memory_id:n};return a.Z.get(t,r,o)}catch(r){return r}},deleteMemory:async function(e,t,n){try{const a="/api/memory",r={bucket:e,memory_id:n};let o="https://".concat(t).concat(a);o+="?".concat(new URLSearchParams(r).toString());const i={method:"DELETE",credentials:"include",headers:new Headers({"content-type":"application/json"})};return await fetch(o,i).then((e=>e.ok?{status:"ok",body:e.json()}:{status:"error"}))}catch(a){return a}},updateMemoryDetails:async function(e,t,n,a,r){try{const o="/api/memory",i={bucket:e,memory_id:n};let s="https://".concat(t).concat(o);s+="?".concat(new URLSearchParams(i).toString());const c={method:"PATCH",credentials:"include",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({item:a,value:r})};return await fetch(s,c).then((e=>e))}catch(o){return console.log(o),!1}},updateMemoryImage:async function(e,t,n,a,r){try{const o="/api/memory",i={bucket:e,memory_id:n};let s="https://".concat(t).concat(o);s+="?".concat(new URLSearchParams(i).toString());const c={method:"PATCH",credentials:"include",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({item:"image",action:a,image:r})};return await fetch(s,c).then((e=>e))}catch(o){return console.log(o),!1}},shareMemory:async function(e,t){try{const n="/api/memory/share/init",a={bucket:"mymemorystore-stage",memory_id:e};let r="https://".concat("authbridge-stage.mymemorystore.in").concat(n);r+="?".concat(new URLSearchParams(a).toString());const o={method:"POST",credentials:"include",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({email_list:t})};return await fetch(r,o).then((e=>e))}catch(n){return console.log(n),!1}},getShareData:async function(e){try{const t="/api/memory/share/details",n={bucket:"mymemorystore-stage",memory_id:e};let a="https://".concat("authbridge-stage.mymemorystore.in").concat(t);a+="?".concat(new URLSearchParams(n).toString());const r={method:"GET",credentials:"include",headers:new Headers({"content-type":"application/json"})};return await fetch(a,r).then((e=>e.json()))}catch(t){return console.log(t),!1}},revokeShare:async function(e,t){try{const n="/api/memory/share/revoke",a={bucket:"mymemorystore-stage",memory_id:e};let r="https://".concat("authbridge-stage.mymemorystore.in").concat(n);r+="?".concat(new URLSearchParams(a).toString());const o={method:"POST",credentials:"include",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({email_list:t})};return await fetch(r,o).then((e=>e))}catch(n){return console.log(n),!1}},acceptShare:async function(e,t){try{const n="/api/memory/share/accept",a={bucket:"mymemorystore-stage",memory_id:e};let r="https://".concat("authbridge-stage.mymemorystore.in").concat(n);r+="?".concat(new URLSearchParams(a).toString());const o={method:"POST",credentials:"include",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({email:t})};return await fetch(r,o).then((e=>e))}catch(n){return console.log(n),!1}},rejectShare:async function(e,t){try{const n="/api/memory/share/reject",a={bucket:"mymemorystore-stage",memory_id:e};let r="https://".concat("authbridge-stage.mymemorystore.in").concat(n);r+="?".concat(new URLSearchParams(a).toString());const o={method:"POST",credentials:"include",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({email_list:[t]})};return await fetch(r,o).then((e=>e))}catch(n){return console.log(n),!1}},updateTitle:async function(e,t){try{const n="/api/memory/update/title",a={bucket:"mymemorystore-stage",memory_id:e};let r="https://".concat("authbridge-stage.mymemorystore.in").concat(n);r+="?".concat(new URLSearchParams(a).toString());const o={method:"PATCH",credentials:"include",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({title:t})};return await fetch(r,o).then((e=>e))}catch(n){return console.log(n),!1}},updateDate:async function(e,t){try{const n="/api/memory/update/date",a={bucket:"mymemorystore-stage",memory_id:e};let r="https://".concat("authbridge-stage.mymemorystore.in").concat(n);r+="?".concat(new URLSearchParams(a).toString());const o={method:"PATCH",credentials:"include",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({date:t})};return await fetch(r,o).then((e=>e))}catch(n){return console.log(n),!1}},updateStory:async function(e,t){try{const n="/api/memory/update/story",a={bucket:"mymemorystore-stage",memory_id:e};let r="https://".concat("authbridge-stage.mymemorystore.in").concat(n);r+="?".concat(new URLSearchParams(a).toString());const o={method:"PATCH",credentials:"include",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({story:t})};return await fetch(r,o).then((e=>e))}catch(n){return console.log(n),!1}},updateThumbnail:async function(e,t){try{const n="/api/memory/update/thumbnail",a={bucket:"mymemorystore-stage",memory_id:e};let r="https://".concat("authbridge-stage.mymemorystore.in").concat(n);r+="?".concat(new URLSearchParams(a).toString());const o={method:"PATCH",credentials:"include",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({name:t})};return await fetch(r,o).then((e=>e))}catch(n){return console.log(n),!1}},addImage:async function(e,t){try{const n="/api/memory/add/image",a={bucket:"mymemorystore-stage",memory_id:e};let r="https://".concat("authbridge-stage.mymemorystore.in").concat(n);r+="?".concat(new URLSearchParams(a).toString());const o={method:"POST",credentials:"include",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify(t)};return await fetch(r,o).then((e=>e))}catch(n){return console.log(n),!1}},removeImage:async function(e,t){try{const n="/api/memory/remove/image",a={bucket:"mymemorystore-stage",memory_id:e};let r="https://".concat("authbridge-stage.mymemorystore.in").concat(n);r+="?".concat(new URLSearchParams(a).toString());const o={method:"DELETE",credentials:"include",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({name:t})};return await fetch(r,o).then((e=>e))}catch(n){return console.log(n),!1}},updateCaption:async function(e,t,n){try{const a="/api/memory/update/caption",r={bucket:"mymemorystore-stage",memory_id:e};let o="https://".concat("authbridge-stage.mymemorystore.in").concat(a);o+="?".concat(new URLSearchParams(r).toString());const i={method:"PATCH",credentials:"include",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({name:t,caption:n})};return await fetch(o,i).then((e=>e))}catch(a){return console.log(a),!1}}}},98278:(e,t,n)=>{n.d(t,{Z:()=>h});var a=n(47313),r=n(21422),o=n(47131),i=n(11198),s=n(32195),c=n(64292),l=n(61113),m=n(46417);function d(e){let{message:t,error:n}=e;return!0===n?(0,m.jsxs)(s.Z,{direction:"row",spacing:2,justifyContent:"space-between",alignItems:"center",children:[(0,m.jsx)(i.Z,{fontSize:"small",color:"error"}),(0,m.jsx)(l.Z,{children:t})]}):(0,m.jsxs)(s.Z,{direction:"row",spacing:2,justifyContent:"space-between",alignItems:"center",children:[(0,m.jsx)(c.Z,{fontSize:"small",color:"success"}),(0,m.jsx)(l.Z,{children:t})]})}function h(e){let{snackBarOpen:t,message:n,onClose:s,error:c}=e;const[l,h]=(0,a.useState)(t),[u,y]=(0,a.useState)(n);(0,a.useEffect)((()=>h(t)),[t]),(0,a.useEffect)((()=>y(n)),[n]);const g=()=>{h(!1),y(null),s()},p=(0,m.jsx)(o.Z,{size:"small","aria-label":"close",color:"inherit",onClick:g,children:(0,m.jsx)(i.Z,{fontSize:"small"})});return(0,m.jsx)(r.Z,{open:l,autoHideDuration:3e3,onClose:g,message:(0,m.jsx)(d,{message:u,error:c}),action:p,anchorOrigin:{vertical:"top",horizontal:"center"}})}h.defaultProps={error:!1}},90325:(e,t,n)=>{n.d(t,{Z:()=>s});var a=n(9019),r=n(61113),o=n(56746),i=n(46417);function s(e){let{handleMoreClick:t}=e;return(0,i.jsx)(a.ZP,{item:!0,lg:3,md:4,sm:6,xs:12,sx:{p:1},children:(0,i.jsx)(o.Z,{handleClick:t,children:(0,i.jsx)(r.Z,{variant:"h5",sx:{p:2,color:"secondary.main",bgcolor:"primary.main",borderRadius:"30px",borderColor:"secondary.main",position:"absolute",bottom:"50%",left:"50%",transform:"translate(-50%, +50%)",textAlign:"center"},children:"Load More"})})},"creatememory")}},82295:(e,t,n)=>{n.d(t,{Z:()=>o});var a=n(9019),r=n(46417);function o(e){let{children:t}=e;return(0,r.jsx)(a.ZP,{container:!0,sx:{bgcolor:"button.main",py:1},justifyContent:"left",alignItems:"flex-start",children:t})}o.defaultProps={children:""}},19482:(e,t,n)=>{n.d(t,{Z:()=>h});var a=n(16957),r=n(93405),o=n(54641),i=n(61113),s=n(66212),c=n(56746),l=n(46417);function m(e){let{imageSrc:t,imageSrcSet:n,title:r,handleImageLoad:o}=e;return(0,l.jsx)(a.Z,{component:"img",src:t,srcSet:n,alt:r,sx:{textAlign:"center",objectFit:"cover",height:{lg:350,md:300,xs:250}},onLoad:o})}function d(e){let{title:t,date:n,avatar:a,shared:c}=e;return(0,l.jsx)(r.Z,{children:(0,l.jsx)(o.Z,{disableTypography:!0,avatar:a,title:(0,l.jsxs)(i.Z,{noWrap:!0,sx:{overflow:"hidden",textOverflow:"ellipsis",width:{xs:"calc(75%)",sm:"calc(100%)"},fontWeight:600},children:[t,""!==c?(0,l.jsxs)(l.Fragment,{children:[" ",(0,l.jsx)(s.Z,{label:c,size:"small",variant:"filled",color:"Shared"===c?"success":"default",sx:{height:"auto"}})]}):null]}),subheader:(0,l.jsx)(i.Z,{sx:{color:"muted.main"},children:n}),sx:{padding:0,color:"faded.black"}})})}function h(e){let{title:t,date:n,avatar:a,shared:r,thumbnailImage:o,thumbnailImageSrcSet:i,handleClick:s,handleImageLoad:h}=e;return(0,l.jsxs)(c.Z,{handleClick:s,children:[(0,l.jsx)(m,{imageSrc:o,imageSrcSet:i,title:t,handleImageLoad:h}),(0,l.jsx)(d,{title:t,date:n,avatar:a,shared:r})]})}d.defaultProps={title:"Memory Thumbnail Image",date:"",avatar:"",shared:""},m.defaultProps={title:"Memory Thumbnail Image",imageSrc:"",imageSrcSet:"",handleImageLoad:()=>{}},h.defaultProps={thumbnailImageSrcSet:"",handleImageLoad:()=>{},avatar:"",shared:""}},56746:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(73428),r=n(44183),o=n(46417);function i(e){let{handleClick:t,children:n}=e;return(0,o.jsx)(r.Z,{onClick:t,children:(0,o.jsx)(a.Z,{elevation:2,sx:{bgcolor:"#fff",borderRadius:5,color:"black",position:"relative",height:{lg:430,md:380,xs:330},"&:hover":{border:3,borderColor:"secondary.main",elevation:0}},children:n})})}},22274:(e,t,n)=>{n.r(t),n.d(t,{default:()=>V});var a=n(78701),r=n(47313),o=n(58467),i=n(2135),s=n(43960),c=n(55719),l=n(32195),m=n(80907),d=n(41806),h=n(9019),u=n(1470),y=n(19482),g=n(64586),p=n(46417);function x(e){let{memory:t}=e;return(0,p.jsx)(h.ZP,{item:!0,lg:3,md:4,sm:6,xs:12,sx:{p:1},children:(0,p.jsx)(y.Z,{title:(0,p.jsx)(u.Z,{type:"rectangular",sx:{width:"60%"}}),date:(0,p.jsx)(u.Z,{type:"rectangular",sx:{width:"50%"}}),thumbnailImage:g,handleClick:()=>{}})},t)}var f=n(82295),b=n(12839),j=n(90325);function w(e){let{items:t,handleMoreClick:n,nextToken:a,handleImageLoad:r,createComponent:o,handleClick:i}=e;return(0,p.jsxs)(h.ZP,{container:!0,sx:{bgcolor:"button.main",py:1},justifyContent:"left",alignItems:"flex-start",children:[o,t.map((e=>{return(0,p.jsx)(h.ZP,{item:!0,lg:3,md:4,sm:6,xs:12,sx:{p:1},children:(0,p.jsx)(y.Z,{title:e.title,date:e.date,avatar:e.owner?(0,p.jsx)(b.S,{name:e.owner.name,picture:e.owner.picture,email:e.owner.email}):null,shared:e.shared,thumbnailImage:e.photo.src,thumbnailImageSrcSet:(t=e.photo,(t.images?t.images.map((e=>{let{src:t,width:n}=e;return"".concat(t," ").concat(n,"w")})):[]).join(",")),handleClick:()=>i(e),handleImageLoad:r})},e.title);var t})),a&&(0,p.jsx)(j.Z,{handleMoreClick:n})]})}w.defaultProps={items:[],createComponent:""};var S=n(38344),Z=n(15300),k=n(61113),v=n(41434),C=n(56746);function P(e){let{message:t,handleClick:n}=e;const a=(0,Z.Z)((e=>e.breakpoints.down("md")));return(0,p.jsx)(h.ZP,{item:!0,lg:3,md:4,sm:6,xs:12,sx:{p:1},children:(0,p.jsxs)(C.Z,{handleClick:n,children:[(0,p.jsx)(k.Z,{variant:a?"body1":"h5",color:"button.main",sx:{p:1,color:"secondary.main",bgcolor:"primary.main",borderRadius:"0px 10px 10px 0px",borderColor:"secondary.main",position:"absolute",bottom:15,left:0},children:t}),(0,p.jsx)(v.Z,{sx:{position:"absolute",border:3,borderRadius:"50%",fontSize:"7.5rem",left:"50%",top:"50%",transform:"translate(-50%, -50%)",color:"muted.main"}})]})},"create")}async function I(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";try{const r=await S.Z.getMemories(a);if(r&&r.memories){n(r.memories);e(await Promise.all(S.Z.getThumbnails(r.memories))),t(r.next_continuation_token||"")}}catch(r){console.log(r)}}function _(){const[e,t]=(0,r.useState)(""),[n,a]=(0,r.useState)([]),[i,s]=(0,r.useState)([]),[c,l]=(0,r.useState)(0),[m,h]=(0,r.useState)(null),u=(0,o.s0)(),y=e=>{u("/memory/".concat(e.memory_id),{state:e})},g=()=>l((e=>e+1)),b=e=>t(e),j=e=>s((t=>t.concat(e))),S=e=>a((t=>t.concat(e))),Z=(0,p.jsx)(P,{message:"Create a memory",handleClick:()=>u("/memory/create")}),k=()=>I(j,b,S,e),v=i.sort(((e,t)=>e.memory_id>t.memory_id?1:-1));return(0,r.useEffect)((()=>I(j,b,S,e)),[]),(0,r.useEffect)((()=>{h((0,p.jsx)(w,{createComponent:Z,handleClick:y,handleImageLoad:g,handleMoreClick:k,items:v,nextToken:e}))}),[i,e]),i.length===n.length&&c>=n.length?m:(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(f.Z,{children:[Z,n.map((e=>(0,p.jsx)(x,{memory:e})))]}),(0,p.jsx)(d.Z,{component:"div",sx:{display:"none"},children:m})]})}var L=n(31095),R=n(75746);function M(e){let{message:t}=e;const n=(0,o.s0)();return(0,p.jsxs)(l.Z,{direction:"column",justifyContent:"center",alignItems:"center",sx:{width:"95%",maxWidth:"500px",position:"fixed",top:"50%",right:"50%",transform:"translate(50%, -50%)",border:"2px solid gray",height:"60%",borderRadius:"10px"},children:[(0,p.jsx)(R.r,{fill:"gray",width:"64px",height:"64px"}),(0,p.jsx)(k.Z,{color:"gray",sx:{fontSize:"1.3rem"},children:t}),(0,p.jsx)(k.Z,{color:"gray",sx:{pb:8,fontSize:"1.3rem"},children:"Check again later."}),(0,p.jsx)(k.Z,{color:"primary",children:"In the mean time, you can"}),(0,p.jsx)(L.Z,{variant:"contained",onClick:()=>n("/memory/create"),children:"Create a Memory"})]})}async function T(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";try{const r=await S.Z.getAcceptedMemories(a);if(r&&r.memories){n(r.memories);e(await Promise.all(S.Z.getAcceptedThumbnails(r.memories))),t(r.next_continuation_token||"")}}catch(r){console.log(r)}}function O(){const[e,t]=(0,r.useState)(""),[n,a]=(0,r.useState)([]),[i,s]=(0,r.useState)([]),[c,l]=(0,r.useState)(0),[m,h]=(0,r.useState)(null),u=(0,o.s0)(),y=e=>{u("/memory/shared/".concat(e.memory_id),{state:e})},g=()=>l((e=>e+1)),b=e=>t(e),j=e=>{e.map((e=>{const t=e.thumbnail;return t.owner=e.owner_details,s((e=>e.concat([t]))),0}))},S=e=>a((t=>t.concat(e))),Z=i.sort(((e,t)=>e.memory_id>t.memory_id?1:-1)),k=()=>T(j,b,S,e);return(0,r.useEffect)((()=>T(j,b,S,e)),[]),(0,r.useEffect)((()=>{i.length>0?h((0,p.jsx)(w,{handleClick:y,handleImageLoad:g,handleMoreClick:k,items:Z,nextToken:e})):h((0,p.jsx)(M,{message:"No shared memories right now."}))}),[i,e]),i.length===n.length&&c>=n.length?m:(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(f.Z,{children:n.map((e=>(0,p.jsx)(x,{memory:e})))}),(0,p.jsx)(d.Z,{component:"div",sx:{display:"none"},children:m})]})}function H(e){let{label:t,handleClick:n,color:a,disabled:r}=e;return(0,p.jsx)(L.Z,{variant:"contained",color:a,sx:{m:1},onClick:n,disabled:r,children:(0,p.jsx)(k.Z,{variant:"h6",children:t})})}function U(e){let{name:t,email:n,picture:a}=e;return(0,p.jsxs)(l.Z,{direction:"row",justifyContent:"center",alignItems:"center",sx:{width:"100%"},children:[(0,p.jsx)(b.S,{name:t,email:n,picture:a}),(0,p.jsx)(k.Z,{variant:"h6",sx:{px:1},children:t})]})}var A=n(98278),E=n(31798),N=n(16957),D=n(93405),z=n(54641),J=n(73428),F=n(44183);function W(e){let{handleClick:t,children:n}=e;return(0,p.jsx)(F.Z,{onClick:t,sx:{display:"flex"},children:(0,p.jsx)(J.Z,{elevation:0,sx:{bgcolor:"#fff",borderRadius:5,position:"relative",maxWidth:"700px",width:"95%"},children:n})})}function B(e){let{imageSrc:t,imageSrcSet:n,title:a,handleImageLoad:r}=e;return(0,p.jsx)(N.Z,{component:"img",src:t,srcSet:n,alt:a,sx:{borderColor:"muted.main",borderRadius:4,textAlign:"center",objectFit:"cover",height:{lg:400,sm:350,xs:350}},onLoad:r})}function X(e){let{title:t,date:n}=e;return(0,p.jsx)(D.Z,{children:(0,p.jsx)(z.Z,{disableTypography:!0,title:(0,p.jsx)(k.Z,{noWrap:!0,sx:{overflow:"hidden",textOverflow:"ellipsis",width:{xs:"calc(75%)",sm:"calc(100%)"},fontWeight:600},children:t}),subheader:(0,p.jsx)(k.Z,{sx:{color:"muted.main"},children:n}),sx:{padding:0,color:"faded.black"}})})}function q(e){let{title:t,date:n,thumbnailImage:a,thumbnailImageSrcSet:r,handleClick:o,handleImageLoad:i}=e;return(0,p.jsxs)(W,{handleClick:o,children:[(0,p.jsx)(B,{imageSrc:a,imageSrcSet:r,title:t,handleImageLoad:i}),(0,p.jsx)(X,{title:t,date:n})]})}X.defaultProps={title:"",date:""},B.defaultProps={title:"Review Image",imageSrc:"",imageSrcSet:"",handleImageLoad:()=>{}},q.defaultProps={title:"",date:"",thumbnailImageSrcSet:"",handleImageLoad:()=>{}};async function G(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";try{const r=await S.Z.getPendingMemories(a);if(r&&(n(r.count),r.memory)){t(r.memory);e(await S.Z.getPendingThumbnails(r.memory))}}catch(r){console.log(r)}}function K(e){let{memoryID:t}=e;const[n,a]=(0,r.useState)(null),[o,i]=(0,r.useState)(!1),[,s]=(0,r.useState)(null),[c,m]=(0,r.useState)(null),[h,y]=(0,r.useState)(null),[x,f]=(0,r.useState)(null),[b,j]=(0,r.useState)(null),[w,Z]=(0,r.useState)(null),[v,C]=(0,r.useState)(!1),[P,I]=(0,r.useState)(!1),[_,L]=(0,r.useState)(null),R=()=>{L(null),C(!1),I(!1)},T=(e,t)=>{f(!0),j(e),Z(t)},O=()=>{f(!1),j(null),Z(null)},N=()=>{m(null),y(null),G(m,s,a,t)};(0,r.useEffect)((()=>G(m,s,a,t)),[]);const D=e=>{e.ok?(T("Memory share accepted",!1),i(!1),N()):T("Error while accepting memory share",!0)},z=e=>{e.ok?(T("Memory share rejected",!1),i(!1),N()):T("Error while rejecting memory share",!0)},J=()=>{L("Accepting memory. Please wait..."),C(!0),async function(e,t){try{const n=E.ZP.getUserInfo();t(await S.Z.acceptShare(e,n.email))}catch(n){console.log(n)}}(c.thumbnail.memory_id,D),R()},F=()=>{L("Rejecting memory. Please wait..."),I(!0),async function(e,t){try{const n=E.ZP.getUserInfo();t(await S.Z.rejectShare(e,n.email))}catch(n){console.log(n)}}(c.thumbnail.memory_id,z),R()},W=()=>i(!0);return 0===n&&null===h&&y((0,p.jsx)(M,{message:"Nothing to review right now."})),(0,r.useEffect)((()=>function(){if(null!==c){const t=(0,p.jsx)(d.Z,{sx:{display:"flex",width:"100%",backgroundColor:"transparent",backgroundSize:"cover",backgroundImage:"linear-gradient(white, #0e516a)",justifyContent:"center"},children:(0,p.jsxs)(l.Z,{direction:"column",alignItems:"center",sx:{width:"100%",my:3},children:[(0,p.jsx)(U,{name:c.owner_details.name||"",email:c.owner_details.email||"P",picture:c.owner_details.picture||""}),(0,p.jsx)(k.Z,{sx:{mb:2},children:"has shared a memory with you"}),(0,p.jsx)(l.Z,{direction:"column",spacing:1,alignItems:"center",children:(0,p.jsx)(q,{title:c.thumbnail.title,date:c.thumbnail.date,thumbnailImage:c.thumbnail.photo.src,thumbnailImageSrcSet:(e=c.thumbnail.photo,(e.images?e.images.map((e=>{let{src:t,width:n}=e;return"".concat(t," ").concat(n,"w")})):[]).join(",")),handleImageLoad:W,handleClick:()=>{}})},c.thumbnail.memory_id),(0,p.jsxs)(l.Z,{direction:"row",sx:{m:1},children:[(0,p.jsx)(H,{label:"Accept",color:"primary",handleClick:J,disabled:v||P}),(0,p.jsx)(H,{label:"Reject",color:"error",handleClick:F,disabled:v||P})]})]})});y(t)}var e}()),[c,t,v,P]),null!==c&&o||0===n?(0,p.jsxs)(p.Fragment,{children:[!0===v||!0===P?(0,p.jsx)(k.Z,{variant:"h6",sx:{p:2,color:"white"},children:_}):null,h,(0,p.jsx)(A.Z,{snackBarOpen:x,message:b,onClose:O,error:w})]}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(d.Z,{sx:{display:"flex",width:"100%",backgroundColor:"transparent",backgroundSize:"cover",backgroundImage:"linear-gradient(white, #0e516a)",justifyContent:"center"},children:(0,p.jsxs)(l.Z,{direction:"column",alignItems:"center",sx:{width:"100%",my:3},children:[(0,p.jsx)(U,{name:(0,p.jsx)(u.Z,{type:"rectangular",sx:{width:"35%"}}),email:"P",picture:""}),(0,p.jsx)(k.Z,{sx:{mb:2},children:"has shared a memory with you"}),(0,p.jsx)(l.Z,{direction:"column",spacing:1,alignItems:"center",children:(0,p.jsx)(q,{title:"",date:"",thumbnailImage:g,thumbnailImageSrcSet:"",handleImageLoad:()=>{},handleClick:()=>{}})},"loading"),(0,p.jsxs)(l.Z,{direction:"row",sx:{m:1},children:[(0,p.jsx)(H,{label:"Accept",color:"primary",handleClick:()=>{},disabled:!0}),(0,p.jsx)(H,{label:"Reject",color:"error",handleClick:()=>{},disabled:!0})]})]})}),(0,p.jsx)(A.Z,{snackBarOpen:x,message:b,onClose:O,error:w}),(0,p.jsx)(d.Z,{component:"div",sx:{display:"none"},children:h})]})}function Y(e){let{mode:t,handleChange:n}=e;return(0,p.jsx)(l.Z,{direction:"row",justifyContent:"center",sx:{py:1,backgroundColor:"button.main"},children:(0,p.jsxs)(c.Z,{color:"primary",value:t,exclusive:!0,"aria-label":"Memory Modes",children:[(0,p.jsx)(s.Z,{value:"own",sx:{borderRadius:"30px"},onClick:n,children:"My Memories"}),(0,p.jsx)(s.Z,{value:"shared",onClick:n,children:"Shared With Me"}),(0,p.jsx)(s.Z,{value:"review",sx:{borderRadius:"30px"},onClick:n,children:"Review"})]})})}function Q(e){let{mode:t,memoryID:n}=e;return"own"===t?(0,p.jsx)(_,{}):"shared"===t?(0,p.jsx)(O,{}):"review"===t?(0,p.jsx)(K,{memoryID:n}):void 0}function V(e){let{initMode:t}=e;const n=(0,o.UO)(),{memoryMode:s}=n,[c]=(0,i.lr)(),[d,h]=(0,r.useState)(t);(0,r.useEffect)((()=>{h(s||t)}),[s,t]);return(0,p.jsx)(m.Z,{create:!0,children:(0,p.jsx)(a.Z,{children:(0,p.jsxs)(l.Z,{direction:"column",children:[(0,p.jsx)(Y,{mode:d,handleChange:(e,t)=>{h(t)}}),(0,p.jsx)(Q,{mode:d,memoryID:c.get("memoryID")})]})})})}K.defaultProps={memoryID:""},Q.defaultProps={memoryID:""}},64292:(e,t,n)=>{var a=n(64836);t.Z=void 0;var r=a(n(45045)),o=n(46417),i=(0,r.default)((0,o.jsx)("path",{d:"M9 16.2 4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"}),"Done");t.Z=i},1470:(e,t,n)=>{n.d(t,{Z:()=>L});var a=n(30168),r=n(63366),o=n(87462),i=n(47313),s=n(2197),c=n(30686),l=n(8007),m=n(30570),d=n(17551),h=n(17592),u=n(31033),y=n(14363),g=n(1167);function p(e){return(0,g.ZP)("MuiSkeleton",e)}(0,y.Z)("MuiSkeleton",["root","text","rectangular","rounded","circular","pulse","wave","withChildren","fitContent","heightAuto"]);var x,f,b,j,w=n(46417);const S=["animation","className","component","height","style","variant","width"];let Z,k,v,C;const P=(0,c.F4)(Z||(Z=x||(x=(0,a.Z)(["\n  0% {\n    opacity: 1;\n  }\n\n  50% {\n    opacity: 0.4;\n  }\n\n  100% {\n    opacity: 1;\n  }\n"])))),I=(0,c.F4)(k||(k=f||(f=(0,a.Z)(["\n  0% {\n    transform: translateX(-100%);\n  }\n\n  50% {\n    /* +0.5s of delay between each loop */\n    transform: translateX(100%);\n  }\n\n  100% {\n    transform: translateX(100%);\n  }\n"])))),_=(0,h.ZP)("span",{name:"MuiSkeleton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],!1!==n.animation&&t[n.animation],n.hasChildren&&t.withChildren,n.hasChildren&&!n.width&&t.fitContent,n.hasChildren&&!n.height&&t.heightAuto]}})((e=>{let{theme:t,ownerState:n}=e;const a=(0,m.Wy)(t.shape.borderRadius)||"px",r=(0,m.YL)(t.shape.borderRadius);return(0,o.Z)({display:"block",backgroundColor:t.vars?t.vars.palette.Skeleton.bg:(0,d.Fq)(t.palette.text.primary,"light"===t.palette.mode?.11:.13),height:"1.2em"},"text"===n.variant&&{marginTop:0,marginBottom:0,height:"auto",transformOrigin:"0 55%",transform:"scale(1, 0.60)",borderRadius:"".concat(r).concat(a,"/").concat(Math.round(r/.6*10)/10).concat(a),"&:empty:before":{content:'"\\00a0"'}},"circular"===n.variant&&{borderRadius:"50%"},"rounded"===n.variant&&{borderRadius:(t.vars||t).shape.borderRadius},n.hasChildren&&{"& > *":{visibility:"hidden"}},n.hasChildren&&!n.width&&{maxWidth:"fit-content"},n.hasChildren&&!n.height&&{height:"auto"})}),(e=>{let{ownerState:t}=e;return"pulse"===t.animation&&(0,c.iv)(v||(v=b||(b=(0,a.Z)(["\n      animation: "," 2s ease-in-out 0.5s infinite;\n    "]))),P)}),(e=>{let{ownerState:t,theme:n}=e;return"wave"===t.animation&&(0,c.iv)(C||(C=j||(j=(0,a.Z)(["\n      position: relative;\n      overflow: hidden;\n\n      /* Fix bug in Safari https://bugs.webkit.org/show_bug.cgi?id=68196 */\n      -webkit-mask-image: -webkit-radial-gradient(white, black);\n\n      &::after {\n        animation: "," 2s linear 0.5s infinite;\n        background: linear-gradient(\n          90deg,\n          transparent,\n          ",",\n          transparent\n        );\n        content: '';\n        position: absolute;\n        transform: translateX(-100%); /* Avoid flash during server-side hydration */\n        bottom: 0;\n        left: 0;\n        right: 0;\n        top: 0;\n      }\n    "]))),I,(n.vars||n).palette.action.hover)})),L=i.forwardRef((function(e,t){const n=(0,u.i)({props:e,name:"MuiSkeleton"}),{animation:a="pulse",className:i,component:c="span",height:m,style:d,variant:h="text",width:y}=n,g=(0,r.Z)(n,S),x=(0,o.Z)({},n,{animation:a,component:c,variant:h,hasChildren:Boolean(g.children)}),f=(e=>{const{classes:t,variant:n,animation:a,hasChildren:r,width:o,height:i}=e,s={root:["root",n,a,r&&"withChildren",r&&!o&&"fitContent",r&&!i&&"heightAuto"]};return(0,l.Z)(s,p,t)})(x);return(0,w.jsx)(_,(0,o.Z)({as:c,ref:t,className:(0,s.Z)(f.root,i),ownerState:x},g,{style:(0,o.Z)({width:y,height:m},d)}))}))},64586:(e,t,n)=>{e.exports=n.p+"static/media/image-loading.f1b4462988545d9c460a.png"}}]);