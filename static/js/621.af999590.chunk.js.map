{"version":3,"file":"static/js/621.af999590.chunk.js","mappings":"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","sources":["api/collage.jsx","api/helpers.js","components/OptionsButton.jsx","components/AddPhotos.jsx","components/LoginButton.jsx","components/collage/dbutils.js","components/collage/helpers.js","components/profile.jsx","db.js","hocs/require-authentication.jsx","components/collage/TextDisplay.jsx","components/collage/node.jsx","components/collage/binaryTree.jsx","components/collage/treeUtils.js","hooks/collage/base.jsx","hooks/collage/dimensions.jsx","hooks/collage/options.jsx","hooks/collage/actions.jsx","hooks/collage/images.jsx","hooks/collage/tree.jsx","components/collage/Collage.jsx","components/collage/DownloadDialog.jsx","components/collage/SaveDialog.jsx","components/collage/SaveStatusDialog.jsx","components/collage/Header.jsx","components/collage/EmptyCollage.jsx","components/collage/View.jsx","components/collage/DesktopActionItem.jsx","components/collage/DesktopDrawer.jsx","components/collage/ControlsDivider.jsx","components/collage/DesktopActions.jsx","components/collage/ClearCollageDialog.jsx","components/collage/DesktopControls.jsx","components/collage/DesktopImageOptions.jsx","components/collage/PaddingControl.jsx","components/collage/RadiusControl.jsx","components/collage/ColorControl.jsx","components/collage/TextControl.jsx","components/collage/EditControl.jsx","components/collage/MobileActionItem.jsx","components/collage/MobileActions.jsx","components/collage/MainControls.jsx","components/collage/EditOptions.jsx","components/collage/ImageOptions.jsx","components/collage/MobileControls.jsx","hocs/require-saving.jsx","pages/collage/Base.jsx","utils.jsx"],"sourcesContent":["import helpers from 'api/helpers';\n\nfunction newCollage(collageID, collageDetails) {\n  try {\n    const path = '/api/collage/new';\n    const params = { collage_id: collageID };\n    const authURL = process.env.REACT_APP_AUTH_URL;\n    return helpers.post(authURL, path, params, JSON.stringify(collageDetails));\n  } catch (error) {\n    /* eslint-disable no-console */\n    console.log(error);\n    return error;\n  }\n}\n\nfunction saveCollage(collageID, collageDetails) {\n  try {\n    const path = '/api/collage/save';\n    const params = { collage_id: collageID };\n    const authURL = process.env.REACT_APP_AUTH_URL;\n    return helpers.post(authURL, path, params, JSON.stringify(collageDetails));\n  } catch (error) {\n    /* eslint-disable no-console */\n    console.log(error);\n    return error;\n  }\n}\nasync function upload(url, body) {\n  try {\n    const params = { body, method: 'PUT' };\n    const resp = await fetch(url, params).then((response) => response);\n    return resp;\n  } catch (error) {\n    /* eslint-disable no-console */\n    console.log(error);\n    return error;\n  }\n}\n\nfunction listCollages(nextToken) {\n  try {\n    const path = '/api/collage/list';\n    const params = { next_token: nextToken };\n    const authURL = process.env.REACT_APP_AUTH_URL;\n    return helpers.get(authURL, path, params);\n  } catch (error) {\n    /* eslint-disable no-console */\n    console.log(error);\n    return error;\n  }\n}\n\nfunction getThumbnail(collageId) {\n  try {\n    const path = '/api/collage/thumbnail';\n    const params = { collage_id: collageId };\n    const authURL = process.env.REACT_APP_AUTH_URL;\n    return helpers.get(authURL, path, params);\n  } catch (error) {\n    /* eslint-disable no-console */\n    console.log(error);\n    return error;\n  }\n}\n\nfunction getCollage(collageId) {\n  try {\n    const path = '/api/collage/get';\n    const params = { collage_id: collageId };\n    const authURL = process.env.REACT_APP_AUTH_URL;\n    return helpers.get(authURL, path, params);\n  } catch (error) {\n    /* eslint-disable no-console */\n    console.log(error);\n    return error;\n  }\n}\n\nfunction deleteCollage(collageId) {\n  try {\n    const path = '/api/collage/delete';\n    const params = { collage_id: collageId };\n    const authURL = process.env.REACT_APP_AUTH_URL;\n    return helpers.deleteMethod(authURL, path, params);\n  } catch (error) {\n    /* eslint-disable no-console */\n    console.log(error);\n    return error;\n  }\n}\n\nfunction checkOptimizeStatus(collageId) {\n  try {\n    const path = '/api/collage/resized-count';\n    const params = { collage_id: collageId };\n    const authURL = process.env.REACT_APP_AUTH_URL;\n    return helpers.get(authURL, path, params);\n  } catch (error) {\n    /* eslint-disable no-console */\n    console.log(error);\n    return error;\n  }\n}\nexport default {\n  newCollage,\n  saveCollage,\n  upload,\n  listCollages,\n  getThumbnail,\n  getCollage,\n  deleteCollage,\n  checkOptimizeStatus,\n};\n","const get = async (url, path, params = {}) => {\n  let newUrl = `https://${url}${path}`;\n  const options = {\n    method: 'GET',\n    credentials: 'include',\n    headers: new Headers({ 'content-type': 'application/json' }),\n  };\n  newUrl += `?${new URLSearchParams(params).toString()}`;\n  const resp = await fetch(newUrl, options);\n  if (!resp.ok) {\n    if (resp.status === 401) {\n      document.cookie =\n        'userInfo=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;';\n      return { status: 'unauthenticated' };\n    }\n    if (resp.status === 403) {\n      return { status: 'forbidden' };\n    }\n  }\n\n  return resp.json();\n};\n\nconst post = async (url, path, params, body) => {\n  let apiUrl = `https://${url}${path}`;\n  apiUrl += `?${new URLSearchParams(params).toString()}`;\n  const options = {\n    method: 'POST',\n    credentials: 'include',\n    headers: new Headers({ 'content-type': 'application/json' }),\n    body,\n  };\n  return fetch(apiUrl, options).then((response) => {\n    if (!response.ok) {\n      return { status: 'error' };\n    }\n    return response.json();\n  });\n};\n\nconst deleteMethod = async (url, path, params) => {\n  let apiUrl = `https://${url}${path}`;\n  apiUrl += `?${new URLSearchParams(params).toString()}`;\n  const options = {\n    method: 'DELETE',\n    credentials: 'include',\n    headers: new Headers({ 'content-type': 'application/json' }),\n  };\n  return fetch(apiUrl, options).then((response) => {\n    if (!response.ok) {\n      return { status: 'error' };\n    }\n    return response.json();\n  });\n};\nexport default { get, post, deleteMethod };\n","import PropTypes from 'prop-types';\n\nimport Button from '@mui/material/Button';\n\nexport default function OptionsButton({ children, onClick, name }) {\n  return (\n    <Button\n      id={name}\n      variant=\"contained\"\n      component=\"label\"\n      onClick={onClick}\n      sx={{\n        color: 'muted.main',\n        borderRadius: 15,\n        backgroundColor: 'button.main',\n        padding: '6px 8px',\n        '&:hover': {\n          color: 'muted.main',\n          backgroundColor: 'button.main',\n        },\n      }}\n    >\n      {children}\n    </Button>\n  );\n}\n\nOptionsButton.defaultProps = {\n  onClick: () => {},\n};\n\nOptionsButton.propTypes = {\n  children: PropTypes.node.isRequired,\n  onClick: PropTypes.func,\n  name: PropTypes.string.isRequired,\n  //  updateOp: PropTypes.string.isRequired,\n};\n","import PropTypes from 'prop-types';\nimport AddPhotoIcon from '@mui/icons-material/AddPhotoAlternate';\nimport OptionsButton from 'components/OptionsButton';\nimport Typography from '@mui/material/Typography';\n\nexport default function AddPhotos({ handleChange }) {\n  return (\n    <OptionsButton name=\"add\">\n      <input\n        type=\"file\"\n        hidden\n        multiple\n        accept=\"image/*\"\n        onChange={handleChange}\n      />\n      <AddPhotoIcon sx={{ fontSize: '2rem' }} />\n      <Typography sx={{ fontWeight: 'bold' }}>Add Images</Typography>\n    </OptionsButton>\n  );\n}\n\nAddPhotos.propTypes = {\n  handleChange: PropTypes.func.isRequired,\n};\n","import Button from '@mui/material/Button';\n// import Typography from '@mui/material/Typography';\nimport PropTypes from 'prop-types';\nimport { alpha } from '@mui/material/styles';\n\nexport default function LoginButton({ authURL, next, handlePreLogin }) {\n  const handleLogin = async () => {\n    await handlePreLogin();\n    console.log('pre logn handdled', next, authURL);\n    const url =\n      next !== ''\n        ? `https://${authURL}/oauth2/authorize?next=${next}`\n        : `https://${authURL}/oauth2/authorize`;\n    window.location.replace(url);\n  };\n\n  return (\n    <Button\n      type=\"submit\"\n      variant=\"outlined\"\n      onClick={handleLogin}\n      sx={{\n        borderRadius: '5px',\n        borderColor: 'white',\n        fontWeight: 'bold',\n        color: 'white',\n        '&:hover': {\n          color: 'white',\n          borderColor: 'white',\n          backgroundColor: alpha('#fff', 0.1),\n        },\n      }}\n    >\n      Login\n    </Button>\n  );\n}\n\nLoginButton.defaultProps = {\n  handlePreLogin: () => {},\n};\n\nLoginButton.propTypes = {\n  authURL: PropTypes.string.isRequired,\n  next: PropTypes.string.isRequired,\n  handlePreLogin: PropTypes.func,\n};\n","import db from 'db';\n\nasync function getData(tableName) {\n  const rows = await db.collageDB[tableName].toArray();\n  console.log('collage data getData', tableName, rows);\n  if (rows.length) return rows;\n  return [];\n}\n\nfunction clearData(tableName) {\n  return db.collageDB[tableName].clear();\n}\n\nasync function getCollageDetails() {\n  const rows = await getData('details');\n  console.log('in get collage details', rows);\n  if (rows.length) return rows[0];\n  return {};\n}\n\nasync function getCollageData() {\n  const details = await getCollageDetails();\n  // const images = await getData('images');\n  console.time('collage data get images');\n  const imagePromises =\n    'images' in details\n      ? await Promise.allSettled(\n          details.images.map((img) => db.collageDB.images.get(img.title))\n        )\n      : [];\n  console.timeEnd('collage data get images');\n  console.log('get collage data', details, [], imagePromises);\n  const images = imagePromises.map((ip) => ip.value);\n  return { details, images };\n}\n\nfunction clearCollageData() {\n  clearData('details');\n  clearData('images');\n}\n\nasync function save(data, tableName) {\n  console.log('save collage data', data, tableName);\n  const results = await Promise.allSettled(\n    data.map((dt) => db.collageDB[tableName].put(dt))\n  );\n  return results;\n}\n\nexport default { getCollageData, clearCollageData, save };\n","function textCanvasDraw(\n  ctx,\n  textArray,\n  position,\n  scaleFactor,\n  canvasWidth,\n  textHeight\n) {\n  ctx.font = `${scaleFactor * 20}px Arial`;\n  ctx.textAlign = 'center';\n  ctx.textBaseline = 'top';\n  ctx.fillStyle = '#1c1c1cb3';\n  ctx.fillRect(0, position, canvasWidth, position + textHeight);\n  ctx.fillStyle = 'white';\n\n  console.log('text array', textArray, textHeight);\n  // eslint-disable-next-line no-restricted-syntax\n  for (const chunk of textArray) {\n    const [textPart, , y] = chunk;\n    ctx.fillText(textPart, canvasWidth / 2, y + position + 2.5 * scaleFactor);\n  }\n}\n\nfunction getClosest(arr, index1, index2, target) {\n  if (target - arr[index1] >= arr[index2] - target) return index2;\n  return index1;\n}\n\nfunction findClosest(arr, target) {\n  const n = arr.length;\n\n  if (target <= arr[0]) return 0;\n  if (target >= arr[n - 1]) return n - 1;\n\n  let start = 0;\n  let end = n;\n  let mid = 0;\n  while (start < end) {\n    mid = (start + end) / 2;\n\n    if (arr[mid] === target) return mid;\n\n    if (target < arr[mid]) {\n      if (mid > 0 && target > arr[mid - 1])\n        return getClosest(arr, mid - 1, mid, target);\n      end = mid;\n    } else {\n      if (mid < n - 1 && target < arr[mid + 1])\n        return getClosest(arr, mid, mid + 1, target);\n      start = mid + 1;\n    }\n  }\n\n  return mid;\n}\n\nfunction getCut() {\n  const cutArr = ['v', 'h'];\n  return cutArr[Math.round(Math.random())];\n}\n\nfunction findImgPair(arr, target) {\n  let start = 0;\n  let end = arr.length - 1;\n  let i = start;\n  let j = end;\n  let minMatchingCost = Math.abs(arr[start] + arr[end] - target);\n  while (start <= end) {\n    if (arr[start] + arr[end] > target) {\n      if (Math.abs(arr[start] + arr[end] - target) < minMatchingCost) {\n        // update fetched pair and matching cost\n        minMatchingCost = Math.abs(arr[start] + arr[end] - target);\n        i = start;\n        j = end;\n      }\n      end -= 1;\n    } else if (arr[start] + arr[end] <= target) {\n      if (Math.abs(arr[start] + arr[end] - target) < minMatchingCost) {\n        minMatchingCost = Math.abs(arr[start] + arr[end] - target);\n        i = start;\n        j = end;\n      }\n      start += 1;\n    } else {\n      // best pair (m === 0) found\n      i = start;\n      j = end;\n      break;\n    }\n  }\n  const randomNumber = Math.round(Math.random());\n  if (randomNumber) return [i, j];\n  return [j, i];\n}\n\nfunction getAspectRatio(cut, ar1, ar2) {\n  if (cut === 'v') return ar1 + ar2;\n  return (ar1 * ar2) / (ar1 + ar2);\n}\n\nfunction downscaleImage(image, newWidth, newHeight, fileType) {\n  const canvas = document.createElement('canvas');\n  canvas.width = newWidth;\n  canvas.height = newHeight;\n  const ctx = canvas.getContext('2d');\n  ctx.drawImage(image, 0, 0, newWidth, newHeight);\n  return canvas.toDataURL(fileType);\n}\n\n// function convertImage(image, newWidth, newHeight) {\n//   const canvas = document.createElement('canvas');\n//   canvas.width = newWidth;\n//   canvas.height = newHeight;\n//   const ctx = canvas.getContext('2d');\n//   ctx.drawImage(image, 0, 0, newWidth, newHeight);\n//   return canvas.toDataURL('image/webp');\n// }\n\nfunction optimizeImage(image, newWidth, newHeight) {\n  console.time('getImages optimize');\n  const canvas = document.createElement('canvas');\n  canvas.width = newWidth;\n  canvas.height = newHeight;\n  const ctx = canvas.getContext('2d');\n  ctx.drawImage(image, 0, 0, newWidth, newHeight);\n  const dataURL = canvas.toDataURL('image/webp', 0.3);\n  console.timeEnd('getImages optimize');\n  return dataURL;\n}\n\nfunction resizeImages(originalImages, maxWidth, handleImages, addImagesToDB) {\n  const tempImages = [];\n  originalImages.forEach((origImage) => {\n    const image = new Image();\n    image.onload = () => {\n      const { title, aspectRatio, type } = origImage;\n      const dataurl = downscaleImage(\n        image,\n        maxWidth,\n        maxWidth / aspectRatio,\n        origImage.type\n      );\n      const tempImage = {\n        title,\n        src: dataurl,\n        naturalHeight: maxWidth / aspectRatio,\n        naturalWidth: maxWidth,\n        aspectRatio,\n        type,\n      };\n      tempImages.push(tempImage);\n      handleImages((imgs) => {\n        const ind = imgs.findIndex((elem) => elem.title === origImage.title);\n        return [...imgs.slice(0, ind), tempImage, ...imgs.slice(ind + 1)];\n      });\n      addImagesToDB(tempImage);\n    };\n    image.src = origImage.src;\n  });\n}\n\nfunction convertBase64(file) {\n  console.log('convert base64', file);\n  return new Promise((resolve, reject) => {\n    const fileReader = new FileReader();\n    fileReader.readAsDataURL(file);\n    fileReader.onload = () => {\n      resolve(fileReader.result);\n    };\n    fileReader.onerror = (error) => {\n      reject(error);\n    };\n  });\n}\n\nfunction convertBase64String(file) {\n  return new Promise((resolve, reject) => {\n    const fileReader = new FileReader();\n    fileReader.readAsD(new Blob(file));\n    fileReader.onload = () => {\n      resolve(fileReader.result);\n    };\n    fileReader.onerror = (error) => {\n      reject(error);\n    };\n  });\n}\nasync function handleImageLoad(\n  event,\n  handleImageCount,\n  handleNewImageCount,\n  handleImageData\n) {\n  if (event.target.files) {\n    handleImageCount((cnt) => cnt + event.target.files.length);\n    handleNewImageCount(event.target.files.length);\n    const files = Array.from(event.target.files);\n    files.map(async (file) => {\n      const image = new Image();\n      image.onload = (e) => {\n        const { naturalWidth, naturalHeight, src } = e.target;\n        const title = `${Date.now()}-${file.name}`;\n        console.log('handle image load', title);\n        const aspectRatio = naturalWidth / naturalHeight;\n        console.time('handle image load optimize', title);\n        const optimizedSRC = optimizeImage(image, 1500, 1500 / aspectRatio);\n        console.timeEnd('handle image load optimize', title);\n        console.log('image size', title, file.size, optimizedSRC.length);\n        const imageDetail = {\n          title,\n          src: optimizedSRC,\n          originalSRC: src,\n          originalHeight: naturalHeight,\n          originalWidth: naturalWidth,\n          naturalHeight: 1500 / aspectRatio,\n          naturalWidth: 1500,\n          aspectRatio,\n          type: file.type,\n          file,\n        };\n        handleImageData(imageDetail);\n      };\n      image.src = await convertBase64(file);\n    });\n  }\n}\n\nfunction getCollageDimension(maxW, maxH, a) {\n  const origAR = maxW / maxH;\n  if (origAR < a) return [maxW, maxW / a];\n  if (origAR > a) return [maxH * a, maxH];\n  return [maxW, maxH];\n}\n\nfunction wrapText(text, x, y, maxWidth, fontSize, lineHeight) {\n  // First, start by splitting all of our text into words,\n  // but splitting it into an array split by spaces\n  if (text.length === 0) return [];\n  const paddingX = 1; // 8px on both sided\n  const textCanvas = document.createElement('canvas');\n  textCanvas.width = maxWidth - 2 * paddingX * 8;\n  textCanvas.height = 1000;\n  const ctx = textCanvas.getContext('2d');\n  ctx.font = `${fontSize}px Arial`;\n  ctx.textAlign = 'center';\n  const tempX = x;\n  let tempY = y;\n  const words = text.split(' ');\n  let line = ''; // This will store the text of the current line\n  let testLine = ''; // This will store the text when we add a word, to test if it's too long\n  const lineArray = []; // This is an array of lines, which the function will return\n\n  // Lets iterate over each word\n  for (let n = 0; n < words.length; n += 1) {\n    // Create a test line, and measure it..\n    testLine += `${words[n]} `;\n    const metrics = ctx.measureText(testLine);\n    const testWidth = metrics.width;\n    console.log(\n      'wrap text ',\n      line,\n      testLine,\n      testWidth,\n      textCanvas.width,\n      ctx.letterSpacing\n    );\n    // If the width of this test line is more than the max width\n    if (testWidth > textCanvas.width && n > 0) {\n      // Then the line is finished, push the current line into \"lineArray\"\n      lineArray.push([line, tempX, tempY]);\n      // Increase the line height, so a new line is started\n      tempY += lineHeight;\n      // Update line and test line to use this word as the first word on the next line\n      line = `${words[n]} `;\n      testLine = `${words[n]} `;\n    } else {\n      // If the test line is still less than the max width, then add the word to the current line\n      line += `${words[n]} `;\n    }\n    // If we never reach the full max width, then there is only one line..\n    // so push it into the lineArray so we return something\n    if (n === words.length - 1) {\n      lineArray.push([line, tempX, tempY]);\n    }\n  }\n  // Return the line array\n  return lineArray;\n}\n\nfunction getTextHeight(\n  text,\n  x,\n  y,\n  maxWidth,\n  fontSize,\n  lineHeight,\n  scaleFactor\n) {\n  const lineArray = wrapText(\n    text,\n    x,\n    y,\n    maxWidth,\n    fontSize * scaleFactor,\n    lineHeight * scaleFactor\n  );\n  return lineArray.length * lineHeight * scaleFactor;\n}\n\nfunction getImageDimensions(\n  paperWidth,\n  paperHeight,\n  text,\n  x,\n  y,\n  fontSize,\n  lineHeight,\n  scaleFactor,\n  aspectRatio\n) {\n  const textHeight = getTextHeight(\n    text,\n    x,\n    y,\n    paperWidth,\n    fontSize,\n    lineHeight,\n    scaleFactor\n  );\n  return getCollageDimension(paperWidth, paperHeight - textHeight, aspectRatio);\n}\n\nconst convertToRGBA = (value) =>\n  `rgba(${value.r}, ${value.g}, ${value.b}, ${value.a})`;\n\nfunction optimizeDimensions(maxPrintWidth, maxPrintHeight, problematicNodes) {\n  const ar = maxPrintWidth / maxPrintHeight;\n  const optimumTreeSizes = problematicNodes.map((pn) => {\n    const newRootWidth =\n      (maxPrintWidth * pn.value.naturalWidth) / pn.value.width;\n    const newRootHeight = newRootWidth / ar;\n    // node with highest score needs smalles tree. smallest tree will satisfy all constraints\n    const score = maxPrintWidth - newRootWidth + maxPrintHeight - newRootHeight;\n    return [score, [newRootWidth, newRootHeight]];\n  });\n  optimumTreeSizes.sort((a, b) => b[0] - a[0]);\n  console.log(\n    'optimun tree sizes',\n    optimumTreeSizes,\n    problematicNodes,\n    maxPrintWidth,\n    maxPrintHeight\n  );\n  return optimumTreeSizes[0][1];\n}\n\nexport default {\n  getCut,\n  findClosest,\n  findImgPair,\n  getAspectRatio,\n  handleImageLoad,\n  resizeImages,\n  wrapText,\n  convertToRGBA,\n  getCollageDimension,\n  downscaleImage,\n  convertBase64,\n  convertBase64String,\n  textCanvasDraw,\n  getTextHeight,\n  getImageDimensions,\n  optimizeDimensions,\n  optimizeImage,\n};\n","import * as React from 'react';\nimport PropTypes from 'prop-types';\nimport Grid from '@mui/material/Grid';\nimport Box from '@mui/material/Box';\nimport Avatar from '@mui/material/Avatar';\nimport Menu from '@mui/material/Menu';\nimport MenuItem from '@mui/material/MenuItem';\nimport ListItemIcon from '@mui/material/ListItemIcon';\nimport Divider from '@mui/material/Divider';\nimport IconButton from '@mui/material/IconButton';\nimport Tooltip from '@mui/material/Tooltip';\nimport Logout from '@mui/icons-material/Logout';\nimport Typography from '@mui/material/Typography';\nimport ListItemText from '@mui/material/ListItemText';\nimport Link from '@mui/material/Link';\nimport { alpha } from '@mui/material/styles';\nimport Authenticate from '../hocs/require-authentication';\nimport commonUtils from '../utils';\n\nexport function ProfileAvatar({ name, picture, email }) {\n  const initials = Array.from(email)[0].toUpperCase();\n  return (\n    <Avatar\n      sx={{\n        borderRadius: '50%',\n        // border: 3,\n        borderColor: alpha('#fff', 0.8),\n        referrerPolicy: 'no-referrer',\n      }}\n      alt={name}\n      src={picture}\n    >\n      {initials}\n    </Avatar>\n  );\n}\n\nfunction ProfileIcon({ name, email, open, handleClick, avatar }) {\n  return (\n    <Box\n      sx={{\n        display: 'flex',\n        alignItems: 'center',\n        textAlign: 'center',\n        marginRight: '10px',\n      }}\n    >\n      <Tooltip\n        title={\n          <>\n            <Typography>{name}</Typography>\n            <Typography>{email}</Typography>\n          </>\n        }\n      >\n        <IconButton\n          onClick={handleClick}\n          size=\"small\"\n          aria-controls={open ? 'account-menu' : undefined}\n          aria-haspopup=\"true\"\n          aria-expanded={open ? 'true' : undefined}\n          sx={{ ml: 2 }}\n        >\n          {avatar}\n        </IconButton>\n      </Tooltip>\n    </Box>\n  );\n}\n\nfunction ProfileMenu({ name, open, handleClose, anchorEl, avatar, email }) {\n  const profileIdentifier = name || email;\n  const authURL = process.env.REACT_APP_AUTH_URL;\n  return (\n    <Menu\n      anchorEl={anchorEl}\n      id=\"account-menu\"\n      open={open}\n      onClose={handleClose}\n      onClick={handleClose}\n      PaperProps={{\n        elevation: 0,\n        sx: {\n          filter: 'drop-shadow(0px 2px 8px rgba(0,0,0,0.32))',\n          mt: 1.5,\n          '& .MuiAvatar-root': {\n            width: 32,\n            height: 32,\n            ml: -0.5,\n            mr: 1,\n          },\n          '&:before': {\n            content: '\"\"',\n            display: 'block',\n            position: 'absolute',\n            top: 0,\n            right: 14,\n            width: 10,\n            height: 10,\n            bgcolor: 'background.paper',\n            transform: 'translateY(-50%) rotate(45deg)',\n            zIndex: 0,\n          },\n        },\n      }}\n      transformOrigin={{ horizontal: 'right', vertical: 'top' }}\n      anchorOrigin={{ horizontal: 'right', vertical: 'bottom' }}\n    >\n      <MenuItem>\n        {avatar}\n        <ListItemText>{profileIdentifier}</ListItemText>\n      </MenuItem>\n      <Divider />\n      <Link\n        href={`https://${authURL}/oauth2/logout`}\n        underline=\"none\"\n        sx={{ alignItems: 'center', display: 'flex' }}\n      >\n        <MenuItem>\n          <ListItemIcon>\n            <Logout fontSize=\"small\" />\n          </ListItemIcon>\n          <Typography sx={{ color: 'muted.main' }}>Logout</Typography>\n        </MenuItem>\n      </Link>\n    </Menu>\n  );\n}\n\nfunction Profile() {\n  const [anchorEl, setAnchorEl] = React.useState(null);\n  const open = Boolean(anchorEl);\n  const userInfo = commonUtils.getUserInfo();\n  const handleClose = () => setAnchorEl(null);\n  const handleClick = (event) => setAnchorEl(event.currentTarget);\n  const userAvatar = (\n    <ProfileAvatar\n      name={userInfo.name}\n      picture={userInfo.picture}\n      email={userInfo.email}\n    />\n  );\n\n  return (\n    <>\n      <ProfileIcon\n        avatar={userAvatar}\n        open={open}\n        email={userInfo.email}\n        handleClick={handleClick}\n        name={userInfo.name}\n      />\n      <ProfileMenu\n        anchorEl={anchorEl}\n        avatar={userAvatar}\n        handleClose={handleClose}\n        name={userInfo.name}\n        email={userInfo.email}\n        open={open}\n      />\n    </>\n  );\n}\n\nexport default function ProfileLink() {\n  //  const ProfileButton = Authenticate(Profile);\n  return (\n    <Grid item sx={{ paddingTop: '0.3rem' }}>\n      <Authenticate>\n        <Profile />\n      </Authenticate>\n    </Grid>\n  );\n}\n\nProfileIcon.propTypes = {\n  name: PropTypes.string.isRequired,\n  email: PropTypes.string.isRequired,\n  handleClick: PropTypes.func.isRequired,\n  open: PropTypes.bool.isRequired,\n  avatar: PropTypes.node.isRequired,\n};\n\nProfileMenu.defaultProps = {\n  anchorEl: '',\n};\n\nProfileMenu.propTypes = {\n  name: PropTypes.string.isRequired,\n  anchorEl: PropTypes.node,\n  handleClose: PropTypes.func.isRequired,\n  open: PropTypes.bool.isRequired,\n  avatar: PropTypes.node.isRequired,\n  email: PropTypes.string.isRequired,\n};\n\nProfileAvatar.propTypes = {\n  name: PropTypes.string.isRequired,\n  picture: PropTypes.string.isRequired,\n  email: PropTypes.string.isRequired,\n};\n","import Dexie from 'dexie';\n\nconst collageDB = new Dexie('collage');\n\ncollageDB.version(1).stores({\n  images:\n    'title, src,originalSRC,originalHeight, originalWidth, naturalWidth,naturalHeight,aspectRatio,type,targetAspectRatio,file', // Primary key and indexed props\n  details: '++id, details',\n});\n\nexport default { collageDB };\n","import PropTypes from 'prop-types';\nimport { useState } from 'react';\nimport { Navigate, useLocation } from 'react-router-dom';\nimport Dialog from '@mui/material/Dialog';\nimport DialogTitle from '@mui/material/DialogTitle';\nimport DialogActions from '@mui/material/DialogActions';\nimport DialogContent from '@mui/material/DialogContent';\nimport Button from '@mui/material/Button';\nimport commonUtils from '../utils';\n\nfunction AuthDialog({ open, onLogin }) {\n  console.log('auth dialog', open);\n  return (\n    <Dialog open={open} fullWidth>\n      <DialogTitle sx={{ textAlign: 'center' }}>Login</DialogTitle>\n      <DialogContent\n        dividers\n        sx={{\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'space-between',\n        }}\n      >\n        Please login to your account to complete this action\n      </DialogContent>\n      <DialogActions>\n        <Button\n          variant=\"outlined\"\n          onClick={onLogin}\n          sx={{ color: 'primary', fontWeight: 'bold' }}\n        >\n          Login\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\nAuthDialog.propTypes = {\n  open: PropTypes.bool.isRequired,\n  onLogin: PropTypes.func.isRequired,\n};\n\nfunction Authenticate({ children, nextPath }) {\n  const [open, setOpen] = useState(true);\n  const authURL = process.env.REACT_APP_AUTH_URL;\n  const location = useLocation();\n  const cookieValue = commonUtils.getUserInfo();\n  const isLoggedIn = cookieValue !== '';\n\n  console.log('auth', open);\n  if (isLoggedIn === true) {\n    return children;\n  }\n\n  const redirectToLogin = () => {\n    const path = `https://${authURL}/oauth2/authorize?next=${location.pathname}${location.search}`;\n    window.location.replace(path);\n  };\n\n  if (nextPath) {\n    return <Navigate to={nextPath} replace />;\n  }\n\n  return (\n    <AuthDialog\n      open={open}\n      onLogin={redirectToLogin}\n      onClose={() => setOpen(false)}\n    />\n  );\n}\n\nAuthenticate.defaultProps = {\n  nextPath: '',\n};\n\nAuthenticate.propTypes = {\n  children: PropTypes.node.isRequired,\n  nextPath: PropTypes.string,\n};\n\nexport default Authenticate;\n","import Typography from '@mui/material/Typography';\nimport { alpha } from '@mui/material/styles';\n\nexport default function TextDisplay(textArray, position) {\n  return (\n    <>\n      {\n        // eslint-disable-next-line react/destructuring-assignment\n        textArray.map((chunk) => (\n          <Typography\n            key={chunk[2]}\n            sx={{\n              width: '100%',\n              position: 'absolute',\n              top: position + chunk[2],\n              bgcolor: alpha('#1c1c1c', 0.7),\n              paddingX: 1,\n              color: 'button.main',\n              textAlign: 'center',\n              fontFamily: 'Arial',\n              fontSize: '20px',\n              lineHeight: '25px',\n              letterSpacing: 'normal',\n            }}\n          >\n            {chunk[0]}\n          </Typography>\n        ))\n      }\n    </>\n  );\n}\n","import Box from '@mui/material/Box';\nimport IconButton from '@mui/material/IconButton';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport Tooltip from '@mui/material/Tooltip';\nimport { alpha } from '@mui/material/styles';\nimport helpers from 'components/collage/helpers';\n\nexport default class Node {\n  constructor(value) {\n    this.value = value;\n    this.left = null;\n    this.right = null;\n  }\n\n  fromObject(obj) {\n    if (obj != null) {\n      this.value = obj.value;\n      if (obj.left != null) {\n        this.left = new Node(obj.left.value);\n        this.left.fromObject(obj.left);\n      }\n      if (obj.right != null) {\n        this.right = new Node(obj.right.value);\n        this.right.fromObject(obj.right);\n      }\n      return this;\n    }\n    return null;\n  }\n\n  getScore() {\n    if ('cut' in this.value) {\n      return [...this.left.getScore(), ...this.right.getScore()];\n    }\n\n    return [this.value.width + this.value.height];\n  }\n\n  display() {\n    let output = [];\n    const { cut, title, aspectRatio } = this.value;\n    if (this === null) return null;\n    if ('cut' in this.value) output.push([cut, aspectRatio]);\n    if ('title' in this.value) output.push([title, aspectRatio]);\n    if (this.left !== null) output = output.concat(this.left.display());\n    if (this.right !== null) output = output.concat(this.right.display());\n    return output;\n  }\n\n  copy() {\n    if (this === null) return null;\n    const copyNode = new Node({ ...this.value });\n    if (this.left != null) copyNode.left = this.left.copy();\n    if (this.right != null) copyNode.right = this.right.copy();\n    return copyNode;\n  }\n\n  replaceImages(newImages) {\n    if (this !== null) {\n      if ('title' in this.value) {\n        const findIndex = newImages.findIndex(\n          (elem) => elem.title === this.value.title\n        );\n        const origImage = newImages[findIndex];\n        this.value.src = origImage.originalSRC;\n        this.value.naturalWidth = origImage.originalWidth;\n        this.value.naturalHeight = origImage.originalHeight;\n      }\n      if (this.left != null) this.left.replaceImages(newImages);\n      if (this.right != null) this.right.replaceImages(newImages);\n    }\n  }\n\n  removeImageData() {\n    if (this !== null) {\n      if ('title' in this.value) {\n        const { src, originalSRC, ...rest } = this.value;\n        this.value = rest;\n      }\n      if (this.left != null) this.left.removeImageData();\n      if (this.right != null) this.right.removeImageData();\n    }\n  }\n\n  addImageData(imageData) {\n    if (this !== null) {\n      if ('title' in this.value) {\n        const image = imageData.find((elem) => elem.title === this.value.title);\n        this.value.src = image.src;\n      }\n      if (this.left != null) this.left.addImageData(imageData);\n      if (this.right != null) this.right.addImageData(imageData);\n    }\n  }\n\n  RenderImage(\n    padding,\n    borderRadius,\n    delImg,\n    handleRemoveImage,\n    yOffset,\n    xOffset,\n    handleCollageImageLoad\n  ) {\n    const { width, title, src, x, y } = this.value;\n\n    const newX = x + xOffset;\n    const newY = y + yOffset;\n    console.log('rendering image', title);\n    return (\n      <>\n        <Box\n          key={title}\n          component=\"img\"\n          title={title}\n          alt={title}\n          width={width}\n          onLoad={() => {\n            handleCollageImageLoad();\n            console.log('loaded', title);\n          }}\n          src={src}\n          sx={{\n            position: 'absolute',\n            padding: `${padding}px`,\n            borderRadius: `${borderRadius}px`,\n            left: this.value.x + xOffset,\n            top: this.value.y + yOffset,\n          }}\n        />\n        {delImg === true ? (\n          <Tooltip title=\"Remove Image\">\n            <IconButton\n              size=\"medium\"\n              sx={{\n                color: alpha('#000', 0.7),\n                bgcolor: alpha('#fff', 0.5),\n                position: 'absolute',\n                top: newY + padding,\n                left: newX + padding,\n                padding: `${padding}px`,\n                borderRadius: '0 0 5px 0',\n              }}\n              onClick={() => handleRemoveImage(title)}\n            >\n              <DeleteIcon size=\"medium\" />\n            </IconButton>\n          </Tooltip>\n        ) : null}\n      </>\n    );\n  }\n\n  DOMDisplay(\n    padding,\n    borderRadius,\n    delImg,\n    handleRemoveImage,\n    yOffset,\n    xOffset,\n    handleCollageImageLoad\n  ) {\n    console.log(\n      'node dom display',\n      padding,\n      borderRadius,\n      delImg,\n      handleRemoveImage,\n      yOffset,\n      xOffset,\n      this.value.title\n    );\n    const { cut } = this.value;\n    if (this === null) return null;\n    if (cut) {\n      console.log(this.right, this.left);\n      return (\n        <>\n          {this.left != null\n            ? this.left.DOMDisplay(\n                padding,\n                borderRadius,\n                delImg,\n                handleRemoveImage,\n                yOffset,\n                xOffset,\n                handleCollageImageLoad\n              )\n            : null}\n          {this.right != null\n            ? this.right.DOMDisplay(\n                padding,\n                borderRadius,\n                delImg,\n                handleRemoveImage,\n                yOffset,\n                xOffset,\n                handleCollageImageLoad\n              )\n            : null}\n        </>\n      );\n    }\n    if ('title' in this.value)\n      return this.RenderImage(\n        padding,\n        borderRadius,\n        delImg,\n        handleRemoveImage,\n        yOffset,\n        xOffset,\n        handleCollageImageLoad\n      );\n    return null;\n  }\n\n  ResizeImage(image) {\n    const tempCanvas = document.createElement('canvas');\n    tempCanvas.width = this.value.naturalWidth;\n    tempCanvas.height = this.value.naturalHeight;\n    const tempCtx = tempCanvas.getContext('2d');\n    let width = this.value.naturalWidth;\n    let height = this.value.naturalHeight;\n    let newWidth;\n    let newHeight;\n    const scaleFactor = Math.floor(\n      Math.log2(this.value.naturalWidth / this.value.width)\n    );\n    if (scaleFactor === 0) {\n      tempCtx.drawImage(\n        image,\n        0,\n        0,\n        width,\n        height,\n        0,\n        0,\n        this.value.width,\n        this.value.height\n      );\n    } else {\n      for (let i = 0; i < scaleFactor; i += 1) {\n        newWidth = width >> 1; // eslint-disable-line no-bitwise\n        newHeight = newWidth / this.value.aspectRatio; // eslint-disable-line no-bitwise\n        if (i === 0) {\n          tempCtx.drawImage(\n            image,\n            0,\n            0,\n            width,\n            height,\n            0,\n            0,\n            newWidth,\n            newHeight\n          );\n        } else {\n          tempCtx.drawImage(\n            tempCanvas,\n            0,\n            0,\n            width,\n            height,\n            0,\n            0,\n            newWidth,\n            newHeight\n          );\n        }\n        width = newWidth;\n        height = newHeight;\n      }\n\n      tempCtx.drawImage(\n        tempCanvas,\n        0,\n        0,\n        width,\n        height,\n        0,\n        0,\n        this.value.width,\n        this.value.height\n      );\n    }\n    return tempCanvas;\n  }\n\n  ImageStyling(ctx, tempCanvas, padding, radius, yOffset, xOffset) {\n    const x = this.value.x + padding + xOffset;\n    const y = this.value.y + padding + yOffset;\n    const clipwidth = this.value.width - 2 * padding;\n    const clipheight = clipwidth / this.value.aspectRatio;\n\n    ctx.save();\n    ctx.beginPath();\n    ctx.moveTo(x + radius, y);\n    ctx.lineTo(x + clipwidth - radius, y);\n    ctx.quadraticCurveTo(x + clipwidth, y, x + clipwidth, y + radius);\n    ctx.lineTo(x + clipwidth, y + clipheight - radius);\n    ctx.quadraticCurveTo(\n      x + clipwidth,\n      y + clipheight,\n      x + clipwidth - radius,\n      y + clipheight\n    );\n    ctx.lineTo(x + radius, y + clipheight);\n    ctx.quadraticCurveTo(x, y + clipheight, x, y + clipheight - radius);\n    ctx.lineTo(x, y + radius);\n    ctx.quadraticCurveTo(x, y, x + radius, y);\n    ctx.closePath();\n    ctx.clip();\n\n    ctx.drawImage(\n      tempCanvas,\n      0,\n      0,\n      this.value.width,\n      this.value.height,\n      x,\n      y,\n      clipwidth,\n      clipheight\n    );\n    ctx.restore();\n  }\n\n  CanvasDisplay(canvasElement, padding, radius, yOffset, xOffset) {\n    if ('cut' in this.value) {\n      this.left.CanvasDisplay(canvasElement, padding, radius, yOffset, xOffset);\n      this.right.CanvasDisplay(\n        canvasElement,\n        padding,\n        radius,\n        yOffset,\n        xOffset\n      );\n    }\n\n    if ('title' in this.value) {\n      const ctx = canvasElement.getContext('2d');\n      const newImg = new Image();\n      newImg.onload = () => {\n        const tempCanvas = this.ResizeImage(newImg);\n        const tempCtx = tempCanvas.getContext('2d');\n        this.ImageStyling(ctx, tempCanvas, padding, radius, yOffset, xOffset);\n        tempCtx.clearRect(0, 0, tempCanvas.width, tempCanvas.height);\n      };\n      newImg.src = this.value.src;\n    }\n  }\n\n  generate(images, tar, imageCount) {\n    const targetAspectRatioArr = images.map(\n      (image) => image.naturalWidth / image.naturalHeight\n    );\n    if (imageCount < 1) return [];\n    if (imageCount === 1) {\n      const closestIndex = helpers.findClosest(targetAspectRatioArr, tar);\n      this.value = images[closestIndex];\n      this.left = null;\n      this.right = null;\n      return [\n        ...images.slice(0, closestIndex),\n        ...images.slice(closestIndex + 1),\n      ];\n    }\n\n    const cut = helpers.getCut();\n    this.value = { cut, targetAspectRatio: tar };\n    if (imageCount === 2) {\n      const [leftIndex, rightIndex] = helpers.findImgPair(\n        targetAspectRatioArr,\n        tar\n      );\n      this.value.aspectRatio = helpers.getAspectRatio(\n        this.value.cut,\n        images[leftIndex].aspectRatio,\n        images[rightIndex].aspectRatio\n      );\n      this.left = new Node(images[leftIndex]);\n      this.right = new Node(images[rightIndex]);\n      return images.filter(\n        (item, index) => ![leftIndex, rightIndex].includes(index)\n      );\n    }\n\n    let restImages;\n    let targetAspectRatio;\n    this.left = new Node({ cut: helpers.getCut() });\n    //  this.right = new Node({ cut: helpers.getCut() });\n    this.right = new Node({ cut: this.left.value.cut === 'v' ? 'h' : 'v' });\n\n    targetAspectRatio = tar / 2;\n    if (cut === 'v') {\n      targetAspectRatio = tar * 2;\n    }\n\n    const randomNumber = Math.round(Math.random());\n    const [first, second] = randomNumber\n      ? ['left', 'right']\n      : ['right', 'left'];\n    restImages = this[first].generate(\n      images,\n      targetAspectRatio,\n      imageCount - Math.floor(imageCount / 2)\n    );\n    restImages = this[second].generate(\n      restImages,\n      targetAspectRatio,\n      Math.floor(imageCount / 2)\n    );\n\n    this.value.aspectRatio = helpers.getAspectRatio(\n      this.value.cut,\n      this.left.value.aspectRatio,\n      this.right.value.aspectRatio\n    );\n\n    return restImages;\n  }\n\n  adjust(th) {\n    let adjustments = 0;\n    if (this === null) return adjustments;\n\n    if (this.left !== null && this.right !== null) {\n      if (this.value.aspectRatio > this.value.targetAspectRatio * th) {\n        this.value.cut = 'h';\n        adjustments += 1;\n      }\n      if (this.value.aspectRatio < this.value.targetAspectRatio / th) {\n        this.value.cut = 'v';\n        adjustments += 1;\n      }\n\n      if (this.value.cut === 'v') {\n        this.left.value.targetAspectRatio = this.value.targetAspectRatio / 2;\n        this.right.value.targetAspectRatio = this.value.targetAspectRatio / 2;\n      } else {\n        this.left.value.targetAspectRatio = this.value.targetAspectRatio * 2;\n        this.right.value.targetAspectRatio = this.value.targetAspectRatio * 2;\n      }\n      adjustments += this.left.adjust(th) + this.right.adjust(th);\n      this.value.aspectRatio = helpers.getAspectRatio(\n        this.value.cut,\n        this.left.value.aspectRatio,\n        this.right.value.aspectRatio\n      );\n    }\n\n    return adjustments;\n  }\n\n  addSize(parentWidth, parentHeight, parentX, parentY, parentCut, nodeType) {\n    if (parentCut === 'v') {\n      this.value.height = parentHeight;\n      this.value.width = this.value.height * this.value.aspectRatio;\n    } else {\n      this.value.width = parentWidth;\n      this.value.height = this.value.width / this.value.aspectRatio;\n    }\n\n    if (nodeType === 'left') {\n      this.value.x = parentX;\n      this.value.y = parentY;\n    } else if (parentCut === 'h') {\n      this.value.y = parentY + parentHeight - this.value.height;\n      this.value.x = parentX;\n    } else {\n      this.value.x = parentX + parentWidth - this.value.width;\n      this.value.y = parentY;\n    }\n\n    if (this.left !== null) {\n      this.left.addSize(\n        this.value.width,\n        this.value.height,\n        this.value.x,\n        this.value.y,\n        this.value.cut,\n        'left'\n      );\n    }\n    if (this.right !== null) {\n      this.right.addSize(\n        this.value.width,\n        this.value.height,\n        this.value.x,\n        this.value.y,\n        this.value.cut,\n        'right'\n      );\n    }\n  }\n\n  validateAddSize() {\n    if ('cut' in this.value) {\n      const [lV, lPN] = this.left.validateAddSize();\n      const [rV, rPN] = this.right.validateAddSize();\n      return [lV && rV, lPN.concat(rPN)];\n    }\n    if ('title' in this.value) {\n      const valid =\n        this.value.width <= this.value.naturalWidth &&\n        this.value.height <= this.value.naturalHeight;\n      return valid ? [valid, []] : [valid, [{ ...this }]];\n    }\n    return false;\n  }\n}\n","import Box from '@mui/material/Box';\nimport TextDisplay from 'components/collage/TextDisplay';\nimport Node from './node';\nimport helpers from './helpers';\n\nexport default class BinaryTree {\n  constructor(value) {\n    if (this.root === undefined) {\n      this.root = new Node(value);\n      return this;\n    }\n  }\n\n  addOptions(options) {\n    this.root.options = { ...options };\n  }\n\n  display() {\n    if (this.root !== null) {\n      return this.root.display();\n    }\n    return null;\n  }\n\n  replaceImages(newImages) {\n    if (this.root !== null) {\n      this.root.replaceImages(newImages);\n    }\n  }\n\n  fromObject(obj) {\n    if (obj.root != null) this.root.fromObject(obj.root);\n    return this;\n  }\n\n  removeImageData() {\n    const tempTree = this.copy();\n    if (this.root !== null) {\n      tempTree.root.removeImageData();\n    }\n    return tempTree;\n  }\n\n  addImageData(imageData) {\n    if (this.root !== null) {\n      this.root.addImageData(imageData);\n    }\n  }\n\n  DOMDisplay(\n    canvasWidth,\n    canvasHeight,\n    delImg,\n    handleRemoveImage,\n    handleCollageImageLoad\n  ) {\n    const { text, topText, padding, borderRadius, color } = this.root.options;\n    const { width, height } = this.root.value;\n    const lA = helpers.wrapText(text, 0, 0, canvasWidth, 20, 25);\n    const textHeight = text.length ? lA.length * 25 : 0;\n    let yOffset = (canvasHeight - textHeight - height) / 2;\n    const xOffset = (canvasWidth - width) / 2;\n    let position = canvasHeight - textHeight;\n    if (topText && text.length > 0) {\n      yOffset += textHeight;\n      position = 0;\n    }\n\n    console.log(\n      'tree dom display',\n      canvasWidth,\n      canvasHeight,\n      height,\n      this.root.options,\n      textHeight,\n      yOffset,\n      xOffset,\n      width,\n      this,\n      lA\n    );\n    if (this.root !== null) {\n      return (\n        <Box sx={{ backgroundColor: 'white' }}>\n          <Box\n            width={canvasWidth}\n            height={canvasHeight}\n            sx={{\n              position: 'relative',\n              backgroundColor: helpers.convertToRGBA(color),\n            }}\n          >\n            {this.root.DOMDisplay(\n              padding,\n              borderRadius,\n              delImg,\n              handleRemoveImage,\n              yOffset,\n              xOffset,\n              handleCollageImageLoad\n            )}\n            {text.length ? TextDisplay(lA, position) : null}\n          </Box>\n        </Box>\n      );\n    }\n    return null;\n  }\n\n  CanvasDisplay(canvasWidth, canvasHeight, canvasElement, scaleFactor) {\n    if (this.root !== null) {\n      const { text, topText, padding, borderRadius, color } = this.root.options;\n      const { width, height } = this.root.value;\n      const lA = helpers.wrapText(\n        text,\n        0,\n        0,\n        canvasWidth,\n        20 * scaleFactor,\n        25 * scaleFactor\n      );\n      const textHeight = text.length ? lA.length * 25 * scaleFactor : 0;\n      let yOffset = (canvasHeight - textHeight - height) / 2;\n      const xOffset = (canvasWidth - width) / 2;\n      let position = canvasHeight - textHeight;\n      if (topText && text.length > 0) {\n        yOffset += textHeight;\n        position = 0;\n      }\n      const ctx = canvasElement.getContext('2d');\n      ctx.fillStyle = helpers.convertToRGBA(color);\n      ctx.fillRect(0, 0, canvasElement.width, canvasElement.height);\n      this.root.CanvasDisplay(\n        canvasElement,\n        padding * scaleFactor,\n        borderRadius * scaleFactor,\n        yOffset,\n        xOffset\n      );\n      helpers.textCanvasDraw(\n        ctx,\n        lA,\n        position,\n        scaleFactor,\n        canvasWidth,\n        textHeight\n      );\n    }\n  }\n\n  generateScore() {\n    const score = this.root.getScore();\n    // console.log('from', ...score);\n    return Math.min(...score);\n  }\n\n  generateCollageTree(images, tar) {\n    this.root.generate(images, tar, images.length);\n  }\n\n  adjust(th) {\n    let trys = 0;\n    let bestAdjust = this.copy();\n    let bestAspectRatio = this.root.value.aspectRatio;\n    const tolerableDifference = this.root.value.targetAspectRatio * (1 - th);\n    let ajstCnt = 1000;\n    while (trys < 100 && ajstCnt > 0) {\n      ajstCnt = this.root.adjust(th);\n      trys += 1;\n      const diff =\n        this.root.value.aspectRatio - this.root.value.targetAspectRatio;\n      if (\n        Math.abs(diff) <\n        Math.abs(bestAspectRatio - this.root.value.targetAspectRatio)\n      ) {\n        bestAspectRatio = this.root.value.aspectRatio;\n        bestAdjust = this.copy();\n      }\n      if ((diff > 0 && diff < tolerableDifference) || diff === 0) break;\n    }\n\n    return [bestAspectRatio, bestAdjust];\n  }\n\n  copy() {\n    const copyTree = new BinaryTree({});\n    copyTree.root = this.root.copy();\n    copyTree.root.options = { ...this.root.options };\n    return copyTree;\n  }\n\n  addSize(canvasWidth, canvasHeight, aspectRatio) {\n    const [maxW, maxH] = helpers.getCollageDimension(\n      canvasWidth,\n      canvasHeight,\n      aspectRatio\n    );\n    this.root.value.width = maxW;\n    this.root.value.height = maxH;\n    console.log('add size', this.root.value.width, this.root.value.height);\n    this.root.value.x = 0;\n    this.root.value.y = 0;\n    const { width, height, x, y, cut } = this.root.value;\n    if (this.root.left !== null)\n      this.root.left.addSize(width, height, x, y, cut, 'left');\n    if (this.root.right !== null)\n      this.root.right.addSize(width, height, x, y, cut, 'right');\n  }\n\n  validateAddSize() {\n    return this.root.validateAddSize();\n  }\n}\n","import BinaryTree from './binaryTree';\nimport helpers from './helpers';\n\nfunction findBestAdjustTree(images, tolerance, imageWidth, imageHeight) {\n  const sortedImages = images.sort((a, b) =>\n    a.aspectRatio <= b.aspectRatio ? 1 : -1\n  );\n  const collageArray = [];\n  for (let i = 0; i < 100; i += 1) {\n    const imgTree = new BinaryTree({ cut: helpers.getCut() });\n    imgTree.generateCollageTree(sortedImages, imageWidth / imageHeight);\n\n    collageArray.push(imgTree.adjust(1 - tolerance));\n  }\n\n  collageArray.sort((a, b) => {\n    const aspR = imageWidth / imageHeight;\n    const diffA = Math.abs(a[0] - aspR);\n    const diffB = Math.abs(b[0] - aspR);\n    return diffA - diffB;\n  });\n\n  const bAR = collageArray.filter(\n    (elem) => elem[0].toFixed(1) === collageArray[0][0].toFixed(1)\n  );\n  console.log('from bar', bAR);\n  let maxScore = 0;\n  let maxElem = {};\n  bAR.forEach((element) => {\n    element[1].addSize(\n      1000 * (imageWidth / imageHeight),\n      1000,\n      imageWidth / imageHeight\n    );\n    const score = element[1].generateScore();\n    // console.log('from bar all matching', score);\n    if (score > maxScore) {\n      maxScore = score;\n      maxElem = element;\n    }\n  });\n  // console.log('from returning', maxElem, maxScore);\n  return maxElem;\n  // collageArray[0][1].addSize(\n  //   1000 * (imageWidth / imageHeight),\n  //   1000,\n  //   imageWidth / imageHeight\n  // );\n  // console.log(\n  //   'from best adjust tree',\n  //   collageArray[0][0],\n  //   collageArray[0][1].generateScore()\n  // );\n  // return collageArray[0];\n}\n\nexport default { findBestAdjustTree };\n","import { useEffect, useState } from 'react';\nimport useDimensions from 'hooks/collage/dimensions';\nimport useOptions from 'hooks/collage/options';\nimport useActions from 'hooks/collage/actions';\nimport useImages from 'hooks/collage/images';\nimport useTree from 'hooks/collage/tree';\n\nimport helpers from 'components/collage/helpers';\nimport collageapi from 'api/collage';\n\nexport default function useBase(initialValue) {\n  console.log('use base', initialValue);\n  const [details, setDetails] = useState(initialValue);\n  const [collageName, setCollageName] = useState('Untitled');\n  const constants = {\n    tolerance: 0.1,\n    resizeImageWidth: 1500,\n    aspectRatio: 0.7,\n    fontSize: 20,\n    lineHeight: 25,\n    paperSizes: {\n      A472: { width: 595, height: 842, text: '8 X 11 inches 72DPI' },\n      A4: { width: 2480, height: 3508, text: '8 X 11 inches' },\n      A3: { width: 3508, height: 4961, text: '11 X 16 inches' },\n      A4LandScape: { height: 2480, width: 3508, text: '11 X 8 inches' },\n      A3LandScape: { height: 3508, width: 4961, text: '16 X 11 inches' },\n      FBCoverDesktop: { height: 740, width: 2000, text: 'FB Cover Desktop' },\n      WhatsappStatus: { height: 1920, width: 1080, text: 'Whatsapp Status' },\n    },\n  };\n  const [uploadedImages, setUploadedImages] = useState(0);\n  const dimensions = useDimensions(constants);\n  const options = useOptions();\n  const actions = useActions();\n  const images = useImages(details, constants.resizeImageWidth);\n\n  const treeState = useTree(details, options.setOptions);\n  const [thumbnail, setThumbnail] = useState({});\n  const collageID =\n    'details' in initialValue && 'collage_id' in initialValue.details\n      ? initialValue.details.collage_id\n      : Date.now();\n\n  useEffect(() => {\n    setDetails(initialValue);\n    if (\n      'details' in initialValue &&\n      'name' in initialValue.details &&\n      collageName === 'Untitled'\n    ) {\n      console.log('setting collage name', initialValue.details.name);\n      setCollageName(initialValue.details.name);\n    }\n  }, [initialValue]);\n\n  const initialStatus = () => ({\n    details: {\n      text: 'Saving Details',\n      status: 'pending',\n    },\n    images: {\n      text: `Saving Images (${uploadedImages} / ${images.images.length})`,\n      status: 'pending',\n    },\n    finalizing: {\n      text: 'Finalizing Collage',\n      status: 'pending',\n    },\n  });\n  const [saveStatus, setSaveStatus] = useState(initialStatus);\n\n  const updateStatus = (key, status) => {\n    const value = { ...saveStatus[key], status };\n    setSaveStatus((st) => ({ ...st, [key]: value }));\n  };\n\n  const updateImagesStatus = () => {\n    const imagesText = `Saving Images (${uploadedImages} / ${images.imgCount})`;\n    let value = { ...saveStatus.images, text: imagesText };\n    if (uploadedImages === images.imgCount && images.imgCount > 0) {\n      value = { ...value, status: 'done' };\n    }\n    setSaveStatus((st) => ({ ...st, images: value }));\n  };\n\n  useEffect(() => {\n    console.log('useeffect 3');\n    updateImagesStatus();\n  }, [uploadedImages, images.imgCount]);\n\n  const handleClear = async () => {\n    const clearPromises = await Promise.allSettled([\n      treeState.clear(),\n      images.clear(),\n      options.clear(),\n    ]);\n\n    for (let i = 0; i < clearPromises.length; i += 1) {\n      if (\n        clearPromises[i].status === 'fulfilled' ||\n        clearPromises[i].value.ok === true\n      ) {\n        return true;\n      }\n    }\n    return false;\n  };\n\n  useEffect(() => {\n    console.log('useeffect 2');\n    if (\n      (images.newImgCount > 0 &&\n        images.newImgCount === images.newImagesLoaded) ||\n      actions.refresh\n    ) {\n      images.setNewImageCount(0);\n      images.setNewImagesLoaded(0);\n      treeState.reAdjust(\n        images.images,\n        constants.tolerance,\n        dimensions.width,\n        dimensions.height - dimensions.textHeight,\n        options.options\n      );\n      actions.setRefresh(false);\n    }\n  }, [images.newImgCount, images.newImagesLoaded, actions.refresh]);\n\n  const collageCallback = () => {};\n\n  const handleRemoveImage = (imgTitle) => {\n    const newImagesArr = images.remove(imgTitle);\n    treeState.reAdjust(\n      newImagesArr,\n      constants.tolerance,\n      dimensions.imageWidth,\n      dimensions.imageHeight,\n      options.options\n    );\n  };\n\n  const generateThumbnail = () => {\n    const ar = treeState.tree.root.value.aspectRatio;\n    const thumbnailCanvas = document.createElement('canvas');\n    const thumbnailTree = treeState.tree.copy();\n    thumbnailTree.addSize(500 * ar, 500, ar);\n    thumbnailCanvas.width = 500 * ar;\n    thumbnailCanvas.height = 500;\n    thumbnailTree.CanvasDisplay(\n      500 * ar,\n      500,\n      thumbnailCanvas,\n      (500 * ar) / dimensions.width\n    );\n\n    // create and update details\n    const thumbnailDetails = {\n      title: `thumbnail-${collageID}.png`,\n      src: '',\n      naturalHeight: 500,\n      naturalWidth: 500 * ar,\n      aspectRatio: ar,\n      type: 'image/png',\n    };\n    setThumbnail(thumbnailDetails);\n    return [thumbnailDetails, thumbnailCanvas];\n  };\n\n  const uploadCollageDetails = (thumbnailDetails, name) => {\n    const dets = {\n      collage_id: collageID.toString(),\n      name,\n      created_at: '2021-02-18T21:54:42.123Z',\n      last_updated_at: '2021-02-18T21:54:45.123Z',\n      images: images.getImageData(images.images),\n      tree: treeState.tree.removeImageData(),\n      thumbnail: thumbnailDetails,\n    };\n    // TODO [33] Validate collageDetails\n    console.log(dets);\n    return collageapi.newCollage(collageID, dets);\n  };\n\n  const uploadCallback = () => {\n    console.log('Setting uploaded images to ', uploadedImages + 1);\n    setUploadedImages((cnt) => cnt + 1);\n  };\n\n  const uploadCollageImages = (thumbnailCanvas, imageURLS) => {\n    const imagePromises = Object.keys(imageURLS).map(async (item) => {\n      const thumbnailKey = `thumbnail-${collageID}.jpg`;\n      if (item === thumbnailKey) {\n        const thumbnailPromise = thumbnailCanvas.toBlob(async (blob) => {\n          setThumbnail(blob);\n          return collageapi.upload(imageURLS[thumbnailKey], blob);\n        });\n        return thumbnailPromise;\n      }\n\n      const url = imageURLS[item];\n      const Img = images.images.find((img) => img.title === item);\n      const resp = await collageapi.upload(url, Img.file);\n      uploadCallback();\n      console.log('image upload resp', resp);\n      return resp;\n    });\n\n    return imagePromises;\n  };\n\n  const newCollage = async (name) => {\n    const ar = treeState.tree.root.value.aspectRatio;\n    console.log('in generate thumbnail', ar, 500 * ar, 500);\n    const [thumbnailDetails, thumbnailCanvas] = generateThumbnail();\n    updateStatus('details', 'running');\n    const imageURLS = await uploadCollageDetails(thumbnailDetails, name);\n    updateStatus('details', 'done');\n    updateStatus('images', 'running');\n    const imagePromises = uploadCollageImages(thumbnailCanvas, imageURLS);\n    const uploadPromises = await Promise.allSettled(imagePromises);\n    // updateStatus('images', 'done');\n    updateStatus('finalizing', 'running');\n    let uploadStatus;\n    for (let i = 0; i < uploadPromises.length; i += 1) {\n      if (\n        uploadPromises[i].status === 'fulfilled' ||\n        uploadPromises[i].value.ok === true\n      ) {\n        uploadStatus = true;\n        updateStatus('finalizing', 'done');\n      } else {\n        uploadStatus = false;\n        updateStatus('finalizing', 'failed');\n        break;\n      }\n    }\n    return uploadStatus;\n  };\n\n  useEffect(() => {\n    console.log('useeffect 1');\n    if (\n      options.options.text.length > 0 &&\n      Object.keys(treeState.tree).length > 0\n    ) {\n      const tH = helpers.wrapText(\n        options.options.text,\n        0,\n        0,\n        dimensions.width,\n        20,\n        25\n      );\n      dimensions.setTextHeight(tH.length * 25);\n      const [w, h] = helpers.getCollageDimension(\n        dimensions.width,\n        dimensions.height - tH.length * 25,\n        treeState.tree.root.value.aspectRatio\n      );\n      dimensions.setImageWidth(w);\n      dimensions.setImageHeight(h);\n    } else {\n      dimensions.setTextHeight(0);\n      options.handlePositionChange(true);\n      dimensions.setImageWidth(dimensions.width);\n      dimensions.setImageHeight(dimensions.height);\n    }\n  }, [\n    dimensions.width,\n    dimensions.height,\n    treeState.tree,\n    options.options.text,\n  ]);\n\n  const getSnapshot = (name, thumbnailDetails) => {\n    setCollageName(name);\n    return {\n      collage_id: collageID.toString(),\n      name,\n      created_at: '2021-02-18T21:54:42.123Z',\n      last_updated_at: '2021-02-18T21:54:45.123Z',\n      images: images.removeImageData(images.images),\n      tree: treeState.tree.removeImageData(),\n      thumbnail: thumbnailDetails,\n    };\n  };\n\n  const getDetails = (name, thumbnailDetails) => {\n    setCollageName(name);\n    return {\n      collage_id: collageID.toString(),\n      name,\n      created_at: '2021-02-18T21:54:42.123Z',\n      last_updated_at: '2021-02-18T21:54:45.123Z',\n      images: images.getImageData(images.images),\n      tree: treeState.tree.removeImageData(),\n      thumbnail: thumbnailDetails,\n    };\n  };\n\n  const saveCollage = async (name) => {\n    const ar = treeState.tree.root.value.aspectRatio;\n    console.log('in generate thumbnail', ar, 500 * ar, 500);\n    const [thumbnailDetails, thumbnailCanvas] = generateThumbnail();\n    updateStatus('details', 'running');\n    const imageURLS = await collageapi.saveCollage(\n      collageID,\n      getDetails(name, thumbnailDetails)\n    );\n    console.log('save collage imageurls', imageURLS);\n    updateStatus('details', 'done');\n    updateStatus('images', 'running');\n    const imagePromises = uploadCollageImages(thumbnailCanvas, imageURLS);\n    const uploadPromises = await Promise.allSettled(imagePromises);\n    // updateStatus('images', 'done');\n    updateStatus('finalizing', 'running');\n    let uploadStatus;\n    for (let i = 0; i < uploadPromises.length; i += 1) {\n      if (\n        uploadPromises[i].status === 'fulfilled' ||\n        uploadPromises[i].value.ok === true\n      ) {\n        uploadStatus = true;\n        updateStatus('finalizing', 'done');\n      } else {\n        uploadStatus = false;\n        updateStatus('finalizing', 'failed');\n        break;\n      }\n    }\n    return uploadStatus;\n  };\n\n  console.log('saveStatus', saveStatus);\n  return [\n    getDetails,\n    collageName,\n    thumbnail,\n    collageID,\n    constants,\n    dimensions,\n    options,\n    actions,\n    images,\n    treeState,\n    handleClear,\n    collageCallback,\n    handleRemoveImage,\n    newCollage,\n    saveStatus,\n    saveCollage,\n    getSnapshot,\n  ];\n}\n","import { useRef, useState, useEffect } from 'react';\nimport helpers from 'components/collage/helpers';\n\nexport default function useDimensions(constants) {\n  const { aspectRatio, fontSize, lineHeight } = constants;\n  const headerRef = useRef();\n  const actionsRef = useRef();\n  const footerRef = useRef();\n  const addImageRef = useRef();\n\n  const [height, setHeight] = useState(0);\n  const [imageHeight, setImageHeight] = useState(0);\n  const [imageWidth, setImageWidth] = useState(0);\n  const [width, setWidth] = useState(0);\n  const [maxHeight, setMaxHeight] = useState(0);\n  const [maxWidth, setMaxWidth] = useState(0);\n  const [textHeight, setTextHeight] = useState(0);\n\n  const setDimensions = () => {\n    const isMobile = window.innerWidth < window.innerHeight;\n    if (isMobile === true) {\n      const headerHeight = headerRef.current\n        ? headerRef.current.offsetHeight\n        : 0;\n      const actionsHeight = actionsRef.current\n        ? actionsRef.current.offsetHeight\n        : 0;\n      const footerHeight = footerRef.current\n        ? footerRef.current.offsetHeight\n        : 0;\n      const otherHeight = headerHeight + actionsHeight + footerHeight;\n      setMaxWidth(window.innerWidth);\n      setMaxHeight(window.innerHeight - otherHeight);\n      const [w, h] = helpers.getCollageDimension(\n        window.innerWidth - 10,\n        window.innerHeight - otherHeight - 10,\n        aspectRatio\n      );\n      console.log('other height', otherHeight);\n      setWidth(w);\n      setHeight(h);\n    } else {\n      const headerHeight = headerRef.current\n        ? headerRef.current.offsetHeight\n        : 0;\n      const actionsWidth = actionsRef.current\n        ? actionsRef.current.offsetWidth\n        : 0;\n      const footerWidth = footerRef.current ? footerRef.current.offsetWidth : 0;\n      setMaxWidth(window.innerWidth - (footerWidth + actionsWidth));\n      setMaxHeight(window.innerHeight - headerHeight);\n      const [w, h] = helpers.getCollageDimension(\n        window.innerWidth - (footerWidth + actionsWidth) - 10,\n        window.innerHeight - headerHeight - 10,\n        aspectRatio\n      );\n      console.log(\n        'other height',\n        headerHeight,\n        'other width',\n        footerWidth + actionsWidth,\n        footerWidth,\n        actionsWidth,\n        actionsRef\n      );\n      setWidth(w);\n      setHeight(h);\n    }\n  };\n\n  const handleImageAddClick = () => {\n    if (addImageRef.current) addImageRef.current.click();\n  };\n\n  useEffect(() => {\n    console.log('dimensions changed');\n    setDimensions();\n  }, [\n    window.innerHeight,\n    window.innerWidth,\n    headerRef.current,\n    actionsRef.current,\n    footerRef.current,\n  ]);\n\n  useEffect(() => {\n    setDimensions();\n    window.addEventListener('resize', setDimensions);\n\n    return () => window.removeEventListener('resize', setDimensions);\n  }, []);\n\n  return {\n    addImageRef,\n    actionsRef,\n    headerRef,\n    footerRef,\n    width,\n    height,\n    imageHeight,\n    imageWidth,\n    setImageWidth,\n    setImageHeight,\n    maxHeight,\n    maxWidth,\n    handleImageAddClick,\n    textHeight,\n    setTextHeight,\n    fontSize,\n    lineHeight,\n  };\n}\n","import { useState } from 'react';\n\nexport default function useOptions() {\n  const optionsInitValue = {\n    padding: 2,\n    borderRadius: 5,\n    color: {\n      r: 255,\n      g: 255,\n      b: 255,\n      a: 1,\n    },\n    text: '',\n    topText: true,\n  };\n\n  const [options, setOptions] = useState(optionsInitValue);\n  const [displayColorPicker, setDisplayColorPicker] = useState(false);\n\n  const clear = () => setOptions(optionsInitValue);\n  const handlePaddingChange = (e) =>\n    setOptions((opts) => ({ ...opts, padding: e.target.value }));\n  const handleRadiusChange = (e) => {\n    setOptions((opts) => ({ ...opts, borderRadius: e.target.value }));\n  };\n\n  const handleColorClick = () => setDisplayColorPicker((dcp) => !dcp);\n  const handleColorClose = () => setDisplayColorPicker(false);\n  const handleColorChange = (clr) =>\n    setOptions((opts) => ({ ...opts, color: clr.rgb }));\n  const handlePositionChange = (value) =>\n    setOptions((opts) => ({ ...opts, topText: value }));\n\n  const handleTextChange = (e) => {\n    const { target } = e;\n    setOptions((opts) => ({ ...opts, text: target.value }));\n  };\n\n  return {\n    options,\n    setOptions,\n    clear,\n    handlePaddingChange,\n    handleRadiusChange,\n    handleColorClick,\n    handleColorClose,\n    handleColorChange,\n    handlePositionChange,\n    handleTextChange,\n    displayColorPicker,\n  };\n}\n","import { useState } from 'react';\n\nexport default function useActions() {\n  const [open, setOpen] = useState(false);\n  const [saveOpen, setSaveOpen] = useState(false);\n  const [saveStart, setSaveStart] = useState(false);\n  const [refresh, setRefresh] = useState(false);\n  const [generate, setGenerate] = useState(false);\n  const [removeImage, setRemoveImage] = useState(false);\n  const [printOptions, setPrintOptions] = useState({\n    paperWidth: 0,\n    paperHeight: 0,\n  });\n\n  const onRefresh = () => setRefresh(true);\n  const handleDownload = () => setOpen(true);\n  const handleSave = () => {\n    setSaveOpen(true);\n  };\n  const onDownloadClose = () => setOpen(false);\n  const onSaveClose = () => setSaveOpen(false);\n  const clearDelete = () => setRemoveImage(false);\n  const onDelete = () => setRemoveImage((ri) => !ri);\n\n  const onDownloadClick = (w, h) => {\n    setPrintOptions({ paperWidth: w, paperHeight: h });\n    setGenerate(true);\n    setOpen(false);\n  };\n\n  const onSaveClick = () => {\n    setSaveStart(true);\n    setSaveOpen(false);\n  };\n  const handleGenerateCallback = () => {\n    setGenerate(false);\n    setPrintOptions({ paperWidth: 0, paperHeight: 0 });\n  };\n\n  return {\n    clearDelete,\n    generate,\n    handleDownload,\n    handleGenerateCallback,\n    onDelete,\n    onDownloadClick,\n    onDownloadClose,\n    onRefresh,\n    open,\n    printOptions,\n    refresh,\n    setGenerate,\n    setOpen,\n    setPrintOptions,\n    setRefresh,\n    removeImage,\n    setRemoveImage,\n    saveOpen,\n    setSaveOpen,\n    onSaveClose,\n    onSaveClick,\n    handleSave,\n    saveStart,\n    setSaveStart,\n  };\n}\n","import { useState, useEffect } from 'react';\nimport helpers from 'components/collage/helpers';\nimport dbutils from 'components/collage/dbutils';\n\nexport default function useImages(initialValue) {\n  console.log('use images', initialValue);\n  const [newImgCount, setNewImageCount] = useState(0);\n  const [newImagesLoaded, setNewImagesLoaded] = useState(0);\n  const [imgCount, setImageCount] = useState(0);\n  const [loaded, setLoaded] = useState(0);\n  const [images, setImages] = useState([]);\n\n  useEffect(() => {\n    console.log('setting images');\n    if ('images' in initialValue) {\n      setImages(initialValue.images);\n      if (imgCount === 0) setImageCount(initialValue.images.length);\n    }\n  }, [initialValue]);\n\n  const getImageData = (imageArr) => {\n    const tempImgArr = [...imageArr];\n    return tempImgArr.map((img) => {\n      const { file, src, originalSRC, originalWidth, originalHeight, ...rest } =\n        img;\n      rest.naturalWidth = originalWidth;\n      rest.naturalHeight = originalHeight;\n      console.log('get image data', img, rest);\n      return rest;\n    });\n  };\n\n  const removeImageData = (imageArr) => {\n    const tempImgArr = [...imageArr];\n    return tempImgArr.map((img) => {\n      const { file, src, originalSRC, ...rest } = img;\n      console.log('get image data', img, rest);\n      return rest;\n    });\n  };\n\n  const handleImageData = (imageDetail) => {\n    setImages((arr) => arr.concat([imageDetail]));\n    setNewImagesLoaded((cnt) => cnt + 1);\n    dbutils.save([imageDetail], 'images');\n  };\n\n  const handleLoad = (event) => {\n    helpers.handleImageLoad(\n      event,\n      setImageCount,\n      setNewImageCount,\n      handleImageData\n    );\n  };\n\n  const clear = () => {\n    setImages([]);\n    setImageCount(0);\n    setLoaded(0);\n    setNewImagesLoaded(0);\n  };\n\n  const remove = (title) => {\n    const removeIndex = images.findIndex((elem) => elem.title === title);\n    const newImagesArr = [\n      ...images.slice(0, removeIndex),\n      ...images.slice(removeIndex + 1),\n    ];\n    setImages(newImagesArr);\n    setImageCount((cnt) => cnt - 1);\n    return newImagesArr;\n  };\n\n  return {\n    clear,\n    handleImageData,\n    handleLoad,\n    images,\n    imgCount,\n    loaded,\n    newImagesLoaded,\n    newImgCount,\n    remove,\n    setImageCount,\n    setImages,\n    setLoaded,\n    setNewImageCount,\n    setNewImagesLoaded,\n    getImageData,\n    removeImageData,\n  };\n}\n","import { useState, useEffect } from 'react';\nimport treeUtils from 'components/collage/treeUtils';\nimport BinaryTree from 'components/collage/binaryTree';\n\nexport default function useTree(initialValue, loadingCallback = () => {}) {\n  console.log('use Tree', initialValue);\n  const [tree, setTree] = useState(new BinaryTree({}));\n\n  useEffect(() => {\n    console.log('use Tree useEffect');\n    const newTree = new BinaryTree({});\n    if (\n      'details' in initialValue &&\n      Object.keys(initialValue.details).length > 0\n    ) {\n      console.log('initial value in tree', initialValue);\n      newTree.fromObject(initialValue.details.tree);\n      if ('options' in initialValue.details.tree.root) {\n        loadingCallback((opts) => ({\n          ...opts,\n          ...initialValue.details.tree.root.options,\n        }));\n      }\n      console.log('setting tree');\n      setTree(newTree);\n    }\n  }, [initialValue]);\n\n  const clear = () => setTree({});\n\n  const reAdjust = (imagesArr, tolerance, imageWidth, imageHeight, options) => {\n    const [, bestAspectRatioTree] = treeUtils.findBestAdjustTree(\n      imagesArr,\n      tolerance,\n      imageWidth,\n      imageHeight\n    );\n    bestAspectRatioTree.addOptions(options);\n    setTree(bestAspectRatioTree);\n  };\n\n  return { tree, setTree, clear, reAdjust };\n}\n","import { useState, useEffect } from 'react';\nimport helpers from './helpers';\n\nexport default function Collage({\n  dimensionProps,\n  imageProps,\n  actionProps,\n  collageCallback,\n  handleRemoveImage,\n  options,\n  tree,\n}) {\n  const [collage, setCollage] = useState(null);\n  const { images, setLoaded } = imageProps;\n  const { generate, handleGenerateCallback, printOptions, removeImage } =\n    actionProps;\n  const { height, width, imageHeight, imageWidth, fontSize, lineHeight } =\n    dimensionProps;\n\n  const handleCollageImageLoad = () => setLoaded((cnt) => cnt + 1);\n  const isEmpty = (t) => Object.keys(t).length === 0;\n  const createCollage = () => {\n    console.log('started collage loading', tree);\n    tree.addSize(imageWidth, imageHeight, tree.root.value.aspectRatio);\n    console.log('collage added size');\n    tree.addOptions(options);\n    console.log('collage added options', images.length);\n    if (images.length > 0) {\n      tree.addImageData(images);\n      console.log('collage added image data');\n      const collageElem = tree.DOMDisplay(\n        width,\n        height,\n        removeImage,\n        handleRemoveImage,\n        handleCollageImageLoad\n      );\n      console.log('collage added dom display');\n      setCollage(collageElem);\n      collageCallback(tree);\n    }\n  };\n\n  useEffect(() => {\n    if (!isEmpty(tree) && tree.root.left != null) {\n      console.log('collage, tree is not empty');\n      createCollage();\n    }\n  }, []);\n\n  useEffect(() => {\n    if (!isEmpty(tree) && tree.root.left != null) {\n      console.log('collage, tree is not empty 1');\n      createCollage();\n    } else {\n      setCollage(null);\n    }\n  }, [tree, options, imageWidth, imageHeight, removeImage, images]);\n\n  const downloadCollage = (canvas, pW, pH) => {\n    canvas.toBlob((blob) => {\n      const link = document.createElement('a');\n      link.download = `collage-${pW.toFixed(2)}X${pH.toFixed(\n        2\n      )}-${Date.now()}.jpg`;\n      link.href = URL.createObjectURL(blob);\n      link.click();\n      URL.revokeObjectURL(link.href);\n      link.href = null;\n      handleGenerateCallback();\n    }, 'image/jpeg');\n  };\n\n  const getCanvasTree = () => {\n    const canvasTree = tree.copy();\n    canvasTree.replaceImages(images);\n    return canvasTree;\n  };\n\n  const getCanvas = (pw, ph) => {\n    const canvasElement = document.createElement('canvas');\n    canvasElement.width = pw;\n    canvasElement.height = ph;\n    return canvasElement;\n  };\n\n  const generateCollageTree = (pw, ph) => {\n    const canvasTree = getCanvasTree();\n    const ar = tree.root.value.aspectRatio;\n    const scaleFactor = pw / width;\n    const [imgPW, imgPH] = helpers.getImageDimensions(\n      pw,\n      ph,\n      options.text,\n      0,\n      0,\n      fontSize,\n      lineHeight,\n      scaleFactor,\n      tree.root.value.aspectRatio\n    );\n    canvasTree.addSize(imgPW, imgPH, ar);\n    return canvasTree;\n  };\n\n  const generateCollage = (ctree, pw, ph) => {\n    const scaleFactor = pw / width;\n    const canvasElement = getCanvas(pw, ph);\n    ctree.CanvasDisplay(pw, ph, canvasElement, scaleFactor);\n\n    setTimeout(() => downloadCollage(canvasElement, pw, ph), '5000');\n  };\n\n  useEffect(() => {\n    if (generate === true) {\n      const { paperWidth: pw, paperHeight: ph } = printOptions;\n      const canvasTree = generateCollageTree(pw, ph);\n      const [valid, probNodes] = canvasTree.validateAddSize();\n      if (valid) {\n        generateCollage(canvasTree, pw, ph);\n      } else {\n        const [newPW, newPH] = helpers.optimizeDimensions(pw, ph, probNodes);\n        const newCanvasTree = generateCollageTree(newPW, newPH);\n        const [newValid, newProbNodes] = newCanvasTree.validateAddSize();\n        if (newValid) {\n          generateCollage(newCanvasTree, newPW, newPH);\n        } else {\n          console.log('unable to generate collage', newProbNodes);\n        }\n      }\n    }\n  }, [generate]);\n\n  return collage;\n}\n","import PropTypes from 'prop-types';\nimport { useState } from 'react';\nimport Button from '@mui/material/Button';\nimport Dialog from '@mui/material/Dialog';\nimport DialogTitle from '@mui/material/DialogTitle';\nimport DialogActions from '@mui/material/DialogActions';\nimport DialogContent from '@mui/material/DialogContent';\nimport DialogContentText from '@mui/material/DialogContentText';\nimport MenuItem from '@mui/material/MenuItem';\nimport Select from '@mui/material/Select';\nimport InputLabel from '@mui/material/InputLabel';\nimport FormControl from '@mui/material/FormControl';\nimport Authenticate from 'hocs/require-authentication';\n\nexport default function DownloadDialog({ open, onClick, onClose, sizes }) {\n  const [value, setValue] = useState('');\n  const handleDownload = () => {\n    console.log(sizes[value].width, sizes[value].height, onClick);\n    onClick(sizes[value].width, sizes[value].height);\n    setValue('');\n  };\n\n  const handleClose = () => {\n    setValue('');\n    onClose();\n  };\n\n  return (\n    <Authenticate>\n      <Dialog open={open} fullWidth>\n        <DialogTitle sx={{ textAlign: 'center' }}>Download Collage</DialogTitle>\n        <DialogContent\n          dividers\n          sx={{\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'space-between',\n          }}\n        >\n          <DialogContentText sx={{ display: 'inline', pr: 1 }}>\n            Choose collage size\n          </DialogContentText>\n          <FormControl fullWidth sx={{ maxWidth: '60%' }}>\n            <InputLabel id=\"demo-simple-select-label\">Download Size</InputLabel>\n            <Select\n              labelId=\"demo-simple-select-label\"\n              id=\"demo-simple-select\"\n              defaultValue=\"A4\"\n              value={value}\n              label=\"Download Size\"\n              onChange={(event) => setValue(event.target.value)}\n            >\n              {Object.keys(sizes).map((key) => (\n                <MenuItem key={sizes[key].text} value={key}>\n                  {sizes[key].text}\n                </MenuItem>\n              ))}\n            </Select>\n          </FormControl>\n        </DialogContent>\n        <DialogActions>\n          <Button\n            variant=\"outlined\"\n            disabled={value.length === 0}\n            onClick={handleDownload}\n          >\n            Download\n          </Button>\n          <Button variant=\"text\" onClick={handleClose}>\n            Cancel\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </Authenticate>\n  );\n}\n\nDownloadDialog.propTypes = {\n  open: PropTypes.bool.isRequired,\n  onClick: PropTypes.func.isRequired,\n  onClose: PropTypes.func.isRequired,\n  sizes: PropTypes.objectOf(\n    PropTypes.shape({\n      width: PropTypes.number.isRequired,\n      height: PropTypes.number.isRequired,\n      text: PropTypes.string.isRequired,\n    })\n  ).isRequired,\n};\n","import PropTypes from 'prop-types';\nimport { useState } from 'react';\nimport { alpha } from '@mui/material/styles';\nimport Button from '@mui/material/Button';\nimport Dialog from '@mui/material/Dialog';\nimport DialogTitle from '@mui/material/DialogTitle';\nimport DialogActions from '@mui/material/DialogActions';\nimport DialogContent from '@mui/material/DialogContent';\n// import DialogContentText from '@mui/material/DialogContentText';\nimport TextField from '@mui/material/TextField';\n// import Authenticate from 'hocs/require-authentication';\n\nexport default function SaveDialog({ open, onClick, onClose }) {\n  const [name, setName] = useState('');\n  const [nameError] = useState('');\n  const handleSave = () => {\n    onClick(name);\n  };\n\n  const handleNameChange = (e) => {\n    const { target } = e;\n    setName(target.value);\n  };\n  const handleClose = () => {\n    setName('');\n    onClose();\n  };\n\n  return (\n    <Dialog open={open} fullWidth>\n      <DialogTitle sx={{ textAlign: 'center' }}>Save Collage</DialogTitle>\n      <DialogContent\n        dividers\n        sx={{\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'space-between',\n        }}\n      >\n        <TextField\n          variant=\"outlined\"\n          label=\"Set Collage Name\"\n          defaultValue={name}\n          onChange={handleNameChange}\n          size=\"small\"\n          sx={{ width: '100%', mb: 1 }}\n          InputProps={{ sx: { backgroundColor: alpha('#fff', 0.9) } }}\n          helperText={nameError}\n          error={!!nameError}\n        />\n      </DialogContent>\n      <DialogActions>\n        <Button\n          variant=\"outlined\"\n          disabled={name.length === 0}\n          onClick={handleSave}\n        >\n          Save\n        </Button>\n        <Button variant=\"text\" onClick={handleClose}>\n          Cancel\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n\nSaveDialog.propTypes = {\n  open: PropTypes.bool.isRequired,\n  onClick: PropTypes.func.isRequired,\n  onClose: PropTypes.func.isRequired,\n};\n","import PropTypes from 'prop-types';\nimport { useEffect, useState } from 'react';\nimport { alpha } from '@mui/material/styles';\nimport Stack from '@mui/material/Stack';\nimport Dialog from '@mui/material/Dialog';\nimport DialogTitle from '@mui/material/DialogTitle';\nimport DialogContent from '@mui/material/DialogContent';\nimport Typography from '@mui/material/Typography';\nimport CircularProgress from '@mui/material/CircularProgress';\nimport PendingIcon from '@mui/icons-material/Pending';\nimport CheckCircleOutlineIcon from '@mui/icons-material/CheckCircleOutline';\nimport CloseIcon from '@mui/icons-material/Close';\n\nfunction StatusIndicator({ status }) {\n  if (status === 'running') {\n    return <CircularProgress color=\"info\" size=\"1rem\" />;\n  }\n  if (status === 'pending') {\n    return <PendingIcon color=\"disabled\" size=\"0.875rem\" />;\n  }\n  if (status === 'done') {\n    return <CheckCircleOutlineIcon color=\"success\" size=\"0.875rem\" />;\n  }\n  if (status === 'failed') {\n    return <CloseIcon color=\"error\" size=\"0.875rem\" />;\n  }\n}\n\nStatusIndicator.propTypes = {\n  status: PropTypes.string.isRequired,\n};\n\nfunction Status({ text, status }) {\n  const color = {\n    pending: alpha('#000', 0.26),\n    done: 'black',\n    running: 'black',\n    failed: 'red',\n  };\n\n  return (\n    <Stack direction=\"row\" justifyContent=\"space-between\">\n      <Typography\n        sx={{ fontWeight: 'bold', fontSize: '1rem', color: color[status] }}\n      >\n        {text}\n      </Typography>\n      <StatusIndicator status={status} />\n    </Stack>\n  );\n}\n\nStatus.propTypes = {\n  text: PropTypes.string.isRequired,\n  status: PropTypes.string.isRequired,\n};\n\nfunction OverAllStatus({ status, counter }) {\n  if (status === 'failed') {\n    return (\n      <Stack\n        direction=\"row\"\n        spacing={2}\n        justifyContent=\"center\"\n        alignItems=\"center\"\n        sx={{ width: '100%', p: 1 }}\n      >\n        <CloseIcon color=\"error\" />\n        <Typography>Collage creation failed</Typography>\n      </Stack>\n    );\n  }\n\n  if (status === 'running' || status === 'pending') return null;\n\n  if (status === 'success') {\n    return (\n      <Stack\n        direction=\"row\"\n        spacing={2}\n        justifyContent=\"center\"\n        alignItems=\"center\"\n        sx={{ width: '100%', p: 1 }}\n      >\n        <CheckCircleOutlineIcon color=\"success\" sx={{ fontSize: '2rem' }} />\n        <Typography>\n          Collage creation successful. Navigation to collages in {counter}{' '}\n          seconds...\n        </Typography>\n      </Stack>\n    );\n  }\n\n  return null;\n}\n\nOverAllStatus.propTypes = {\n  status: PropTypes.string.isRequired,\n  counter: PropTypes.number.isRequired,\n};\n\nexport default function SaveStatusDialog({ open, status }) {\n  let overAllStatus = 'pending';\n  const [counter, setCounter] = useState(-1);\n  useEffect(() => {\n    let timerId;\n    if (counter > 0 && overAllStatus === 'success') {\n      timerId = setTimeout(() => setCounter(counter - 1), 1000);\n    }\n    return () => clearTimeout(timerId);\n  }, [counter, overAllStatus]);\n\n  const statusArr = Object.values(status).map((val) => val.status);\n  if (statusArr.includes('failed')) {\n    overAllStatus = 'failed';\n  } else if (statusArr.includes('running')) {\n    overAllStatus = 'running';\n  } else if (!statusArr.includes('pending')) {\n    console.log('setting counter', counter, status);\n    if (counter === -1) {\n      setCounter(3);\n    }\n    overAllStatus = 'success';\n  }\n\n  return (\n    <Dialog open={open} fullWidth>\n      <DialogTitle sx={{ textAlign: 'center' }}>Save Collage</DialogTitle>\n      <DialogContent dividers>\n        <Stack direction=\"column\" justifyContent=\"center\" spacing={2}>\n          {Object.values(status).map((st) => (\n            <Status key={st.text} text={st.text} status={st.status} />\n          ))}\n        </Stack>\n      </DialogContent>\n      <OverAllStatus status={overAllStatus} counter={counter} />\n    </Dialog>\n  );\n}\n\nSaveStatusDialog.propTypes = {\n  open: PropTypes.bool.isRequired,\n  status: PropTypes.objectOf(\n    PropTypes.shape({\n      text: PropTypes.string,\n      status: PropTypes.string,\n    })\n  ).isRequired,\n};\n","import PropTypes from 'prop-types';\nimport Paper from '@mui/material/Paper';\nimport { Typography, Box, Link } from '@mui/material';\nimport ArrowBackIcon from '@mui/icons-material/ArrowBack';\nimport { alpha } from '@mui/material/styles';\nimport commonUtils from 'utils';\nimport ProfileLink from 'components/profile';\n\nimport LoginButton from 'components/LoginButton';\n\nexport default function Header({ headerRef, name, handlePreLogin }) {\n  console.log('in collage header', name);\n  const cookieValue = commonUtils.getUserInfo();\n  const isLoggedIn = cookieValue !== '';\n  return (\n    <Paper\n      ref={headerRef}\n      sx={{\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'space-between',\n        p: 1,\n        backgroundColor: alpha('#fff', 0.1),\n        borderRadius: 0,\n      }}\n      elevation={3}\n    >\n      <Box sx={{ postion: 'absolute', left: '5px' }}>\n        <Link href=\"/collages\" color=\"muted.main\" underline=\"none\">\n          <Box sx={{ display: 'flex', alignItems: 'center' }}>\n            <ArrowBackIcon />\n          </Box>\n        </Link>\n      </Box>\n      <Typography\n        variant=\"h4\"\n        component=\"h4\"\n        sx={{ color: alpha('#fff', 0.5) }}\n      >\n        {name}\n      </Typography>\n      {isLoggedIn === true ? (\n        <ProfileLink />\n      ) : (\n        <LoginButton\n          authURL={process.env.REACT_APP_AUTH_URL}\n          next=\"collage/create\"\n          handlePreLogin={handlePreLogin}\n        />\n      )}\n    </Paper>\n  );\n}\n\nHeader.propTypes = {\n  name: PropTypes.string.isRequired,\n  headerRef: PropTypes.oneOfType([\n    PropTypes.func,\n    PropTypes.shape({ current: PropTypes.instanceOf(Element) }),\n  ]).isRequired,\n  handlePreLogin: PropTypes.func.isRequired,\n};\n","import PropTypes from 'prop-types';\n// import Grid from '@mui/material/Grid';\nimport Box from '@mui/material/Box';\nimport collageBack from 'static/images/collage_back1.webp';\n\nexport default function EmptyCollage({ width, height, loadComponent }) {\n  console.log(width, height);\n  return (\n    <Box\n      sx={{\n        backgroundImage: `url(${collageBack})`,\n        backgroundSize: width,\n        objectFit: 'fill',\n        width,\n        height,\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n      }}\n    >\n      {loadComponent}\n    </Box>\n  );\n}\n\nEmptyCollage.propTypes = {\n  width: PropTypes.number.isRequired,\n  height: PropTypes.number.isRequired,\n  loadComponent: PropTypes.node.isRequired,\n};\n","import PropTypes from 'prop-types';\nimport Box from '@mui/material/Box';\nimport EmptyCollage from 'components/collage/EmptyCollage';\nimport Loading from 'components/Loading';\nimport AddPhotos from 'components/AddPhotos';\nimport Authenticate from 'hocs/require-authentication';\n\nexport default function View({\n  open,\n  saveOpen,\n  saveStatusOpen,\n  status,\n  dimensionProps,\n  imageProps,\n  header,\n  actions,\n  downloadDialog,\n  saveDialog,\n  saveStatusDialog,\n  collage,\n  controls,\n  saveType,\n}) {\n  const {\n    width,\n    height,\n    maxWidth,\n    maxHeight,\n    imageHeight,\n    headerRef,\n    actionsRef,\n  } = dimensionProps;\n  const isMobile = window.innerWidth < window.innerHeight;\n  const { images, imgCount, handleLoad } = imageProps;\n  const headerHeight = headerRef.current ? headerRef.current.offsetHeight : 0;\n  const actionsHeight = actionsRef.current\n    ? actionsRef.current.offsetHeight\n    : 0;\n  const offsetHeight = isMobile\n    ? `calc(50% + ${headerHeight} + ${actionsHeight})`\n    : `calc(50 % + ${headerHeight})`;\n  console.log(\n    'from view',\n    images.length,\n    imgCount,\n    imageHeight,\n    collage,\n    status\n  );\n  let content;\n  if (status === 'fetching') {\n    content = (\n      <EmptyCollage\n        width={width}\n        height={height}\n        loadComponent={<Loading title=\"Fetching existing collage data ...\" />}\n      />\n    );\n  }\n\n  if (status === 'preparing') {\n    content = (\n      <>\n        {collage}\n        <Loading title=\"Preparing collage...\" />\n      </>\n    );\n  }\n\n  if (status === 'loading') {\n    content = (\n      <EmptyCollage\n        width={width}\n        height={height}\n        loadComponent={\n          <Loading\n            title={`Loading (${images.length} / ${imgCount}) images...`}\n          />\n        }\n      />\n    );\n  }\n\n  if (status === 'empty') {\n    content = (\n      <EmptyCollage\n        width={width}\n        height={height}\n        loadComponent={\n          width ? <AddPhotos handleChange={handleLoad} /> : <div />\n        }\n      />\n    );\n  }\n\n  if (status === 'ready') {\n    content = collage;\n  }\n\n  return saveType === 'new' ? (\n    <Box\n      component=\"div\"\n      sx={{\n        backgroundColor: 'black',\n        position: 'relative',\n      }}\n    >\n      {header}\n      {actions}\n      {open ? downloadDialog : null}\n      {saveOpen ? saveDialog : null}\n      {saveStatusOpen ? saveStatusDialog : null}\n      <Box\n        width={maxWidth}\n        height={maxHeight}\n        sx={{\n          position: 'absolute',\n          top: offsetHeight,\n          left: '50%',\n          transform: 'translate(-50%, 0)',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          backgroundColor: 'transparent',\n          justifySelf: 'center',\n        }}\n      >\n        {content}\n      </Box>\n      {controls}\n    </Box>\n  ) : (\n    <Box component=\"div\" sx={{ backgroundColor: 'black' }}>\n      {header}\n      <Authenticate>\n        {actions}\n        {open ? downloadDialog : null}\n        {saveOpen ? saveDialog : null}\n        {saveStatusOpen ? saveStatusDialog : null}\n        <Box\n          width={maxWidth}\n          height={maxHeight}\n          sx={{\n            position: 'absolute',\n            top: offsetHeight,\n            left: '50%',\n            transform: 'translate(-50%, 0)',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            backgroundColor: 'black',\n            justifySelf: 'center',\n          }}\n        >\n          {content}\n        </Box>\n        {controls}\n      </Authenticate>\n    </Box>\n  );\n}\n\nView.propTypes = {\n  dimensionProps: PropTypes.shape({\n    maxWidth: PropTypes.number.isRequired,\n    maxHeight: PropTypes.number.isRequired,\n    width: PropTypes.number.isRequired,\n    height: PropTypes.number.isRequired,\n    imageHeight: PropTypes.number.isRequired,\n\n    headerRef: PropTypes.oneOfType([\n      PropTypes.func,\n      PropTypes.shape({ current: PropTypes.instanceOf(Element) }),\n    ]).isRequired,\n    actionsRef: PropTypes.oneOfType([\n      PropTypes.func,\n      PropTypes.shape({ current: PropTypes.instanceOf(Element) }),\n    ]).isRequired,\n  }).isRequired,\n  imageProps: PropTypes.shape({\n    images: PropTypes.arrayOf(\n      PropTypes.shape({\n        title: PropTypes.string.isRequired,\n        src: PropTypes.string.isRequired,\n        naturalHeight: PropTypes.number.isRequired,\n        naturalWidth: PropTypes.number.isRequired,\n        aspectRatio: PropTypes.number.isRequired,\n        type: PropTypes.string.isRequired,\n      })\n    ).isRequired,\n    imgCount: PropTypes.number.isRequired,\n    handleLoad: PropTypes.func.isRequired,\n    loaded: PropTypes.number.isRequired,\n  }).isRequired,\n  open: PropTypes.bool.isRequired,\n  saveOpen: PropTypes.bool.isRequired,\n  saveStatusOpen: PropTypes.bool.isRequired,\n  status: PropTypes.string.isRequired,\n  header: PropTypes.node.isRequired,\n  actions: PropTypes.node.isRequired,\n  collage: PropTypes.node.isRequired,\n  controls: PropTypes.node.isRequired,\n  downloadDialog: PropTypes.node.isRequired,\n  saveDialog: PropTypes.node.isRequired,\n  saveStatusDialog: PropTypes.node.isRequired,\n  saveType: PropTypes.string.isRequired,\n};\n","import PropTypes from 'prop-types';\nimport BottomNavigationAction from '@mui/material/BottomNavigationAction';\nimport { alpha } from '@mui/material/styles';\n\nexport default function DBNA({ label, icon, handleChange }) {\n  return (\n    <BottomNavigationAction\n      showLabel\n      label={label}\n      icon={icon}\n      sx={{\n        py: 1,\n        fontWeight: 'bold',\n        color: 'gray',\n        outline: 'none',\n        '&:focus': {\n          color: alpha('#fff', 0.8),\n          outline: 'none',\n        },\n      }}\n      onClick={handleChange}\n    />\n  );\n}\nDBNA.defaultProps = {\n  handleChange: () => {},\n};\n\nDBNA.propTypes = {\n  label: PropTypes.oneOfType([PropTypes.node, PropTypes.string]).isRequired,\n  icon: PropTypes.node.isRequired,\n  handleChange: PropTypes.func,\n};\n","import PropTypes from 'prop-types';\nimport Drawer from '@mui/material/Drawer';\n// import { alpha } from '@mui/material/styles';\n\nexport default function DesktopDrawer({ anchor, children, innerRef }) {\n  return (\n    <Drawer\n      anchor={anchor}\n      variant=\"permanent\"\n      PaperProps={{\n        ref: innerRef,\n        sx: {\n          height: 'fit-content',\n          top: '50%',\n          backgroundColor: 'transparent',\n          color: 'gray',\n          fontWeight: 'bold',\n          borderRadius: anchor === 'left' ? '0 10px 10px 0' : '10px 0 0 10px',\n          transform: 'translate(0, -50%)',\n        },\n      }}\n    >\n      {children}\n    </Drawer>\n  );\n}\n\nDesktopDrawer.defaultProps = {\n  innerRef: () => {},\n};\n\nDesktopDrawer.propTypes = {\n  innerRef: PropTypes.oneOfType([\n    PropTypes.func,\n    PropTypes.shape({ current: PropTypes.instanceOf(Element) }),\n  ]),\n  anchor: PropTypes.string.isRequired,\n  children: PropTypes.node.isRequired,\n};\n","import Divider from '@mui/material/Divider';\n\nexport default function ControlsDivider() {\n  return <Divider sx={{ backgroundColor: 'gray', my: 1 }} variant=\"middle\" />;\n}\n","import PropTypes from 'prop-types';\nimport Typography from '@mui/material/Typography';\nimport SaveIcon from '@mui/icons-material/Save';\nimport DownloadIcon from '@mui/icons-material/Download';\nimport PrintIcon from '@mui/icons-material/Print';\nimport List from '@mui/material/List';\nimport { alpha } from '@mui/material/styles';\n\nimport DBNA from 'components/collage/DesktopActionItem';\nimport DesktopDrawer from 'components/collage/DesktopDrawer';\nimport ControlsDivider from 'components/collage/ControlsDivider';\n\nexport default function DesktopActions({ actionsRef, onDownload, onSave }) {\n  const handleChange = (newValue) => {\n    console.log(newValue);\n    if (newValue === 'download') {\n      onDownload();\n    }\n    if (newValue === 'save') {\n      onSave();\n    } else {\n      console.log('functionality for ', newValue, 'not yet implemented');\n    }\n  };\n\n  return (\n    <DesktopDrawer anchor=\"right\" innerRef={actionsRef}>\n      <List sx={{ backgroundColor: alpha('#fff', 0.1) }}>\n        <DBNA\n          label=\"Save\"\n          icon={<SaveIcon />}\n          handleChange={() => handleChange('save')}\n        />\n        <ControlsDivider />\n        <DBNA\n          label=\"Download\"\n          icon={<DownloadIcon />}\n          handleChange={() => handleChange('download')}\n        />\n        <ControlsDivider />\n        <DBNA\n          label={\n            <>\n              <Typography sx={{ fontSize: '0.75rem', fontWeight: 'bold' }}>\n                Order\n              </Typography>\n              <Typography sx={{ fontSize: '0.75rem', fontWeight: 'bold' }}>\n                Print(s)\n              </Typography>\n            </>\n          }\n          icon={<PrintIcon />}\n          handleChange={() => handleChange('print')}\n        />\n      </List>\n    </DesktopDrawer>\n  );\n}\n\nDesktopActions.propTypes = {\n  actionsRef: PropTypes.oneOfType([\n    PropTypes.func,\n    PropTypes.shape({ current: PropTypes.instanceOf(Element) }),\n  ]).isRequired,\n  onDownload: PropTypes.func.isRequired,\n  onSave: PropTypes.func.isRequired,\n};\n","import PropTypes from 'prop-types';\nimport Typography from '@mui/material/Typography';\nimport Dialog from '@mui/material/Dialog';\nimport DialogTitle from '@mui/material/DialogTitle';\nimport DialogContent from '@mui/material/DialogContent';\nimport DialogContentText from '@mui/material/DialogContentText';\nimport DialogActions from '@mui/material/DialogActions';\nimport Button from '@mui/material/Button';\nimport { alpha } from '@mui/material/styles';\n\nexport default function ClearCollageDialog({ open, onSubmit, onCancel }) {\n  return (\n    <Dialog open={open}>\n      <DialogTitle\n        sx={{\n          textAlign: 'center',\n          fontWeight: 'bold',\n          color: alpha('#000', 0.8),\n        }}\n      >\n        Clear Collage\n      </DialogTitle>\n      <DialogContent dividers>\n        <DialogContentText sx={{ fontWeight: 'bold', color: 'gray' }}>\n          Do you want to clear collage?\n        </DialogContentText>\n        <Typography\n          variant=\"subtitle2\"\n          sx={{ color: 'red', fontWeight: 'bold' }}\n          noWrap\n        >\n          Note:\n        </Typography>\n        <Typography sx={{ fontSize: '0.8rem', color: 'gray' }}>\n          This change is not reversible\n        </Typography>\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={onSubmit} sx={{ color: 'red' }}>\n          {' '}\n          Clear{' '}\n        </Button>\n        <Button variant=\"outlined\" onClick={onCancel}>\n          {' '}\n          Cancel{' '}\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n\nClearCollageDialog.propTypes = {\n  open: PropTypes.bool.isRequired,\n  onSubmit: PropTypes.func.isRequired,\n  onCancel: PropTypes.func.isRequired,\n};\n","import PropTypes from 'prop-types';\nimport { useState } from 'react';\nimport Stack from '@mui/material/Stack';\nimport RefreshIcon from '@mui/icons-material/Refresh';\nimport EditIcon from '@mui/icons-material/Edit';\nimport PhotoIcon from '@mui/icons-material/Photo';\nimport AutoAwesomeMosaicIcon from '@mui/icons-material/AutoAwesomeMosaic';\nimport DesktopDrawer from 'components/collage/DesktopDrawer';\nimport DBNA from 'components/collage/DesktopActionItem';\nimport ControlsDivider from 'components/collage/ControlsDivider';\nimport List from '@mui/material/List';\nimport { alpha } from '@mui/material/styles';\n\nimport ClearCollageDialog from 'components/collage/ClearCollageDialog';\n\nexport default function DesktopControls({\n  innerRef,\n  onRefresh,\n  photosComp,\n  editComp,\n  handleClear,\n  clearDelete,\n}) {\n  const [imageOptionsOpen, setImageOptionsOpen] = useState(false);\n  const [editOptionsOpen, setEditOptionsOpen] = useState(false);\n  const [clearOpen, setClearOpen] = useState(false);\n  const closeAll = () => {\n    clearDelete();\n    setImageOptionsOpen(false);\n    setEditOptionsOpen(false);\n    setClearOpen(false);\n  };\n  const handlePhotosClick = () => {\n    if (imageOptionsOpen) {\n      setImageOptionsOpen(false);\n    } else {\n      closeAll();\n      setImageOptionsOpen(true);\n    }\n  };\n\n  const handleEditClick = () => {\n    if (editOptionsOpen) {\n      setEditOptionsOpen(false);\n    } else {\n      closeAll();\n      setEditOptionsOpen(true);\n    }\n  };\n  const handleRearrange = () => {\n    closeAll();\n    onRefresh();\n  };\n\n  const handleClearClick = () => {\n    console.log('clear open', clearOpen);\n    if (clearOpen) {\n      setClearOpen(false);\n    } else {\n      closeAll();\n      setClearOpen(true);\n    }\n  };\n\n  const handleClearClose = () => setClearOpen(false);\n  const handleClearSubmit = () => {\n    handleClearClose();\n    handleClear();\n  };\n\n  console.log('clear open', clearOpen);\n  console.log('rendering desktop controls');\n  return (\n    <DesktopDrawer anchor=\"left\">\n      <Stack direction=\"row\" spacing={2} alignItems=\"center\" ref={innerRef}>\n        <List\n          sx={{\n            backgroundColor: alpha('#fff', 0.1),\n            borderRadius: '0 10px 10px 0',\n          }}\n        >\n          <DBNA\n            label=\"Rearrange\"\n            icon={<AutoAwesomeMosaicIcon />}\n            handleChange={handleRearrange}\n          />\n          <ControlsDivider />\n          <DBNA\n            label=\"Photos\"\n            icon={<PhotoIcon />}\n            handleChange={handlePhotosClick}\n          />\n          <ControlsDivider />\n          <DBNA\n            label=\"Edit\"\n            icon={<EditIcon />}\n            handleChange={handleEditClick}\n          />\n          <ControlsDivider />\n          <DBNA\n            label=\"Clear\"\n            icon={<RefreshIcon />}\n            handleChange={handleClearClick}\n          />\n        </List>\n        {imageOptionsOpen ? photosComp : null}\n        {editOptionsOpen ? editComp : null}\n        <ClearCollageDialog\n          open={clearOpen}\n          onSubmit={handleClearSubmit}\n          onCancel={handleClearClose}\n        />\n      </Stack>\n    </DesktopDrawer>\n  );\n}\n\nDesktopControls.propTypes = {\n  innerRef: PropTypes.oneOfType([\n    PropTypes.func,\n    PropTypes.shape({ current: PropTypes.instanceOf(Element) }),\n  ]).isRequired,\n  onRefresh: PropTypes.func.isRequired,\n  photosComp: PropTypes.node.isRequired,\n  editComp: PropTypes.node.isRequired,\n  handleClear: PropTypes.func.isRequired,\n  clearDelete: PropTypes.func.isRequired,\n};\n","import PropTypes from 'prop-types';\nimport DBNA from 'components/collage/DesktopActionItem';\nimport ControlsDivider from 'components/collage/ControlsDivider';\nimport List from '@mui/material/List';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport AddPhotoAlternateIcon from '@mui/icons-material/AddPhotoAlternate';\nimport { alpha } from '@mui/material/styles';\n\nexport default function DesktopImageOptions({ onDelete, onAdd, clearDelete }) {\n  const handleAdd = () => {\n    clearDelete();\n    onAdd();\n  };\n\n  return (\n    <List\n      sx={{\n        backgroundColor: alpha('#fff', 0.15),\n        borderRadius: '10px 10px 10px 10px',\n        height: 'fit-content',\n      }}\n    >\n      <DBNA\n        label=\"Add\"\n        icon={<AddPhotoAlternateIcon />}\n        handleChange={handleAdd}\n      />\n      <ControlsDivider />\n      <DBNA label=\"Delete\" icon={<DeleteIcon />} handleChange={onDelete} />\n    </List>\n  );\n}\n\nDesktopImageOptions.propTypes = {\n  onDelete: PropTypes.func.isRequired,\n  onAdd: PropTypes.func.isRequired,\n  clearDelete: PropTypes.func.isRequired,\n};\n","import PropTypes from 'prop-types';\nimport Typography from '@mui/material/Typography';\nimport Slider from '@mui/material/Slider';\nimport Stack from '@mui/material/Stack';\n// import { alpha } from '@mui/material/styles';\n\nexport default function PaddingControl({ padding, handlePaddingChange }) {\n  return (\n    <Stack\n      direction=\"column\"\n      justifyContent=\"center\"\n      alignItems=\"start\"\n      sx={{ backgroundColor: 'transparent' }}\n    >\n      <Typography\n        sx={{\n          fontWeight: 'bold',\n          color: 'gray',\n          fontSize: '0.87rem',\n          mixBlendMode: 'difference',\n        }}\n      >\n        Padding\n      </Typography>\n      <Slider\n        aria-label=\"Padding\"\n        defaultValue={0}\n        value={padding}\n        valueLabelDisplay=\"auto\"\n        step={0.1}\n        min={0}\n        max={10}\n        onChange={handlePaddingChange}\n        sx={{ color: 'white' }}\n      />\n    </Stack>\n  );\n}\n\nPaddingControl.propTypes = {\n  padding: PropTypes.number.isRequired,\n  handlePaddingChange: PropTypes.func.isRequired,\n};\n","import PropTypes from 'prop-types';\nimport Typography from '@mui/material/Typography';\nimport Slider from '@mui/material/Slider';\nimport Stack from '@mui/material/Stack';\n// import { alpha } from '@mui/material/styles';\n\nexport default function RadiusControl({ radius, handleRadiusChange }) {\n  return (\n    <Stack\n      direction=\"column\"\n      justifyContent=\"center\"\n      alignItems=\"start\"\n      sx={{ backgroundColor: 'transparent' }}\n    >\n      <Typography\n        sx={{\n          fontWeight: 'bold',\n          color: 'gray',\n          fontSize: '0.87rem',\n        }}\n      >\n        Corner Radius\n      </Typography>\n      <Slider\n        aria-label=\"Corner Radius\"\n        defaultValue={0}\n        value={radius}\n        valueLabelDisplay=\"auto\"\n        step={1}\n        min={0}\n        max={40}\n        onChange={handleRadiusChange}\n        sx={{ color: 'white' }}\n      />\n    </Stack>\n  );\n}\n\nRadiusControl.propTypes = {\n  radius: PropTypes.number.isRequired,\n  handleRadiusChange: PropTypes.func.isRequired,\n};\n","import PropTypes from 'prop-types';\nimport Typography from '@mui/material/Typography';\nimport Box from '@mui/material/Box';\nimport Stack from '@mui/material/Stack';\nimport { ChromePicker } from 'react-color';\nimport IconButton from '@mui/material/IconButton';\nimport CloseIcon from '@mui/icons-material/Close';\n\nexport default function ColorControl({\n  color,\n  displayColorPicker,\n  handleClick,\n  handleClose,\n  handleChange,\n}) {\n  console.log('color control', color, displayColorPicker);\n  return (\n    <Stack\n      direction=\"row\"\n      alignItems=\"center\"\n      justifyContent=\"space-between\"\n      spacing={2}\n      sx={{ my: 2 }}\n    >\n      <Typography\n        sx={{ fontWeight: 'bold', color: 'gray', fontSize: '0.87rem' }}\n      >\n        Background Color\n      </Typography>\n      <Box\n        component=\"div\"\n        sx={{\n          padding: '2px',\n          background: '#fff',\n          borderRadius: '5px',\n          boxShadow: '0 0 0 1px rgba(0,0,0,.1)',\n          display: 'inline-block',\n          cursor: 'pointer',\n        }}\n        onClick={handleClick}\n      >\n        <Box\n          component=\"div\"\n          sx={{\n            width: '70px',\n            height: '30px',\n            borderRadius: '18px',\n            background: `rgba(${color.r}, ${color.g}, ${color.b}, ${color.a})`,\n          }}\n        />\n      </Box>\n      <ColorPicker\n        open={displayColorPicker}\n        color={color}\n        handleClose={handleClose}\n        handleChange={handleChange}\n      />\n    </Stack>\n  );\n}\n\nColorControl.propTypes = {\n  color: PropTypes.shape({\n    r: PropTypes.number.isRequired,\n    g: PropTypes.number.isRequired,\n    b: PropTypes.number.isRequired,\n    a: PropTypes.number.isRequired,\n  }).isRequired,\n  displayColorPicker: PropTypes.bool.isRequired,\n  handleClose: PropTypes.func.isRequired,\n  handleChange: PropTypes.func.isRequired,\n  handleClick: PropTypes.func.isRequired,\n};\n\nexport function ColorPicker({ open, color, handleClose, handleChange }) {\n  console.log(handleClose);\n  return open ? (\n    <>\n      <Box\n        component=\"div\"\n        sx={{\n          position: 'absolute',\n          zIndex: 3,\n          bottom: 10,\n        }}\n      >\n        <IconButton\n          sx={{\n            position: 'absolute',\n            top: 0,\n            right: 0,\n            zIndex: 2,\n            backgroundColor: 'button.main',\n            p: 0,\n            transform: 'translate(0, -110%)',\n            border: '2px solid black',\n          }}\n          onClick={handleClose}\n        >\n          <CloseIcon />\n        </IconButton>\n        <ChromePicker color={color} onChange={handleChange} />\n      </Box>\n    </>\n  ) : null;\n}\n\nColorPicker.propTypes = {\n  color: PropTypes.shape({\n    r: PropTypes.number.isRequired,\n    g: PropTypes.number.isRequired,\n    b: PropTypes.number.isRequired,\n    a: PropTypes.number.isRequired,\n  }).isRequired,\n  open: PropTypes.bool.isRequired,\n  handleClose: PropTypes.func.isRequired,\n  handleChange: PropTypes.func.isRequired,\n};\n","import PropTypes from 'prop-types';\nimport { useState } from 'react';\nimport { alpha } from '@mui/material/styles';\nimport Stack from '@mui/material/Stack';\nimport Typography from '@mui/material/Typography';\n//  import FormLabel from '@mui/material/FormLabel';\nimport TextField from '@mui/material/TextField';\nimport FormGroup from '@mui/material/FormGroup';\nimport FormControlLabel from '@mui/material/FormControlLabel';\nimport Checkbox from '@mui/material/Checkbox';\n\nexport default function TextControl({\n  text,\n  handleTextChange,\n  topText,\n  handlePositionChange,\n}) {\n  const [collageTextError] = useState('');\n  return (\n    <Stack\n      sx={{\n        backgroundColor: 'transparent',\n      }}\n    >\n      <Stack\n        direction=\"row\"\n        alignItems=\"center\"\n        justifyContent=\"space-between\"\n        spacing={2}\n      >\n        <Typography\n          sx={{ fontWeight: 'bold', color: 'gray', fontSize: '0.87rem' }}\n        >\n          Collage Text\n        </Typography>\n        <FormGroup row>\n          <FormControlLabel\n            disableTypography\n            control={\n              <Checkbox\n                size=\"small\"\n                checked={topText === false}\n                onChange={() => handlePositionChange(false)}\n                sx={{ color: 'white', '&.Mui-checked': { color: 'white' } }}\n              />\n            }\n            label={\n              <Typography fontSize=\"0.8rem\" fontWeight=\"bold\">\n                Bottom\n              </Typography>\n            }\n            sx={{ color: 'gray', fontWeight: 'bold' }}\n          />\n          <FormControlLabel\n            disableTypography\n            control={\n              <Checkbox\n                size=\"small\"\n                checked={topText === true}\n                onChange={() => handlePositionChange(true)}\n                sx={{ color: 'gray', '&.Mui-checked': { color: 'white' } }}\n              />\n            }\n            label={\n              <Typography fontSize=\"0.8rem\" fontWeight=\"bold\">\n                Top\n              </Typography>\n            }\n            sx={{ color: 'gray', fontWeight: 'bold', fontSize: '0.8rem' }}\n          />\n        </FormGroup>\n      </Stack>\n      <TextField\n        variant=\"outlined\"\n        label=\"\"\n        defaultValue={text}\n        onChange={handleTextChange}\n        size=\"small\"\n        sx={{ width: '100%', mb: 1 }}\n        InputProps={{ sx: { backgroundColor: alpha('#fff', 0.9) } }}\n        helperText={\n          <Typography sx={{ color: 'gray', fontSize: '0.75rem' }}>\n            {collageTextError}\n          </Typography>\n        }\n        error={!!collageTextError}\n      />\n    </Stack>\n  );\n}\n\nTextControl.propTypes = {\n  text: PropTypes.string.isRequired,\n  handleTextChange: PropTypes.func.isRequired,\n  topText: PropTypes.bool.isRequired,\n  handlePositionChange: PropTypes.func.isRequired,\n};\n","import PropTypes from 'prop-types';\nimport { alpha } from '@mui/material/styles';\nimport Stack from '@mui/material/Stack';\nimport PaddingControl from 'components/collage/PaddingControl';\nimport RadiusControl from 'components/collage/RadiusControl';\nimport ColorControl from 'components/collage/ColorControl';\nimport TextControl from 'components/collage/TextControl';\n\nexport default function EditControl({ optionProps }) {\n  const {\n    options,\n    handlePaddingChange,\n    displayColorPicker,\n    handleColorChange,\n    handleColorClose,\n    handleColorClick,\n    handleRadiusChange,\n    handleTextChange,\n    handlePositionChange,\n  } = optionProps;\n\n  return (\n    <Stack\n      direction=\"column\"\n      spacing={4}\n      sx={{\n        p: 2,\n        backgroundColor: alpha('#000', 0.7),\n        borderRadius: '10px 10px 10px 10px',\n        boxShadow: '0 0 10px inset rgba(255, 255, 255, 0.3)',\n      }}\n    >\n      <PaddingControl\n        padding={options.padding}\n        handlePaddingChange={handlePaddingChange}\n      />\n      <RadiusControl\n        radius={options.borderRadius}\n        handleRadiusChange={handleRadiusChange}\n      />\n      <ColorControl\n        color={options.color}\n        displayColorPicker={displayColorPicker}\n        handleChange={handleColorChange}\n        handleClose={handleColorClose}\n        handleClick={handleColorClick}\n      />\n      <TextControl\n        text={options.text}\n        topText={options.topText}\n        handleTextChange={handleTextChange}\n        handlePositionChange={handlePositionChange}\n      />\n    </Stack>\n  );\n}\n\nEditControl.propTypes = {\n  optionProps: PropTypes.shape({\n    options: PropTypes.shape({\n      padding: PropTypes.number.isRequired,\n      borderRadius: PropTypes.number.isRequired,\n      text: PropTypes.string.isRequired,\n      topText: PropTypes.bool.isRequired,\n      color: PropTypes.shape({\n        r: PropTypes.number.isRequired,\n        g: PropTypes.number.isRequired,\n        b: PropTypes.number.isRequired,\n        a: PropTypes.number.isRequired,\n      }),\n    }).isRequired,\n    handlePaddingChange: PropTypes.func.isRequired,\n    handleColorClose: PropTypes.func.isRequired,\n    handleColorChange: PropTypes.func.isRequired,\n    handleColorClick: PropTypes.func.isRequired,\n    handleRadiusChange: PropTypes.func.isRequired,\n    handleTextChange: PropTypes.func.isRequired,\n    handlePositionChange: PropTypes.func.isRequired,\n    displayColorPicker: PropTypes.bool.isRequired,\n  }).isRequired,\n};\n","import PropTypes from 'prop-types';\nimport BottomNavigationAction from '@mui/material/BottomNavigationAction';\n\nexport default function MBNA({ label, icon, handleChange }) {\n  return (\n    <BottomNavigationAction\n      showLabel\n      label={label}\n      value={label.toLowerCase()}\n      icon={icon}\n      sx={{\n        fontWeight: 'bold',\n        color: 'gray',\n        '&.Mui-selected': { color: 'white', outline: 'none' },\n      }}\n      onClick={handleChange}\n    />\n  );\n}\n\nMBNA.propTypes = {\n  label: PropTypes.string.isRequired,\n  icon: PropTypes.node.isRequired,\n  handleChange: PropTypes.func.isRequired,\n};\n","import PropTypes from 'prop-types';\nimport BottomNavigation from '@mui/material/BottomNavigation';\nimport SaveIcon from '@mui/icons-material/Save';\nimport DownloadIcon from '@mui/icons-material/Download';\nimport PrintIcon from '@mui/icons-material/Print';\nimport { alpha } from '@mui/material/styles';\nimport MBNA from 'components/collage/MobileActionItem';\n\nexport default function MobileActions({ actionsRef, onDownload, onSave }) {\n  return (\n    <BottomNavigation\n      ref={actionsRef}\n      showLabels\n      sx={{ py: 1, fontWeight: 'bold', backgroundColor: alpha('#fff', 0.2) }}\n    >\n      <MBNA label=\"Save\" icon={<SaveIcon />} handleChange={onSave} />\n      <MBNA\n        label=\"Download\"\n        icon={<DownloadIcon />}\n        handleChange={onDownload}\n      />\n      <MBNA label=\"Print\" icon={<PrintIcon />} handleChange={() => {}} />\n    </BottomNavigation>\n  );\n}\n\nMobileActions.propTypes = {\n  actionsRef: PropTypes.oneOfType([\n    PropTypes.func,\n    PropTypes.shape({ current: PropTypes.instanceOf(Element) }),\n  ]).isRequired,\n  onDownload: PropTypes.func.isRequired,\n  onSave: PropTypes.func.isRequired,\n};\n","import PropTypes from 'prop-types';\nimport BottomNavigation from '@mui/material/BottomNavigation';\nimport BottomNavigationAction from '@mui/material/BottomNavigationAction';\nimport RefreshIcon from '@mui/icons-material/Refresh';\nimport EditIcon from '@mui/icons-material/Edit';\nimport PhotoIcon from '@mui/icons-material/Photo';\nimport AutoAwesomeMosaicIcon from '@mui/icons-material/AutoAwesomeMosaic';\nimport { alpha } from '@mui/material/styles';\n\nexport default function MainControls({ value, handleChange }) {\n  return (\n    <BottomNavigation\n      showLabels\n      value={value}\n      onChange={handleChange}\n      sx={{\n        fontWeight: 'bold',\n        backgroundColor: alpha('#fff', 0.2),\n        '&.Mui-selected': { color: 'white' },\n      }}\n    >\n      <BottomNavigationAction\n        label=\"Rearrange\"\n        value=\"rearrange\"\n        icon={<AutoAwesomeMosaicIcon />}\n        sx={{\n          fontWeight: 'bold',\n          color: 'gray',\n          '&.Mui-selected': { color: 'white', outline: 'none' },\n        }}\n      />\n      <BottomNavigationAction\n        label=\"Photos\"\n        value=\"photo\"\n        icon={<PhotoIcon />}\n        sx={{\n          fontWeight: 'bold',\n          color: 'gray',\n          '&.Mui-selected': { color: 'white', outline: 'none' },\n        }}\n      />\n      <BottomNavigationAction\n        label=\"Edit\"\n        value=\"edit\"\n        icon={<EditIcon />}\n        sx={{\n          fontWeight: 'bold',\n          color: 'gray',\n          '&.Mui-selected': { color: 'white', outline: 'none' },\n        }}\n      />\n      <BottomNavigationAction\n        label=\"Clear\"\n        value=\"clear\"\n        icon={<RefreshIcon />}\n        sx={{\n          fontWeight: 'bold',\n          color: 'gray',\n          '&.Mui-selected': { color: 'white', outline: 'none' },\n        }}\n      />\n    </BottomNavigation>\n  );\n}\n\nMainControls.propTypes = {\n  value: PropTypes.string.isRequired,\n  handleChange: PropTypes.func.isRequired,\n};\n","import PropTypes from 'prop-types';\nimport Box from '@mui/material/Box';\nimport BottomNavigation from '@mui/material/BottomNavigation';\nimport BottomNavigationAction from '@mui/material/BottomNavigationAction';\nimport Typography from '@mui/material/Typography';\nimport PaddingIcon from '@mui/icons-material/Padding';\nimport CropFreeIcon from '@mui/icons-material/CropFree';\nimport SquareIcon from '@mui/icons-material/Square';\nimport CloseIcon from '@mui/icons-material/Close';\nimport TitleIcon from '@mui/icons-material/Title';\nimport { alpha } from '@mui/material/styles';\n\nexport default function EditOptions({\n  color,\n  editOptionsValue,\n  open,\n  handleOptionsClose,\n  handleEditOptionsClick,\n}) {\n  return open ? (\n    <Box sx={{ position: 'relative' }}>\n      <BottomNavigation\n        showLabels\n        value={editOptionsValue}\n        onChange={handleEditOptionsClick}\n        sx={{\n          display: 'flex',\n          fontWeight: 'bold',\n          backgroundColor: alpha('#fff', 0.2),\n          borderTop: '1px solid gray',\n          position: 'relative',\n          alignItems: 'center',\n        }}\n      >\n        <BottomNavigationAction\n          label={\n            <Typography fontSize=\"0.70rem\" fontWeight=\"bold\">\n              Padding\n            </Typography>\n          }\n          value=\"padding\"\n          icon={<PaddingIcon />}\n          sx={{\n            fontWeight: 'bold',\n            color: 'gray',\n            '&.Mui-selected': { color: 'white', outline: 'none' },\n          }}\n        />\n        <BottomNavigationAction\n          label={\n            <Typography fontSize=\"0.70rem\" fontWeight=\"bold\">\n              Corner\n            </Typography>\n          }\n          value=\"border radius\"\n          icon={<CropFreeIcon />}\n          sx={{\n            fontWeight: 'bold',\n            color: 'gray',\n            '&.Mui-selected': { color: 'white', outline: 'none' },\n          }}\n        />\n        <BottomNavigationAction\n          label={\n            <Typography fontSize=\"0.70rem\" fontWeight=\"bold\">\n              Color\n            </Typography>\n          }\n          value=\"color\"\n          icon={\n            <SquareIcon\n              sx={{\n                fill: `rgba(${color.r}, ${color.g}, ${color.b}, ${color.a})`,\n                borderRadius: '5px',\n              }}\n            />\n          }\n          sx={{\n            fontWeight: 'bold',\n            color: 'gray',\n            '&.Mui-selected': { color: 'white', outline: 'none' },\n          }}\n        />\n        <BottomNavigationAction\n          label=\"Text\"\n          value=\"text\"\n          icon={<TitleIcon />}\n          sx={{\n            fontWeight: 'bold',\n            color: 'gray',\n            '&.Mui-selected': { color: 'white', outline: 'none' },\n          }}\n        />\n      </BottomNavigation>\n      <CloseIcon\n        fontSize=\"1rem\"\n        sx={{\n          position: 'absolute',\n          top: 5,\n          right: 5,\n          fill: 'white',\n          backgroundColor: 'gray',\n          borderRadius: '50%',\n          padding: '2px',\n        }}\n        onClick={handleOptionsClose}\n      />\n    </Box>\n  ) : null;\n}\n\nEditOptions.propTypes = {\n  editOptionsValue: PropTypes.string.isRequired,\n  open: PropTypes.bool.isRequired,\n  handleOptionsClose: PropTypes.func.isRequired,\n  handleEditOptionsClick: PropTypes.func.isRequired,\n  color: PropTypes.shape({\n    r: PropTypes.number.isRequired,\n    g: PropTypes.number.isRequired,\n    b: PropTypes.number.isRequired,\n    a: PropTypes.number.isRequired,\n  }).isRequired,\n};\n","import PropTypes from 'prop-types';\nimport Box from '@mui/material/Box';\nimport BottomNavigation from '@mui/material/BottomNavigation';\nimport CloseIcon from '@mui/icons-material/Close';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport AddPhotoAlternateIcon from '@mui/icons-material/AddPhotoAlternate';\nimport { alpha } from '@mui/material/styles';\nimport MBNA from 'components/collage/MobileActionItem';\n\nexport default function ImageOptions({\n  open,\n  value,\n  handleOptionsClose,\n  handleDelete,\n  handleAdd,\n}) {\n  return open ? (\n    <Box sx={{ position: 'relative' }}>\n      <BottomNavigation\n        showLabels\n        value={value}\n        sx={{\n          fontWeight: 'bold',\n          backgroundColor: alpha('#fff', 0.2),\n          borderTop: '1px solid gray',\n          '&.Mui-selected': { color: 'white' },\n        }}\n      >\n        <MBNA\n          label=\"Delete\"\n          icon={<DeleteIcon />}\n          handleChange={handleDelete}\n        />\n        <MBNA\n          label=\"Add\"\n          icon={<AddPhotoAlternateIcon />}\n          handleChange={handleAdd}\n        />\n      </BottomNavigation>\n      <CloseIcon\n        fontSize=\"1rem\"\n        sx={{\n          position: 'absolute',\n          top: 5,\n          right: 5,\n          fill: 'white',\n          backgroundColor: 'gray',\n          borderRadius: '50%',\n          padding: '2px',\n        }}\n        onClick={handleOptionsClose}\n      />\n    </Box>\n  ) : null;\n}\n\nImageOptions.propTypes = {\n  open: PropTypes.bool.isRequired,\n  value: PropTypes.string.isRequired,\n  handleOptionsClose: PropTypes.func.isRequired,\n  handleDelete: PropTypes.func.isRequired,\n  handleAdd: PropTypes.func.isRequired,\n};\n","import PropTypes from 'prop-types';\nimport { useState, useEffect } from 'react';\nimport Paper from '@mui/material/Paper';\nimport Box from '@mui/material/Box';\nimport Typography from '@mui/material/Typography';\nimport { alpha } from '@mui/material/styles';\n\nimport PaddingControl from 'components/collage/PaddingControl';\nimport RadiusControl from 'components/collage/RadiusControl';\nimport TextControl from 'components/collage/TextControl';\nimport { ColorPicker } from 'components/collage/ColorControl';\nimport MainControls from 'components/collage/MainControls';\nimport EditOptions from 'components/collage/EditOptions';\nimport ImageOptions from 'components/collage/ImageOptions';\nimport ClearCollageDialog from 'components/collage/ClearCollageDialog';\n\nexport default function MobileControls({\n  optionProps,\n  actionProps,\n  dimensionProps,\n  handleClear,\n}) {\n  const {\n    options,\n    handlePaddingChange,\n    handleRadiusChange,\n    handleColorClose,\n    handleColorClick,\n    handleColorChange,\n    handleTextChange,\n    handlePositionChange,\n    displayColorPicker,\n  } = optionProps;\n\n  const { onRefresh, onDelete, clearDelete } = actionProps;\n  const { footerRef, handleImageAddClick } = dimensionProps;\n\n  const [mainOpen, setMainOpen] = useState(true);\n  const [value, setValue] = useState('');\n  const [editOpen, setEditOpen] = useState(false);\n  const [clearOpen, setClearOpen] = useState(false);\n  const [editControl, setEditControl] = useState(null);\n  const [editOptionsValue, setEditOptionsValue] = useState('');\n  const [imageOpen, setImageOpen] = useState(false);\n  const [imageValue, setImageValue] = useState('');\n\n  const handleImageOptionsClose = () => {\n    setImageOpen(false);\n    setImageValue('');\n    setMainOpen(true);\n    clearDelete();\n    setValue('');\n  };\n\n  const handleEditOptionsClose = () => {\n    setEditOpen(false);\n    setEditControl(null);\n    setEditOptionsValue('');\n    setMainOpen(true);\n    setValue('');\n  };\n\n  const handleEditOptionsClick = (e, nV) => {\n    console.log('handle edit options click');\n    setEditOptionsValue(nV);\n    if (nV === 'padding') {\n      setEditControl(\n        <PaddingControl\n          padding={options.padding}\n          handlePaddingChange={handlePaddingChange}\n        />\n      );\n    } else if (nV === 'border radius') {\n      setEditControl(\n        <RadiusControl\n          radius={options.borderRadius}\n          handleRadiusChange={handleRadiusChange}\n        />\n      );\n    } else if (nV === 'color') {\n      handleColorClick();\n      setEditControl(\n        <ColorPicker\n          open={displayColorPicker}\n          color={options.color}\n          handleChange={handleColorChange}\n          handleClose={() => {\n            setEditControl(null);\n            handleColorClose();\n          }}\n        />\n      );\n    } else if (nV === 'text') {\n      console.log(nV);\n      setEditControl(\n        <TextControl\n          text={options.text}\n          handleTextChange={handleTextChange}\n          topText={options.topText}\n          handlePositionChange={handlePositionChange}\n        />\n      );\n    } else {\n      setEditControl(<Typography color=\"secondary\">{nV}</Typography>);\n    }\n  };\n\n  useEffect(() => {\n    if (editOpen && editOptionsValue === 'padding') {\n      setEditControl(\n        <PaddingControl\n          padding={options.padding}\n          handlePaddingChange={handlePaddingChange}\n        />\n      );\n    }\n  }, [options.padding, editOpen]);\n  // }, [options.padding, editOpen, editOptionsValue]);\n\n  useEffect(() => {\n    if (editOpen && editOptionsValue === 'border radius') {\n      setEditControl(\n        <RadiusControl\n          radius={options.borderRadius}\n          handleRadiusChange={handleRadiusChange}\n        />\n      );\n    }\n  }, [options.borderRadius, editOpen]);\n  // }, [options.borderRadius, editOpen, editOptionsValue]);\n\n  useEffect(() => {\n    if (editOpen && editOptionsValue === 'color') {\n      setEditControl(\n        <ColorPicker\n          open={displayColorPicker}\n          color={options.color}\n          handleChange={handleColorChange}\n          handleClose={handleColorClose}\n        />\n      );\n    }\n  }, [options.color, editOpen, displayColorPicker]);\n  // }, [options.color, editOpen, editOptionsValue, displayColorPicker]);\n\n  useEffect(() => {\n    console.log('text control useEffect');\n    if (editOpen && editOptionsValue === 'text') {\n      setEditControl(\n        <TextControl\n          text={options.text}\n          handleTextChange={handleTextChange}\n          topText={options.topText}\n          handlePositionChange={handlePositionChange}\n        />\n      );\n    }\n  }, [options.text, editOpen, options.topText]);\n  // }, [options.text, editOpen, editOptionsValue, options.topText]);\n\n  const handleImageClose = () => {\n    setImageValue('');\n    setImageOpen(false);\n    setMainOpen(true);\n  };\n\n  const handleChange = (event, newValue) => {\n    clearDelete();\n    handleImageClose();\n    handleEditOptionsClose();\n    setValue(newValue);\n    if (newValue === 'rearrange') {\n      onRefresh();\n    } else if (newValue === 'photo') {\n      setMainOpen(false);\n      setImageOpen(true);\n    } else if (newValue === 'edit') {\n      setMainOpen(false);\n      setEditOpen(true);\n    } else if (newValue === 'clear') {\n      setClearOpen(true);\n      //  handleClear();\n    } else {\n      console.log('functionality for ', newValue, 'not yet implemented');\n    }\n  };\n\n  const handleImageAdd = () => {\n    clearDelete();\n    handleImageAddClick();\n  };\n\n  const handleClearSubmit = () => {\n    handleClear();\n    setClearOpen(false);\n    setValue('');\n  };\n\n  const handleClearCancel = () => {\n    setClearOpen(false);\n    setValue('');\n  };\n\n  console.log('rerendering', editControl);\n  return (\n    <Paper\n      ref={footerRef}\n      sx={{\n        position: 'fixed',\n        bottom: 0,\n        left: 0,\n        right: 0,\n        mt: 1,\n        backgroundColor: 'black',\n        borderRadius: 0,\n      }}\n      elevation={4}\n    >\n      <ClearCollageDialog\n        open={clearOpen}\n        onSubmit={handleClearSubmit}\n        onCancel={handleClearCancel}\n      />\n      {editControl ? (\n        <Box\n          sx={{\n            backgroundColor: alpha('#fff', 0.15),\n            p: 1,\n          }}\n        >\n          {editControl}\n        </Box>\n      ) : null}\n      <ImageOptions\n        open={imageOpen}\n        value={imageValue}\n        handleDelete={onDelete}\n        handleAdd={handleImageAdd}\n        handleOptionsClose={handleImageOptionsClose}\n      />\n      <EditOptions\n        color={options.color}\n        editOptionsValue={editOptionsValue}\n        open={editOpen}\n        handleOptionsClose={handleEditOptionsClose}\n        handleEditOptionsClick={handleEditOptionsClick}\n      />\n      {mainOpen ? (\n        <MainControls value={value} handleChange={handleChange} />\n      ) : null}\n    </Paper>\n  );\n}\n\nMobileControls.propTypes = {\n  optionProps: PropTypes.shape({\n    options: PropTypes.shape({\n      padding: PropTypes.number.isRequired,\n      borderRadius: PropTypes.number.isRequired,\n      text: PropTypes.string.isRequired,\n      topText: PropTypes.bool.isRequired,\n      color: PropTypes.shape({\n        r: PropTypes.number.isRequired,\n        g: PropTypes.number.isRequired,\n        b: PropTypes.number.isRequired,\n        a: PropTypes.number.isRequired,\n      }),\n    }).isRequired,\n    handlePaddingChange: PropTypes.func.isRequired,\n    handleRadiusChange: PropTypes.func.isRequired,\n    handleColorChange: PropTypes.func.isRequired,\n    handleColorClose: PropTypes.func.isRequired,\n    handleColorClick: PropTypes.func.isRequired,\n    displayColorPicker: PropTypes.bool.isRequired,\n    handleTextChange: PropTypes.func.isRequired,\n    handlePositionChange: PropTypes.func.isRequired,\n  }).isRequired,\n  actionProps: PropTypes.shape({\n    onRefresh: PropTypes.func.isRequired,\n    onDelete: PropTypes.func.isRequired,\n    clearDelete: PropTypes.func.isRequired,\n  }).isRequired,\n  handleClear: PropTypes.func.isRequired,\n  dimensionProps: PropTypes.shape({\n    handleImageAddClick: PropTypes.func.isRequired,\n    footerRef: PropTypes.oneOfType([\n      PropTypes.func,\n      PropTypes.shape({ current: PropTypes.instanceOf(Element) }),\n    ]).isRequired,\n  }).isRequired,\n};\n","import PropTypes from 'prop-types';\nimport { useState, useEffect } from 'react';\nimport Dialog from '@mui/material/Dialog';\nimport DialogContent from '@mui/material/DialogContent';\nimport CircularProgress from '@mui/material/CircularProgress';\nimport Stack from '@mui/material/Stack';\n\nfunction SaveDialog({ open }) {\n  console.log('save dialog', open);\n  return (\n    <Dialog open={open}>\n      <DialogContent\n        sx={{\n          alignItems: 'center',\n        }}\n      >\n        <Stack\n          direction=\"row\"\n          justifyContent=\"space-between\"\n          alignItems=\"center\"\n          spacing={4}\n        >\n          <CircularProgress sx={{ mr: 2 }} />\n          Saving your work locally\n        </Stack>\n      </DialogContent>\n    </Dialog>\n  );\n}\n\nSaveDialog.propTypes = {\n  open: PropTypes.bool.isRequired,\n};\n\nexport default function Save({ children, handleSave }) {\n  const [saved, setSaved] = useState(false);\n  const [open, setOpen] = useState(true);\n\n  console.log('save locally', open, saved);\n  useEffect(() => {\n    const saveLocally = async () => {\n      await handleSave();\n      setSaved(true);\n      setOpen(false);\n    };\n    saveLocally();\n  }, []);\n\n  if (!saved) {\n    return <SaveDialog open={open} />;\n  }\n\n  if (saved) return children;\n}\n\nSave.propTypes = {\n  children: PropTypes.node.isRequired,\n  handleSave: PropTypes.func.isRequired,\n};\n","import PropTypes from 'prop-types';\nimport db from 'db';\nimport { useEffect, useState } from 'react';\nimport dbutils from 'components/collage/dbutils';\nimport useBase from 'hooks/collage/base';\n// import utils from 'utils';\nimport { useNavigate } from 'react-router-dom';\nimport Dialog from '@mui/material/Dialog';\nimport Stack from '@mui/material/Stack';\nimport Typography from '@mui/material/Typography';\nimport CircularProgress from '@mui/material/CircularProgress';\nimport DialogContent from '@mui/material/DialogContent';\nimport Box from '@mui/material/Box';\n\nimport Authenticate from 'hocs/require-authentication';\nimport Collage from 'components/collage/Collage';\nimport DownloadDialog from 'components/collage/DownloadDialog';\nimport SaveDialog from 'components/collage/SaveDialog';\nimport SaveStatusDialog from 'components/collage/SaveStatusDialog';\nimport Header from 'components/collage/Header';\nimport Loading from 'components/Loading';\nimport View from 'components/collage/View';\n\nimport DesktopActions from 'components/collage/DesktopActions';\nimport DesktopControls from 'components/collage/DesktopControls';\nimport DesktopImageOptions from 'components/collage/DesktopImageOptions';\nimport EditControl from 'components/collage/EditControl';\nimport MobileActions from 'components/collage/MobileActions';\nimport MobileControls from 'components/collage/MobileControls';\nimport Save from 'hocs/require-saving';\n\nexport default function BaseCollage({ getCollage, clearCollage, saveType }) {\n  console.log('base collage', saveType);\n  const navigate = useNavigate();\n  const [details, setDetails] = useState({});\n  const [status, setStatus] = useState('fetching');\n  const [commonOpen, setCommonOpen] = useState(false);\n  const [commonMessage, setCommonMessage] = useState('');\n\n  const openCommonDialog = (message) => {\n    console.log('opening common dialog with message', message);\n    if (message !== '') {\n      setCommonMessage(message);\n      setCommonOpen(true);\n    }\n  };\n\n  const closeCommonDialog = () => {\n    console.log('closing common dialog', commonMessage);\n    setCommonOpen(false);\n    setCommonMessage('');\n  };\n\n  const [\n    getDetails,\n    collageName,\n    ,\n    collageID,\n    constants,\n    dimensionProps,\n    optionProps,\n    actionProps,\n    imageProps,\n    treeProps,\n    handleClear,\n    collageCallback,\n    handleRemoveImage,\n    newCollage,\n    saveStatus,\n    saveCollage,\n    getSnapshot,\n  ] = useBase(details);\n\n  useEffect(async () => {\n    if (Object.keys(details).length === 0) {\n      setStatus('fetching');\n      const collageDetails =\n        saveType === 'new'\n          ? await getCollage()\n          : await getCollage(\n              imageProps.setImageCount,\n              imageProps.setNewImageCount,\n              imageProps.handleImageData\n            );\n      setStatus('fetch end');\n      console.log('setting collage details', collageDetails);\n      setDetails(collageDetails);\n      if (saveType === 'new') {\n        clearCollage();\n      }\n    }\n  }, []);\n\n  console.log(\n    'base collage',\n    details,\n    imageProps.imgCount,\n    imageProps.loaded,\n    imageProps.images,\n    imageProps.newImagesLoaded,\n    collageName,\n    collageID\n  );\n\n  useEffect(() => {\n    let st = status;\n    // if (st === 'fetching') return;\n    if (\n      imageProps.imgCount === 0 &&\n      Object.keys(details).length === 0 &&\n      st === 'fetch end'\n    ) {\n      st = 'empty';\n    }\n    if (\n      imageProps.images.length > 0 &&\n      imageProps.images.length === imageProps.imgCount\n    ) {\n      st = 'preparing';\n    }\n    if (imageProps.images.length < imageProps.imgCount) {\n      st = 'loading';\n    }\n    if (imageProps.loaded >= imageProps.imgCount && imageProps.imgCount > 0) {\n      st = 'ready';\n    }\n    setStatus(st);\n    console.log(\n      'status calculation',\n      imageProps.loaded,\n      imageProps.imgCount,\n      imageProps.images.length,\n      st,\n      details\n    );\n  }, [imageProps]);\n\n  const clearAll = async () => {\n    openCommonDialog('Deleting Collage');\n    setDetails({});\n    handleClear();\n    await clearCollage();\n    setStatus('fetch end');\n    closeCommonDialog();\n    if (saveType === 'existing') {\n      openCommonDialog('Navigating to collages page');\n      setTimeout(() => {\n        closeCommonDialog();\n        navigate('/collages');\n      }, 3000);\n    }\n  };\n\n  const handleSave = async (name) => {\n    console.log('in handle save', getDetails(name), imageProps.images);\n\n    actionProps.onSaveClick();\n    const res =\n      saveType === 'new' ? await newCollage(name) : await saveCollage(name);\n    console.log('save results', res, collageID);\n    if (res) {\n      setTimeout(() => {\n        if (saveType === 'new') clearAll();\n        actionProps.setSaveStart(false);\n        navigate('/collages');\n      }, 3000);\n    }\n  };\n\n  const saveLocally = async () => {\n    await db.collageDB.details.clear();\n    await db.collageDB.images.clear();\n    await dbutils.save([getSnapshot(collageName, {})], 'details');\n    console.time('collage data saving images');\n    const respImages = await dbutils.save(imageProps.images, 'images');\n    console.timeEnd('collage data saving images');\n    console.log('collage data images responses', respImages);\n  };\n\n  const downloadDialog = (\n    <Save handleSave={saveLocally}>\n      <DownloadDialog\n        open={actionProps.open}\n        onClick={actionProps.onDownloadClick}\n        onClose={actionProps.onDownloadClose}\n        sizes={constants.paperSizes}\n      />\n    </Save>\n  );\n\n  const saveDialog = (\n    <Save handleSave={saveLocally}>\n      <Authenticate>\n        <SaveDialog\n          open={actionProps.saveOpen}\n          onClick={handleSave}\n          onClose={actionProps.onSaveClose}\n        />\n      </Authenticate>\n    </Save>\n  );\n\n  const saveStatusDialog = (\n    <Authenticate>\n      <SaveStatusDialog open={actionProps.saveStart} status={saveStatus} />\n    </Authenticate>\n  );\n\n  const collage = (\n    <Collage\n      dimensionProps={dimensionProps}\n      imageProps={imageProps}\n      actionProps={actionProps}\n      collageCallback={collageCallback}\n      handleRemoveImage={handleRemoveImage}\n      options={optionProps.options}\n      tree={treeProps.tree}\n    />\n  );\n\n  const mobileControls = (\n    <MobileControls\n      optionProps={optionProps}\n      actionProps={actionProps}\n      dimensionProps={dimensionProps}\n      handleClear={clearAll}\n    />\n  );\n\n  const header = (\n    <Header\n      headerRef={dimensionProps.headerRef}\n      name={collageName}\n      handlePreLogin={async () => {\n        openCommonDialog('Saving collage locally');\n        await saveLocally();\n        closeCommonDialog();\n      }}\n    />\n  );\n\n  const desktopPhotosComp = (\n    <DesktopImageOptions\n      onDelete={actionProps.onDelete}\n      onAdd={dimensionProps.handleImageAddClick}\n      clearDelete={actionProps.clearDelete}\n    />\n  );\n  const desktopControls = (\n    <DesktopControls\n      innerRef={dimensionProps.footerRef}\n      onRefresh={actionProps.onRefresh}\n      photosComp={desktopPhotosComp}\n      editComp={<EditControl optionProps={optionProps} />}\n      handleClear={clearAll}\n      clearDelete={actionProps.clearDelete}\n    />\n  );\n\n  const isMobile = window.innerWidth < window.innerHeight;\n  const controls = isMobile ? mobileControls : desktopControls;\n\n  const onSave = async () => {\n    // const userInfo = utils.getUserInfo();\n    // console.log('user info', userInfo);\n    // if (saveType === 'new' && userInfo === '') {\n    //   openCommonDialog('Saving collage locally');\n    //   console.time('saving locally');\n    //   await db.collageDB.details.clear();\n    //   await db.collageDB.images.clear();\n    //   console.timeEnd('saving locally');\n    //   console.time('saving locally state');\n    //   const respdets = await dbutils.save(\n    //     [getSnapshot(collageName, {})],\n    //     'details'\n    //   );\n    //   const respImgs = await dbutils.save(imageProps.images, 'images');\n    //   console.log('save responses', respdets, respImgs);\n    //   console.timeEnd('saving locally state');\n    //   closeCommonDialog();\n    // }\n    actionProps.handleSave();\n  };\n\n  const actionsComp = isMobile ? (\n    <MobileActions\n      actionsRef={dimensionProps.actionsRef}\n      onDownload={actionProps.handleDownload}\n      onSave={onSave}\n    />\n  ) : (\n    <DesktopActions\n      actionsRef={dimensionProps.actionsRef}\n      onDownload={actionProps.handleDownload}\n      onSave={onSave}\n    />\n  );\n\n  return (\n    <Box sx={{ backgroundColor: 'black', height: '100vh' }}>\n      <View\n        open={actionProps.open}\n        saveOpen={actionProps.saveOpen}\n        saveStatusOpen={actionProps.saveStart}\n        dimensionProps={dimensionProps}\n        imageProps={imageProps}\n        header={header}\n        actions={actionsComp}\n        downloadDialog={downloadDialog}\n        saveDialog={saveDialog}\n        saveStatusDialog={saveStatusDialog}\n        collage={collage}\n        controls={controls}\n        status={status}\n        saveType={saveType}\n      />\n      <input\n        ref={dimensionProps.addImageRef}\n        type=\"file\"\n        hidden\n        multiple\n        accept=\"image/*\"\n        onChange={imageProps.handleLoad}\n      />\n      {actionProps.generate ? <Loading title=\"Creating collage ...\" /> : null}\n      <Dialog open={commonOpen}>\n        <DialogContent>\n          <Stack\n            direction=\"row\"\n            justifyContent=\"space-between\"\n            alignItems=\"center\"\n            spacing={2}\n          >\n            <CircularProgress />\n            <Typography variant=\"h6\">{commonMessage}</Typography>\n          </Stack>\n        </DialogContent>\n      </Dialog>\n    </Box>\n  );\n  // return 'base';\n}\n\nBaseCollage.propTypes = {\n  getCollage: PropTypes.func.isRequired,\n  clearCollage: PropTypes.func.isRequired,\n  saveType: PropTypes.string.isRequired,\n};\n","const parseCookie = (str) =>\n  Object.fromEntries(str.split(';').map((cookie) => cookie.split('=', 2)));\n\nfunction getUserInfo() {\n  const parsedCookies = parseCookie(document.cookie);\n  if ('userInfo' in parsedCookies) {\n    return JSON.parse(atob(parsedCookies.userInfo));\n  }\n  return '';\n}\n\nfunction handleMaxPhotos(containerWidth) {\n  if (containerWidth < 450) return { maxPhotos: 2 };\n  if (containerWidth < 800) return { maxPhotos: 3 };\n  return { maxPhotos: 4 };\n}\n\nfunction handleColumns(containerWidth) {\n  if (containerWidth < 450) return 2;\n  if (containerWidth < 800) return 3;\n  return 4;\n}\n\nfunction handleArrangement(images, callback) {\n  let twidth = 0;\n  let theight = 0;\n  images.forEach(({ height, width }) => {\n    if (height > width) theight += 1;\n    else twidth += 1;\n  });\n  if (twidth > theight) {\n    callback('rows');\n  } else {\n    callback('columns');\n  }\n}\n\nasync function isFieldValid(key, value, setFieldError, schema) {\n  let hasError = false;\n  const testField = await schema\n    .validate({ [key]: value }, { abortEarly: false })\n    .catch((error) => error);\n  setFieldError('');\n  if (testField.inner) {\n    testField.inner.forEach((error) => setFieldError(error.message));\n    hasError = true;\n  }\n  return !hasError;\n}\n\nexport default {\n  parseCookie,\n  getUserInfo,\n  handleMaxPhotos,\n  handleColumns,\n  handleArrangement,\n  isFieldValid,\n};\n"],"names":["url","body","params","method","fetch","then","response","resp","console","log","newCollage","collageID","collageDetails","collage_id","helpers","process","JSON","stringify","error","saveCollage","upload","listCollages","nextToken","next_token","getThumbnail","collageId","getCollage","deleteCollage","checkOptimizeStatus","get","path","newUrl","options","credentials","headers","Headers","URLSearchParams","toString","ok","status","document","cookie","json","post","apiUrl","deleteMethod","OptionsButton","children","onClick","name","Button","id","variant","component","sx","color","borderRadius","backgroundColor","padding","defaultProps","AddPhotos","handleChange","type","hidden","multiple","accept","onChange","fontSize","Typography","fontWeight","LoginButton","authURL","next","handlePreLogin","handleLogin","window","location","replace","borderColor","alpha","getData","tableName","db","toArray","rows","length","clearData","clear","getCollageDetails","details","time","Promise","allSettled","images","map","img","title","imagePromises","timeEnd","ip","value","data","dt","put","results","getCollageData","clearCollageData","save","getClosest","arr","index1","index2","target","downscaleImage","image","newWidth","newHeight","fileType","canvas","createElement","width","height","getContext","drawImage","toDataURL","optimizeImage","dataURL","convertBase64","file","resolve","reject","fileReader","FileReader","readAsDataURL","onload","result","onerror","event","handleImageCount","handleNewImageCount","handleImageData","files","cnt","Array","from","Image","e","naturalWidth","naturalHeight","src","Date","now","aspectRatio","optimizedSRC","size","imageDetail","originalSRC","originalHeight","originalWidth","getCollageDimension","maxW","maxH","a","origAR","wrapText","text","x","y","maxWidth","lineHeight","textCanvas","ctx","font","textAlign","tempX","tempY","words","split","line","testLine","lineArray","n","testWidth","measureText","letterSpacing","push","getTextHeight","scaleFactor","getCut","Math","round","random","findClosest","start","end","mid","findImgPair","i","j","minMatchingCost","abs","getAspectRatio","cut","ar1","ar2","handleImageLoad","resizeImages","originalImages","handleImages","addImagesToDB","tempImages","forEach","origImage","tempImage","imgs","ind","findIndex","elem","slice","convertToRGBA","r","g","b","convertBase64String","readAsD","Blob","textCanvasDraw","textArray","position","canvasWidth","textHeight","textBaseline","fillStyle","fillRect","chunk","textPart","fillText","getImageDimensions","paperWidth","paperHeight","optimizeDimensions","maxPrintWidth","maxPrintHeight","problematicNodes","ar","optimumTreeSizes","pn","newRootWidth","newRootHeight","sort","ProfileAvatar","picture","email","initials","toUpperCase","referrerPolicy","alt","ProfileIcon","open","handleClick","avatar","display","alignItems","marginRight","undefined","ml","ProfileMenu","handleClose","anchorEl","profileIdentifier","onClose","PaperProps","elevation","filter","mt","mr","content","top","right","bgcolor","transform","zIndex","transformOrigin","horizontal","vertical","anchorOrigin","href","underline","Profile","React","setAnchorEl","Boolean","userInfo","commonUtils","userAvatar","currentTarget","ProfileLink","item","paddingTop","collageDB","Dexie","version","stores","AuthDialog","onLogin","fullWidth","dividers","justifyContent","Authenticate","nextPath","useState","setOpen","useLocation","isLoggedIn","to","pathname","search","TextDisplay","paddingX","fontFamily","Node","this","left","obj","fromObject","getScore","output","concat","copyNode","copy","newImages","replaceImages","rest","removeImageData","imageData","find","addImageData","delImg","handleRemoveImage","yOffset","xOffset","handleCollageImageLoad","newX","newY","Box","onLoad","Tooltip","IconButton","Delete","DOMDisplay","RenderImage","tempCanvas","tempCtx","floor","log2","radius","clipwidth","clipheight","beginPath","moveTo","lineTo","quadraticCurveTo","closePath","clip","restore","canvasElement","CanvasDisplay","newImg","ResizeImage","ImageStyling","clearRect","tar","imageCount","targetAspectRatioArr","closestIndex","restImages","targetAspectRatio","leftIndex","rightIndex","index","includes","first","second","generate","th","adjustments","adjust","parentWidth","parentHeight","parentX","parentY","parentCut","nodeType","addSize","validateAddSize","lV","lPN","rV","rPN","valid","BinaryTree","root","tempTree","canvasHeight","topText","lA","score","min","trys","bestAdjust","bestAspectRatio","tolerableDifference","ajstCnt","diff","copyTree","findBestAdjustTree","tolerance","imageWidth","imageHeight","sortedImages","collageArray","imgTree","generateCollageTree","aspR","bAR","toFixed","maxScore","maxElem","element","generateScore","useBase","initialValue","setDetails","collageName","setCollageName","constants","resizeImageWidth","paperSizes","A472","A4","A3","A4LandScape","A3LandScape","FBCoverDesktop","WhatsappStatus","uploadedImages","setUploadedImages","dimensions","headerRef","useRef","actionsRef","footerRef","addImageRef","setHeight","setImageHeight","setImageWidth","setWidth","maxHeight","setMaxHeight","setMaxWidth","setTextHeight","setDimensions","innerWidth","innerHeight","otherHeight","current","offsetHeight","w","h","headerHeight","actionsWidth","offsetWidth","footerWidth","useEffect","addEventListener","removeEventListener","handleImageAddClick","click","useDimensions","optionsInitValue","setOptions","displayColorPicker","setDisplayColorPicker","handlePaddingChange","opts","handleRadiusChange","handleColorClick","dcp","handleColorClose","handleColorChange","clr","rgb","handlePositionChange","handleTextChange","useOptions","actions","saveOpen","setSaveOpen","saveStart","setSaveStart","refresh","setRefresh","setGenerate","removeImage","setRemoveImage","printOptions","setPrintOptions","clearDelete","handleDownload","handleGenerateCallback","onDelete","ri","onDownloadClick","onDownloadClose","onRefresh","onSaveClose","onSaveClick","handleSave","useActions","newImgCount","setNewImageCount","newImagesLoaded","setNewImagesLoaded","imgCount","setImageCount","loaded","setLoaded","setImages","dbutils","handleLoad","remove","removeIndex","newImagesArr","getImageData","imageArr","useImages","treeState","loadingCallback","tree","setTree","newTree","Object","keys","reAdjust","imagesArr","treeUtils","bestAspectRatioTree","addOptions","useTree","thumbnail","setThumbnail","finalizing","saveStatus","setSaveStatus","updateStatus","key","st","imagesText","updateImagesStatus","handleClear","clearPromises","generateThumbnail","thumbnailCanvas","thumbnailTree","thumbnailDetails","uploadCollageDetails","dets","created_at","last_updated_at","collageapi","uploadCollageImages","imageURLS","thumbnailKey","thumbnailPromise","toBlob","blob","Img","uploadPromises","uploadStatus","tH","getDetails","imgTitle","Collage","dimensionProps","imageProps","actionProps","collageCallback","collage","setCollage","isEmpty","t","createCollage","collageElem","pw","ph","canvasTree","getCanvasTree","imgPW","imgPH","generateCollage","ctree","getCanvas","setTimeout","pW","pH","link","download","URL","createObjectURL","revokeObjectURL","probNodes","newPW","newPH","newCanvasTree","newValid","newProbNodes","DownloadDialog","sizes","setValue","Dialog","DialogTitle","DialogContent","DialogContentText","pr","FormControl","InputLabel","Select","labelId","defaultValue","label","MenuItem","DialogActions","disabled","SaveDialog","setName","nameError","TextField","mb","InputProps","helperText","StatusIndicator","CircularProgress","Pending","CheckCircleOutline","Close","Status","pending","done","running","failed","Stack","direction","OverAllStatus","counter","spacing","p","SaveStatusDialog","overAllStatus","setCounter","timerId","clearTimeout","statusArr","values","val","Header","Paper","ref","postion","Link","ArrowBack","EmptyCollage","loadComponent","backgroundImage","collageBack","backgroundSize","objectFit","View","saveStatusOpen","header","downloadDialog","saveDialog","saveStatusDialog","controls","saveType","isMobile","actionsHeight","Loading","justifySelf","DBNA","icon","BottomNavigationAction","showLabel","py","outline","DesktopDrawer","anchor","innerRef","Drawer","ControlsDivider","Divider","my","DesktopActions","onDownload","onSave","newValue","List","Save","Download","Print","ClearCollageDialog","onSubmit","onCancel","noWrap","DesktopControls","photosComp","editComp","imageOptionsOpen","setImageOptionsOpen","editOptionsOpen","setEditOptionsOpen","clearOpen","setClearOpen","closeAll","handleClearClose","AutoAwesomeMosaic","Photo","Edit","Refresh","DesktopImageOptions","onAdd","AddPhotoAlternate","PaddingControl","mixBlendMode","Slider","valueLabelDisplay","step","max","RadiusControl","ColorControl","background","boxShadow","cursor","ColorPicker","bottom","border","TextControl","collageTextError","FormGroup","row","FormControlLabel","disableTypography","control","Checkbox","checked","EditControl","optionProps","MBNA","toLowerCase","MobileActions","BottomNavigation","showLabels","MainControls","EditOptions","editOptionsValue","handleOptionsClose","handleEditOptionsClick","borderTop","Padding","CropFree","Square","fill","Title","ImageOptions","handleDelete","handleAdd","MobileControls","mainOpen","setMainOpen","editOpen","setEditOpen","editControl","setEditControl","setEditOptionsValue","imageOpen","setImageOpen","imageValue","setImageValue","handleEditOptionsClose","nV","saved","setSaved","saveLocally","BaseCollage","clearCollage","navigate","useNavigate","setStatus","commonOpen","setCommonOpen","commonMessage","setCommonMessage","openCommonDialog","message","closeCommonDialog","treeProps","getSnapshot","clearAll","res","respImages","mobileControls","desktopPhotosComp","desktopControls","actionsComp","parseCookie","str","fromEntries","setFieldError","schema","hasError","validate","abortEarly","catch","testField","inner","getUserInfo","parsedCookies","parse","atob","handleMaxPhotos","containerWidth","maxPhotos","handleColumns","handleArrangement","callback","twidth","theight","isFieldValid"],"sourceRoot":""}