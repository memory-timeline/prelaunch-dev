{"version":3,"file":"static/js/616.3b41fda7.chunk.js","mappings":"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","sources":["api/collage.jsx","api/helpers.js","components/OptionsButton.jsx","components/AddPhotos.jsx","static/config/collage.jsx","components/collage/helpers.js","components/collage/TextDisplay.jsx","components/collage/node.jsx","components/collage/binaryTree.jsx","components/collage/treeUtils.js","components/collage/apiHelpers.js","hooks/collage/base.jsx","hooks/collage/dimensions.jsx","hooks/collage/options.jsx","hooks/collage/actions.jsx","hooks/collage/images.jsx","hooks/collage/tree.jsx","hocs/handle-error.jsx","components/collage/Collage.jsx","components/collage/DownloadDialog.jsx","components/collage/SaveDialog.jsx","components/collage/SaveStatusDialog.jsx","components/collage/Header.jsx","components/collage/EmptyCollage.jsx","components/collage/View.jsx","components/collage/DesktopActionItem.jsx","components/collage/DesktopDrawer.jsx","components/collage/ControlsDivider.jsx","components/collage/DesktopActions.jsx","components/collage/ClearCollageDialog.jsx","components/collage/DesktopControls.jsx","components/collage/DesktopImageOptions.jsx","components/collage/EditControl.jsx","components/collage/MobileActionItem.jsx","components/collage/MobileActions.jsx","components/collage/MainControls.jsx","components/collage/EditOptions.jsx","components/collage/ImageOptions.jsx","components/collage/MobileControls.jsx","components/collage/CollageType.jsx","components/collage/CollageImageCount.jsx","components/collage/CollageMetaInfo.jsx","components/collage/PaddingControl.jsx","components/collage/RadiusControl.jsx","components/collage/TextControl.jsx","components/collage/ColorControl.jsx","components/collage/CommonDialog.jsx","pages/collage/Base.jsx"],"sourcesContent":["import helpers from 'api/helpers';\n\nfunction newCollage(collageID, collageDetails) {\n  try {\n    const path = '/api/collage/new';\n    const params = { collage_id: collageID };\n    const authURL = process.env.REACT_APP_AUTH_URL;\n    return helpers.post(authURL, path, params, JSON.stringify(collageDetails));\n  } catch (error) {\n    /* eslint-disable no-console */\n    console.log(error);\n    return error;\n  }\n}\n\nfunction saveCollage(collageID, collageDetails) {\n  try {\n    const path = '/api/collage/save';\n    const params = { collage_id: collageID };\n    const authURL = process.env.REACT_APP_AUTH_URL;\n    return helpers.post(authURL, path, params, JSON.stringify(collageDetails));\n  } catch (error) {\n    /* eslint-disable no-console */\n    console.log(error);\n    return error;\n  }\n}\nasync function upload(url, body) {\n  try {\n    const params = { body, method: 'PUT' };\n    const resp = await fetch(url, params).then((response) => response);\n    return resp;\n  } catch (error) {\n    /* eslint-disable no-console */\n    console.log(error);\n    return error;\n  }\n}\n\nfunction listCollages(nextToken) {\n  try {\n    const path = '/api/collage/list';\n    const params = { next_token: nextToken };\n    const authURL = process.env.REACT_APP_AUTH_URL;\n    return helpers.get(authURL, path, params);\n  } catch (error) {\n    /* eslint-disable no-console */\n    console.log(error);\n    return error;\n  }\n}\n\nfunction getThumbnail(collageId) {\n  try {\n    const path = '/api/collage/thumbnail';\n    const params = { collage_id: collageId };\n    const authURL = process.env.REACT_APP_AUTH_URL;\n    return helpers.get(authURL, path, params);\n  } catch (error) {\n    /* eslint-disable no-console */\n    console.log(error);\n    return error;\n  }\n}\n\nfunction getCollage(collageId) {\n  try {\n    const path = '/api/collage/get';\n    const params = { collage_id: collageId };\n    const authURL = process.env.REACT_APP_AUTH_URL;\n    return helpers.get(authURL, path, params);\n  } catch (error) {\n    /* eslint-disable no-console */\n    console.log(error);\n    return error;\n  }\n}\n\nfunction deleteCollage(collageId) {\n  try {\n    const path = '/api/collage/delete';\n    const params = { collage_id: collageId };\n    const authURL = process.env.REACT_APP_AUTH_URL;\n    return helpers.deleteMethod(authURL, path, params);\n  } catch (error) {\n    /* eslint-disable no-console */\n    console.log(error);\n    return error;\n  }\n}\n\nfunction checkOptimizeStatus(collageId) {\n  try {\n    const path = '/api/collage/resized-count';\n    const params = { collage_id: collageId };\n    const authURL = process.env.REACT_APP_AUTH_URL;\n    return helpers.get(authURL, path, params);\n  } catch (error) {\n    /* eslint-disable no-console */\n    console.log(error);\n    return error;\n  }\n}\nexport default {\n  newCollage,\n  saveCollage,\n  upload,\n  listCollages,\n  getThumbnail,\n  getCollage,\n  deleteCollage,\n  checkOptimizeStatus,\n};\n","const get = async (url, path, params = {}) => {\n  let newUrl = `https://${url}${path}`;\n  const options = {\n    method: 'GET',\n    credentials: 'include',\n    headers: new Headers({ 'content-type': 'application/json' }),\n  };\n  newUrl += `?${new URLSearchParams(params).toString()}`;\n  const resp = await fetch(newUrl, options);\n  if (!resp.ok) {\n    if (resp.status === 401) {\n      document.cookie =\n        'userInfo=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;';\n      return { status: 'unauthenticated' };\n    }\n    if (resp.status === 403) {\n      return { status: 'forbidden' };\n    }\n  }\n\n  return resp.json();\n};\n\nconst post = async (url, path, params, body) => {\n  let apiUrl = `https://${url}${path}`;\n  apiUrl += `?${new URLSearchParams(params).toString()}`;\n  const options = {\n    method: 'POST',\n    credentials: 'include',\n    headers: new Headers({ 'content-type': 'application/json' }),\n    body,\n  };\n  return fetch(apiUrl, options).then((response) => {\n    console.log('post response', response);\n    if (!response.ok) {\n      return { status: 'error' };\n    }\n    return response.json();\n  });\n};\n\nconst deleteMethod = async (url, path, params) => {\n  let apiUrl = `https://${url}${path}`;\n  apiUrl += `?${new URLSearchParams(params).toString()}`;\n  const options = {\n    method: 'DELETE',\n    credentials: 'include',\n    headers: new Headers({ 'content-type': 'application/json' }),\n  };\n  return fetch(apiUrl, options).then((response) => {\n    if (!response.ok) {\n      return { status: 'error' };\n    }\n    return response.json();\n  });\n};\nexport default { get, post, deleteMethod };\n","import PropTypes from 'prop-types';\n\nimport Button from '@mui/material/Button';\n\nexport default function OptionsButton({ children, onClick, name }) {\n  return (\n    <Button\n      id={name}\n      variant=\"contained\"\n      component=\"label\"\n      onClick={onClick}\n      sx={{\n        color: 'muted.main',\n        borderRadius: 15,\n        backgroundColor: 'button.main',\n        padding: '6px 8px',\n        '&:hover': {\n          color: 'muted.main',\n          backgroundColor: 'button.main',\n        },\n      }}\n    >\n      {children}\n    </Button>\n  );\n}\n\nOptionsButton.defaultProps = {\n  onClick: () => {},\n};\n\nOptionsButton.propTypes = {\n  children: PropTypes.node.isRequired,\n  onClick: PropTypes.func,\n  name: PropTypes.string.isRequired,\n  //  updateOp: PropTypes.string.isRequired,\n};\n","import PropTypes from 'prop-types';\nimport AddPhotoIcon from '@mui/icons-material/AddPhotoAlternate';\nimport OptionsButton from 'components/OptionsButton';\nimport Typography from '@mui/material/Typography';\n\nexport default function AddPhotos({ handleChange }) {\n  return (\n    <OptionsButton name=\"add\">\n      <input\n        type=\"file\"\n        hidden\n        multiple\n        accept=\"image/*\"\n        onChange={handleChange}\n      />\n      <AddPhotoIcon sx={{ fontSize: '2rem' }} />\n      <Typography sx={{ fontWeight: 'bold' }}>Add Images</Typography>\n    </OptionsButton>\n  );\n}\n\nAddPhotos.propTypes = {\n  handleChange: PropTypes.func.isRequired,\n};\n","import FacebookIcon from '@mui/icons-material/Facebook';\nimport WhatsAppIcon from '@mui/icons-material/WhatsApp';\nimport InstagramIcon from '@mui/icons-material/Instagram';\nimport DescriptionIcon from '@mui/icons-material/Description';\n\nexport default {\n  defaultCollageName: 'Untitled',\n  defaultCollageType: 'A4',\n  tolerance: 0.1,\n  resizeImageWidth: 1500,\n  fontSize: 20,\n  lineHeight: 25,\n  textPadding: 20,\n  thumbnailHeight: 500,\n  maxNameLength: 20,\n  maxColllageTextLength: 40,\n  minImages: 2,\n  maxImages: 15,\n  paperSizes: {\n    A4: {\n      width: 2480,\n      height: 3508,\n      text: 'A4 Potrait',\n      icon: <DescriptionIcon sx={{ mr: 1 }} />,\n    },\n    A3: {\n      width: 3508,\n      height: 4961,\n      text: 'A3 Potrait',\n      icon: <DescriptionIcon sx={{ mr: 1 }} />,\n    },\n    A4LandScape: {\n      height: 2480,\n      width: 3508,\n      text: 'A4 LandScape',\n      icon: <DescriptionIcon sx={{ mr: 1, transform: 'rotate(90deg)' }} />,\n    },\n    A3LandScape: {\n      height: 3508,\n      width: 4961,\n      text: 'A3 LandScape',\n      icon: <DescriptionIcon sx={{ mr: 1, transform: 'rotate(90deg)' }} />,\n    },\n    FBCoverDesktop: {\n      height: 740,\n      width: 2000,\n      text: 'Cover Photo (Desktop)',\n      icon: <FacebookIcon sx={{ fill: '#3b5998', mr: 1 }} />,\n    },\n    FBCoverMobile: {\n      height: 720,\n      width: 1280,\n      text: 'Cover Photo (Mobile)',\n      icon: <FacebookIcon sx={{ fill: '#3b5998', mr: 1 }} />,\n    },\n    FBPost: {\n      height: 1260,\n      width: 2400,\n      text: 'Post',\n      icon: <FacebookIcon sx={{ fill: '#3b5998', mr: 1 }} />,\n    },\n    WhatsappStatus: {\n      height: 1920,\n      width: 1080,\n      text: 'Status',\n      icon: (\n        <WhatsAppIcon\n          sx={{\n            backgroundColor: '#25D366',\n            fill: 'white',\n            mr: 1,\n          }}\n        />\n      ),\n    },\n    InstaStory: {\n      height: 1920,\n      width: 1080,\n      text: 'Story',\n      icon: (\n        <InstagramIcon\n          sx={{\n            fill: 'white',\n            background:\n              'linear-gradient(45deg, #f09433 0%,#e6683c 25%,#dc2743 50%,#cc2366 75%,#bc1888 100%)',\n            mr: 1,\n          }}\n        />\n      ),\n    },\n  },\n};\n","import constants from 'static/config/collage';\n\nfunction textCanvasDraw(\n  ctx,\n  textArray,\n  position,\n  scaleFactor,\n  canvasWidth,\n  textHeight\n) {\n  const { fontSize, textPadding } = constants;\n  ctx.font = `${scaleFactor * fontSize}px Arial`;\n  ctx.textAlign = 'center';\n  ctx.textBaseline = 'top';\n  ctx.fillStyle = '#1c1c1cb3';\n  ctx.fillRect(0, position, canvasWidth, position + textHeight);\n  ctx.fillStyle = 'white';\n\n  // eslint-disable-next-line no-restricted-syntax\n  for (const chunk of textArray) {\n    const [textPart, , y] = chunk;\n    ctx.fillText(\n      textPart,\n      canvasWidth / 2,\n      y + position + 2.5 + textPadding * scaleFactor\n    );\n  }\n}\n\nfunction getClosest(arr, index1, index2, target) {\n  if (target - arr[index1] >= arr[index2] - target) return index2;\n  return index1;\n}\n\nfunction findClosest(arr, target) {\n  const n = arr.length;\n\n  if (target <= arr[0]) return 0;\n  if (target >= arr[n - 1]) return n - 1;\n\n  let start = 0;\n  let end = n;\n  let mid = 0;\n  while (start < end) {\n    mid = (start + end) / 2;\n\n    if (arr[mid] === target) return mid;\n\n    if (target < arr[mid]) {\n      if (mid > 0 && target > arr[mid - 1])\n        return getClosest(arr, mid - 1, mid, target);\n      end = mid;\n    } else {\n      if (mid < n - 1 && target < arr[mid + 1])\n        return getClosest(arr, mid, mid + 1, target);\n      start = mid + 1;\n    }\n  }\n\n  return mid;\n}\n\nfunction getCut() {\n  const cutArr = ['v', 'h'];\n  return cutArr[Math.round(Math.random())];\n}\n\nfunction findImgPair(arr, target) {\n  let start = 0;\n  let end = arr.length - 1;\n  let i = start;\n  let j = end;\n  let minMatchingCost = Math.abs(arr[start] + arr[end] - target);\n  while (start <= end) {\n    if (arr[start] + arr[end] > target) {\n      if (Math.abs(arr[start] + arr[end] - target) < minMatchingCost) {\n        // update fetched pair and matching cost\n        minMatchingCost = Math.abs(arr[start] + arr[end] - target);\n        i = start;\n        j = end;\n      }\n      end -= 1;\n    } else if (arr[start] + arr[end] <= target) {\n      if (Math.abs(arr[start] + arr[end] - target) < minMatchingCost) {\n        minMatchingCost = Math.abs(arr[start] + arr[end] - target);\n        i = start;\n        j = end;\n      }\n      start += 1;\n    } else {\n      // best pair (m === 0) found\n      i = start;\n      j = end;\n      break;\n    }\n  }\n  const randomNumber = Math.round(Math.random());\n  if (randomNumber) return [i, j];\n  return [j, i];\n}\n\nfunction getAspectRatio(cut, ar1, ar2) {\n  if (cut === 'v') return ar1 + ar2;\n  return (ar1 * ar2) / (ar1 + ar2);\n}\n\nfunction downscaleImage(image, newWidth, newHeight, fileType) {\n  const canvas = document.createElement('canvas');\n  canvas.width = newWidth;\n  canvas.height = newHeight;\n  const ctx = canvas.getContext('2d');\n  ctx.drawImage(image, 0, 0, newWidth, newHeight);\n  return canvas.toDataURL(fileType);\n}\n\n// function convertImage(image, newWidth, newHeight) {\n//   const canvas = document.createElement('canvas');\n//   canvas.width = newWidth;\n//   canvas.height = newHeight;\n//   const ctx = canvas.getContext('2d');\n//   ctx.drawImage(image, 0, 0, newWidth, newHeight);\n//   return canvas.toDataURL('image/webp');\n// }\n\nfunction optimizeImage(image, newWidth, newHeight) {\n  const canvas = document.createElement('canvas');\n  canvas.width = newWidth;\n  canvas.height = newHeight;\n  const ctx = canvas.getContext('2d');\n  ctx.drawImage(image, 0, 0, newWidth, newHeight);\n  const dataURL = canvas.toDataURL('image/webp', 0.3);\n  return dataURL;\n}\n\nfunction resizeImages(originalImages, maxWidth, handleImages, addImagesToDB) {\n  const tempImages = [];\n  originalImages.forEach((origImage) => {\n    const image = new Image();\n    image.onload = () => {\n      const { title, aspectRatio, type } = origImage;\n      const dataurl = downscaleImage(\n        image,\n        maxWidth,\n        maxWidth / aspectRatio,\n        origImage.type\n      );\n      const tempImage = {\n        title,\n        src: dataurl,\n        naturalHeight: maxWidth / aspectRatio,\n        naturalWidth: maxWidth,\n        aspectRatio,\n        type,\n      };\n      tempImages.push(tempImage);\n      handleImages((imgs) => {\n        const ind = imgs.findIndex((elem) => elem.title === origImage.title);\n        return [...imgs.slice(0, ind), tempImage, ...imgs.slice(ind + 1)];\n      });\n      addImagesToDB(tempImage);\n    };\n    image.src = origImage.src;\n  });\n}\n\nfunction convertBase64(file) {\n  return new Promise((resolve, reject) => {\n    const fileReader = new FileReader();\n    fileReader.readAsDataURL(file);\n    fileReader.onload = () => {\n      resolve(fileReader.result);\n    };\n    fileReader.onerror = (error) => {\n      reject(error);\n    };\n  });\n}\n\nfunction convertBase64String(file) {\n  return new Promise((resolve, reject) => {\n    const fileReader = new FileReader();\n    fileReader.readAsD(new Blob(file));\n    fileReader.onload = () => {\n      resolve(fileReader.result);\n    };\n    fileReader.onerror = (error) => {\n      reject(error);\n    };\n  });\n}\n\nasync function handleImageLoad(\n  event,\n  handleImageCount,\n  handleNewImageCount,\n  handleImageData\n) {\n  if (event.target.files) {\n    handleImageCount((cnt) => cnt + event.target.files.length);\n    handleNewImageCount(event.target.files.length);\n    const files = Array.from(event.target.files);\n    files.map(async (file) => {\n      const image = new Image();\n      image.onload = (e) => {\n        const { naturalWidth, naturalHeight, src } = e.target;\n        const title = `${Date.now()}-${file.name}`;\n        const aspectRatio = naturalWidth / naturalHeight;\n        const imageDetail = {\n          title,\n          src,\n          naturalHeight,\n          naturalWidth,\n          aspectRatio,\n          type: file.type,\n          file,\n        };\n        handleImageData(imageDetail);\n      };\n      image.src = URL.createObjectURL(file);\n    });\n    files.map((file) => URL.revokeObjectURL(file)); // avoid memory leak\n  }\n}\n\nfunction getCollageDimension(maxW, maxH, a) {\n  const origAR = maxW / maxH;\n  if (origAR < a) return [maxW, maxW / a];\n  if (origAR > a) return [maxH * a, maxH];\n  return [maxW, maxH];\n}\n\nfunction wrapText(text, x, y, maxWidth, fontSize, lineHeight) {\n  // First, start by splitting all of our text into words,\n  // but splitting it into an array split by spaces\n  if (text.length === 0) return [];\n  const paddingX = 1; // 8px on both sided\n  const textCanvas = document.createElement('canvas');\n  textCanvas.width = maxWidth - 2 * paddingX * 8;\n  textCanvas.height = 1000;\n  const ctx = textCanvas.getContext('2d');\n  ctx.font = `${fontSize}px Arial`;\n  ctx.textAlign = 'center';\n  const tempX = x;\n  let tempY = y;\n  const words = text.split(' ');\n  let line = ''; // This will store the text of the current line\n  let testLine = ''; // This will store the text when we add a word, to test if it's too long\n  const lineArray = []; // This is an array of lines, which the function will return\n\n  // Lets iterate over each word\n  for (let n = 0; n < words.length; n += 1) {\n    // Create a test line, and measure it..\n    testLine += `${words[n]} `;\n    const metrics = ctx.measureText(testLine);\n    const testWidth = metrics.width;\n    // If the width of this test line is more than the max width\n    if (testWidth > textCanvas.width && n > 0) {\n      // Then the line is finished, push the current line into \"lineArray\"\n      lineArray.push([line, tempX, tempY]);\n      // Increase the line height, so a new line is started\n      tempY += lineHeight;\n      // Update line and test line to use this word as the first word on the next line\n      line = `${words[n]} `;\n      testLine = `${words[n]} `;\n    } else {\n      // If the test line is still less than the max width, then add the word to the current line\n      line += `${words[n]} `;\n    }\n    // If we never reach the full max width, then there is only one line..\n    // so push it into the lineArray so we return something\n    if (n === words.length - 1) {\n      lineArray.push([line, tempX, tempY]);\n    }\n  }\n  // Return the line array\n  return lineArray;\n}\n\nfunction getTextHeight(\n  text,\n  x,\n  y,\n  maxWidth,\n  fontSize,\n  lineHeight,\n  scaleFactor\n) {\n  const { textPadding } = constants;\n  const lineArray = wrapText(\n    text,\n    x,\n    y,\n    maxWidth,\n    fontSize * scaleFactor,\n    lineHeight * scaleFactor\n  );\n  return (lineArray.length * lineHeight + 2 * textPadding) * scaleFactor;\n}\n\nfunction getImageDimensions(\n  paperWidth,\n  paperHeight,\n  text,\n  x,\n  y,\n  fontSize,\n  lineHeight,\n  scaleFactor,\n  aspectRatio\n) {\n  const textHeight = getTextHeight(\n    text,\n    x,\n    y,\n    paperWidth,\n    fontSize,\n    lineHeight,\n    scaleFactor\n  );\n  return getCollageDimension(paperWidth, paperHeight - textHeight, aspectRatio);\n}\n\nconst convertToRGBA = (value) =>\n  `rgba(${value.r}, ${value.g}, ${value.b}, ${value.a})`;\n\nfunction optimizeDimensions(maxPrintWidth, maxPrintHeight, problematicNodes) {\n  const ar = maxPrintWidth / maxPrintHeight;\n  const optimumTreeSizes = problematicNodes.map((pn) => {\n    const newRootWidth =\n      (maxPrintWidth * pn.value.naturalWidth) / pn.value.width;\n    const newRootHeight = newRootWidth / ar;\n    // node with highest score needs smalles tree. smallest tree will satisfy all constraints\n    const score = maxPrintWidth - newRootWidth + maxPrintHeight - newRootHeight;\n    return [score, [newRootWidth, newRootHeight]];\n  });\n  optimumTreeSizes.sort((a, b) => b[0] - a[0]);\n  return optimumTreeSizes[0][1];\n}\n\nexport default {\n  getCut,\n  findClosest,\n  findImgPair,\n  getAspectRatio,\n  handleImageLoad,\n  resizeImages,\n  wrapText,\n  convertToRGBA,\n  getCollageDimension,\n  downscaleImage,\n  convertBase64,\n  convertBase64String,\n  textCanvasDraw,\n  getTextHeight,\n  getImageDimensions,\n  optimizeDimensions,\n  optimizeImage,\n};\n","import Typography from '@mui/material/Typography';\nimport Stack from '@mui/material/Stack';\nimport { alpha } from '@mui/material/styles';\nimport constants from 'static/config/collage';\n\nexport default function TextDisplay(textArray, position, textHeight) {\n  const { fontSize, lineHeight, textPadding } = constants;\n  console.log('text display', textArray, position, textPadding);\n  return (\n    <>\n      <Stack\n        sx={{\n          height: textHeight,\n          backgroundColor: alpha('#1c1c1c', 0.7),\n          position: 'absolute',\n          top: position,\n          width: '100%',\n        }}\n      />\n      {\n        // eslint-disable-next-line react/destructuring-assignment\n        textArray.map((chunk) => (\n          <Typography\n            key={chunk[2]}\n            sx={{\n              width: '100%',\n              position: 'absolute',\n              top: position + chunk[2] + textPadding,\n              paddingX: 1,\n              color: 'button.main',\n              textAlign: 'center',\n              fontFamily: 'Arial',\n              fontSize: `${fontSize}px`,\n              lineHeight: `${lineHeight}px`,\n              letterSpacing: 'normal',\n            }}\n          >\n            {chunk[0]}\n          </Typography>\n        ))\n      }\n    </>\n  );\n}\n","import Box from '@mui/material/Box';\nimport IconButton from '@mui/material/IconButton';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport Tooltip from '@mui/material/Tooltip';\nimport { alpha } from '@mui/material/styles';\nimport helpers from 'components/collage/helpers';\n\nexport default class Node {\n  constructor(value) {\n    this.value = value;\n    this.left = null;\n    this.right = null;\n  }\n\n  fromObject(obj) {\n    if (obj != null) {\n      this.value = obj.value;\n      if (obj.left != null) {\n        this.left = new Node(obj.left.value);\n        this.left.fromObject(obj.left);\n      }\n      if (obj.right != null) {\n        this.right = new Node(obj.right.value);\n        this.right.fromObject(obj.right);\n      }\n      return this;\n    }\n    return null;\n  }\n\n  getScore() {\n    if ('cut' in this.value) {\n      return [...this.left.getScore(), ...this.right.getScore()];\n    }\n\n    return [this.value.width + this.value.height];\n  }\n\n  display() {\n    let output = [];\n    const { cut, title, aspectRatio } = this.value;\n    if (this === null) return null;\n    if ('cut' in this.value) output.push([cut, aspectRatio]);\n    if ('title' in this.value) output.push([title, aspectRatio]);\n    if (this.left !== null) output = output.concat(this.left.display());\n    if (this.right !== null) output = output.concat(this.right.display());\n    return output;\n  }\n\n  copy() {\n    if (this === null) return null;\n    const copyNode = new Node({ ...this.value });\n    if (this.left != null) copyNode.left = this.left.copy();\n    if (this.right != null) copyNode.right = this.right.copy();\n    return copyNode;\n  }\n\n  replaceImages(newImages) {\n    if (this !== null) {\n      if ('title' in this.value) {\n        const findIndex = newImages.findIndex(\n          (elem) => elem.title === this.value.title\n        );\n        const origImage = newImages[findIndex];\n        this.value.src = origImage.src;\n      }\n      if (this.left != null) this.left.replaceImages(newImages);\n      if (this.right != null) this.right.replaceImages(newImages);\n    }\n  }\n\n  removeImageData() {\n    if (this !== null) {\n      if ('title' in this.value) {\n        const { src, ...rest } = this.value;\n        this.value = rest;\n      }\n      if (this.left != null) this.left.removeImageData();\n      if (this.right != null) this.right.removeImageData();\n    }\n  }\n\n  addImageData(imageData) {\n    if (this !== null) {\n      if ('title' in this.value) {\n        const image = imageData.find((elem) => elem.title === this.value.title);\n        this.value.src = image.src;\n      }\n      if (this.left != null) this.left.addImageData(imageData);\n      if (this.right != null) this.right.addImageData(imageData);\n    }\n  }\n\n  RenderImage(\n    padding,\n    borderRadius,\n    delImg,\n    handleRemoveImage,\n    yOffset,\n    xOffset,\n    handleCollageImageLoad\n  ) {\n    const { width, title, src, x, y } = this.value;\n\n    const newX = x + xOffset;\n    const newY = y + yOffset;\n    return (\n      <>\n        <Box\n          key={title}\n          component=\"img\"\n          title={title}\n          alt={title}\n          width={width}\n          onLoad={handleCollageImageLoad}\n          src={src}\n          sx={{\n            position: 'absolute',\n            padding: `${padding}px`,\n            borderRadius: `${borderRadius}px`,\n            left: this.value.x + xOffset,\n            top: this.value.y + yOffset,\n          }}\n        />\n        {delImg === true ? (\n          <Tooltip title=\"Remove Image\">\n            <IconButton\n              size=\"medium\"\n              sx={{\n                color: alpha('#000', 0.7),\n                bgcolor: alpha('#fff', 0.5),\n                position: 'absolute',\n                top: newY + padding,\n                left: newX + width,\n                padding: `${padding}px`,\n                borderRadius: '0 5px 0 5px',\n                transform: 'translate(-100%, 0)',\n              }}\n              onClick={() => handleRemoveImage(title)}\n            >\n              <DeleteIcon size=\"medium\" />\n            </IconButton>\n          </Tooltip>\n        ) : null}\n      </>\n    );\n  }\n\n  DOMDisplay(\n    padding,\n    borderRadius,\n    delImg,\n    handleRemoveImage,\n    yOffset,\n    xOffset,\n    handleCollageImageLoad\n  ) {\n    const { cut } = this.value;\n    if (this === null) return null;\n    if (cut) {\n      return (\n        <>\n          {this.left != null\n            ? this.left.DOMDisplay(\n                padding,\n                borderRadius,\n                delImg,\n                handleRemoveImage,\n                yOffset,\n                xOffset,\n                handleCollageImageLoad\n              )\n            : null}\n          {this.right != null\n            ? this.right.DOMDisplay(\n                padding,\n                borderRadius,\n                delImg,\n                handleRemoveImage,\n                yOffset,\n                xOffset,\n                handleCollageImageLoad\n              )\n            : null}\n        </>\n      );\n    }\n    if ('title' in this.value)\n      return this.RenderImage(\n        padding,\n        borderRadius,\n        delImg,\n        handleRemoveImage,\n        yOffset,\n        xOffset,\n        handleCollageImageLoad\n      );\n    return null;\n  }\n\n  ResizeImage(image) {\n    const tempCanvas = document.createElement('canvas');\n    tempCanvas.width = this.value.naturalWidth;\n    tempCanvas.height = this.value.naturalHeight;\n    const tempCtx = tempCanvas.getContext('2d');\n    let width = this.value.naturalWidth;\n    let height = this.value.naturalHeight;\n    let newWidth;\n    let newHeight;\n    const scaleFactor = Math.floor(\n      Math.log2(this.value.naturalWidth / this.value.width)\n    );\n    if (scaleFactor === 0) {\n      tempCtx.drawImage(\n        image,\n        0,\n        0,\n        width,\n        height,\n        0,\n        0,\n        this.value.width,\n        this.value.height\n      );\n    } else {\n      for (let i = 0; i < scaleFactor; i += 1) {\n        newWidth = width >> 1; // eslint-disable-line no-bitwise\n        newHeight = newWidth / this.value.aspectRatio; // eslint-disable-line no-bitwise\n        if (i === 0) {\n          tempCtx.drawImage(\n            image,\n            0,\n            0,\n            width,\n            height,\n            0,\n            0,\n            newWidth,\n            newHeight\n          );\n        } else {\n          tempCtx.drawImage(\n            tempCanvas,\n            0,\n            0,\n            width,\n            height,\n            0,\n            0,\n            newWidth,\n            newHeight\n          );\n        }\n        width = newWidth;\n        height = newHeight;\n      }\n\n      tempCtx.drawImage(\n        tempCanvas,\n        0,\n        0,\n        width,\n        height,\n        0,\n        0,\n        this.value.width,\n        this.value.height\n      );\n    }\n    return tempCanvas;\n  }\n\n  ImageStyling(ctx, tempCanvas, padding, radius, yOffset, xOffset) {\n    const x = this.value.x + padding + xOffset;\n    const y = this.value.y + padding + yOffset;\n    const clipwidth = this.value.width - 2 * padding;\n    const clipheight = clipwidth / this.value.aspectRatio;\n\n    ctx.save();\n    ctx.beginPath();\n    ctx.moveTo(x + radius, y);\n    ctx.lineTo(x + clipwidth - radius, y);\n    ctx.quadraticCurveTo(x + clipwidth, y, x + clipwidth, y + radius);\n    ctx.lineTo(x + clipwidth, y + clipheight - radius);\n    ctx.quadraticCurveTo(\n      x + clipwidth,\n      y + clipheight,\n      x + clipwidth - radius,\n      y + clipheight\n    );\n    ctx.lineTo(x + radius, y + clipheight);\n    ctx.quadraticCurveTo(x, y + clipheight, x, y + clipheight - radius);\n    ctx.lineTo(x, y + radius);\n    ctx.quadraticCurveTo(x, y, x + radius, y);\n    ctx.closePath();\n    ctx.clip();\n\n    ctx.drawImage(\n      tempCanvas,\n      0,\n      0,\n      this.value.width,\n      this.value.height,\n      x,\n      y,\n      clipwidth,\n      clipheight\n    );\n    ctx.restore();\n  }\n\n  CanvasDisplay(canvasElement, padding, radius, yOffset, xOffset) {\n    if ('cut' in this.value) {\n      this.left.CanvasDisplay(canvasElement, padding, radius, yOffset, xOffset);\n      this.right.CanvasDisplay(\n        canvasElement,\n        padding,\n        radius,\n        yOffset,\n        xOffset\n      );\n    }\n\n    if ('title' in this.value) {\n      const ctx = canvasElement.getContext('2d');\n      const newImg = new Image();\n      newImg.onload = () => {\n        const tempCanvas = this.ResizeImage(newImg);\n        const tempCtx = tempCanvas.getContext('2d');\n        this.ImageStyling(ctx, tempCanvas, padding, radius, yOffset, xOffset);\n        tempCtx.clearRect(0, 0, tempCanvas.width, tempCanvas.height);\n      };\n      newImg.src = this.value.src;\n    }\n  }\n\n  generate(images, tar, imageCount) {\n    const targetAspectRatioArr = images.map(\n      (image) => image.naturalWidth / image.naturalHeight\n    );\n    if (imageCount < 1) return [];\n    if (imageCount === 1) {\n      const closestIndex = helpers.findClosest(targetAspectRatioArr, tar);\n      this.value = images[closestIndex];\n      this.left = null;\n      this.right = null;\n      return [\n        ...images.slice(0, closestIndex),\n        ...images.slice(closestIndex + 1),\n      ];\n    }\n\n    const cut = helpers.getCut();\n    this.value = { cut, targetAspectRatio: tar };\n    if (imageCount === 2) {\n      const [leftIndex, rightIndex] = helpers.findImgPair(\n        targetAspectRatioArr,\n        tar\n      );\n      this.value.aspectRatio = helpers.getAspectRatio(\n        this.value.cut,\n        images[leftIndex].aspectRatio,\n        images[rightIndex].aspectRatio\n      );\n      this.left = new Node(images[leftIndex]);\n      this.right = new Node(images[rightIndex]);\n      return images.filter(\n        (item, index) => ![leftIndex, rightIndex].includes(index)\n      );\n    }\n\n    let restImages;\n    let targetAspectRatio;\n    this.left = new Node({ cut: helpers.getCut() });\n    //  this.right = new Node({ cut: helpers.getCut() });\n    this.right = new Node({ cut: this.left.value.cut === 'v' ? 'h' : 'v' });\n\n    targetAspectRatio = tar / 2;\n    if (cut === 'v') {\n      targetAspectRatio = tar * 2;\n    }\n\n    const randomNumber = Math.round(Math.random());\n    const [first, second] = randomNumber\n      ? ['left', 'right']\n      : ['right', 'left'];\n    restImages = this[first].generate(\n      images,\n      targetAspectRatio,\n      imageCount - Math.floor(imageCount / 2)\n    );\n    restImages = this[second].generate(\n      restImages,\n      targetAspectRatio,\n      Math.floor(imageCount / 2)\n    );\n\n    this.value.aspectRatio = helpers.getAspectRatio(\n      this.value.cut,\n      this.left.value.aspectRatio,\n      this.right.value.aspectRatio\n    );\n\n    return restImages;\n  }\n\n  adjust(th) {\n    let adjustments = 0;\n    if (this === null) return adjustments;\n\n    if (this.left !== null && this.right !== null) {\n      if (this.value.aspectRatio > this.value.targetAspectRatio * th) {\n        this.value.cut = 'h';\n        adjustments += 1;\n      }\n      if (this.value.aspectRatio < this.value.targetAspectRatio / th) {\n        this.value.cut = 'v';\n        adjustments += 1;\n      }\n\n      if (this.value.cut === 'v') {\n        this.left.value.targetAspectRatio = this.value.targetAspectRatio / 2;\n        this.right.value.targetAspectRatio = this.value.targetAspectRatio / 2;\n      } else {\n        this.left.value.targetAspectRatio = this.value.targetAspectRatio * 2;\n        this.right.value.targetAspectRatio = this.value.targetAspectRatio * 2;\n      }\n      adjustments += this.left.adjust(th) + this.right.adjust(th);\n      this.value.aspectRatio = helpers.getAspectRatio(\n        this.value.cut,\n        this.left.value.aspectRatio,\n        this.right.value.aspectRatio\n      );\n    }\n\n    return adjustments;\n  }\n\n  addSize(parentWidth, parentHeight, parentX, parentY, parentCut, nodeType) {\n    if (parentCut === 'v') {\n      this.value.height = parentHeight;\n      this.value.width = this.value.height * this.value.aspectRatio;\n    } else {\n      this.value.width = parentWidth;\n      this.value.height = this.value.width / this.value.aspectRatio;\n    }\n\n    if (nodeType === 'left') {\n      this.value.x = parentX;\n      this.value.y = parentY;\n    } else if (parentCut === 'h') {\n      this.value.y = parentY + parentHeight - this.value.height;\n      this.value.x = parentX;\n    } else {\n      this.value.x = parentX + parentWidth - this.value.width;\n      this.value.y = parentY;\n    }\n\n    if (this.left !== null) {\n      this.left.addSize(\n        this.value.width,\n        this.value.height,\n        this.value.x,\n        this.value.y,\n        this.value.cut,\n        'left'\n      );\n    }\n    if (this.right !== null) {\n      this.right.addSize(\n        this.value.width,\n        this.value.height,\n        this.value.x,\n        this.value.y,\n        this.value.cut,\n        'right'\n      );\n    }\n  }\n\n  validateAddSize() {\n    if ('cut' in this.value) {\n      const [lV, lPN] = this.left.validateAddSize();\n      const [rV, rPN] = this.right.validateAddSize();\n      return [lV && rV, lPN.concat(rPN)];\n    }\n    if ('title' in this.value) {\n      const valid =\n        this.value.width <= this.value.naturalWidth &&\n        this.value.height <= this.value.naturalHeight;\n      return valid ? [valid, []] : [valid, [{ ...this }]];\n    }\n    return false;\n  }\n}\n","import Box from '@mui/material/Box';\nimport TextDisplay from 'components/collage/TextDisplay';\nimport constants from 'static/config/collage';\nimport Node from './node';\nimport helpers from './helpers';\n\nexport default class BinaryTree {\n  constructor(value) {\n    if (this.root === undefined) {\n      this.root = new Node(value);\n      return this;\n    }\n  }\n\n  addOptions(options) {\n    this.root.options = { ...options };\n  }\n\n  display() {\n    if (this.root !== null) {\n      return this.root.display();\n    }\n    return null;\n  }\n\n  replaceImages(newImages) {\n    if (this.root !== null) this.root.replaceImages(newImages);\n  }\n\n  fromObject(obj) {\n    if (obj.root != null) this.root.fromObject(obj.root);\n    return this;\n  }\n\n  removeImageData() {\n    const tempTree = this.copy();\n    if (this.root !== null) {\n      tempTree.root.removeImageData();\n    }\n    return tempTree;\n  }\n\n  addImageData(imageData) {\n    if (this.root !== null) this.root.addImageData(imageData);\n  }\n\n  DOMDisplay(\n    canvasWidth,\n    canvasHeight,\n    delImg,\n    handleRemoveImage,\n    handleCollageImageLoad\n  ) {\n    const { fontSize, lineHeight, textPadding } = constants;\n    const { width, height } = this.root.value;\n    const { text, topText, padding, borderRadius, color } = this.root.options;\n    const lA = helpers.wrapText(text, 0, 0, canvasWidth, fontSize, lineHeight);\n    const textHeight = text.length\n      ? lA.length * lineHeight + 2 * textPadding\n      : 0;\n    let yOffset = (canvasHeight - textHeight - height) / 2;\n    const xOffset = (canvasWidth - width) / 2;\n    let position = canvasHeight - textHeight;\n    if (topText && text.length > 0) {\n      yOffset += textHeight;\n      position = 0;\n    }\n\n    if (this.root !== null) {\n      return (\n        <Box sx={{ backgroundColor: 'white' }}>\n          <Box\n            width={canvasWidth}\n            height={canvasHeight}\n            sx={{\n              position: 'relative',\n              backgroundColor: helpers.convertToRGBA(color),\n            }}\n          >\n            {this.root.DOMDisplay(\n              padding,\n              borderRadius,\n              delImg,\n              handleRemoveImage,\n              yOffset,\n              xOffset,\n              handleCollageImageLoad\n            )}\n            {text.length ? TextDisplay(lA, position, textHeight) : null}\n          </Box>\n        </Box>\n      );\n    }\n    return null;\n  }\n\n  CanvasDisplay(canvasWidth, canvasHeight, canvasElement, scaleFactor) {\n    const { fontSize, lineHeight, textPadding } = constants;\n    if (this.root !== null) {\n      const { text, topText, padding, borderRadius, color } = this.root.options;\n      const { width, height } = this.root.value;\n      const lA = helpers.wrapText(\n        text,\n        0,\n        0,\n        canvasWidth,\n        fontSize * scaleFactor,\n        lineHeight * scaleFactor\n      );\n      const textHeight = text.length\n        ? (lA.length * lineHeight + 2 * textPadding) * scaleFactor\n        : 0;\n      let yOffset = (canvasHeight - textHeight - height) / 2;\n      const xOffset = (canvasWidth - width) / 2;\n      let position = canvasHeight - textHeight;\n      if (topText && text.length > 0) {\n        yOffset += textHeight;\n        position = 0;\n      }\n      const ctx = canvasElement.getContext('2d');\n      ctx.fillStyle = 'white';\n      ctx.fillRect(0, 0, canvasElement.width, canvasElement.height);\n      ctx.fillStyle = helpers.convertToRGBA(color);\n      ctx.fillRect(0, 0, canvasElement.width, canvasElement.height);\n      this.root.CanvasDisplay(\n        canvasElement,\n        padding * scaleFactor,\n        borderRadius * scaleFactor,\n        yOffset,\n        xOffset\n      );\n      helpers.textCanvasDraw(\n        ctx,\n        lA,\n        position,\n        scaleFactor,\n        canvasWidth,\n        textHeight\n      );\n    }\n  }\n\n  generateScore() {\n    const score = this.root.getScore();\n    return Math.min(...score);\n  }\n\n  generateCollageTree(images, tar) {\n    this.root.generate(images, tar, images.length);\n  }\n\n  adjust(th) {\n    let trys = 0;\n    let bestAdjust = this.copy();\n    let bestAspectRatio = this.root.value.aspectRatio;\n    const tolerableDifference = this.root.value.targetAspectRatio * (1 - th);\n    let ajstCnt = 1000;\n    while (trys < 100 && ajstCnt > 0) {\n      ajstCnt = this.root.adjust(th);\n      trys += 1;\n      const diff =\n        this.root.value.aspectRatio - this.root.value.targetAspectRatio;\n      if (\n        Math.abs(diff) <\n        Math.abs(bestAspectRatio - this.root.value.targetAspectRatio)\n      ) {\n        bestAspectRatio = this.root.value.aspectRatio;\n        bestAdjust = this.copy();\n      }\n      if ((diff > 0 && diff < tolerableDifference) || diff === 0) break;\n    }\n\n    return [bestAspectRatio, bestAdjust];\n  }\n\n  copy() {\n    const copyTree = new BinaryTree({});\n    copyTree.root = this.root.copy();\n    copyTree.root.options = { ...this.root.options };\n    return copyTree;\n  }\n\n  addSize(canvasWidth, canvasHeight, aspectRatio) {\n    const [maxW, maxH] = helpers.getCollageDimension(\n      canvasWidth,\n      canvasHeight,\n      aspectRatio\n    );\n    this.root.value.width = maxW;\n    this.root.value.height = maxH;\n    this.root.value.x = 0;\n    this.root.value.y = 0;\n    const { width, height, x, y, cut } = this.root.value;\n    if (this.root.left !== null)\n      this.root.left.addSize(width, height, x, y, cut, 'left');\n    if (this.root.right !== null)\n      this.root.right.addSize(width, height, x, y, cut, 'right');\n  }\n\n  validateAddSize() {\n    return this.root.validateAddSize();\n  }\n}\n","import BinaryTree from './binaryTree';\nimport helpers from './helpers';\n\nfunction findBestAdjustTree(images, tolerance, imageWidth, imageHeight) {\n  const sortedImages = images.sort((a, b) =>\n    a.aspectRatio <= b.aspectRatio ? 1 : -1\n  );\n  const collageArray = [];\n  for (let i = 0; i < 100; i += 1) {\n    const imgTree = new BinaryTree({ cut: helpers.getCut() });\n    imgTree.generateCollageTree(sortedImages, imageWidth / imageHeight);\n\n    collageArray.push(imgTree.adjust(1 - tolerance));\n  }\n\n  collageArray.sort((a, b) => {\n    const aspR = imageWidth / imageHeight;\n    const diffA = Math.abs(a[0] - aspR);\n    const diffB = Math.abs(b[0] - aspR);\n    return diffA - diffB;\n  });\n\n  const bAR = collageArray.filter(\n    (elem) => elem[0].toFixed(1) === collageArray[0][0].toFixed(1)\n  );\n  console.log('from bar', bAR);\n  let maxScore = 0;\n  let maxElem = {};\n  bAR.forEach((element) => {\n    element[1].addSize(\n      1000 * (imageWidth / imageHeight),\n      1000,\n      imageWidth / imageHeight\n    );\n    const score = element[1].generateScore();\n    if (score > maxScore) {\n      maxScore = score;\n      maxElem = element;\n    }\n  });\n  return maxElem;\n}\n\nexport default { findBestAdjustTree };\n","import collageapi from 'api/collage';\n\nfunction verifyPromises(uploadPromises) {\n  let status;\n  for (let i = 0; i < uploadPromises.length; i += 1) {\n    if (\n      uploadPromises[i].status === 'fulfilled' ||\n      uploadPromises[i].value.ok === true\n    ) {\n      status = true;\n    } else {\n      status = false;\n      break;\n    }\n  }\n  return status;\n}\n\nfunction uploadCollageImages(\n  thumbnailCanvas,\n  imageURLS,\n  uploadCallback,\n  images,\n  collageID\n) {\n  const imagePromises = Object.keys(imageURLS).map(async (item) => {\n    // Upload thumbnail\n    const thumbnailKey = `thumbnail-${collageID}.jpg`;\n    if (item === thumbnailKey) {\n      return thumbnailCanvas.toBlob(async (blob) =>\n        collageapi.upload(imageURLS[thumbnailKey], blob)\n      );\n    }\n\n    // Upload Images\n    const url = imageURLS[item];\n    const Img = images.images.find((img) => img.title === item);\n    return collageapi.upload(url, Img.file).then((resp) => {\n      uploadCallback(); // Increase image upload count\n      return resp;\n    });\n  });\n\n  return imagePromises;\n}\nfunction uploadCollageDetails(\n  thumbnailDetails,\n  name,\n  collageID,\n  collageType,\n  images,\n  treeState\n) {\n  const dets = {\n    collage_id: collageID.toString(),\n    name,\n    collage_type: collageType,\n    created_at: '2021-02-18T21:54:42.123Z',\n    last_updated_at: '2021-02-18T21:54:45.123Z',\n    images: images.getImageData(images.images),\n    tree: treeState.tree.removeImageData(),\n    thumbnail: thumbnailDetails,\n  };\n  // TODO [33] Validate collageDetails\n  console.log(dets);\n  return collageapi.newCollage(collageID, dets);\n}\n\nexport default { uploadCollageImages, verifyPromises, uploadCollageDetails };\n","import { useEffect, useState, useLayoutEffect } from 'react';\nimport useDimensions from 'hooks/collage/dimensions';\nimport useOptions from 'hooks/collage/options';\nimport useActions from 'hooks/collage/actions';\nimport useImages from 'hooks/collage/images';\nimport useTree from 'hooks/collage/tree';\n\nimport helpers from 'components/collage/helpers';\nimport apiHelpers from 'components/collage/apiHelpers';\nimport collageapi from 'api/collage';\nimport constants from 'static/config/collage';\n\nexport default function useBase(initialValue) {\n  console.log('use base', initialValue);\n  const {\n    defaultCollageName,\n    defaultCollageType,\n    paperSizes,\n    tolerance,\n    thumbnailHeight,\n    fontSize,\n    lineHeight,\n    textPadding,\n  } = constants;\n\n  const [details, setDetails] = useState(initialValue);\n  const [collageName, setCollageName] = useState(defaultCollageName);\n  const [collageType, setCollageType] = useState(defaultCollageType);\n  const [uploadedImages, setUploadedImages] = useState(0);\n  const dimensions = useDimensions();\n  const options = useOptions();\n  const actions = useActions();\n  const images = useImages(details);\n  const treeState = useTree(details, options.setOptions);\n  const [thumbnail, setThumbnail] = useState({});\n\n  const initialStatus = () => ({\n    details: {\n      text: 'Saving Details',\n      status: 'pending',\n    },\n    images: {\n      text: `Saving Images (${uploadedImages} / ${images.images.length})`,\n      status: 'pending',\n    },\n    finalizing: {\n      text: 'Finalizing Collage',\n      status: 'pending',\n    },\n  });\n  const [saveStatus, setSaveStatus] = useState(initialStatus);\n\n  const handleCollageTypeChange = (ct) => setCollageType(ct);\n  const getAspectRatio = () =>\n    paperSizes[collageType].width / paperSizes[collageType].height;\n\n  const handleNameChange = (newName) => setCollageName(newName);\n\n  const collageID =\n    'details' in initialValue && 'collage_id' in initialValue.details\n      ? initialValue.details.collage_id\n      : Date.now();\n\n  useLayoutEffect(() => {\n    setDetails(initialValue);\n    if ('details' in initialValue) {\n      if (\n        'name' in initialValue.details &&\n        collageName === defaultCollageName\n      ) {\n        console.log('setting collage name', initialValue.details.name);\n        setCollageName(initialValue.details.name);\n      }\n      if (\n        'collage_type' in initialValue.details &&\n        collageType === defaultCollageType\n      ) {\n        console.log('setting collage name', initialValue.details.collage_type);\n        setCollageType(initialValue.details.collage_type);\n      }\n    }\n  }, [initialValue]);\n\n  const updateStatus = (key, status) => {\n    const value = { ...saveStatus[key], status };\n    setSaveStatus((st) => ({ ...st, [key]: value }));\n  };\n\n  const updateImagesStatus = () => {\n    const imagesText = `Saving Images (${uploadedImages} / ${images.imgCount})`;\n    let value = { ...saveStatus.images, text: imagesText };\n    if (uploadedImages === images.imgCount && images.imgCount > 0) {\n      value = { ...value, status: 'done' };\n    }\n    setSaveStatus((st) => ({ ...st, images: value }));\n  };\n\n  useEffect(() => {\n    console.log('useeffect 3');\n    updateImagesStatus();\n  }, [uploadedImages, images.imgCount]);\n\n  const handleClear = async () => {\n    const clearPromises = await Promise.allSettled([\n      treeState.clear(),\n      images.clear(),\n      options.clear(),\n    ]);\n\n    for (let i = 0; i < clearPromises.length; i += 1) {\n      if (\n        clearPromises[i].status === 'fulfilled' ||\n        clearPromises[i].value.ok === true\n      ) {\n        return true;\n      }\n    }\n    return false;\n  };\n\n  useEffect(() => {\n    console.log('aspect ratio changed', getAspectRatio());\n    const ar = getAspectRatio();\n    console.log('useeffect tree', treeState.tree);\n    if (\n      Object.keys(treeState.tree).length > 0 &&\n      'aspectRatio' in treeState.tree.root.value &&\n      treeState.tree.root.value.aspectRatio !== ar\n    ) {\n      console.log(\n        'useeffect vals',\n        treeState.tree,\n        ar,\n        treeState.tree.root.value.aspectRatio\n      );\n      const newAspectRatioTree = treeState.tree.copy();\n      newAspectRatioTree.value = {\n        ...newAspectRatioTree.value,\n        aspectRatio: ar,\n      };\n      newAspectRatioTree.root.value = {\n        ...newAspectRatioTree.root.value,\n        targetAspectRatio: ar,\n      };\n      treeState.setTree(newAspectRatioTree);\n      if (images.images.length > 1) actions.setRefresh(true);\n    }\n  }, [collageType]);\n\n  useEffect(() => {\n    const ar = getAspectRatio();\n    const { maxWidth, maxHeight } = dimensions;\n    const [w, h] = helpers.getCollageDimension(maxWidth, maxHeight, ar);\n    console.log(\n      'dimensions',\n      window.innerWidth,\n      window.innerHeight,\n      maxWidth,\n      maxHeight,\n      w,\n      h\n    );\n    dimensions.setWidth(w);\n    dimensions.setHeight(h);\n  }, [dimensions.maxWidth, dimensions.maxHeight, collageType]);\n\n  useEffect(() => {\n    console.log('useeffect 2');\n    if (\n      (images.newImgCount > 0 &&\n        images.newImgCount === images.newImagesLoaded) ||\n      actions.refresh\n    ) {\n      images.setNewImageCount(0);\n      images.setNewImagesLoaded(0);\n      treeState.reAdjust(\n        images.images,\n        tolerance,\n        dimensions.width,\n        dimensions.height - dimensions.textHeight,\n        options.options\n      );\n      actions.setRefresh(false);\n    }\n  }, [images.newImgCount, images.newImagesLoaded, actions.refresh]);\n\n  const collageCallback = () => {};\n\n  const handleRemoveImage = (imgTitle) => {\n    const newImagesArr = images.remove(imgTitle);\n    treeState.reAdjust(\n      newImagesArr,\n      tolerance,\n      dimensions.imageWidth,\n      dimensions.imageHeight,\n      options.options\n    );\n  };\n\n  const generateThumbnail = () => {\n    const ar = treeState.tree.root.value.aspectRatio;\n    const thumbnailWidth = thumbnailHeight * ar;\n    const thumbnailCanvas = document.createElement('canvas');\n    const thumbnailTree = treeState.tree.copy();\n    thumbnailTree.root.options.text = '';\n    thumbnailTree.addSize(thumbnailWidth, thumbnailHeight, ar);\n    thumbnailCanvas.width = thumbnailWidth;\n    thumbnailCanvas.height = thumbnailHeight;\n    thumbnailTree.CanvasDisplay(\n      thumbnailWidth,\n      thumbnailHeight,\n      thumbnailCanvas,\n      thumbnailWidth / dimensions.width\n    );\n\n    // create and update details\n    const thumbnailDetails = {\n      title: `thumbnail-${collageID}.png`,\n      src: '',\n      naturalHeight: thumbnailHeight,\n      naturalWidth: thumbnailWidth,\n      aspectRatio: ar,\n      type: 'image/png',\n    };\n    setThumbnail(thumbnailDetails);\n    return [thumbnailDetails, thumbnailCanvas];\n  };\n\n  const uploadCallback = () => setUploadedImages((cnt) => cnt + 1);\n\n  useEffect(() => {\n    if (\n      options.options.text.length > 0 &&\n      Object.keys(treeState.tree).length > 0\n    ) {\n      const tH = helpers.wrapText(\n        options.options.text,\n        0,\n        0,\n        dimensions.width,\n        fontSize,\n        lineHeight\n      );\n      dimensions.setTextHeight(tH.length * lineHeight + 2 * textPadding);\n      const [w, h] = helpers.getCollageDimension(\n        dimensions.width,\n        dimensions.height - (tH.length * lineHeight + 2 * textPadding),\n        treeState.tree.root.value.aspectRatio\n      );\n\n      dimensions.setImageWidth(w);\n      dimensions.setImageHeight(h);\n    } else {\n      dimensions.setTextHeight(0);\n      options.handlePositionChange(true);\n      dimensions.setImageWidth(dimensions.width);\n      dimensions.setImageHeight(dimensions.height);\n    }\n  }, [\n    dimensions.width,\n    dimensions.height,\n    treeState.tree,\n    options.options.text,\n  ]);\n\n  const getDetails = (name, thumbnailDetails) => {\n    setCollageName(name);\n    return {\n      collage_id: collageID.toString(),\n      name,\n      collage_type: collageType,\n      created_at: '2021-02-18T21:54:42.123Z',\n      last_updated_at: '2021-02-18T21:54:45.123Z',\n      images: images.getImageData(images.images),\n      tree: treeState.tree.removeImageData(),\n      thumbnail: thumbnailDetails,\n    };\n  };\n\n  const updateCollage = async (name, getURLS) => {\n    const [thumbnailDetails, thumbnailCanvas] = generateThumbnail();\n\n    // Upload collage details\n    updateStatus('details', 'running');\n    const imageURLS = getURLS(collageID, getDetails(name, thumbnailDetails));\n    console.log('imageURLS', imageURLS);\n    updateStatus('details', 'done');\n\n    // Image Upload start\n    updateStatus('images', 'running');\n    const imagePromises = apiHelpers.uploadCollageImages(\n      thumbnailCanvas,\n      imageURLS,\n      uploadCallback,\n      images.images,\n      collageID\n    );\n    const uploadPromises = await Promise.allSettled(imagePromises);\n    updateStatus('images', 'done');\n\n    // Verify upload promises\n    updateStatus('finalizing', 'running');\n    const valid = apiHelpers.verifyPromises(uploadPromises);\n    updateStatus('finalizing', valid === true ? 'done' : 'failed');\n    return valid;\n  };\n\n  const newCollage = async (name) => updateCollage(name, collageapi.newCollage);\n  const saveCollage = async (name) =>\n    updateCollage(name, collageapi.saveCollage);\n\n  console.log('tree', treeState.tree);\n  return [\n    collageType,\n    getDetails,\n    collageName,\n    thumbnail,\n    collageID,\n    dimensions,\n    options,\n    actions,\n    images,\n    treeState,\n    handleClear,\n    collageCallback,\n    handleRemoveImage,\n    newCollage,\n    saveStatus,\n    saveCollage,\n    handleCollageTypeChange,\n    handleNameChange,\n  ];\n}\n","import { useRef, useState, useEffect } from 'react';\n\nexport default function useDimensions() {\n  const headerRef = useRef();\n  const actionsRef = useRef();\n  const footerRef = useRef();\n  const collageMetaRef = useRef();\n  const addImageRef = useRef();\n\n  const [height, setHeight] = useState(0);\n  const [imageHeight, setImageHeight] = useState(0);\n  const [imageWidth, setImageWidth] = useState(0);\n  const [width, setWidth] = useState(0);\n  const [maxHeight, setMaxHeight] = useState(0);\n  const [maxWidth, setMaxWidth] = useState(0);\n  const [textHeight, setTextHeight] = useState(0);\n\n  const setDimensions = () => {\n    const isMobile = window.innerWidth < window.innerHeight;\n    const headerHeight = headerRef.current ? headerRef.current.offsetHeight : 0;\n    const collageMetaHeight = collageMetaRef.current\n      ? collageMetaRef.current.offsetHeight\n      : 0;\n    console.log('dimensions collage meta height', collageMetaHeight);\n    if (isMobile === true) {\n      const actionsHeight = actionsRef.current\n        ? actionsRef.current.offsetHeight\n        : 0;\n      const footerHeight = footerRef.current\n        ? footerRef.current.offsetHeight\n        : 0;\n      const otherHeight =\n        headerHeight + actionsHeight + footerHeight + collageMetaHeight;\n      setMaxWidth(window.innerWidth);\n      setMaxHeight(window.innerHeight - otherHeight);\n      // setMaxWidth(window.screen.width);\n      // setMaxHeight(window.screen.height - otherHeight);\n    } else {\n      const actionsWidth = actionsRef.current\n        ? actionsRef.current.offsetWidth\n        : 0;\n      const footerWidth = footerRef.current ? footerRef.current.offsetWidth : 0;\n      setMaxWidth(window.innerWidth - (footerWidth + actionsWidth) - 10);\n      setMaxHeight(window.innerHeight - headerHeight - collageMetaHeight);\n      // setMaxWidth(window.screen.width - (footerWidth + actionsWidth));\n      // setMaxHeight(window.screen.height - headerHeight - collageMetaHeight);\n    }\n  };\n\n  const handleImageAddClick = () => {\n    if (addImageRef.current) addImageRef.current.click();\n  };\n\n  useEffect(() => {\n    setDimensions();\n  }, [headerRef.current, actionsRef.current, footerRef.current]);\n\n  useEffect(() => {\n    setDimensions();\n\n    window.addEventListener('resize', setDimensions);\n\n    return () => window.removeEventListener('resize', setDimensions);\n  }, []);\n\n  return {\n    addImageRef,\n    actionsRef,\n    headerRef,\n    footerRef,\n    collageMetaRef,\n    width,\n    height,\n    imageHeight,\n    imageWidth,\n    setImageWidth,\n    setImageHeight,\n    maxHeight,\n    maxWidth,\n    handleImageAddClick,\n    textHeight,\n    setTextHeight,\n    setWidth,\n    setHeight,\n  };\n}\n","import { useState } from 'react';\n\nexport default function useOptions() {\n  const optionsInitValue = {\n    padding: 2,\n    borderRadius: 5,\n    color: {\n      r: 255,\n      g: 255,\n      b: 255,\n      a: 1,\n    },\n    text: '',\n    topText: true,\n  };\n\n  const [options, setOptions] = useState(optionsInitValue);\n  const [displayColorPicker, setDisplayColorPicker] = useState(false);\n  const [editControl, setEditControl] = useState(null);\n  const [editOptionsValue, setEditOptionsValue] = useState('');\n\n  const clear = () => setOptions(optionsInitValue);\n  const handlePaddingChange = (e) =>\n    setOptions((opts) => ({ ...opts, padding: e.target.value }));\n  const handleRadiusChange = (e) => {\n    setOptions((opts) => ({ ...opts, borderRadius: e.target.value }));\n  };\n\n  const handleColorClick = () => setDisplayColorPicker((dcp) => !dcp);\n  const handleColorClose = () => setDisplayColorPicker(false);\n  const handleColorChange = (clr) =>\n    setOptions((opts) => ({ ...opts, color: clr.rgb }));\n  const handlePositionChange = (value) =>\n    setOptions((opts) => ({ ...opts, topText: value }));\n\n  const handleTextChange = (e) => {\n    const { target } = e;\n    setOptions((opts) => ({ ...opts, text: target.value }));\n  };\n\n  const handleTextSubmit = (e) => {\n    handleTextChange(e);\n    setEditControl(null);\n    setEditOptionsValue(null);\n  };\n\n  return {\n    options,\n    setOptions,\n    clear,\n    handlePaddingChange,\n    handleRadiusChange,\n    handleColorClick,\n    handleColorClose,\n    handleColorChange,\n    handlePositionChange,\n    handleTextChange,\n    displayColorPicker,\n    editControl,\n    setEditControl,\n    editOptionsValue,\n    setEditOptionsValue,\n    handleTextSubmit,\n  };\n}\n","import { useState } from 'react';\n\nexport default function useActions() {\n  const [open, setOpen] = useState(false);\n  const [saveOpen, setSaveOpen] = useState(false);\n  const [saveStart, setSaveStart] = useState(false);\n  const [refresh, setRefresh] = useState(false);\n  const [generate, setGenerate] = useState(false);\n  const [removeImage, setRemoveImage] = useState(false);\n  const [printOptions, setPrintOptions] = useState({\n    paperWidth: 0,\n    paperHeight: 0,\n  });\n\n  const onRefresh = () => setRefresh(true);\n  const handleDownload = () => setOpen(true);\n  const handleSave = () => {\n    setSaveOpen(true);\n  };\n  const onDownloadClose = () => setOpen(false);\n  const onSaveClose = () => setSaveOpen(false);\n  const clearDelete = () => setRemoveImage(false);\n  const onDelete = () => setRemoveImage((ri) => !ri);\n\n  const onDownloadClick = (w, h) => {\n    setPrintOptions({ paperWidth: w, paperHeight: h });\n    setGenerate(true);\n    setOpen(false);\n  };\n\n  const onSaveClick = () => {\n    setSaveStart(true);\n    setSaveOpen(false);\n  };\n  const handleGenerateCallback = () => {\n    setGenerate(false);\n    setPrintOptions({ paperWidth: 0, paperHeight: 0 });\n  };\n\n  return {\n    clearDelete,\n    generate,\n    handleDownload,\n    handleGenerateCallback,\n    onDelete,\n    onDownloadClick,\n    onDownloadClose,\n    onRefresh,\n    open,\n    printOptions,\n    refresh,\n    setGenerate,\n    setOpen,\n    setPrintOptions,\n    setRefresh,\n    removeImage,\n    setRemoveImage,\n    saveOpen,\n    setSaveOpen,\n    onSaveClose,\n    onSaveClick,\n    handleSave,\n    saveStart,\n    setSaveStart,\n  };\n}\n","import { useState, useEffect } from 'react';\nimport helpers from 'components/collage/helpers';\nimport constants from 'static/config/collage';\n\nexport default function useImages(initialValue) {\n  console.log('use images', initialValue);\n  const [newImgCount, setNewImageCount] = useState(0);\n  const [newImagesLoaded, setNewImagesLoaded] = useState(0);\n  const [imgCount, setImageCount] = useState(0);\n  const [loaded, setLoaded] = useState(0);\n  const [images, setImages] = useState([]);\n  const [imageCountMaxError, setImageCountMaxError] = useState('');\n  const [imageCountMinError, setImageCountMinError] = useState('');\n\n  useEffect(() => {\n    console.log('setting images');\n    if ('images' in initialValue) {\n      setImages(initialValue.images);\n      if (imgCount === 0) setImageCount(initialValue.images.length);\n    }\n  }, [initialValue]);\n\n  const getImageData = (imageArr) => {\n    const tempImgArr = [...imageArr];\n    return tempImgArr.map((img) => {\n      const { file, src, ...rest } = img;\n      console.log('get image data', img, rest);\n      return rest;\n    });\n  };\n\n  const removeImageData = (imageArr) => {\n    const tempImgArr = [...imageArr];\n    return tempImgArr.map((img) => {\n      const { file, src, ...rest } = img;\n      console.log('get image data', img, rest);\n      return rest;\n    });\n  };\n\n  const incrementNewImageCount = () => {\n    console.log('incrementing image count');\n    setNewImagesLoaded((cnt) => cnt + 1);\n  };\n\n  const handleImageData = async (imageDetail) => {\n    setImages((arr) => arr.concat([imageDetail]));\n    setNewImagesLoaded((cnt) => cnt + 1);\n  };\n\n  const handleImageCount = (totalImages) => {\n    if (totalImages === 0) {\n      setImageCountMinError('');\n      return true;\n    }\n    if (totalImages > 0) {\n      if (totalImages < constants.minImages) {\n        setImageCountMinError(\n          `Image Count Error: Need atleast ${constants.minImages} images to create a collage`\n        );\n        setImageCountMaxError('');\n        return false;\n      }\n      if (totalImages > constants.maxImages) {\n        setImageCountMaxError(\n          `Image Count Error: Maximum images allowed in collage is ${constants.maxImages}`\n        );\n        setImageCountMinError('');\n        return false;\n      }\n      if (\n        totalImages >= constants.minImages &&\n        totalImages <= constants.maxImages\n      ) {\n        setImageCountMaxError('');\n        setImageCountMinError('');\n        return true;\n      }\n    }\n    return false;\n  };\n\n  const handleLoad = (event) => {\n    const totalImages = event.target.files.length + imgCount;\n    const valid = handleImageCount(totalImages);\n    if (valid === true) {\n      helpers.handleImageLoad(\n        event,\n        setImageCount,\n        setNewImageCount,\n        handleImageData\n      );\n    }\n    console.log(\n      'total image count',\n      event.target.files.length + imgCount,\n      imgCount\n    );\n  };\n\n  const clear = () => {\n    setImages([]);\n    setImageCount(0);\n    setLoaded(0);\n    setNewImagesLoaded(0);\n  };\n\n  const remove = (title) => {\n    const removeIndex = images.findIndex((elem) => elem.title === title);\n    const newImagesArr = [\n      ...images.slice(0, removeIndex),\n      ...images.slice(removeIndex + 1),\n    ];\n    setImages(newImagesArr);\n    setImageCount((cnt) => cnt - 1);\n    return newImagesArr;\n  };\n\n  return {\n    clear,\n    handleImageData,\n    handleLoad,\n    images,\n    imgCount,\n    loaded,\n    newImagesLoaded,\n    newImgCount,\n    remove,\n    setImageCount,\n    setImages,\n    setLoaded,\n    setNewImageCount,\n    setNewImagesLoaded,\n    getImageData,\n    removeImageData,\n    incrementNewImageCount,\n    imageCountMinError,\n    setImageCountMinError,\n    imageCountMaxError,\n    setImageCountMaxError,\n    handleImageCount,\n  };\n}\n","import { useState, useEffect } from 'react';\nimport treeUtils from 'components/collage/treeUtils';\nimport BinaryTree from 'components/collage/binaryTree';\n\nexport default function useTree(initialValue, loadingCallback = () => {}) {\n  console.log('use Tree', initialValue);\n  const [tree, setTree] = useState(new BinaryTree({}));\n\n  useEffect(() => {\n    console.log('use Tree useEffect');\n    const newTree = new BinaryTree({});\n    if (\n      'details' in initialValue &&\n      Object.keys(initialValue.details).length > 0\n    ) {\n      console.log('initial value in tree', initialValue);\n      newTree.fromObject(initialValue.details.tree);\n      if ('options' in initialValue.details.tree.root) {\n        loadingCallback((opts) => ({\n          ...opts,\n          ...initialValue.details.tree.root.options,\n        }));\n      }\n      console.log('setting tree');\n      setTree(newTree);\n    }\n  }, [initialValue]);\n\n  const clear = () => setTree({});\n\n  const reAdjust = (imagesArr, tolerance, imageWidth, imageHeight, options) => {\n    const [, bestAspectRatioTree] = treeUtils.findBestAdjustTree(\n      imagesArr,\n      tolerance,\n      imageWidth,\n      imageHeight\n    );\n    bestAspectRatioTree.addOptions(options);\n    setTree(bestAspectRatioTree);\n  };\n\n  return { tree, setTree, clear, reAdjust };\n}\n","import PropTypes from 'prop-types';\nimport { useState, useEffect } from 'react';\nimport Button from '@mui/material/Button';\nimport Dialog from '@mui/material/Dialog';\nimport DialogTitle from '@mui/material/DialogTitle';\nimport DialogActions from '@mui/material/DialogActions';\nimport DialogContent from '@mui/material/DialogContent';\nimport DialogContentText from '@mui/material/DialogContentText';\nimport List from '@mui/material/List';\nimport ListItem from '@mui/material/ListItem';\nimport Typography from '@mui/material/Typography';\n\nexport default function HandleError({ errors, children, handleClose }) {\n  const [open, setOpen] = useState(false);\n  useEffect(() => setOpen(true), []);\n  return errors.length > 0 ? (\n    <Dialog open={open} fullWidth>\n      <DialogTitle\n        sx={{ textAlign: 'center', color: 'red', fontWeight: 'bold' }}\n      >\n        Error(s)\n      </DialogTitle>\n      <DialogContent\n        dividers\n        sx={{\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'space-between',\n        }}\n      >\n        <DialogContentText sx={{ display: 'inline', pr: 1 }}>\n          <Typography sx={{ fontWeight: 'bold' }}>\n            Please fix the following errors\n          </Typography>\n          <List sx={{ px: 2 }}>\n            {errors.map((err) => (\n              <ListItem sx={{ display: 'list-item', listStyleType: 'disc' }}>\n                {err}\n              </ListItem>\n            ))}\n          </List>\n        </DialogContentText>\n      </DialogContent>\n      <DialogActions>\n        <Button\n          variant=\"outlined\"\n          onClick={() => {\n            handleClose();\n            setOpen(false);\n          }}\n        >\n          Close\n        </Button>\n      </DialogActions>\n    </Dialog>\n  ) : (\n    children\n  );\n}\n\nHandleError.propTypes = {\n  errors: PropTypes.arrayOf(PropTypes.string).isRequired,\n  children: PropTypes.node.isRequired,\n  handleClose: PropTypes.func.isRequired,\n};\n","import { useState, useEffect } from 'react';\nimport constants from 'static/config/collage';\nimport helpers from './helpers';\n\nexport default function Collage({\n  dimensionProps,\n  imageProps,\n  actionProps,\n  collageCallback,\n  handleRemoveImage,\n  options,\n  tree,\n}) {\n  const [collage, setCollage] = useState(null);\n  const { images, setLoaded } = imageProps;\n  const { generate, handleGenerateCallback, printOptions, removeImage } =\n    actionProps;\n  const { height, width, imageHeight, imageWidth } = dimensionProps;\n  const { fontSize, lineHeight } = constants;\n\n  const handleCollageImageLoad = () => setLoaded((cnt) => cnt + 1);\n  const isEmpty = (t) => Object.keys(t).length === 0;\n  const createCollage = () => {\n    console.log('started collage loading', tree);\n    tree.addSize(imageWidth, imageHeight, tree.root.value.aspectRatio);\n    console.log('collage added size');\n    tree.addOptions(options);\n    console.log('collage added options', images.length);\n    if (images.length > 0) {\n      tree.addImageData(images);\n      console.log('collage added image data');\n      const collageElem = tree.DOMDisplay(\n        width,\n        height,\n        removeImage,\n        handleRemoveImage,\n        handleCollageImageLoad\n      );\n      console.log('collage added dom display');\n      setCollage(collageElem);\n      collageCallback(tree);\n    }\n  };\n\n  useEffect(() => {\n    if (!isEmpty(tree) && tree.root.left != null) {\n      console.log('collage, tree is not empty');\n      createCollage();\n    }\n  }, []);\n\n  useEffect(() => {\n    if (!isEmpty(tree) && tree.root.left != null) {\n      console.log('collage, tree is not empty 1');\n      createCollage();\n    } else {\n      setCollage(null);\n    }\n  }, [tree, options, imageWidth, imageHeight, removeImage, images]);\n\n  const downloadCollage = (canvas, pW, pH) => {\n    canvas.toBlob((blob) => {\n      const link = document.createElement('a');\n      link.download = `collage-${pW.toFixed(2)}X${pH.toFixed(\n        2\n      )}-${Date.now()}.jpg`;\n      link.href = URL.createObjectURL(blob);\n      link.click();\n      URL.revokeObjectURL(link.href);\n      link.href = null;\n      handleGenerateCallback();\n    }, 'image/jpeg');\n  };\n\n  const getCanvasTree = () => {\n    const canvasTree = tree.copy();\n    canvasTree.replaceImages(images);\n    return canvasTree;\n  };\n\n  const getCanvas = (pw, ph) => {\n    const canvasElement = document.createElement('canvas');\n    canvasElement.width = pw;\n    canvasElement.height = ph;\n    return canvasElement;\n  };\n\n  const generateCollageTree = (pw, ph) => {\n    const canvasTree = getCanvasTree();\n    const ar = tree.root.value.aspectRatio;\n    const scaleFactor = pw / width;\n    const [imgPW, imgPH] = helpers.getImageDimensions(\n      pw,\n      ph,\n      options.text,\n      0,\n      0,\n      fontSize,\n      lineHeight,\n      scaleFactor,\n      tree.root.value.aspectRatio\n    );\n    canvasTree.addSize(imgPW, imgPH, ar);\n    return canvasTree;\n  };\n\n  const generateCollage = (ctree, pw, ph) => {\n    const scaleFactor = pw / width;\n    const canvasElement = getCanvas(pw, ph);\n    ctree.CanvasDisplay(pw, ph, canvasElement, scaleFactor);\n\n    setTimeout(() => downloadCollage(canvasElement, pw, ph), '5000');\n  };\n\n  useEffect(() => {\n    if (generate === true) {\n      const { paperWidth: pw, paperHeight: ph } = printOptions;\n      const canvasTree = generateCollageTree(pw, ph);\n      const [valid, probNodes] = canvasTree.validateAddSize();\n      if (valid) {\n        generateCollage(canvasTree, pw, ph);\n      } else {\n        const [newPW, newPH] = helpers.optimizeDimensions(pw, ph, probNodes);\n        const newCanvasTree = generateCollageTree(newPW, newPH);\n        const [newValid, newProbNodes] = newCanvasTree.validateAddSize();\n        if (newValid) {\n          generateCollage(newCanvasTree, newPW, newPH);\n        } else {\n          console.log('unable to generate collage', newProbNodes);\n        }\n      }\n    }\n  }, [generate]);\n\n  return collage;\n}\n","import PropTypes from 'prop-types';\nimport { useState } from 'react';\nimport Button from '@mui/material/Button';\nimport Dialog from '@mui/material/Dialog';\nimport DialogTitle from '@mui/material/DialogTitle';\nimport DialogActions from '@mui/material/DialogActions';\nimport DialogContent from '@mui/material/DialogContent';\nimport DialogContentText from '@mui/material/DialogContentText';\nimport MenuItem from '@mui/material/MenuItem';\nimport Select from '@mui/material/Select';\nimport InputLabel from '@mui/material/InputLabel';\nimport FormControl from '@mui/material/FormControl';\n\nexport default function DownloadDialog({ open, onClick, onClose, sizes }) {\n  const [value, setValue] = useState('');\n  const handleDownload = () => {\n    console.log(sizes[value].width, sizes[value].height, onClick);\n    onClick(sizes[value].width, sizes[value].height);\n    setValue('');\n  };\n\n  const handleClose = () => {\n    setValue('');\n    onClose();\n  };\n\n  return (\n    <Dialog open={open} fullWidth>\n      <DialogTitle sx={{ textAlign: 'center' }}>Download Collage</DialogTitle>\n      <DialogContent\n        dividers\n        sx={{\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'space-between',\n        }}\n      >\n        <DialogContentText sx={{ display: 'inline', pr: 1 }}>\n          Choose collage size\n        </DialogContentText>\n        <FormControl fullWidth sx={{ maxWidth: '60%' }}>\n          <InputLabel id=\"demo-simple-select-label\">Download Size</InputLabel>\n          <Select\n            labelId=\"demo-simple-select-label\"\n            id=\"demo-simple-select\"\n            defaultValue=\"A4\"\n            value={value}\n            label=\"Download Size\"\n            onChange={(event) => setValue(event.target.value)}\n          >\n            {Object.keys(sizes).map((key) => (\n              <MenuItem key={sizes[key].text} value={key}>\n                {sizes[key].text}\n              </MenuItem>\n            ))}\n          </Select>\n        </FormControl>\n      </DialogContent>\n      <DialogActions>\n        <Button\n          variant=\"outlined\"\n          disabled={value.length === 0}\n          onClick={handleDownload}\n        >\n          Download\n        </Button>\n        <Button variant=\"text\" onClick={handleClose}>\n          Cancel\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n\nDownloadDialog.propTypes = {\n  open: PropTypes.bool.isRequired,\n  onClick: PropTypes.func.isRequired,\n  onClose: PropTypes.func.isRequired,\n  sizes: PropTypes.objectOf(\n    PropTypes.shape({\n      width: PropTypes.number.isRequired,\n      height: PropTypes.number.isRequired,\n      text: PropTypes.string.isRequired,\n    })\n  ).isRequired,\n};\n","import PropTypes from 'prop-types';\nimport { useState } from 'react';\nimport { alpha } from '@mui/material/styles';\nimport Button from '@mui/material/Button';\nimport Dialog from '@mui/material/Dialog';\nimport DialogTitle from '@mui/material/DialogTitle';\nimport DialogActions from '@mui/material/DialogActions';\nimport DialogContent from '@mui/material/DialogContent';\nimport TextField from '@mui/material/TextField';\n\nexport default function SaveDialog({ collageName, open, onClick, onClose }) {\n  const [name, setName] = useState(collageName);\n  const [nameError] = useState('');\n  const handleSave = () => {\n    onClick(name);\n  };\n\n  const handleNameChange = (e) => {\n    const { target } = e;\n    setName(target.value);\n  };\n\n  const handleClose = () => {\n    setName('');\n    onClose();\n  };\n\n  return (\n    <Dialog open={open} fullWidth>\n      <DialogTitle sx={{ textAlign: 'center' }}>Save Collage</DialogTitle>\n      <DialogContent\n        dividers\n        sx={{\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'space-between',\n        }}\n      >\n        <TextField\n          variant=\"outlined\"\n          label=\"Set Collage Name\"\n          defaultValue={name}\n          onChange={handleNameChange}\n          size=\"small\"\n          sx={{ width: '100%', mb: 1 }}\n          InputProps={{ sx: { backgroundColor: alpha('#fff', 0.9) } }}\n          helperText={nameError}\n          error={!!nameError}\n        />\n      </DialogContent>\n      <DialogActions>\n        <Button\n          variant=\"outlined\"\n          disabled={name.length === 0}\n          onClick={handleSave}\n        >\n          Save\n        </Button>\n        <Button variant=\"text\" onClick={handleClose}>\n          Cancel\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n\nSaveDialog.propTypes = {\n  collageName: PropTypes.string.isRequired,\n  open: PropTypes.bool.isRequired,\n  onClick: PropTypes.func.isRequired,\n  onClose: PropTypes.func.isRequired,\n};\n","import PropTypes from 'prop-types';\nimport { useEffect, useState } from 'react';\nimport { alpha } from '@mui/material/styles';\nimport Stack from '@mui/material/Stack';\nimport Dialog from '@mui/material/Dialog';\nimport DialogTitle from '@mui/material/DialogTitle';\nimport DialogContent from '@mui/material/DialogContent';\nimport Typography from '@mui/material/Typography';\nimport CircularProgress from '@mui/material/CircularProgress';\nimport PendingIcon from '@mui/icons-material/Pending';\nimport CheckCircleOutlineIcon from '@mui/icons-material/CheckCircleOutline';\nimport CloseIcon from '@mui/icons-material/Close';\n\nfunction StatusIndicator({ status }) {\n  if (status === 'running') {\n    return <CircularProgress color=\"info\" size=\"1rem\" />;\n  }\n  if (status === 'pending') {\n    return <PendingIcon color=\"disabled\" size=\"0.875rem\" />;\n  }\n  if (status === 'done') {\n    return <CheckCircleOutlineIcon color=\"success\" size=\"0.875rem\" />;\n  }\n  if (status === 'failed') {\n    return <CloseIcon color=\"error\" size=\"0.875rem\" />;\n  }\n}\n\nStatusIndicator.propTypes = {\n  status: PropTypes.string.isRequired,\n};\n\nfunction Status({ text, status }) {\n  const color = {\n    pending: alpha('#000', 0.26),\n    done: 'black',\n    running: 'black',\n    failed: 'red',\n  };\n\n  return (\n    <Stack direction=\"row\" justifyContent=\"space-between\">\n      <Typography\n        sx={{ fontWeight: 'bold', fontSize: '1rem', color: color[status] }}\n      >\n        {text}\n      </Typography>\n      <StatusIndicator status={status} />\n    </Stack>\n  );\n}\n\nStatus.propTypes = {\n  text: PropTypes.string.isRequired,\n  status: PropTypes.string.isRequired,\n};\n\nfunction OverAllStatus({ status, counter }) {\n  if (status === 'failed') {\n    return (\n      <Stack\n        direction=\"row\"\n        spacing={2}\n        justifyContent=\"center\"\n        alignItems=\"center\"\n        sx={{ width: '100%', p: 1 }}\n      >\n        <CloseIcon color=\"error\" />\n        <Typography>Collage creation failed</Typography>\n      </Stack>\n    );\n  }\n\n  if (status === 'running' || status === 'pending') return null;\n\n  if (status === 'success') {\n    return (\n      <Stack\n        direction=\"row\"\n        spacing={2}\n        justifyContent=\"center\"\n        alignItems=\"center\"\n        sx={{ width: '100%', p: 1 }}\n      >\n        <CheckCircleOutlineIcon color=\"success\" sx={{ fontSize: '2rem' }} />\n        <Typography>\n          Collage creation successful. Navigation to collages in {counter}{' '}\n          seconds...\n        </Typography>\n      </Stack>\n    );\n  }\n\n  return null;\n}\n\nOverAllStatus.propTypes = {\n  status: PropTypes.string.isRequired,\n  counter: PropTypes.number.isRequired,\n};\n\nexport default function SaveStatusDialog({ open, status }) {\n  let overAllStatus = 'pending';\n  const [counter, setCounter] = useState(-1);\n  useEffect(() => {\n    let timerId;\n    if (counter > 0 && overAllStatus === 'success') {\n      timerId = setTimeout(() => setCounter(counter - 1), 1000);\n    }\n    return () => clearTimeout(timerId);\n  }, [counter, overAllStatus]);\n\n  const statusArr = Object.values(status).map((val) => val.status);\n  if (statusArr.includes('failed')) {\n    overAllStatus = 'failed';\n  } else if (statusArr.includes('running')) {\n    overAllStatus = 'running';\n  } else if (!statusArr.includes('pending')) {\n    console.log('setting counter', counter, status);\n    if (counter === -1) {\n      setCounter(3);\n    }\n    overAllStatus = 'success';\n  }\n\n  return (\n    <Dialog open={open} fullWidth>\n      <DialogTitle sx={{ textAlign: 'center' }}>Save Collage</DialogTitle>\n      <DialogContent dividers>\n        <Stack direction=\"column\" justifyContent=\"center\" spacing={2}>\n          {Object.values(status).map((st) => (\n            <Status key={st.text} text={st.text} status={st.status} />\n          ))}\n        </Stack>\n      </DialogContent>\n      <OverAllStatus status={overAllStatus} counter={counter} />\n    </Dialog>\n  );\n}\n\nSaveStatusDialog.propTypes = {\n  open: PropTypes.bool.isRequired,\n  status: PropTypes.objectOf(\n    PropTypes.shape({\n      text: PropTypes.string,\n      status: PropTypes.string,\n    })\n  ).isRequired,\n};\n","import PropTypes from 'prop-types';\nimport { useState, useEffect } from 'react';\n\nimport * as yup from 'yup';\n// import { alpha } from '@mui/material/styles';\nimport useMediaQuery from '@mui/material/useMediaQuery';\n// import { alpha } from '@mui/material/styles';\nimport TextField from '@mui/material/TextField';\nimport Paper from '@mui/material/Paper';\nimport Stack from '@mui/material/Stack';\nimport { Typography, Box, Link } from '@mui/material';\nimport ArrowBackIcon from '@mui/icons-material/ArrowBack';\nimport ProfileLink from 'components/profile';\nimport { Branding, BrandLogo } from 'components/brand';\nimport constants from 'static/config/collage';\nimport utils from 'utils';\n\nfunction HeaderNameSection({ name, handleChange, nameError, handleNameError }) {\n  const [editable, setEditable] = useState(false);\n  const handleClick = () => setEditable(true);\n  const nameSchema = yup\n    .object({\n      name: yup\n        .string()\n        .max(\n          constants.maxNameLength,\n          `Max allowed length is ${constants.maxNameLength}`\n        ),\n    })\n    .required();\n\n  const isValid = async () => {\n    const nameValid = await utils.isFieldValid(\n      'name',\n      name,\n      handleNameError,\n      nameSchema\n    );\n    return nameValid;\n  };\n\n  const handleNameChange = (e) => handleChange(e.target.value);\n\n  const handleBlur = async (e) => {\n    if (e.target.value === '') {\n      handleChange('Untitled');\n    } else {\n      handleChange(e.target.value);\n      const valid = await isValid();\n      if (valid === false) {\n        return;\n      }\n    }\n    setEditable(false);\n  };\n\n  const handleKeyDown = (e) => {\n    if (e.keyCode === 13 && e.shiftKey === false) {\n      handleBlur(e);\n    }\n  };\n\n  useEffect(() => isValid(), [name]);\n\n  return editable === true ? (\n    <TextField\n      color=\"primary\"\n      variant=\"filled\"\n      label=\"Set Collage Name\"\n      defaultValue={name}\n      autoFocus\n      size=\"small\"\n      onChange={handleNameChange}\n      onBlur={handleBlur}\n      onKeyDown={handleKeyDown}\n      InputLabelProps={{\n        color: 'secondary',\n        focused: true,\n      }}\n      InputProps={{\n        sx: {\n          color: 'white',\n        },\n      }}\n      helperText={\n        <Typography\n          variant=\"body\"\n          sx={{\n            fontWeight: 'bold',\n            color: 'secondary.main',\n          }}\n        >\n          {nameError}\n        </Typography>\n      }\n      error={!!nameError}\n      sx={{\n        position: 'absolute',\n        left: '50%',\n        transform: 'translate(-50%, 0)',\n        cursor: 'text',\n      }}\n    />\n  ) : (\n    <Typography\n      variant=\"h5\"\n      onClick={handleClick}\n      sx={{\n        color: 'gray',\n        position: 'absolute',\n        left: '50%',\n        transform: 'translate(-50%, 0)',\n      }}\n    >\n      {name}\n    </Typography>\n  );\n}\n\nHeaderNameSection.propTypes = {\n  name: PropTypes.string.isRequired,\n  handleChange: PropTypes.func.isRequired,\n  nameError: PropTypes.string.isRequired,\n  handleNameError: PropTypes.func.isRequired,\n};\n\nexport default function Header({\n  headerRef,\n  name,\n  handleNameChange,\n  nameError,\n  handleNameError,\n}) {\n  const belowmd = useMediaQuery((theme) => theme.breakpoints.down('md'));\n  return (\n    <Paper\n      ref={headerRef}\n      sx={{\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'space-between',\n        p: 1,\n        backgroundColor: 'primary.main',\n        borderRadius: 0,\n      }}\n      elevation={0}\n    >\n      <Box sx={{ postion: 'absolute', left: '5px' }}>\n        <Stack direction=\"row\" alignItems=\"center\" spacing={2}>\n          <Link href=\"/collages\" color=\"white\" underline=\"none\">\n            <Box sx={{ display: 'flex', alignItems: 'center' }}>\n              <ArrowBackIcon fontSize=\"medium\" />\n            </Box>\n          </Link>\n          {belowmd ? (\n            <BrandLogo width=\"50px\" height=\"50px\" />\n          ) : (\n            <Branding width=\"50px\" height=\"50px\" />\n          )}\n        </Stack>\n      </Box>\n      <HeaderNameSection\n        name={name}\n        handleChange={handleNameChange}\n        nameError={nameError}\n        handleNameError={handleNameError}\n      />\n      <ProfileLink />\n    </Paper>\n  );\n}\n\nHeader.propTypes = {\n  name: PropTypes.string.isRequired,\n  headerRef: PropTypes.oneOfType([\n    PropTypes.func,\n    PropTypes.shape({ current: PropTypes.instanceOf(Element) }),\n  ]).isRequired,\n  handleNameChange: PropTypes.func.isRequired,\n  nameError: PropTypes.string.isRequired,\n  handleNameError: PropTypes.func.isRequired,\n};\n","import PropTypes from 'prop-types';\n// import Grid from '@mui/material/Grid';\nimport Box from '@mui/material/Box';\nimport collageBack from 'static/images/collage_back1.webp';\n\nexport default function EmptyCollage({ width, height, loadComponent }) {\n  console.log(width, height);\n  return (\n    <Box\n      sx={{\n        backgroundImage: `url(${collageBack})`,\n        backgroundSize: width,\n        objectFit: 'fill',\n        width,\n        height,\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n      }}\n    >\n      {loadComponent}\n    </Box>\n  );\n}\n\nEmptyCollage.propTypes = {\n  width: PropTypes.number.isRequired,\n  height: PropTypes.number.isRequired,\n  loadComponent: PropTypes.node.isRequired,\n};\n","import PropTypes from 'prop-types';\nimport constants from 'static/config/collage';\nimport Typography from '@mui/material/Typography';\nimport Box from '@mui/material/Box';\nimport Stack from '@mui/material/Stack';\nimport EmptyCollage from 'components/collage/EmptyCollage';\nimport Loading from 'components/Loading';\nimport AddPhotos from 'components/AddPhotos';\n\nexport default function View({\n  open,\n  saveOpen,\n  saveStatusOpen,\n  status,\n  dimensionProps,\n  imageProps,\n  header,\n  actions,\n  downloadDialog,\n  saveDialog,\n  saveStatusDialog,\n  collage,\n  controls,\n  collageMetaInfo,\n}) {\n  const { width, height, maxWidth, maxHeight, collageMetaRef } = dimensionProps;\n  console.log(maxHeight, maxWidth);\n  const metaHeight = collageMetaRef.current\n    ? collageMetaRef.current.offsetHeight\n    : 0;\n  let showControls = false;\n  const { images, imgCount, handleLoad } = imageProps;\n  if (images.length > 0) {\n    showControls = true;\n  }\n  let content;\n  if (status === 'fetching') {\n    content = (\n      <EmptyCollage\n        width={width}\n        height={height}\n        loadComponent={<Loading title=\"Fetching collage...\" />}\n      />\n    );\n  }\n\n  if (status === 'preparing') {\n    content = (\n      <>\n        {collage}\n        <Loading title=\"Preparing collage...\" />\n      </>\n    );\n  }\n\n  if (status === 'loading') {\n    content = (\n      <EmptyCollage\n        width={width}\n        height={height}\n        loadComponent={\n          <>\n            <Loading\n              title={`Loading (${images.length} / ${imgCount}) images...`}\n            />\n            {collage}\n          </>\n        }\n      />\n    );\n  }\n\n  if (status === 'empty') {\n    content = (\n      <EmptyCollage\n        width={width}\n        height={height}\n        loadComponent={\n          width ? (\n            <Stack direction=\"column\" spacing={2}>\n              <AddPhotos handleChange={handleLoad} />\n              <Typography\n                sx={{\n                  backgroundColor: 'faded.black',\n                  p: 1,\n                  color: 'form.stepper',\n                  fontWeight: 'bold',\n                  fontSize: '0.7rem',\n                }}\n              >\n                Tip: Select {constants.minImages} - {constants.maxImages} images\n              </Typography>\n            </Stack>\n          ) : (\n            <div />\n          )\n        }\n      />\n    );\n  }\n\n  if (status === 'ready') {\n    content = collage;\n  }\n\n  return (\n    <Box\n      component=\"div\"\n      sx={{\n        backgroundColor: 'gray',\n        position: 'relative',\n      }}\n    >\n      {header}\n      {showControls ? actions : null}\n      {open ? downloadDialog : null}\n      {saveOpen ? saveDialog : null}\n      {saveStatusOpen ? saveStatusDialog : null}\n      <Stack\n        direction=\"column\"\n        // width={maxWidth}\n        height={maxHeight + metaHeight}\n        sx={{\n          position: 'absolute',\n          // top: offsetHeight,\n          left: '50%',\n          transform: 'translate(-50%, 0)',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          backgroundColor: 'gray',\n          justifySelf: 'center',\n        }}\n      >\n        {collageMetaInfo}\n        {content}\n      </Stack>\n      {showControls ? controls : null}\n    </Box>\n  );\n}\n\nView.propTypes = {\n  dimensionProps: PropTypes.shape({\n    maxWidth: PropTypes.number.isRequired,\n    maxHeight: PropTypes.number.isRequired,\n    width: PropTypes.number.isRequired,\n    height: PropTypes.number.isRequired,\n    imageHeight: PropTypes.number.isRequired,\n    collageMetaRef: PropTypes.oneOfType([\n      PropTypes.func,\n      PropTypes.shape({ current: PropTypes.instanceOf(Element) }),\n    ]).isRequired,\n\n    headerRef: PropTypes.oneOfType([\n      PropTypes.func,\n      PropTypes.shape({ current: PropTypes.instanceOf(Element) }),\n    ]).isRequired,\n    actionsRef: PropTypes.oneOfType([\n      PropTypes.func,\n      PropTypes.shape({ current: PropTypes.instanceOf(Element) }),\n    ]).isRequired,\n    footerRef: PropTypes.oneOfType([\n      PropTypes.func,\n      PropTypes.shape({ current: PropTypes.instanceOf(Element) }),\n    ]).isRequired,\n  }).isRequired,\n  imageProps: PropTypes.shape({\n    images: PropTypes.arrayOf(\n      PropTypes.shape({\n        title: PropTypes.string.isRequired,\n        src: PropTypes.string.isRequired,\n        naturalHeight: PropTypes.number.isRequired,\n        naturalWidth: PropTypes.number.isRequired,\n        aspectRatio: PropTypes.number.isRequired,\n        type: PropTypes.string.isRequired,\n      })\n    ).isRequired,\n    imgCount: PropTypes.number.isRequired,\n    handleLoad: PropTypes.func.isRequired,\n    loaded: PropTypes.number.isRequired,\n    newImagesLoaded: PropTypes.number.isRequired,\n  }).isRequired,\n  open: PropTypes.bool.isRequired,\n  saveOpen: PropTypes.bool.isRequired,\n  saveStatusOpen: PropTypes.bool.isRequired,\n  status: PropTypes.string.isRequired,\n  header: PropTypes.node.isRequired,\n  actions: PropTypes.node.isRequired,\n  collage: PropTypes.node.isRequired,\n  controls: PropTypes.node.isRequired,\n  downloadDialog: PropTypes.node.isRequired,\n  saveDialog: PropTypes.node.isRequired,\n  saveStatusDialog: PropTypes.node.isRequired,\n  collageMetaInfo: PropTypes.node.isRequired,\n};\n","import PropTypes from 'prop-types';\nimport BottomNavigationAction from '@mui/material/BottomNavigationAction';\n// import { alpha } from '@mui/material/styles';\n\nexport default function DBNA({ label, icon, handleChange }) {\n  return (\n    <BottomNavigationAction\n      showLabel\n      label={label}\n      icon={icon}\n      sx={{\n        py: 1,\n        fontWeight: 'bold',\n        color: 'gray',\n        outline: 'none',\n        '&:focus': {\n          color: 'white',\n          outline: 'none',\n        },\n      }}\n      onClick={handleChange}\n    />\n  );\n}\nDBNA.defaultProps = {\n  handleChange: () => {},\n};\n\nDBNA.propTypes = {\n  label: PropTypes.oneOfType([PropTypes.node, PropTypes.string]).isRequired,\n  icon: PropTypes.node.isRequired,\n  handleChange: PropTypes.func,\n};\n","import PropTypes from 'prop-types';\nimport Drawer from '@mui/material/Drawer';\n// import { alpha } from '@mui/material/styles';\n\nexport default function DesktopDrawer({ anchor, children, innerRef }) {\n  return (\n    <Drawer\n      anchor={anchor}\n      variant=\"permanent\"\n      PaperProps={{\n        ref: innerRef,\n        sx: {\n          height: 'fit-content',\n          top: '50%',\n          backgroundColor: 'transparent',\n          color: 'gray',\n          fontWeight: 'bold',\n          borderRadius: anchor === 'left' ? '0 10px 10px 0' : '10px 0 0 10px',\n          transform: 'translate(0, -50%)',\n          border: 0,\n        },\n      }}\n    >\n      {children}\n    </Drawer>\n  );\n}\n\nDesktopDrawer.defaultProps = {\n  innerRef: () => {},\n};\n\nDesktopDrawer.propTypes = {\n  innerRef: PropTypes.oneOfType([\n    PropTypes.func,\n    PropTypes.shape({ current: PropTypes.instanceOf(Element) }),\n  ]),\n  anchor: PropTypes.string.isRequired,\n  children: PropTypes.node.isRequired,\n};\n","import Divider from '@mui/material/Divider';\n\nexport default function ControlsDivider() {\n  return <Divider sx={{ backgroundColor: 'gray', my: 1 }} variant=\"middle\" />;\n}\n","import PropTypes from 'prop-types';\nimport Typography from '@mui/material/Typography';\nimport SaveIcon from '@mui/icons-material/Save';\nimport DownloadIcon from '@mui/icons-material/Download';\nimport PrintIcon from '@mui/icons-material/Print';\nimport List from '@mui/material/List';\n// import { alpha } from '@mui/material/styles';\n\nimport DBNA from 'components/collage/DesktopActionItem';\nimport DesktopDrawer from 'components/collage/DesktopDrawer';\nimport ControlsDivider from 'components/collage/ControlsDivider';\n\nexport default function DesktopActions({ actionsRef, onDownload, onSave }) {\n  const handleChange = (newValue) => {\n    console.log(newValue);\n    if (newValue === 'download') {\n      onDownload();\n    }\n    if (newValue === 'save') {\n      onSave();\n    } else {\n      console.log('functionality for ', newValue, 'not yet implemented');\n    }\n  };\n\n  return (\n    <DesktopDrawer anchor=\"right\" innerRef={actionsRef}>\n      <List sx={{ backgroundColor: 'black' }}>\n        <DBNA\n          label=\"Save\"\n          icon={<SaveIcon />}\n          handleChange={() => handleChange('save')}\n        />\n        <ControlsDivider />\n        <DBNA\n          label=\"Download\"\n          icon={<DownloadIcon />}\n          handleChange={() => handleChange('download')}\n        />\n        <ControlsDivider />\n        <DBNA\n          label={\n            <>\n              <Typography sx={{ fontSize: '0.75rem', fontWeight: 'bold' }}>\n                Order\n              </Typography>\n              <Typography sx={{ fontSize: '0.75rem', fontWeight: 'bold' }}>\n                Print(s)\n              </Typography>\n            </>\n          }\n          icon={<PrintIcon />}\n          handleChange={() => handleChange('print')}\n        />\n      </List>\n    </DesktopDrawer>\n  );\n}\n\nDesktopActions.propTypes = {\n  actionsRef: PropTypes.oneOfType([\n    PropTypes.func,\n    PropTypes.shape({ current: PropTypes.instanceOf(Element) }),\n  ]).isRequired,\n  onDownload: PropTypes.func.isRequired,\n  onSave: PropTypes.func.isRequired,\n};\n","import PropTypes from 'prop-types';\nimport Typography from '@mui/material/Typography';\nimport Dialog from '@mui/material/Dialog';\nimport DialogTitle from '@mui/material/DialogTitle';\nimport DialogContent from '@mui/material/DialogContent';\nimport DialogContentText from '@mui/material/DialogContentText';\nimport DialogActions from '@mui/material/DialogActions';\nimport Button from '@mui/material/Button';\nimport { alpha } from '@mui/material/styles';\n\nexport default function ClearCollageDialog({\n  open,\n  onSubmit,\n  onCancel,\n  saveType,\n}) {\n  return (\n    <Dialog open={open}>\n      <DialogTitle\n        sx={{\n          textAlign: 'center',\n          fontWeight: 'bold',\n          color: alpha('#000', 0.8),\n        }}\n      >\n        {saveType === 'new' ? 'Clear' : 'Delete'} Collage\n      </DialogTitle>\n      <DialogContent dividers>\n        <DialogContentText sx={{ fontWeight: 'bold', color: 'gray', pb: 1 }}>\n          Do you want to {saveType === 'new' ? 'clear' : 'delete'} this collage?\n        </DialogContentText>\n        <Typography\n          variant=\"subtitle2\"\n          sx={{ color: 'red', fontWeight: 'bold' }}\n          noWrap\n        >\n          Note:\n        </Typography>\n        <Typography\n          sx={{ fontSize: '0.8rem', color: 'gray', fontWeight: 'bold' }}\n        >\n          This change is not reversible\n        </Typography>\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={onSubmit} sx={{ color: 'red' }}>\n          {saveType === 'new' ? 'Clear' : 'Delete'}\n        </Button>\n        <Button variant=\"outlined\" onClick={onCancel}>\n          Cancel\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n\nClearCollageDialog.propTypes = {\n  open: PropTypes.bool.isRequired,\n  onSubmit: PropTypes.func.isRequired,\n  onCancel: PropTypes.func.isRequired,\n  saveType: PropTypes.oneOf(['new', 'existing']).isRequired,\n};\n","import PropTypes from 'prop-types';\nimport { useState, useRef, useEffect } from 'react';\nimport Stack from '@mui/material/Stack';\nimport RefreshIcon from '@mui/icons-material/Refresh';\nimport EditIcon from '@mui/icons-material/Edit';\nimport PhotoIcon from '@mui/icons-material/Photo';\nimport AutoAwesomeMosaicIcon from '@mui/icons-material/AutoAwesomeMosaic';\nimport DesktopDrawer from 'components/collage/DesktopDrawer';\nimport DBNA from 'components/collage/DesktopActionItem';\nimport ControlsDivider from 'components/collage/ControlsDivider';\nimport List from '@mui/material/List';\nimport DeleteIcon from '@mui/icons-material/Delete';\n// import { alpha } from '@mui/material/styles';\n\nimport ClearCollageDialog from 'components/collage/ClearCollageDialog';\n\nexport default function DesktopControls({\n  innerRef,\n  onRefresh,\n  photosComp,\n  editComp,\n  handleClear,\n  clearDelete,\n  saveType,\n}) {\n  const [imageOptionsOpen, setImageOptionsOpen] = useState(false);\n  const [editOptionsOpen, setEditOptionsOpen] = useState(false);\n  const [clearOpen, setClearOpen] = useState(false);\n  const editRef = useRef(null);\n\n  const closeAll = () => {\n    clearDelete();\n    setImageOptionsOpen(false);\n    setEditOptionsOpen(false);\n    setClearOpen(false);\n  };\n\n  useEffect(() => {\n    function handleClickOutside(event) {\n      if (editRef.current && !editRef.current.contains(event.target)) {\n        closeAll();\n      }\n    }\n    // Bind the event listener\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => {\n      // Unbind the event listener on clean up\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [editRef]);\n\n  const handlePhotosClick = () => {\n    const ioo = imageOptionsOpen;\n    setImageOptionsOpen((io) => !io);\n    if (ioo === true) closeAll();\n    // closeAll();\n    // if (imageOptionsOpen) {\n    //   setImageOptionsOpen((io) => !io);\n    //   closeAll();\n    // } else {\n    //   closeAll();\n    //   setImageOptionsOpen(true);\n    // }\n  };\n\n  const handleEditClick = () => {\n    if (editOptionsOpen) {\n      setEditOptionsOpen(false);\n    } else {\n      closeAll();\n      setEditOptionsOpen(true);\n    }\n  };\n  const handleRearrange = () => {\n    closeAll();\n    onRefresh();\n  };\n\n  const handleClearClick = () => {\n    console.log('clear open', clearOpen);\n    if (clearOpen) {\n      setClearOpen(false);\n    } else {\n      closeAll();\n      setClearOpen(true);\n    }\n  };\n\n  const handleClearClose = () => setClearOpen(false);\n  const handleClearSubmit = () => {\n    handleClearClose();\n    handleClear();\n  };\n\n  console.log('clear open', clearOpen);\n  console.log('rendering desktop controls');\n  return (\n    <DesktopDrawer anchor=\"left\">\n      <Stack direction=\"row\" spacing={2} alignItems=\"center\" ref={innerRef}>\n        <List\n          sx={{\n            backgroundColor: 'black',\n            borderRadius: '0 10px 10px 0',\n          }}\n        >\n          <DBNA\n            label=\"Rearrange\"\n            icon={<AutoAwesomeMosaicIcon />}\n            handleChange={handleRearrange}\n          />\n          <ControlsDivider />\n          <DBNA\n            label=\"Photos\"\n            icon={<PhotoIcon />}\n            handleChange={handlePhotosClick}\n          />\n          <ControlsDivider />\n          <DBNA\n            label=\"Edit\"\n            icon={<EditIcon />}\n            handleChange={handleEditClick}\n          />\n          <ControlsDivider />\n          <DBNA\n            label={saveType === 'new' ? 'Clear' : 'Delete'}\n            icon={saveType === 'new' ? <RefreshIcon /> : <DeleteIcon />}\n            handleChange={handleClearClick}\n          />\n        </List>\n        {imageOptionsOpen ? photosComp : null}\n        {editOptionsOpen ? <div ref={editRef}>{editComp}</div> : null}\n        <ClearCollageDialog\n          open={clearOpen}\n          onSubmit={handleClearSubmit}\n          onCancel={handleClearClose}\n          saveType={saveType}\n        />\n      </Stack>\n    </DesktopDrawer>\n  );\n}\n\nDesktopControls.propTypes = {\n  innerRef: PropTypes.oneOfType([\n    PropTypes.func,\n    PropTypes.shape({ current: PropTypes.instanceOf(Element) }),\n  ]).isRequired,\n  onRefresh: PropTypes.func.isRequired,\n  photosComp: PropTypes.node.isRequired,\n  editComp: PropTypes.node.isRequired,\n  handleClear: PropTypes.func.isRequired,\n  clearDelete: PropTypes.func.isRequired,\n  saveType: PropTypes.oneOf(['new', 'existing']).isRequired,\n};\n","import PropTypes from 'prop-types';\nimport DBNA from 'components/collage/DesktopActionItem';\nimport ControlsDivider from 'components/collage/ControlsDivider';\nimport List from '@mui/material/List';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport AddPhotoAlternateIcon from '@mui/icons-material/AddPhotoAlternate';\n// import { alpha } from '@mui/material/styles';\n\nexport default function DesktopImageOptions({ onDelete, onAdd, clearDelete }) {\n  const handleAdd = () => {\n    clearDelete();\n    onAdd();\n  };\n\n  return (\n    <List\n      sx={{\n        backgroundColor: 'black',\n        borderRadius: '10px 10px 10px 10px',\n        height: 'fit-content',\n      }}\n    >\n      <DBNA\n        label=\"Add\"\n        icon={<AddPhotoAlternateIcon />}\n        handleChange={handleAdd}\n      />\n      <ControlsDivider />\n      <DBNA label=\"Delete\" icon={<DeleteIcon />} handleChange={onDelete} />\n    </List>\n  );\n}\n\nDesktopImageOptions.propTypes = {\n  onDelete: PropTypes.func.isRequired,\n  onAdd: PropTypes.func.isRequired,\n  clearDelete: PropTypes.func.isRequired,\n};\n","import PropTypes from 'prop-types';\nimport Stack from '@mui/material/Stack';\n\nexport default function EditControl({\n  paddingControl,\n  radiusControl,\n  colorControl,\n  textControl,\n}) {\n  return (\n    <Stack\n      direction=\"column\"\n      spacing={4}\n      sx={{\n        p: 3,\n        backgroundColor: 'black',\n        borderRadius: '10px 10px 10px 10px',\n        boxShadow: '0 0 10px inset rgba(255, 0, 0, 0.3)',\n      }}\n    >\n      {paddingControl}\n      {radiusControl}\n      {colorControl}\n      {textControl}\n    </Stack>\n  );\n}\n\nEditControl.propTypes = {\n  paddingControl: PropTypes.node.isRequired,\n  radiusControl: PropTypes.node.isRequired,\n  colorControl: PropTypes.node.isRequired,\n  textControl: PropTypes.node.isRequired,\n};\n","import PropTypes from 'prop-types';\nimport BottomNavigationAction from '@mui/material/BottomNavigationAction';\n\nexport default function MBNA({ label, icon, handleChange }) {\n  return (\n    <BottomNavigationAction\n      showLabel\n      label={label}\n      value={label.toLowerCase()}\n      icon={icon}\n      sx={{\n        fontWeight: 'bold',\n        color: 'gray',\n        '&.Mui-selected': { color: 'white', outline: 'none' },\n      }}\n      onClick={handleChange}\n    />\n  );\n}\n\nMBNA.propTypes = {\n  label: PropTypes.string.isRequired,\n  icon: PropTypes.node.isRequired,\n  handleChange: PropTypes.func.isRequired,\n};\n","import PropTypes from 'prop-types';\nimport BottomNavigation from '@mui/material/BottomNavigation';\nimport SaveIcon from '@mui/icons-material/Save';\nimport DownloadIcon from '@mui/icons-material/Download';\nimport PrintIcon from '@mui/icons-material/Print';\nimport { alpha } from '@mui/material/styles';\nimport MBNA from 'components/collage/MobileActionItem';\n\nexport default function MobileActions({ actionsRef, onDownload, onSave }) {\n  return (\n    <BottomNavigation\n      ref={actionsRef}\n      showLabels\n      sx={{ py: 1, fontWeight: 'bold', backgroundColor: alpha('#000', 0.6) }}\n    >\n      <MBNA label=\"Save\" icon={<SaveIcon />} handleChange={onSave} />\n      <MBNA\n        label=\"Download\"\n        icon={<DownloadIcon />}\n        handleChange={onDownload}\n      />\n      <MBNA label=\"Print\" icon={<PrintIcon />} handleChange={() => {}} />\n    </BottomNavigation>\n  );\n}\n\nMobileActions.propTypes = {\n  actionsRef: PropTypes.oneOfType([\n    PropTypes.func,\n    PropTypes.shape({ current: PropTypes.instanceOf(Element) }),\n  ]).isRequired,\n  onDownload: PropTypes.func.isRequired,\n  onSave: PropTypes.func.isRequired,\n};\n","import PropTypes from 'prop-types';\nimport BottomNavigation from '@mui/material/BottomNavigation';\nimport BottomNavigationAction from '@mui/material/BottomNavigationAction';\nimport RefreshIcon from '@mui/icons-material/Refresh';\nimport EditIcon from '@mui/icons-material/Edit';\nimport PhotoIcon from '@mui/icons-material/Photo';\nimport AutoAwesomeMosaicIcon from '@mui/icons-material/AutoAwesomeMosaic';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport { alpha } from '@mui/material/styles';\n\nexport default function MainControls({ value, handleChange, saveType }) {\n  return (\n    <BottomNavigation\n      showLabels\n      value={value}\n      onChange={handleChange}\n      sx={{\n        fontWeight: 'bold',\n        backgroundColor: alpha('#fff', 0.2),\n        '&.Mui-selected': { color: 'white' },\n      }}\n    >\n      <BottomNavigationAction\n        label=\"Rearrange\"\n        value=\"rearrange\"\n        icon={<AutoAwesomeMosaicIcon />}\n        sx={{\n          fontWeight: 'bold',\n          color: 'gray',\n          '&.Mui-selected': { color: 'white', outline: 'none' },\n        }}\n      />\n      <BottomNavigationAction\n        label=\"Photos\"\n        value=\"photo\"\n        icon={<PhotoIcon />}\n        sx={{\n          fontWeight: 'bold',\n          color: 'gray',\n          '&.Mui-selected': { color: 'white', outline: 'none' },\n        }}\n      />\n      <BottomNavigationAction\n        label=\"Edit\"\n        value=\"edit\"\n        icon={<EditIcon />}\n        sx={{\n          fontWeight: 'bold',\n          color: 'gray',\n          '&.Mui-selected': { color: 'white', outline: 'none' },\n        }}\n      />\n      <BottomNavigationAction\n        label={saveType === 'new' ? 'Clear' : 'Delete'}\n        value=\"clear\"\n        icon={saveType === 'new' ? <RefreshIcon /> : <DeleteIcon />}\n        sx={{\n          fontWeight: 'bold',\n          color: 'gray',\n          '&.Mui-selected': { color: 'white', outline: 'none' },\n        }}\n      />\n    </BottomNavigation>\n  );\n}\n\nMainControls.propTypes = {\n  value: PropTypes.string.isRequired,\n  handleChange: PropTypes.func.isRequired,\n  saveType: PropTypes.oneOf(['new', 'existing']).isRequired,\n};\n","import PropTypes from 'prop-types';\nimport Box from '@mui/material/Box';\nimport BottomNavigation from '@mui/material/BottomNavigation';\nimport BottomNavigationAction from '@mui/material/BottomNavigationAction';\nimport Typography from '@mui/material/Typography';\nimport PaddingIcon from '@mui/icons-material/Padding';\nimport CropFreeIcon from '@mui/icons-material/CropFree';\nimport SquareIcon from '@mui/icons-material/Square';\nimport CloseIcon from '@mui/icons-material/Close';\nimport TitleIcon from '@mui/icons-material/Title';\nimport { alpha } from '@mui/material/styles';\n\nexport default function EditOptions({\n  color,\n  editOptionsValue,\n  open,\n  handleOptionsClose,\n  handleEditOptionsClick,\n}) {\n  return open ? (\n    <Box sx={{ position: 'relative' }}>\n      <BottomNavigation\n        showLabels\n        value={editOptionsValue}\n        onChange={handleEditOptionsClick}\n        sx={{\n          display: 'flex',\n          fontWeight: 'bold',\n          backgroundColor: alpha('#fff', 0.2),\n          borderTop: '1px solid gray',\n          position: 'relative',\n          alignItems: 'center',\n        }}\n      >\n        <BottomNavigationAction\n          label={\n            <Typography fontSize=\"0.70rem\" fontWeight=\"bold\">\n              Padding\n            </Typography>\n          }\n          value=\"padding\"\n          icon={<PaddingIcon />}\n          sx={{\n            fontWeight: 'bold',\n            color: 'gray',\n            '&.Mui-selected': { color: 'white', outline: 'none' },\n          }}\n        />\n        <BottomNavigationAction\n          label={\n            <Typography fontSize=\"0.70rem\" fontWeight=\"bold\">\n              Corner\n            </Typography>\n          }\n          value=\"border radius\"\n          icon={<CropFreeIcon />}\n          sx={{\n            fontWeight: 'bold',\n            color: 'gray',\n            '&.Mui-selected': { color: 'white', outline: 'none' },\n          }}\n        />\n        <BottomNavigationAction\n          label={\n            <Typography fontSize=\"0.70rem\" fontWeight=\"bold\">\n              Color\n            </Typography>\n          }\n          value=\"color\"\n          icon={\n            <SquareIcon\n              sx={{\n                fill: `rgba(${color.r}, ${color.g}, ${color.b}, ${color.a})`,\n                borderRadius: '5px',\n              }}\n            />\n          }\n          sx={{\n            fontWeight: 'bold',\n            color: 'gray',\n            '&.Mui-selected': { color: 'white', outline: 'none' },\n          }}\n        />\n        <BottomNavigationAction\n          label=\"Text\"\n          value=\"text\"\n          icon={<TitleIcon />}\n          sx={{\n            fontWeight: 'bold',\n            color: 'gray',\n            '&.Mui-selected': { color: 'white', outline: 'none' },\n          }}\n        />\n      </BottomNavigation>\n      <CloseIcon\n        fontSize=\"1rem\"\n        sx={{\n          position: 'absolute',\n          top: 5,\n          right: 5,\n          fill: 'white',\n          backgroundColor: 'gray',\n          borderRadius: '50%',\n          padding: '2px',\n        }}\n        onClick={handleOptionsClose}\n      />\n    </Box>\n  ) : null;\n}\n\nEditOptions.propTypes = {\n  editOptionsValue: PropTypes.string.isRequired,\n  open: PropTypes.bool.isRequired,\n  handleOptionsClose: PropTypes.func.isRequired,\n  handleEditOptionsClick: PropTypes.func.isRequired,\n  color: PropTypes.shape({\n    r: PropTypes.number.isRequired,\n    g: PropTypes.number.isRequired,\n    b: PropTypes.number.isRequired,\n    a: PropTypes.number.isRequired,\n  }).isRequired,\n};\n","import PropTypes from 'prop-types';\nimport Box from '@mui/material/Box';\nimport BottomNavigation from '@mui/material/BottomNavigation';\nimport CloseIcon from '@mui/icons-material/Close';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport AddPhotoAlternateIcon from '@mui/icons-material/AddPhotoAlternate';\nimport { alpha } from '@mui/material/styles';\nimport MBNA from 'components/collage/MobileActionItem';\n\nexport default function ImageOptions({\n  open,\n  value,\n  handleOptionsClose,\n  handleDelete,\n  handleAdd,\n}) {\n  return open ? (\n    <Box sx={{ position: 'relative' }}>\n      <BottomNavigation\n        showLabels\n        value={value}\n        sx={{\n          fontWeight: 'bold',\n          backgroundColor: alpha('#fff', 0.2),\n          borderTop: '1px solid gray',\n          '&.Mui-selected': { color: 'white' },\n        }}\n      >\n        <MBNA\n          label=\"Delete\"\n          icon={<DeleteIcon />}\n          handleChange={handleDelete}\n        />\n        <MBNA\n          label=\"Add\"\n          icon={<AddPhotoAlternateIcon />}\n          handleChange={handleAdd}\n        />\n      </BottomNavigation>\n      <CloseIcon\n        fontSize=\"1rem\"\n        sx={{\n          position: 'absolute',\n          top: 5,\n          right: 5,\n          fill: 'white',\n          backgroundColor: 'gray',\n          borderRadius: '50%',\n          padding: '2px',\n        }}\n        onClick={handleOptionsClose}\n      />\n    </Box>\n  ) : null;\n}\n\nImageOptions.propTypes = {\n  open: PropTypes.bool.isRequired,\n  value: PropTypes.string.isRequired,\n  handleOptionsClose: PropTypes.func.isRequired,\n  handleDelete: PropTypes.func.isRequired,\n  handleAdd: PropTypes.func.isRequired,\n};\n","import PropTypes from 'prop-types';\nimport { useState, useEffect, useRef } from 'react';\nimport Paper from '@mui/material/Paper';\nimport Box from '@mui/material/Box';\nimport { alpha } from '@mui/material/styles';\n\nimport MainControls from 'components/collage/MainControls';\nimport EditOptions from 'components/collage/EditOptions';\nimport ImageOptions from 'components/collage/ImageOptions';\nimport ClearCollageDialog from 'components/collage/ClearCollageDialog';\n\nexport default function MobileControls({\n  optionProps,\n  actionProps,\n  dimensionProps,\n  handleClear,\n  saveType,\n  paddingControl,\n  radiusControl,\n  colorControl,\n  textControl,\n  editControl,\n  handleEditControl,\n  editOptionsValue,\n  handleEditOptionsValue,\n}) {\n  const { options, handleColorClick, displayColorPicker } = optionProps;\n  const { onRefresh, onDelete, clearDelete } = actionProps;\n  const { footerRef, handleImageAddClick } = dimensionProps;\n\n  const [mainOpen, setMainOpen] = useState(true);\n  const [value, setValue] = useState('');\n  const [editOpen, setEditOpen] = useState(false);\n  const [clearOpen, setClearOpen] = useState(false);\n  const [imageOpen, setImageOpen] = useState(false);\n  const [imageValue, setImageValue] = useState('');\n  const editRef = useRef(null);\n\n  useEffect(() => {\n    function handleClickOutside(event) {\n      if (editRef.current && !editRef.current.contains(event.target)) {\n        handleEditControl(null);\n      }\n    }\n    // Bind the event listener\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => {\n      // Unbind the event listener on clean up\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [editRef]);\n\n  const handleImageOptionsClose = () => {\n    setImageOpen(false);\n    setImageValue('');\n    setMainOpen(true);\n    clearDelete();\n    setValue('');\n  };\n\n  const handleEditOptionsClose = () => {\n    setEditOpen(false);\n    handleEditControl(null);\n    handleEditOptionsValue('');\n    setMainOpen(true);\n    setValue('');\n  };\n\n  const handleEditOptionsClick = (e, nV) => {\n    console.log('handle edit options click');\n    handleEditOptionsValue(nV);\n    if (nV === 'padding') {\n      handleEditControl(paddingControl);\n    } else if (nV === 'border radius') {\n      handleEditControl(radiusControl);\n    } else if (nV === 'color') {\n      handleColorClick();\n    } else if (nV === 'text') {\n      console.log(nV);\n      handleEditControl(textControl);\n    }\n  };\n\n  useEffect(() => {\n    if (editOpen && editOptionsValue === 'padding') {\n      handleEditControl(paddingControl);\n    }\n  }, [options.padding, editOpen]);\n\n  useEffect(() => {\n    if (editOpen && editOptionsValue === 'border radius') {\n      handleEditControl(radiusControl);\n    }\n  }, [options.borderRadius, editOpen]);\n\n  useEffect(() => {\n    if (editOpen && editOptionsValue === 'color' && !!displayColorPicker) {\n      handleEditControl(colorControl);\n    }\n  }, [options.color, editOpen, displayColorPicker]);\n\n  useEffect(() => {\n    console.log('text control useEffect');\n    if (editOpen && editOptionsValue === 'text') {\n      handleEditControl(textControl);\n    }\n  }, [options.text, editOpen, options.topText]);\n\n  const handleImageClose = () => {\n    setImageValue('');\n    setImageOpen(false);\n    setMainOpen(true);\n  };\n\n  const handleChange = (event, newValue) => {\n    clearDelete();\n    handleImageClose();\n    handleEditOptionsClose();\n    setValue(newValue);\n    if (newValue === 'rearrange') {\n      onRefresh();\n    } else if (newValue === 'photo') {\n      setMainOpen(false);\n      setImageOpen(true);\n    } else if (newValue === 'edit') {\n      setMainOpen(false);\n      setEditOpen(true);\n    } else if (newValue === 'clear') {\n      setClearOpen(true);\n    } else {\n      console.log('functionality for ', newValue, 'not yet implemented');\n    }\n  };\n\n  const handleImageAdd = () => {\n    clearDelete();\n    handleImageAddClick();\n  };\n\n  const handleClearSubmit = () => {\n    handleClear();\n    setClearOpen(false);\n    setValue('');\n  };\n\n  const handleClearCancel = () => {\n    setClearOpen(false);\n    setValue('');\n  };\n\n  console.log('rerendering', editControl);\n  return (\n    <Paper\n      ref={footerRef}\n      sx={{\n        position: 'fixed',\n        bottom: 0,\n        left: 0,\n        right: 0,\n        mt: 1,\n        backgroundColor: 'black',\n        borderRadius: 0,\n      }}\n      elevation={4}\n    >\n      <ClearCollageDialog\n        open={clearOpen}\n        onSubmit={handleClearSubmit}\n        onCancel={handleClearCancel}\n        saveType={saveType}\n      />\n      {editControl !== null ? (\n        <Box\n          ref={editRef}\n          sx={{\n            backgroundColor: alpha('#fff', 0.15),\n            p: 1,\n          }}\n        >\n          {editControl}\n        </Box>\n      ) : null}\n      <ImageOptions\n        open={imageOpen}\n        value={imageValue}\n        handleDelete={onDelete}\n        handleAdd={handleImageAdd}\n        handleOptionsClose={handleImageOptionsClose}\n      />\n      <EditOptions\n        color={options.color}\n        editOptionsValue={editOptionsValue}\n        open={editOpen}\n        handleOptionsClose={handleEditOptionsClose}\n        handleEditOptionsClick={handleEditOptionsClick}\n      />\n      {mainOpen ? (\n        <MainControls\n          value={value}\n          handleChange={handleChange}\n          saveType={saveType}\n        />\n      ) : null}\n    </Paper>\n  );\n}\n\nMobileControls.propTypes = {\n  optionProps: PropTypes.shape({\n    options: PropTypes.shape({\n      padding: PropTypes.number.isRequired,\n      borderRadius: PropTypes.number.isRequired,\n      text: PropTypes.string.isRequired,\n      topText: PropTypes.bool.isRequired,\n      color: PropTypes.shape({\n        r: PropTypes.number.isRequired,\n        g: PropTypes.number.isRequired,\n        b: PropTypes.number.isRequired,\n        a: PropTypes.number.isRequired,\n      }),\n    }).isRequired,\n    handlePaddingChange: PropTypes.func.isRequired,\n    handleRadiusChange: PropTypes.func.isRequired,\n    handleColorChange: PropTypes.func.isRequired,\n    handleColorClose: PropTypes.func.isRequired,\n    handleColorClick: PropTypes.func.isRequired,\n    displayColorPicker: PropTypes.bool.isRequired,\n    handleTextChange: PropTypes.func.isRequired,\n    handlePositionChange: PropTypes.func.isRequired,\n  }).isRequired,\n  actionProps: PropTypes.shape({\n    onRefresh: PropTypes.func.isRequired,\n    onDelete: PropTypes.func.isRequired,\n    clearDelete: PropTypes.func.isRequired,\n  }).isRequired,\n  handleClear: PropTypes.func.isRequired,\n  dimensionProps: PropTypes.shape({\n    handleImageAddClick: PropTypes.func.isRequired,\n    footerRef: PropTypes.oneOfType([\n      PropTypes.func,\n      PropTypes.shape({ current: PropTypes.instanceOf(Element) }),\n    ]).isRequired,\n  }).isRequired,\n  saveType: PropTypes.oneOf(['new', 'existing']).isRequired,\n  paddingControl: PropTypes.node.isRequired,\n  radiusControl: PropTypes.node.isRequired,\n  colorControl: PropTypes.node.isRequired,\n  textControl: PropTypes.node.isRequired,\n  editControl: PropTypes.node.isRequired,\n  handleEditControl: PropTypes.func.isRequired,\n  editOptionsValue: PropTypes.node.isRequired,\n  handleEditOptionsValue: PropTypes.func.isRequired,\n};\n","import PropTypes from 'prop-types';\nimport MenuItem from '@mui/material/MenuItem';\nimport FormControl from '@mui/material/FormControl';\nimport Select from '@mui/material/Select';\nimport Typography from '@mui/material/Typography';\nimport Stack from '@mui/material/Stack';\n\nexport default function CollageType({ type, handleChange, sizes }) {\n  return (\n    <Stack direction=\"row\" alignItems=\"center\" justifyContent=\"center\">\n      <Typography\n        sx={{\n          color: 'form.input',\n          fontSize: '0.87rem',\n          fontWeight: 'bold',\n        }}\n      >\n        Type:{' '}\n      </Typography>\n      <FormControl\n        variant=\"standard\"\n        size=\"small\"\n        margin=\"none\"\n        hiddenLabel\n        sx={{ alignItems: 'center' }}\n      >\n        <Select\n          id=\"demo-simple-select-standard\"\n          value={type}\n          onChange={handleChange}\n          label=\"Age\"\n          disableUnderline\n          inputProps={{\n            sx: {\n              p: 0,\n              fontWeight: 'bold',\n              fontSize: '0.82rem',\n              color: 'primary.main',\n              pl: 1,\n            },\n          }}\n        >\n          {Object.keys(sizes).map((key) => (\n            <MenuItem\n              divider\n              key={sizes[key].text}\n              value={key}\n              sx={{\n                alignItems: 'center',\n                p: '5px',\n                px: 1,\n                minHeight: '45px',\n                fontSize: '0.87rem',\n                fontWeight: 'bold',\n                color: 'gray',\n              }}\n            >\n              {sizes[key].icon}\n              {sizes[key].text}\n            </MenuItem>\n          ))}\n        </Select>\n      </FormControl>\n    </Stack>\n  );\n}\n\nCollageType.propTypes = {\n  type: PropTypes.string.isRequired,\n  sizes: PropTypes.objectOf(\n    PropTypes.shape({\n      width: PropTypes.number.isRequired,\n      height: PropTypes.number.isRequired,\n      text: PropTypes.string.isRequired,\n      icon: PropTypes.node,\n    })\n  ).isRequired,\n  handleChange: PropTypes.func.isRequired,\n};\n","import PropTypes from 'prop-types';\nimport Typography from '@mui/material/Typography';\nimport Stack from '@mui/material/Stack';\n\nexport default function CollageImageCount({ count }) {\n  return (\n    <Stack direction=\"row\" alignItems=\"center\" justifyContent=\"center\">\n      <Typography\n        sx={{\n          color: 'form.input',\n          fontSize: '0.87rem',\n          fontWeight: 'bold',\n          px: 1,\n        }}\n      >\n        Images:\n      </Typography>\n      <Typography\n        sx={{\n          color: 'primary.main',\n          fontSize: '0.87rem',\n          fontWeight: 'bold',\n          p: 0,\n        }}\n      >\n        {count}\n      </Typography>\n    </Stack>\n  );\n}\n\nCollageImageCount.propTypes = {\n  count: PropTypes.number.isRequired,\n};\n","import PropTypes from 'prop-types';\nimport Stack from '@mui/material/Stack';\nimport CollageType from 'components/collage/CollageType';\nimport CollageImageCount from 'components/collage/CollageImageCount';\n\nexport default function CollageMetaInfo({\n  collageMetaRef,\n  collageType,\n  width,\n  sizes,\n  handleTypeChange,\n  imageCount,\n}) {\n  const handleChange = (event) => {\n    const ct = event.target.value;\n    handleTypeChange(ct);\n  };\n\n  return (\n    <Stack\n      ref={collageMetaRef}\n      direction=\"row\"\n      alignItems=\"center\"\n      justifyContent=\"space-around\"\n      sx={{\n        width,\n        textAlign: 'middle',\n        px: 1,\n      }}\n    >\n      <CollageType\n        type={collageType}\n        sizes={sizes}\n        handleChange={handleChange}\n      />\n      <CollageImageCount count={imageCount} />\n    </Stack>\n  );\n}\n\nCollageMetaInfo.propTypes = {\n  collageType: PropTypes.string.isRequired,\n  width: PropTypes.number.isRequired,\n  sizes: PropTypes.objectOf(\n    PropTypes.shape({\n      width: PropTypes.number.isRequired,\n      height: PropTypes.number.isRequired,\n      text: PropTypes.string.isRequired,\n      icon: PropTypes.node,\n    })\n  ).isRequired,\n  handleTypeChange: PropTypes.func.isRequired,\n  imageCount: PropTypes.number.isRequired,\n  collageMetaRef: PropTypes.oneOfType([\n    PropTypes.func,\n    PropTypes.shape({ current: PropTypes.instanceOf(Element) }),\n  ]).isRequired,\n};\n","import PropTypes from 'prop-types';\nimport Typography from '@mui/material/Typography';\nimport Slider from '@mui/material/Slider';\nimport Stack from '@mui/material/Stack';\n// import { alpha } from '@mui/material/styles';\n\nexport default function PaddingControl({ padding, handlePaddingChange }) {\n  return (\n    <Stack\n      direction=\"column\"\n      justifyContent=\"center\"\n      alignItems=\"start\"\n      sx={{ backgroundColor: 'transparent' }}\n    >\n      <Typography\n        sx={{\n          fontWeight: 'bold',\n          color: 'gray',\n          fontSize: '0.87rem',\n          mixBlendMode: 'difference',\n        }}\n      >\n        Padding\n      </Typography>\n      <Slider\n        aria-label=\"Padding\"\n        defaultValue={0}\n        value={padding}\n        valueLabelDisplay=\"auto\"\n        step={0.1}\n        min={0}\n        max={10}\n        onChange={handlePaddingChange}\n        sx={{ color: 'white' }}\n      />\n    </Stack>\n  );\n}\n\nPaddingControl.propTypes = {\n  padding: PropTypes.number.isRequired,\n  handlePaddingChange: PropTypes.func.isRequired,\n};\n","import PropTypes from 'prop-types';\nimport Typography from '@mui/material/Typography';\nimport Slider from '@mui/material/Slider';\nimport Stack from '@mui/material/Stack';\n// import { alpha } from '@mui/material/styles';\n\nexport default function RadiusControl({ radius, handleRadiusChange }) {\n  return (\n    <Stack\n      direction=\"column\"\n      justifyContent=\"center\"\n      alignItems=\"start\"\n      sx={{ backgroundColor: 'transparent' }}\n    >\n      <Typography\n        sx={{\n          fontWeight: 'bold',\n          color: 'gray',\n          fontSize: '0.87rem',\n        }}\n      >\n        Corner Radius\n      </Typography>\n      <Slider\n        aria-label=\"Corner Radius\"\n        defaultValue={0}\n        value={radius}\n        valueLabelDisplay=\"auto\"\n        step={1}\n        min={0}\n        max={40}\n        onChange={handleRadiusChange}\n        sx={{ color: 'white' }}\n      />\n    </Stack>\n  );\n}\n\nRadiusControl.propTypes = {\n  radius: PropTypes.number.isRequired,\n  handleRadiusChange: PropTypes.func.isRequired,\n};\n","import PropTypes from 'prop-types';\nimport { useEffect } from 'react';\nimport { alpha } from '@mui/material/styles';\nimport * as yup from 'yup';\nimport Stack from '@mui/material/Stack';\nimport Typography from '@mui/material/Typography';\nimport TextField from '@mui/material/TextField';\nimport FormGroup from '@mui/material/FormGroup';\nimport FormControlLabel from '@mui/material/FormControlLabel';\nimport Checkbox from '@mui/material/Checkbox';\nimport constants from 'static/config/collage';\nimport utils from 'utils';\n\nexport default function TextControl({\n  text,\n  handleTextChange,\n  topText,\n  handlePositionChange,\n  handleTextSubmit,\n  textError,\n  handleTextError,\n}) {\n  const textSchema = yup\n    .object({\n      text: yup\n        .string()\n        .max(\n          constants.maxColllageTextLength,\n          `Max allowed length is ${constants.maxColllageTextLength}`\n        ),\n    })\n    .required();\n\n  const isValid = async () => {\n    const textValid = await utils.isFieldValid(\n      'text',\n      text,\n      handleTextError,\n      textSchema\n    );\n    return textValid;\n  };\n\n  const handleKeyDown = (e) => {\n    if (e.keyCode === 13 && e.shiftKey === false) {\n      handleTextSubmit(e);\n    }\n  };\n\n  useEffect(() => isValid(), [text]);\n\n  return (\n    <Stack\n      sx={{\n        backgroundColor: 'transparent',\n      }}\n    >\n      <Stack\n        direction=\"row\"\n        alignItems=\"center\"\n        justifyContent=\"space-between\"\n        spacing={2}\n      >\n        <Typography\n          sx={{ fontWeight: 'bold', color: 'gray', fontSize: '0.87rem' }}\n        >\n          Collage Text\n        </Typography>\n        <FormGroup row>\n          <FormControlLabel\n            disableTypography\n            control={\n              <Checkbox\n                size=\"small\"\n                checked={topText === false}\n                onChange={() => handlePositionChange(false)}\n                sx={{ color: 'white', '&.Mui-checked': { color: 'white' } }}\n              />\n            }\n            label={\n              <Typography fontSize=\"0.8rem\" fontWeight=\"bold\">\n                Bottom\n              </Typography>\n            }\n            sx={{ color: 'gray', fontWeight: 'bold' }}\n          />\n          <FormControlLabel\n            disableTypography\n            control={\n              <Checkbox\n                size=\"small\"\n                checked={topText === true}\n                onChange={() => handlePositionChange(true)}\n                sx={{ color: 'gray', '&.Mui-checked': { color: 'white' } }}\n              />\n            }\n            label={\n              <Typography fontSize=\"0.8rem\" fontWeight=\"bold\">\n                Top\n              </Typography>\n            }\n            sx={{ color: 'gray', fontWeight: 'bold', fontSize: '0.8rem' }}\n          />\n        </FormGroup>\n      </Stack>\n      <TextField\n        variant=\"outlined\"\n        label=\"\"\n        defaultValue={text}\n        onKeyDown={handleKeyDown}\n        size=\"small\"\n        sx={{ width: '100%', mb: 1 }}\n        onChange={handleTextChange}\n        InputProps={{ sx: { backgroundColor: alpha('#fff', 0.9) } }}\n        helperText={\n          <Typography sx={{ fontSize: '0.75rem' }}>{textError}</Typography>\n        }\n        error={!!textError}\n      />\n    </Stack>\n  );\n}\n\nTextControl.propTypes = {\n  text: PropTypes.string.isRequired,\n  handleTextChange: PropTypes.func.isRequired,\n  topText: PropTypes.bool.isRequired,\n  handlePositionChange: PropTypes.func.isRequired,\n  handleTextSubmit: PropTypes.func.isRequired,\n  textError: PropTypes.string.isRequired,\n  handleTextError: PropTypes.func.isRequired,\n};\n","import PropTypes from 'prop-types';\nimport Typography from '@mui/material/Typography';\nimport Box from '@mui/material/Box';\nimport Stack from '@mui/material/Stack';\nimport { ChromePicker } from 'react-color';\nimport IconButton from '@mui/material/IconButton';\nimport CloseIcon from '@mui/icons-material/Close';\n\nexport default function ColorControl({\n  color,\n  displayColorPicker,\n  handleClick,\n  handleClose,\n  handleChange,\n}) {\n  return (\n    <Stack\n      direction=\"row\"\n      alignItems=\"center\"\n      justifyContent=\"space-between\"\n      spacing={2}\n      sx={{ my: 2 }}\n    >\n      <Typography\n        sx={{ fontWeight: 'bold', color: 'gray', fontSize: '0.87rem' }}\n      >\n        Background Color\n      </Typography>\n      <Box\n        component=\"div\"\n        sx={{\n          padding: '2px',\n          background: '#fff',\n          borderRadius: '5px',\n          boxShadow: '0 0 0 1px rgba(0,0,0,.1)',\n          display: 'inline-block',\n          cursor: 'pointer',\n        }}\n        onClick={handleClick}\n      >\n        <Box\n          component=\"div\"\n          sx={{\n            width: '70px',\n            height: '30px',\n            borderRadius: '18px',\n            background: `rgba(${color.r}, ${color.g}, ${color.b}, ${color.a})`,\n          }}\n        />\n      </Box>\n      <ColorPicker\n        open={displayColorPicker}\n        color={color}\n        handleClose={handleClose}\n        handleChange={handleChange}\n      />\n    </Stack>\n  );\n}\n\nColorControl.propTypes = {\n  color: PropTypes.shape({\n    r: PropTypes.number.isRequired,\n    g: PropTypes.number.isRequired,\n    b: PropTypes.number.isRequired,\n    a: PropTypes.number.isRequired,\n  }).isRequired,\n  displayColorPicker: PropTypes.bool.isRequired,\n  handleClose: PropTypes.func.isRequired,\n  handleChange: PropTypes.func.isRequired,\n  handleClick: PropTypes.func.isRequired,\n};\n\nexport function ColorPicker({ open, color, handleClose, handleChange }) {\n  console.log(handleClose);\n  return open ? (\n    <>\n      <Box\n        component=\"div\"\n        sx={{\n          position: 'absolute',\n          zIndex: 3,\n          bottom: 10,\n        }}\n      >\n        <IconButton\n          sx={{\n            position: 'absolute',\n            top: 0,\n            right: 0,\n            zIndex: 2,\n            backgroundColor: 'button.main',\n            p: 0,\n            transform: 'translate(0, -110%)',\n            border: '2px solid black',\n          }}\n          onClick={handleClose}\n        >\n          <CloseIcon />\n        </IconButton>\n        <ChromePicker color={color} onChange={handleChange} />\n      </Box>\n    </>\n  ) : null;\n}\n\nColorPicker.propTypes = {\n  color: PropTypes.shape({\n    r: PropTypes.number.isRequired,\n    g: PropTypes.number.isRequired,\n    b: PropTypes.number.isRequired,\n    a: PropTypes.number.isRequired,\n  }).isRequired,\n  open: PropTypes.bool.isRequired,\n  handleClose: PropTypes.func.isRequired,\n  handleChange: PropTypes.func.isRequired,\n};\n","import PropTypes from 'prop-types';\nimport Dialog from '@mui/material/Dialog';\nimport Stack from '@mui/material/Stack';\nimport Typography from '@mui/material/Typography';\nimport CircularProgress from '@mui/material/CircularProgress';\nimport DialogContent from '@mui/material/DialogContent';\nimport DialogActions from '@mui/material/DialogActions';\nimport DialogTitle from '@mui/material/DialogTitle';\nimport Button from '@mui/material/Button';\n\nexport default function CommonDialog({ open, message, progress, onClose }) {\n  return (\n    <Dialog open={open}>\n      {progress !== true ? (\n        <DialogTitle\n          sx={{ textAlign: 'center', color: 'info', fontWeight: 'bold' }}\n        >\n          Info\n        </DialogTitle>\n      ) : null}\n      <DialogContent dividers={progress !== true}>\n        <Stack\n          direction=\"row\"\n          justifyContent=\"space-between\"\n          alignItems=\"center\"\n          spacing={2}\n        >\n          {progress === true ? <CircularProgress /> : null}\n          <Typography variant=\"h6\">{message}</Typography>\n        </Stack>\n      </DialogContent>\n      {progress === false ? (\n        <DialogActions>\n          <Button variant=\"text\" onClick={onClose}>\n            Close\n          </Button>\n        </DialogActions>\n      ) : null}\n    </Dialog>\n  );\n}\n\nCommonDialog.propTypes = {\n  open: PropTypes.bool.isRequired,\n  message: PropTypes.string.isRequired,\n  progress: PropTypes.bool.isRequired,\n  onClose: PropTypes.func.isRequired,\n};\n","import PropTypes from 'prop-types';\nimport { useEffect, useState } from 'react';\nimport useBase from 'hooks/collage/base';\nimport { useNavigate } from 'react-router-dom';\nimport constants from 'static/config/collage';\nimport HandleError from 'hocs/handle-error';\nimport Box from '@mui/material/Box';\n\nimport Collage from 'components/collage/Collage';\nimport DownloadDialog from 'components/collage/DownloadDialog';\nimport SaveDialog from 'components/collage/SaveDialog';\nimport SaveStatusDialog from 'components/collage/SaveStatusDialog';\nimport Header from 'components/collage/Header';\nimport Loading from 'components/Loading';\nimport View from 'components/collage/View';\n\nimport DesktopActions from 'components/collage/DesktopActions';\nimport DesktopControls from 'components/collage/DesktopControls';\nimport DesktopImageOptions from 'components/collage/DesktopImageOptions';\nimport EditControl from 'components/collage/EditControl';\nimport MobileActions from 'components/collage/MobileActions';\nimport MobileControls from 'components/collage/MobileControls';\nimport CollageMetaInfo from 'components/collage/CollageMetaInfo';\nimport PaddingControl from 'components/collage/PaddingControl';\nimport RadiusControl from 'components/collage/RadiusControl';\nimport TextControl from 'components/collage/TextControl';\nimport ColorControl, { ColorPicker } from 'components/collage/ColorControl';\nimport CommonDialog from 'components/collage/CommonDialog';\n\nexport default function BaseCollage({ getCollage, clearCollage, saveType }) {\n  const { paperSizes } = constants;\n  const navigate = useNavigate();\n  const [details, setDetails] = useState({});\n  const [status, setStatus] = useState('fetching');\n  const [commonOpen, setCommonOpen] = useState(false);\n  const [commonMessage, setCommonMessage] = useState('');\n  const [commonProgress, setCommonProgress] = useState(false);\n  const [nameError, setNameError] = useState('');\n  const [textError, setTextError] = useState('');\n\n  console.log('details', details);\n\n  const [\n    collageType,\n    ,\n    collageName,\n    ,\n    ,\n    dimensionProps,\n    optionProps,\n    actionProps,\n    imageProps,\n    treeProps,\n    handleClear,\n    collageCallback,\n    handleRemoveImage,\n    newCollage,\n    saveStatus,\n    saveCollage,\n    handleCollageTypeChange,\n    handleNameChange,\n  ] = useBase(details);\n\n  const openCommonDialog = (message, progress) => {\n    if (message !== '') {\n      setCommonMessage(message);\n      setCommonProgress(progress);\n      setCommonOpen(true);\n    }\n  };\n\n  const closeCommonDialog = () => {\n    if (imageProps.imageCountMinError !== '') {\n      handleClear();\n      imageProps.setImageCountMinError('');\n    }\n    if (imageProps.imageCountMaxError !== '') {\n      imageProps.setImageCountMaxError('');\n    }\n    setCommonProgress(false);\n    setCommonMessage('');\n    setCommonOpen(false);\n  };\n\n  useEffect(() => {\n    imageProps.handleImageCount(imageProps.imgCount);\n  }, [imageProps.imgCount]);\n\n  useEffect(() => {\n    if (imageProps.imageCountMinError !== '') {\n      openCommonDialog(imageProps.imageCountMinError, false);\n    }\n    if (imageProps.imageCountMinError !== '') {\n      openCommonDialog(imageProps.imageCountMaxError, false);\n    }\n  }, [imageProps.imageCountMinError, imageProps.imageCountMaxError]);\n\n  if (\n    imageProps.imgCount === constants.minImages &&\n    actionProps.removeImage === true\n  ) {\n    actionProps.setRemoveImage(false);\n    openCommonDialog(\n      `Need atleast ${constants.minImages} images for collage`,\n      false\n    );\n  }\n\n  const errors = [\n    nameError,\n    textError,\n    imageProps.imageCountMaxError,\n    imageProps.imageCountMinError,\n  ].filter((el) => el !== '');\n\n  const {\n    options,\n    handlePaddingChange,\n    handleRadiusChange,\n    handleColorClose,\n    handleColorClick,\n    handleColorChange,\n    handleTextChange,\n    handlePositionChange,\n    displayColorPicker,\n    editControl,\n    setEditControl,\n    editOptionsValue,\n    setEditOptionsValue,\n    handleTextSubmit,\n  } = optionProps;\n\n  useEffect(async () => {\n    if (Object.keys(details).length === 0) {\n      if (saveType === 'existing') {\n        const collageDetails = await getCollage(\n          imageProps.setImageCount,\n          imageProps.incrementNewImageCount\n        );\n        setDetails(collageDetails);\n      }\n      setStatus('fetch end');\n    }\n  }, []);\n\n  useEffect(() => {\n    let st = status;\n    if (st === 'fetching' && saveType === 'new') st = 'empty';\n    if (imageProps.imgCount === 0 && st === 'ready') {\n      st = 'empty';\n    }\n    if (\n      imageProps.imgCount === 0 &&\n      Object.keys(details).length === 0 &&\n      st === 'fetch end'\n    ) {\n      st = 'empty';\n    }\n    if (\n      imageProps.images.length > 0 &&\n      imageProps.images.length === imageProps.imgCount\n    ) {\n      st = 'preparing';\n    }\n    if (imageProps.loaded >= imageProps.imgCount && imageProps.imgCount > 0) {\n      st = 'ready';\n    }\n    if (\n      imageProps.imgCount >= constants.minImages &&\n      imageProps.images.length < imageProps.imgCount\n    ) {\n      st = 'loading';\n    }\n    if (imageProps.imageCountMinError !== '') {\n      st = 'empty';\n      openCommonDialog(imageProps.imageCountMinError, false);\n    }\n    if (imageProps.imageCountMaxError !== '') {\n      if (imageProps.imgCount === 0) {\n        st = 'empty';\n      } else {\n        st = 'ready';\n      }\n      openCommonDialog(imageProps.imageCountMaxError, false);\n    }\n    setStatus(st);\n  }, [imageProps]);\n\n  const clearAll = async () => {\n    openCommonDialog('Deleting Collage', true);\n    setDetails({});\n    handleClear();\n    await clearCollage();\n    setStatus('fetch end');\n    closeCommonDialog();\n    if (saveType === 'existing') {\n      openCommonDialog('Navigating to collages page', true);\n      setTimeout(() => {\n        closeCommonDialog();\n        navigate('/collages');\n      }, 3000);\n    }\n  };\n\n  const handleSave = async (name) => {\n    actionProps.onSaveClick();\n    const res =\n      saveType === 'new' ? await newCollage(name) : await saveCollage(name);\n    if (res) {\n      setTimeout(() => {\n        if (saveType === 'new') clearAll();\n        actionProps.setSaveStart(false);\n        navigate('/collages');\n      }, 3000);\n    }\n  };\n\n  const downloadDialog = (\n    <HandleError errors={errors} handleClose={actionProps.onDownloadClose}>\n      <DownloadDialog\n        open={actionProps.open}\n        onClick={actionProps.onDownloadClick}\n        onClose={actionProps.onDownloadClose}\n        sizes={paperSizes}\n      />\n    </HandleError>\n  );\n\n  const saveDialog = (\n    <HandleError errors={errors} handleClose={actionProps.onSaveClose}>\n      <SaveDialog\n        collageName={collageName}\n        open={actionProps.saveOpen}\n        onClick={handleSave}\n        onClose={actionProps.onSaveClose}\n      />\n    </HandleError>\n  );\n\n  const saveStatusDialog = (\n    <SaveStatusDialog open={actionProps.saveStart} status={saveStatus} />\n  );\n\n  const collage = (\n    <Collage\n      dimensionProps={dimensionProps}\n      imageProps={imageProps}\n      actionProps={actionProps}\n      collageCallback={collageCallback}\n      handleRemoveImage={handleRemoveImage}\n      options={optionProps.options}\n      tree={treeProps.tree}\n    />\n  );\n\n  const paddingControl = (\n    <PaddingControl\n      padding={options.padding}\n      handlePaddingChange={handlePaddingChange}\n    />\n  );\n\n  const radiusControl = (\n    <RadiusControl\n      radius={options.borderRadius}\n      handleRadiusChange={handleRadiusChange}\n    />\n  );\n\n  const colorControl = (\n    <ColorPicker\n      open={displayColorPicker}\n      color={options.color}\n      handleChange={handleColorChange}\n      handleClose={() => {\n        setEditControl(null);\n        handleColorClose();\n      }}\n    />\n  );\n\n  const desktopColorControl = (\n    <ColorControl\n      color={options.color}\n      displayColorPicker={displayColorPicker}\n      handleChange={handleColorChange}\n      handleClose={handleColorClose}\n      handleClick={handleColorClick}\n    />\n  );\n\n  const textControl = (\n    <TextControl\n      text={options.text}\n      handleTextChange={handleTextChange}\n      topText={options.topText}\n      handlePositionChange={handlePositionChange}\n      handleTextSubmit={handleTextSubmit}\n      textError={textError}\n      handleTextError={setTextError}\n    />\n  );\n\n  const mobileControls = (\n    <MobileControls\n      optionProps={optionProps}\n      actionProps={actionProps}\n      dimensionProps={dimensionProps}\n      handleClear={clearAll}\n      saveType={saveType}\n      paddingControl={paddingControl}\n      radiusControl={radiusControl}\n      colorControl={colorControl}\n      textControl={textControl}\n      editControl={editControl}\n      handleEditControl={setEditControl}\n      editOptionsValue={editOptionsValue}\n      handleEditOptionsValue={setEditOptionsValue}\n    />\n  );\n\n  const header = (\n    <Header\n      headerRef={dimensionProps.headerRef}\n      name={collageName}\n      handleNameChange={handleNameChange}\n      nameError={nameError}\n      handleNameError={setNameError}\n    />\n  );\n\n  const desktopPhotosComp = (\n    <DesktopImageOptions\n      onDelete={actionProps.onDelete}\n      onAdd={dimensionProps.handleImageAddClick}\n      clearDelete={actionProps.clearDelete}\n    />\n  );\n\n  const desktopEditComp = (\n    <EditControl\n      paddingControl={paddingControl}\n      radiusControl={radiusControl}\n      colorControl={desktopColorControl}\n      textControl={textControl}\n    />\n  );\n\n  const desktopControls = (\n    <DesktopControls\n      innerRef={dimensionProps.footerRef}\n      onRefresh={actionProps.onRefresh}\n      photosComp={desktopPhotosComp}\n      editComp={desktopEditComp}\n      handleClear={clearAll}\n      clearDelete={actionProps.clearDelete}\n      saveType={saveType}\n    />\n  );\n\n  const isMobile = window.innerWidth < window.innerHeight;\n  const controls = isMobile ? mobileControls : desktopControls;\n\n  const onSave = async () => actionProps.handleSave();\n\n  const actionsComp = isMobile ? (\n    <MobileActions\n      actionsRef={dimensionProps.actionsRef}\n      onDownload={actionProps.handleDownload}\n      onSave={onSave}\n    />\n  ) : (\n    <DesktopActions\n      actionsRef={dimensionProps.actionsRef}\n      onDownload={actionProps.handleDownload}\n      onSave={onSave}\n    />\n  );\n\n  const collageMetaInfo = (\n    <CollageMetaInfo\n      collageMetaRef={dimensionProps.collageMetaRef}\n      collageType={collageType}\n      width={dimensionProps.width}\n      sizes={paperSizes}\n      handleTypeChange={handleCollageTypeChange}\n      imageCount={imageProps.imgCount}\n    />\n  );\n\n  return (\n    <Box\n      sx={{\n        backgroundColor: 'gray',\n        height: window.innerHeight,\n      }}\n    >\n      <View\n        open={actionProps.open}\n        saveOpen={actionProps.saveOpen}\n        saveStatusOpen={actionProps.saveStart}\n        dimensionProps={dimensionProps}\n        imageProps={imageProps}\n        header={header}\n        actions={actionsComp}\n        downloadDialog={downloadDialog}\n        saveDialog={saveDialog}\n        saveStatusDialog={saveStatusDialog}\n        collage={collage}\n        controls={controls}\n        status={status}\n        saveType={saveType}\n        collageMetaInfo={collageMetaInfo}\n      />\n      <input\n        ref={dimensionProps.addImageRef}\n        type=\"file\"\n        hidden\n        multiple\n        accept=\"image/*\"\n        onChange={imageProps.handleLoad}\n      />\n      {actionProps.generate ? <Loading title=\"Creating collage ...\" /> : null}\n      <CommonDialog\n        open={commonOpen}\n        message={commonMessage}\n        progress={commonProgress}\n        onClose={closeCommonDialog}\n      />\n    </Box>\n  );\n}\n\nBaseCollage.defaultProps = {\n  getCollage: () => {},\n  clearCollage: () => {},\n};\n\nBaseCollage.propTypes = {\n  getCollage: PropTypes.func,\n  clearCollage: PropTypes.func,\n  saveType: PropTypes.string.isRequired,\n};\n"],"names":["url","body","params","method","fetch","then","response","resp","console","log","newCollage","collageID","collageDetails","collage_id","helpers","process","JSON","stringify","error","saveCollage","upload","listCollages","nextToken","next_token","getThumbnail","collageId","getCollage","deleteCollage","checkOptimizeStatus","get","path","newUrl","options","credentials","headers","Headers","URLSearchParams","toString","ok","status","document","cookie","json","post","apiUrl","deleteMethod","OptionsButton","children","onClick","name","Button","id","variant","component","sx","color","borderRadius","backgroundColor","padding","defaultProps","AddPhotos","handleChange","type","hidden","multiple","accept","onChange","fontSize","Typography","fontWeight","defaultCollageName","defaultCollageType","tolerance","resizeImageWidth","lineHeight","textPadding","thumbnailHeight","maxNameLength","maxColllageTextLength","minImages","maxImages","paperSizes","A4","width","height","text","icon","Description","mr","A3","A4LandScape","transform","A3LandScape","FBCoverDesktop","Facebook","fill","FBCoverMobile","FBPost","WhatsappStatus","WhatsApp","InstaStory","Instagram","background","getClosest","arr","index1","index2","target","downscaleImage","image","newWidth","newHeight","fileType","canvas","createElement","getContext","drawImage","toDataURL","event","handleImageCount","handleNewImageCount","handleImageData","files","cnt","length","Array","from","map","file","Image","onload","e","naturalWidth","naturalHeight","src","imageDetail","title","Date","now","aspectRatio","URL","createObjectURL","revokeObjectURL","getCollageDimension","maxW","maxH","a","origAR","wrapText","x","y","maxWidth","textCanvas","ctx","font","textAlign","tempX","tempY","words","split","line","testLine","lineArray","n","measureText","push","getTextHeight","scaleFactor","constants","getCut","Math","round","random","findClosest","start","end","mid","findImgPair","i","j","minMatchingCost","abs","getAspectRatio","cut","ar1","ar2","handleImageLoad","resizeImages","originalImages","handleImages","addImagesToDB","tempImages","forEach","origImage","tempImage","imgs","ind","findIndex","elem","slice","convertToRGBA","value","r","g","b","convertBase64","Promise","resolve","reject","fileReader","FileReader","readAsDataURL","result","onerror","convertBase64String","readAsD","Blob","textCanvasDraw","textArray","position","canvasWidth","textHeight","textBaseline","fillStyle","fillRect","chunk","textPart","fillText","getImageDimensions","paperWidth","paperHeight","optimizeDimensions","maxPrintWidth","maxPrintHeight","problematicNodes","ar","optimumTreeSizes","pn","newRootWidth","newRootHeight","sort","optimizeImage","TextDisplay","Stack","alpha","top","paddingX","fontFamily","letterSpacing","Node","this","left","right","obj","fromObject","getScore","output","concat","display","copyNode","copy","newImages","replaceImages","rest","removeImageData","imageData","find","addImageData","delImg","handleRemoveImage","yOffset","xOffset","handleCollageImageLoad","newX","newY","Box","alt","onLoad","Tooltip","IconButton","size","bgcolor","Delete","DOMDisplay","RenderImage","tempCanvas","tempCtx","floor","log2","radius","clipwidth","clipheight","save","beginPath","moveTo","lineTo","quadraticCurveTo","closePath","clip","restore","canvasElement","CanvasDisplay","newImg","ResizeImage","ImageStyling","clearRect","images","tar","imageCount","targetAspectRatioArr","closestIndex","restImages","targetAspectRatio","leftIndex","rightIndex","filter","item","index","includes","first","second","generate","th","adjustments","adjust","parentWidth","parentHeight","parentX","parentY","parentCut","nodeType","addSize","validateAddSize","lV","lPN","rV","rPN","valid","BinaryTree","undefined","root","tempTree","canvasHeight","topText","lA","score","min","trys","bestAdjust","bestAspectRatio","tolerableDifference","ajstCnt","diff","copyTree","findBestAdjustTree","imageWidth","imageHeight","sortedImages","collageArray","imgTree","generateCollageTree","aspR","bAR","toFixed","maxScore","maxElem","element","generateScore","uploadCollageImages","thumbnailCanvas","imageURLS","uploadCallback","imagePromises","Object","keys","thumbnailKey","toBlob","blob","collageapi","Img","img","verifyPromises","uploadPromises","uploadCollageDetails","thumbnailDetails","collageType","treeState","dets","collage_type","created_at","last_updated_at","getImageData","tree","thumbnail","useBase","initialValue","useState","details","setDetails","collageName","setCollageName","setCollageType","uploadedImages","setUploadedImages","dimensions","headerRef","useRef","actionsRef","footerRef","collageMetaRef","addImageRef","setHeight","setImageHeight","setImageWidth","setWidth","maxHeight","setMaxHeight","setMaxWidth","setTextHeight","setDimensions","isMobile","window","innerWidth","innerHeight","headerHeight","current","offsetHeight","collageMetaHeight","otherHeight","actionsWidth","offsetWidth","footerWidth","useEffect","addEventListener","removeEventListener","handleImageAddClick","click","useDimensions","optionsInitValue","setOptions","displayColorPicker","setDisplayColorPicker","editControl","setEditControl","editOptionsValue","setEditOptionsValue","handleTextChange","opts","clear","handlePaddingChange","handleRadiusChange","handleColorClick","dcp","handleColorClose","handleColorChange","clr","rgb","handlePositionChange","handleTextSubmit","useOptions","actions","open","setOpen","saveOpen","setSaveOpen","saveStart","setSaveStart","refresh","setRefresh","setGenerate","removeImage","setRemoveImage","printOptions","setPrintOptions","clearDelete","handleDownload","handleGenerateCallback","onDelete","ri","onDownloadClick","w","h","onDownloadClose","onRefresh","onSaveClose","onSaveClick","handleSave","useActions","newImgCount","setNewImageCount","newImagesLoaded","setNewImagesLoaded","imgCount","setImageCount","loaded","setLoaded","setImages","imageCountMaxError","setImageCountMaxError","imageCountMinError","setImageCountMinError","totalImages","handleLoad","remove","removeIndex","newImagesArr","imageArr","incrementNewImageCount","useImages","loadingCallback","setTree","newTree","reAdjust","imagesArr","treeUtils","bestAspectRatioTree","addOptions","useTree","setThumbnail","finalizing","saveStatus","setSaveStatus","useLayoutEffect","updateStatus","key","st","imagesText","updateImagesStatus","handleClear","allSettled","clearPromises","newAspectRatioTree","generateThumbnail","thumbnailWidth","thumbnailTree","tH","getDetails","updateCollage","getURLS","apiHelpers","imgTitle","ct","newName","HandleError","errors","handleClose","Dialog","fullWidth","DialogTitle","DialogContent","dividers","alignItems","justifyContent","DialogContentText","pr","List","px","err","ListItem","listStyleType","DialogActions","Collage","dimensionProps","imageProps","actionProps","collageCallback","collage","setCollage","isEmpty","t","createCollage","collageElem","pw","ph","canvasTree","getCanvasTree","imgPW","imgPH","generateCollage","ctree","getCanvas","setTimeout","pW","pH","link","download","href","probNodes","newPW","newPH","newCanvasTree","newValid","newProbNodes","DownloadDialog","onClose","sizes","setValue","FormControl","InputLabel","Select","labelId","defaultValue","label","MenuItem","disabled","SaveDialog","setName","nameError","TextField","mb","InputProps","helperText","StatusIndicator","CircularProgress","Pending","CheckCircleOutline","Close","Status","pending","done","running","failed","direction","OverAllStatus","counter","spacing","p","SaveStatusDialog","overAllStatus","setCounter","timerId","clearTimeout","statusArr","values","val","HeaderNameSection","handleNameError","editable","setEditable","nameSchema","yup","max","required","isValid","utils","nameValid","handleBlur","autoFocus","onBlur","onKeyDown","keyCode","shiftKey","InputLabelProps","focused","cursor","Header","handleNameChange","belowmd","useMediaQuery","theme","breakpoints","down","Paper","ref","elevation","postion","Link","underline","ArrowBack","EmptyCollage","loadComponent","backgroundImage","collageBack","backgroundSize","objectFit","View","saveStatusOpen","header","downloadDialog","saveDialog","saveStatusDialog","controls","collageMetaInfo","content","metaHeight","showControls","Loading","justifySelf","DBNA","BottomNavigationAction","showLabel","py","outline","DesktopDrawer","anchor","innerRef","Drawer","PaperProps","border","ControlsDivider","Divider","my","DesktopActions","onDownload","onSave","newValue","Save","Download","Print","ClearCollageDialog","onSubmit","onCancel","saveType","pb","noWrap","DesktopControls","photosComp","editComp","imageOptionsOpen","setImageOptionsOpen","editOptionsOpen","setEditOptionsOpen","clearOpen","setClearOpen","editRef","closeAll","handleClickOutside","contains","handleClearClose","AutoAwesomeMosaic","Photo","ioo","io","Edit","Refresh","DesktopImageOptions","onAdd","AddPhotoAlternate","EditControl","paddingControl","radiusControl","colorControl","textControl","boxShadow","MBNA","toLowerCase","MobileActions","BottomNavigation","showLabels","MainControls","EditOptions","handleOptionsClose","handleEditOptionsClick","borderTop","Padding","CropFree","Square","Title","ImageOptions","handleDelete","handleAdd","MobileControls","optionProps","handleEditControl","handleEditOptionsValue","mainOpen","setMainOpen","editOpen","setEditOpen","imageOpen","setImageOpen","imageValue","setImageValue","handleEditOptionsClose","bottom","mt","nV","CollageType","margin","hiddenLabel","disableUnderline","inputProps","pl","divider","minHeight","CollageImageCount","count","CollageMetaInfo","handleTypeChange","PaddingControl","mixBlendMode","Slider","valueLabelDisplay","step","RadiusControl","TextControl","textError","handleTextError","textSchema","textValid","FormGroup","row","FormControlLabel","disableTypography","control","Checkbox","checked","ColorControl","handleClick","ColorPicker","zIndex","CommonDialog","message","progress","BaseCollage","clearCollage","navigate","useNavigate","setStatus","commonOpen","setCommonOpen","commonMessage","setCommonMessage","commonProgress","setCommonProgress","setNameError","setTextError","treeProps","handleCollageTypeChange","openCommonDialog","closeCommonDialog","el","clearAll","desktopColorControl","mobileControls","desktopPhotosComp","desktopEditComp","desktopControls","actionsComp"],"sourceRoot":""}