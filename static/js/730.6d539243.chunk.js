"use strict";(self.webpackChunkprelaunch=self.webpackChunkprelaunch||[]).push([[730],{61001:function(e,n,r){r.d(n,{Z:function(){return m}});var t=r(1867),a=r(22492),o=r(6718),i=r(4567),l=r(85771),c=r(66608),s=r(80184);function d(e){var n=e.imageSrc,r=e.imageSrcSet,a=e.title,o=e.handleImageLoad;return(0,s.jsx)(t.Z,{component:"img",src:n,srcSet:r,alt:a,sx:{textAlign:"center",objectFit:"cover",height:{lg:350,md:300,xs:250}},onLoad:o})}function u(e){var n=e.title,r=e.date,t=e.avatar,c=e.shared;return(0,s.jsx)(a.Z,{children:(0,s.jsx)(o.Z,{disableTypography:!0,avatar:t,title:(0,s.jsxs)(i.Z,{noWrap:!0,sx:{overflow:"hidden",textOverflow:"ellipsis",width:{xs:"calc(75%)",sm:"calc(100%)"},fontWeight:600},children:[n,""!==c?(0,s.jsxs)(s.Fragment,{children:[" ",(0,s.jsx)(l.Z,{label:c,size:"small",variant:"filled",color:"Shared"===c?"success":"default",sx:{height:"auto"}})]}):null]}),subheader:(0,s.jsx)(i.Z,{sx:{color:"muted.main"},children:r}),sx:{padding:0,color:"faded.black"}})})}function m(e){var n=e.title,r=e.date,t=e.avatar,a=e.shared,o=e.thumbnailImage,i=e.thumbnailImageSrcSet,l=e.handleClick,m=e.handleImageLoad;return(0,s.jsxs)(c.Z,{handleClick:l,children:[(0,s.jsx)(d,{imageSrc:o,imageSrcSet:i,title:n,handleImageLoad:m}),(0,s.jsx)(u,{title:n,date:r,avatar:t,shared:a})]})}u.defaultProps={title:"Memory Thumbnail Image",date:"Memory Date",avatar:"",shared:""},d.defaultProps={title:"Memory Thumbnail Image",imageSrc:"",imageSrcSet:"",handleImageLoad:function(){}},m.defaultProps={thumbnailImageSrcSet:"",handleImageLoad:function(){},avatar:"",shared:""}},66608:function(e,n,r){r.d(n,{Z:function(){return i}});var t=r(88588),a=r(81374),o=r(80184);function i(e){var n=e.handleClick,r=e.children;return(0,o.jsx)(a.Z,{onClick:n,children:(0,o.jsx)(t.Z,{elevation:2,sx:{bgcolor:"#fff",borderRadius:5,color:"black",position:"relative",height:{lg:430,md:380,xs:330},"&:hover":{border:3,borderColor:"secondary.main",elevation:0}},children:r})})}},15730:function(e,n,r){r.r(n),r.d(n,{default:function(){return Q}});var t=r(29439),a=r(72791),o=r(57689),i=r(11087),l=r(43146),c=r(32234),s=r(53767),d=r(58751),u=r(52766),m=r(74165),h=r(15861),x=r(81153),g=r(64554),f=(r(85239),r(95193)),p=r(36194),v=r(61001),b=r(4567),j=r(58054),Z=r(66608),y=r(80184);function k(){var e=(0,o.s0)(),n=(0,f.Z)((function(e){return e.breakpoints.down("md")}));return(0,y.jsx)(x.ZP,{item:!0,lg:3,md:4,xs:6,sx:{p:1},children:(0,y.jsxs)(Z.Z,{handleClick:function(){e("/memory/create")},children:[(0,y.jsx)(b.Z,{variant:n?"body1":"h5",color:"button.main",sx:{p:1,color:"secondary.main",bgcolor:"primary.main",borderRadius:"0px 10px 10px 0px",borderColor:"secondary.main",position:"absolute",bottom:15,left:0},children:"Create a memory"}),(0,y.jsx)(j.Z,{sx:{position:"absolute",border:3,borderRadius:"50%",fontSize:"7.5rem",left:"50%",top:"50%",transform:"translate(-50%, -50%)",color:"muted.main"}})]})},"creatememory")}function S(e){var n=e.handleMoreClick;return(0,y.jsx)(x.ZP,{item:!0,lg:3,md:4,xs:6,sx:{p:1},children:(0,y.jsx)(Z.Z,{handleClick:n,children:(0,y.jsx)(b.Z,{variant:"h5",sx:{p:2,color:"secondary.main",bgcolor:"primary.main",borderRadius:{md:10,xs:"50%"},borderColor:"secondary.main",position:"absolute",bottom:"50%",left:"50%",transform:"translate(-50%, +50%)",textAlign:"center"},children:"Load More"})})},"creatememory")}function w(e){var n=e.memories,r=e.handleMoreClick,t=e.nextToken,a=e.handleImageLoad,o=e.create,i=e.handleClick,l=n.sort((function(e,n){return e.memory_id>n.memory_id?1:-1}));return(0,y.jsxs)(x.ZP,{container:!0,sx:{bgcolor:"button.main",py:1},justifyContent:"left",alignItems:"flex-start",children:[o?(0,y.jsx)(k,{}):null,l.map((function(e){return(0,y.jsx)(x.ZP,{item:!0,lg:3,md:4,sm:6,xs:12,sx:{p:1},children:(0,y.jsx)(v.Z,{title:e.title,date:e.date,avatar:e.owner?(0,y.jsx)(p.S,{name:e.owner.name,picture:e.owner.picture,email:e.owner.email}):null,shared:e.shared,thumbnailImage:e.photo.src,thumbnailImageSrcSet:(n=e.photo,(n.images?n.images.map((function(e){var n=e.src,r=e.width;return"".concat(n," ").concat(r,"w")})):[]).join(",")),handleClick:function(){return i(e)},handleImageLoad:a})},e.title);var n})),t&&(0,y.jsx)(S,{handleMoreClick:r})]})}w.defaultProps={memories:[]};var C=r(85899);r(64586);var I=r(93433),M=r(5849);function L(e){var n=e.label,r=e.handleClick,t=e.color;return(0,y.jsx)(M.Z,{variant:"contained",color:t,sx:{m:1},onClick:r,children:(0,y.jsx)(b.Z,{variant:"h6",children:n})})}var P=r(11968),R=r.n(P),_=r(1867),D=r(22492),T=r(6718),W=r(88588),A=r(81374);function E(e){var n=e.handleClick,r=e.children;return(0,y.jsx)(A.Z,{onClick:n,children:(0,y.jsx)(W.Z,{elevation:0,sx:{bgcolor:"#fff",borderRadius:5,position:"relative"},children:r})})}function O(e){var n=e.imageSrc,r=e.imageSrcSet,t=e.title,a=e.handleImageLoad;return(0,y.jsx)(_.Z,{component:"img",src:n,srcSet:r,alt:t,sx:{borderColor:"muted.main",borderRadius:4,textAlign:"center",objectFit:"cover",height:{lg:400,sm:350,xs:350}},onLoad:a})}function z(e){var n=e.title,r=e.date;return(0,y.jsx)(D.Z,{children:(0,y.jsx)(T.Z,{disableTypography:!0,title:(0,y.jsx)(b.Z,{noWrap:!0,sx:{overflow:"hidden",textOverflow:"ellipsis",width:{xs:"calc(75%)",sm:"calc(100%)"},fontWeight:600},children:n}),subheader:(0,y.jsx)(b.Z,{sx:{color:"muted.main"},children:r}),sx:{padding:0,color:"faded.black"}})})}function F(e){var n=e.title,r=e.date,t=e.thumbnailImage,a=e.thumbnailImageSrcSet,o=e.handleClick,i=e.handleImageLoad;return console.log("rendering review item"),(0,y.jsxs)(E,{handleClick:o,children:[(0,y.jsx)(O,{imageSrc:t,imageSrcSet:a,title:n,handleImageLoad:i}),(0,y.jsx)(z,{title:n,date:r})]})}function U(e){var n=e.memories,r=e.handleIndexChange,o=e.picIndex,i=(0,a.useState)(n),l=(0,t.Z)(i,2),c=l[0],d=l[1];(0,a.useEffect)((function(){d(n)}),[n]),console.log("carousel items",c,o);return(0,y.jsx)(R(),{sx:{maxWidth:"700px",width:"95%"},indicators:!1,index:o,onChange:function(e){return r(e)},navButtonsAlwaysVisible:!0,autoPlay:!1,children:c.map((function(e){return(0,y.jsx)(s.Z,{direction:"column",spacing:1,alignItems:"center",children:(0,y.jsx)(F,{title:e.thumbnail.title,date:e.thumbnail.date,thumbnailImage:e.thumbnail.photo.src,thumbnailImageSrcSet:(n=e.thumbnail.photo,(n.images?n.images.map((function(e){var n=e.src,r=e.width;return"".concat(n," ").concat(r,"w")})):[]).join(",")),handleImageLoad:function(){},handleClick:function(){}})},e.thumbnail.memory_id);var n}))})}function B(e){var n=e.name,r=e.email,t=e.picture;return(0,y.jsxs)(s.Z,{direction:"row",justifyContent:"center",sx:{width:"100%"},children:[(0,y.jsx)(p.S,{name:n,email:r,picture:t}),(0,y.jsx)(b.Z,{variant:"h6",sx:{px:1},children:n})]})}z.defaultProps={title:"Review Image",date:"Memory Date"},O.defaultProps={title:"Review Image",imageSrc:"",imageSrcSet:"",handleImageLoad:function(){}},F.defaultProps={thumbnailImageSrcSet:"",handleImageLoad:function(){}};var V=r(44700),q=r(9052);function G(){return G=(0,h.Z)((0,m.Z)().mark((function e(n,r){var t,a,o,i=arguments;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>2&&void 0!==i[2]?i[2]:"",e.prev=1,e.next=4,C.Z.getPendingMemories(t);case 4:if(!(a=e.sent)){e.next=13;break}if(!a.memories){e.next=13;break}return console.log("review memories",a),e.next=10,Promise.all(C.Z.getPendingThumbnails(a.memories));case 10:o=e.sent,n(o),r(a.next_continuation_token||"");case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[1,15]])}))),G.apply(this,arguments)}function H(){return(H=(0,h.Z)((0,m.Z)().mark((function e(n,r){var t,a;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=q.Z.getUserInfo(),e.next=4,C.Z.acceptShare(n,t.email);case 4:a=e.sent,console.log(a),r(a),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function J(){return(J=(0,h.Z)((0,m.Z)().mark((function e(n,r){var t,a;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=q.Z.getUserInfo(),e.next=4,C.Z.rejectShare(n,t.email);case 4:a=e.sent,console.log(a),r(a),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function K(e){var n=e.memoryID,r=(0,a.useState)(0),o=(0,t.Z)(r,2),i=o[0],l=o[1],c=(0,a.useState)(""),d=(0,t.Z)(c,2),u=d[0],m=d[1],h=(0,a.useState)([]),x=(0,t.Z)(h,2),f=x[0],p=x[1],v=(0,a.useState)(null),j=(0,t.Z)(v,2),Z=j[0],k=j[1],S=(0,a.useState)(null),w=(0,t.Z)(S,2),C=w[0],M=w[1],P=(0,a.useState)(null),R=(0,t.Z)(P,2),_=R[0],D=R[1];console.log(n);var T=function(e,n){k(!0),M(e),D(n)},W=function(e){return m(e)},A=function(e){p((function(n){return n.concat(e)}))},E=function(){var e=f.length;if(console.log(e,i),1===e)p([]);else{var n=i;n===e-1&&l((function(e){return e-1})),p([].concat((0,I.Z)(f.slice(0,n)),(0,I.Z)(f.slice(n+1))))}};(0,a.useEffect)((function(){!function(e,n){G.apply(this,arguments)}(A,W,u)}),[]);var O=function(e){console.log("accept response",e),e.ok?(T("Memory share accepted",!1),E()):T("Error while accepting memory share",!0)},z=function(e){console.log("reject response",e),e.ok?(T("Memory share rejected",!1),E()):T("Error while rejecting memory share",!0)};return console.log("pending memories",f,"picIndex",i,"memories count",f.length),f.length>0?(0,y.jsxs)(g.Z,{sx:{display:"flex",width:"100%",backgroundColor:"transparent",backgroundSize:"cover",backgroundImage:"linear-gradient(white, #0e516a)",justifyContent:"center"},children:[(0,y.jsxs)(s.Z,{direction:"column",alignItems:"center",sx:{width:"100%",my:3},children:[(0,y.jsx)(B,{name:f[i].owner_details.name,email:f[i].owner_details.email,picture:f[i].owner_details.picture}),(0,y.jsx)(b.Z,{sx:{mb:2},children:"has shared a memory with you"}),(0,y.jsx)(U,{memories:f,handleIndexChange:l,picIndex:i}),(0,y.jsxs)(s.Z,{direction:"row",sx:{m:1},children:[(0,y.jsx)(L,{label:"Accept",color:"primary",handleClick:function(){var e=f[i].thumbnail.memory_id;!function(e,n){H.apply(this,arguments)}(e,O),console.log("accepting memoryID",e)}}),(0,y.jsx)(L,{label:"Reject",color:"error",handleClick:function(){var e=f[i].thumbnail.memory_id;!function(e,n){J.apply(this,arguments)}(e,z),console.log("rejecting memoryID",e)}})]})]}),(0,y.jsx)(V.Z,{snackBarOpen:Z,message:C,onClose:function(){k(!1),M(null),D(null)},error:_})]}):null}function N(e){var n=e.mode,r=e.handleChange;return console.log("I am in memory modes"),(0,y.jsx)(s.Z,{direction:"row",justifyContent:"center",sx:{py:1,backgroundColor:"button.main"},children:(0,y.jsxs)(c.Z,{color:"primary",value:n,exclusive:!0,"aria-label":"Memory Modes",children:[(0,y.jsx)(l.Z,{value:"own",sx:{borderRadius:"30px"},onClick:r,children:"My Memories"}),(0,y.jsx)(l.Z,{value:"shared",onClick:r,children:"Shared With Me"}),(0,y.jsx)(l.Z,{value:"review",sx:{borderRadius:"30px"},onClick:r,children:(0,y.jsx)(d.Z,{badgeContent:99,color:"primary",children:"Review"})})]})})}function Q(e){var n=e.initMode,r=(0,o.UO)(),l=r.memoryMode,c=(0,i.lr)(),d=(0,t.Z)(c,1)[0],m=(0,a.useState)(n),h=(0,t.Z)(m,2),x=h[0],g=h[1];(0,a.useEffect)((function(){g(l||n)}),[l,n]),console.log(n,l,r,d);return(0,y.jsx)(u.Z,{create:!0,children:(0,y.jsx)(s.Z,{direction:"column",children:(0,y.jsx)(N,{mode:x,handleChange:function(e,n){g(n)}})})})}K.defaultProps={memoryID:""}},64586:function(e,n,r){e.exports=r.p+"static/media/image-loading.f1b4462988545d9c460a.png"}}]);
//# sourceMappingURL=730.6d539243.chunk.js.map