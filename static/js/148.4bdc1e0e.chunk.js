"use strict";(self.webpackChunkprelaunch=self.webpackChunkprelaunch||[]).push([[148],{41148:function(e,t,n){n.r(t),n.d(t,{default:function(){return I}});var r=n(29439),a=n(74165),i=n(1413),o=n(45987),s=n(15861),c=n(57689),l=n(94606),u=n(74144),g=n(84985),m=n(80184),p=["src","originalSRC","file"];function f(e){return d.apply(this,arguments)}function d(){return(d=(0,s.Z)((0,a.Z)().mark((function e(t){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},console.time("downloading images"),e.next=4,Promise.allSettled(Object.entries(t).map((function(e){var t=(0,r.Z)(e,2),a=t[0],i=t[1];return fetch(i).then((function(e){return e.blob()})).then((function(e){n[a]=e}))})));case 4:return e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return v.apply(this,arguments)}function v(){return(v=(0,s.Z)((0,a.Z)().mark((function e(t){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},console.time("base64 images"),e.next=4,Promise.allSettled(Object.entries(t).map((function(e){var t=(0,r.Z)(e,2),a=t[0],i=t[1];return u.Z.convertBase64(i).then((function(e){n[a]=e}))})));case 4:return e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e,t,n,r){return w.apply(this,arguments)}function w(){return(w=(0,s.Z)((0,a.Z)().mark((function e(t,n,r,i){var o,s,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.time("getImages downloading images"),e.next=3,f(n);case 3:return o=e.sent,console.log("getImages get images",o),console.timeEnd("getImages downloading images"),console.time("getImages base64 images"),e.next=9,h(o);case 9:return s=e.sent,console.timeEnd("getImages base64 images"),i(),console.time("getImages handle image convert"),e.next=15,Promise.allSettled(t.map((function(e){return new Promise((function(t){var n=e.naturalWidth,a=e.naturalHeight,i=e.title,c=e.aspectRatio,l=e.type;console.time("getImages convert ".concat(i));var g=o[i],m=s[i],p=new Image;p.onload=function(){var e={title:i,src:u.Z.optimizeImage(p,1500,1500/c),originalSRC:m,originalHeight:a,originalWidth:n,naturalHeight:1500/c,naturalWidth:1500,aspectRatio:c,type:l,file:g};r(e),console.timeEnd("getImages convert ".concat(i)),t(e)},p.src=m}))})));case 15:return c=e.sent,console.timeEnd("getImages handle image convert"),e.abrupt("return",c.map((function(e){return e.value})));case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(){var e=(0,c.UO)().collageID,t=function(){var t=(0,s.Z)((0,a.Z)().mark((function t(n,r,s){var c,u,g;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("get collage from params",e),console.time("getImages view collage"),t.next=4,l.Z.getCollage(e);case 4:return c=t.sent,t.next=7,Z(c.details.images,c.urls,s,(function(){n(c.details.images.length),r(c.details.images.length)}));case 7:return u=t.sent,console.log("image details",u),g=u.map((function(e){e.src,e.originalSRC,e.file;return(0,o.Z)(e,p)})),console.timeEnd("getImages view collage"),t.abrupt("return",{details:(0,i.Z)((0,i.Z)({},c.details),{},{images:g}),images:u});case 12:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}();return(0,m.jsx)(g.default,{getCollage:t,clearCollage:function(){return l.Z.deleteCollage(e)},saveType:"existing"})}}}]);
//# sourceMappingURL=148.4bdc1e0e.chunk.js.map