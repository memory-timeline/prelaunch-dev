"use strict";(self.webpackChunkprelaunch=self.webpackChunkprelaunch||[]).push([[892],{19482:(e,t,r)=>{r.d(t,{Z:()=>m});var a=r(16957),n=r(93405),i=r(54641),o=r(61113),l=r(66212),s=r(56746),c=r(46417);function d(e){let{imageSrc:t,imageSrcSet:r,title:n,handleImageLoad:i}=e;return(0,c.jsx)(a.Z,{component:"img",src:t,srcSet:r,alt:n,sx:{textAlign:"center",objectFit:"cover",height:{lg:350,md:300,xs:250}},onLoad:i})}function u(e){let{title:t,date:r,avatar:a,shared:s}=e;return(0,c.jsx)(n.Z,{children:(0,c.jsx)(i.Z,{disableTypography:!0,avatar:a,title:(0,c.jsxs)(o.Z,{noWrap:!0,sx:{overflow:"hidden",textOverflow:"ellipsis",width:{xs:"calc(75%)",sm:"calc(100%)"},fontWeight:600},children:[t,""!==s?(0,c.jsxs)(c.Fragment,{children:[" ",(0,c.jsx)(l.Z,{label:s,size:"small",variant:"filled",color:"Shared"===s?"success":"default",sx:{height:"auto"}})]}):null]}),subheader:(0,c.jsx)(o.Z,{sx:{color:"muted.main"},children:r}),sx:{padding:0,color:"faded.black"}})})}function m(e){let{title:t,date:r,avatar:a,shared:n,thumbnailImage:i,thumbnailImageSrcSet:o,handleClick:l,handleImageLoad:m}=e;return(0,c.jsxs)(s.Z,{handleClick:l,children:[(0,c.jsx)(d,{imageSrc:i,imageSrcSet:o,title:t,handleImageLoad:m}),(0,c.jsx)(u,{title:t,date:r,avatar:a,shared:n})]})}u.defaultProps={title:"Memory Thumbnail Image",date:"",avatar:"",shared:""},d.defaultProps={title:"Memory Thumbnail Image",imageSrc:"",imageSrcSet:"",handleImageLoad:()=>{}},m.defaultProps={thumbnailImageSrcSet:"",handleImageLoad:()=>{},avatar:"",shared:""}},56746:(e,t,r)=>{r.d(t,{Z:()=>o});var a=r(73428),n=r(44183),i=r(46417);function o(e){let{handleClick:t,children:r}=e;return(0,i.jsx)(n.Z,{onClick:t,children:(0,i.jsx)(a.Z,{elevation:2,sx:{bgcolor:"#fff",borderRadius:5,color:"black",position:"relative",height:{lg:430,md:380,xs:330},"&:hover":{border:3,borderColor:"secondary.main",elevation:0}},children:r})})}},82026:(e,t,r)=>{r.r(t),r.d(t,{default:()=>It});var a=r(47313),n=r(41806),i=r(19536),o=r(43960),l=r(55719),s=r(61113),c=r(46417);function d(e){let{mode:t,handleModeChange:r,modes:a}=e;return(0,c.jsx)(i.Z,{children:(0,c.jsx)(n.Z,{sx:{display:"flex",justifyContent:"center",p:2},children:(0,c.jsx)(l.Z,{exclusive:!0,value:t,"aria-label":"view-change",color:"primary",sx:{bgcolor:"button.main"},children:a.map((e=>(0,c.jsx)(o.Z,{value:e,onClick:()=>r("".concat(e)),sx:{border:2,borderColor:"primary.main"},children:(0,c.jsx)(s.Z,{variant:"h6",children:e})},e)))})})})}var u=r(58467),m=r(9019),h=r(63366),p=r(87462),x=r(2197),v=r(8007),g=r(31033),f=r(17592),b=r(14363),Z=r(1167);function j(e){return(0,Z.ZP)("MuiStepper",e)}(0,b.Z)("MuiStepper",["root","horizontal","vertical","nonLinear","alternativeLabel"]);var y=r(91615);const S=a.createContext({});const C=S,w=a.createContext({});const L=w;function P(e){return(0,Z.ZP)("MuiStepConnector",e)}(0,b.Z)("MuiStepConnector",["root","horizontal","vertical","alternativeLabel","active","completed","disabled","line","lineHorizontal","lineVertical"]);const M=["className"],I=(0,f.ZP)("div",{name:"MuiStepConnector",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.orientation],r.alternativeLabel&&t.alternativeLabel,r.completed&&t.completed]}})((e=>{let{ownerState:t}=e;return(0,p.Z)({flex:"1 1 auto"},"vertical"===t.orientation&&{marginLeft:12},t.alternativeLabel&&{position:"absolute",top:12,left:"calc(-50% + 20px)",right:"calc(50% + 20px)"})})),k=(0,f.ZP)("span",{name:"MuiStepConnector",slot:"Line",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.line,t["line".concat((0,y.Z)(r.orientation))]]}})((e=>{let{ownerState:t,theme:r}=e;const a="light"===r.palette.mode?r.palette.grey[400]:r.palette.grey[600];return(0,p.Z)({display:"block",borderColor:r.vars?r.vars.palette.StepConnector.border:a},"horizontal"===t.orientation&&{borderTopStyle:"solid",borderTopWidth:1},"vertical"===t.orientation&&{borderLeftStyle:"solid",borderLeftWidth:1,minHeight:24})})),R=a.forwardRef((function(e,t){const r=(0,g.i)({props:e,name:"MuiStepConnector"}),{className:n}=r,i=(0,h.Z)(r,M),{alternativeLabel:o,orientation:l="horizontal"}=a.useContext(C),{active:s,disabled:d,completed:u}=a.useContext(L),m=(0,p.Z)({},r,{alternativeLabel:o,orientation:l,active:s,completed:u,disabled:d}),f=(e=>{const{classes:t,orientation:r,alternativeLabel:a,active:n,completed:i,disabled:o}=e,l={root:["root",r,a&&"alternativeLabel",n&&"active",i&&"completed",o&&"disabled"],line:["line","line".concat((0,y.Z)(r))]};return(0,v.Z)(l,P,t)})(m);return(0,c.jsx)(I,(0,p.Z)({className:(0,x.Z)(f.root,n),ref:t,ownerState:m},i,{children:(0,c.jsx)(k,{className:f.line,ownerState:m})}))})),N=["activeStep","alternativeLabel","children","className","component","connector","nonLinear","orientation"],z=(0,f.ZP)("div",{name:"MuiStepper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.orientation],r.alternativeLabel&&t.alternativeLabel,r.nonLinear&&t.nonLinear]}})((e=>{let{ownerState:t}=e;return(0,p.Z)({display:"flex"},"horizontal"===t.orientation&&{flexDirection:"row",alignItems:"center"},"vertical"===t.orientation&&{flexDirection:"column"},t.alternativeLabel&&{alignItems:"flex-start"})})),T=(0,c.jsx)(R,{}),F=a.forwardRef((function(e,t){const r=(0,g.i)({props:e,name:"MuiStepper"}),{activeStep:n=0,alternativeLabel:i=!1,children:o,className:l,component:s="div",connector:d=T,nonLinear:u=!1,orientation:m="horizontal"}=r,f=(0,h.Z)(r,N),b=(0,p.Z)({},r,{nonLinear:u,alternativeLabel:i,orientation:m,component:s}),Z=(e=>{const{orientation:t,nonLinear:r,alternativeLabel:a,classes:n}=e,i={root:["root",t,r&&"nonLinear",a&&"alternativeLabel"]};return(0,v.Z)(i,j,n)})(b),y=a.Children.toArray(o).filter(Boolean),S=y.map(((e,t)=>a.cloneElement(e,(0,p.Z)({index:t,last:t+1===y.length},e.props)))),w=a.useMemo((()=>({activeStep:n,alternativeLabel:i,connector:d,nonLinear:u,orientation:m})),[n,i,d,u,m]);return(0,c.jsx)(C.Provider,{value:w,children:(0,c.jsx)(z,(0,p.Z)({as:s,ownerState:b,className:(0,x.Z)(Z.root,l),ref:t},f,{children:S}))})}));function D(e){return(0,Z.ZP)("MuiStep",e)}(0,b.Z)("MuiStep",["root","horizontal","vertical","alternativeLabel","completed"]);const q=["active","children","className","component","completed","disabled","expanded","index","last"],B=(0,f.ZP)("div",{name:"MuiStep",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.orientation],r.alternativeLabel&&t.alternativeLabel,r.completed&&t.completed]}})((e=>{let{ownerState:t}=e;return(0,p.Z)({},"horizontal"===t.orientation&&{paddingLeft:8,paddingRight:8},t.alternativeLabel&&{flex:1,position:"relative"})})),W=a.forwardRef((function(e,t){const r=(0,g.i)({props:e,name:"MuiStep"}),{active:n,children:i,className:o,component:l="div",completed:s,disabled:d,expanded:u=!1,index:m,last:f}=r,b=(0,h.Z)(r,q),{activeStep:Z,connector:j,alternativeLabel:y,orientation:S,nonLinear:w}=a.useContext(C);let[P=!1,M=!1,I=!1]=[n,s,d];Z===m?P=void 0===n||n:!w&&Z>m?M=void 0===s||s:!w&&Z<m&&(I=void 0===d||d);const k=a.useMemo((()=>({index:m,last:f,expanded:u,icon:m+1,active:P,completed:M,disabled:I})),[m,f,u,P,M,I]),R=(0,p.Z)({},r,{active:P,orientation:S,alternativeLabel:y,completed:M,disabled:I,expanded:u,component:l}),N=(e=>{const{classes:t,orientation:r,alternativeLabel:a,completed:n}=e,i={root:["root",r,a&&"alternativeLabel",n&&"completed"]};return(0,v.Z)(i,D,t)})(R),z=(0,c.jsxs)(B,(0,p.Z)({as:l,className:(0,x.Z)(N.root,o),ref:t,ownerState:R},b,{children:[j&&y&&0!==m?j:null,i]}));return(0,c.jsx)(L.Provider,{value:k,children:j&&!y&&0!==m?(0,c.jsxs)(a.Fragment,{children:[j,z]}):z})}));var E=r(54750);const A=(0,E.Z)((0,c.jsx)("path",{d:"M12 0a12 12 0 1 0 0 24 12 12 0 0 0 0-24zm-2 17l-5-5 1.4-1.4 3.6 3.6 7.6-7.6L19 8l-9 9z"}),"CheckCircle"),O=(0,E.Z)((0,c.jsx)("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"}),"Warning");var U=r(90210);function H(e){return(0,Z.ZP)("MuiStepIcon",e)}const V=(0,b.Z)("MuiStepIcon",["root","active","completed","error","text"]);var _;const J=["active","className","completed","error","icon"],X=(0,f.ZP)(U.Z,{name:"MuiStepIcon",slot:"Root",overridesResolver:(e,t)=>t.root})((e=>{let{theme:t}=e;return{display:"block",transition:t.transitions.create("color",{duration:t.transitions.duration.shortest}),color:(t.vars||t).palette.text.disabled,["&.".concat(V.completed)]:{color:(t.vars||t).palette.primary.main},["&.".concat(V.active)]:{color:(t.vars||t).palette.primary.main},["&.".concat(V.error)]:{color:(t.vars||t).palette.error.main}}})),G=(0,f.ZP)("text",{name:"MuiStepIcon",slot:"Text",overridesResolver:(e,t)=>t.text})((e=>{let{theme:t}=e;return{fill:(t.vars||t).palette.primary.contrastText,fontSize:t.typography.caption.fontSize,fontFamily:t.typography.fontFamily}})),K=a.forwardRef((function(e,t){const r=(0,g.i)({props:e,name:"MuiStepIcon"}),{active:a=!1,className:n,completed:i=!1,error:o=!1,icon:l}=r,s=(0,h.Z)(r,J),d=(0,p.Z)({},r,{active:a,completed:i,error:o}),u=(e=>{const{classes:t,active:r,completed:a,error:n}=e,i={root:["root",r&&"active",a&&"completed",n&&"error"],text:["text"]};return(0,v.Z)(i,H,t)})(d);if("number"===typeof l||"string"===typeof l){const e=(0,x.Z)(n,u.root);return o?(0,c.jsx)(X,(0,p.Z)({as:O,className:e,ref:t,ownerState:d},s)):i?(0,c.jsx)(X,(0,p.Z)({as:A,className:e,ref:t,ownerState:d},s)):(0,c.jsxs)(X,(0,p.Z)({className:e,ref:t,ownerState:d},s,{children:[_||(_=(0,c.jsx)("circle",{cx:"12",cy:"12",r:"12"})),(0,c.jsx)(G,{className:u.text,x:"12",y:"12",textAnchor:"middle",dominantBaseline:"central",ownerState:d,children:l})]}))}return l}));function $(e){return(0,Z.ZP)("MuiStepLabel",e)}const Q=(0,b.Z)("MuiStepLabel",["root","horizontal","vertical","label","active","completed","error","disabled","iconContainer","alternativeLabel","labelContainer"]),Y=["children","className","componentsProps","error","icon","optional","slotProps","StepIconComponent","StepIconProps"],ee=(0,f.ZP)("span",{name:"MuiStepLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.orientation]]}})((e=>{let{ownerState:t}=e;return(0,p.Z)({display:"flex",alignItems:"center",["&.".concat(Q.alternativeLabel)]:{flexDirection:"column"},["&.".concat(Q.disabled)]:{cursor:"default"}},"vertical"===t.orientation&&{textAlign:"left",padding:"8px 0"})})),te=(0,f.ZP)("span",{name:"MuiStepLabel",slot:"Label",overridesResolver:(e,t)=>t.label})((e=>{let{theme:t}=e;return(0,p.Z)({},t.typography.body2,{display:"block",transition:t.transitions.create("color",{duration:t.transitions.duration.shortest}),["&.".concat(Q.active)]:{color:(t.vars||t).palette.text.primary,fontWeight:500},["&.".concat(Q.completed)]:{color:(t.vars||t).palette.text.primary,fontWeight:500},["&.".concat(Q.alternativeLabel)]:{marginTop:16},["&.".concat(Q.error)]:{color:(t.vars||t).palette.error.main}})})),re=(0,f.ZP)("span",{name:"MuiStepLabel",slot:"IconContainer",overridesResolver:(e,t)=>t.iconContainer})((()=>({flexShrink:0,display:"flex",paddingRight:8,["&.".concat(Q.alternativeLabel)]:{paddingRight:0}}))),ae=(0,f.ZP)("span",{name:"MuiStepLabel",slot:"LabelContainer",overridesResolver:(e,t)=>t.labelContainer})((e=>{let{theme:t}=e;return{width:"100%",color:(t.vars||t).palette.text.secondary,["&.".concat(Q.alternativeLabel)]:{textAlign:"center"}}})),ne=a.forwardRef((function(e,t){var r;const n=(0,g.i)({props:e,name:"MuiStepLabel"}),{children:i,className:o,componentsProps:l={},error:s=!1,icon:d,optional:u,slotProps:m={},StepIconComponent:f,StepIconProps:b}=n,Z=(0,h.Z)(n,Y),{alternativeLabel:j,orientation:y}=a.useContext(C),{active:S,disabled:w,completed:P,icon:M}=a.useContext(L),I=d||M;let k=f;I&&!k&&(k=K);const R=(0,p.Z)({},n,{active:S,alternativeLabel:j,completed:P,disabled:w,error:s,orientation:y}),N=(e=>{const{classes:t,orientation:r,active:a,completed:n,error:i,disabled:o,alternativeLabel:l}=e,s={root:["root",r,i&&"error",o&&"disabled",l&&"alternativeLabel"],label:["label",a&&"active",n&&"completed",i&&"error",o&&"disabled",l&&"alternativeLabel"],iconContainer:["iconContainer",a&&"active",n&&"completed",i&&"error",o&&"disabled",l&&"alternativeLabel"],labelContainer:["labelContainer",l&&"alternativeLabel"]};return(0,v.Z)(s,$,t)})(R),z=null!=(r=m.label)?r:l.label;return(0,c.jsxs)(ee,(0,p.Z)({className:(0,x.Z)(N.root,o),ref:t,ownerState:R},Z,{children:[I||k?(0,c.jsx)(re,{className:N.iconContainer,ownerState:R,children:(0,c.jsx)(k,(0,p.Z)({completed:P,active:S,error:s,icon:I},b))}):null,(0,c.jsxs)(ae,{className:N.labelContainer,ownerState:R,children:[i?(0,c.jsx)(te,(0,p.Z)({ownerState:R},z,{className:(0,x.Z)(N.label,null==z?void 0:z.className),children:i})):null,u]})]}))}));ne.muiName="StepLabel";const ie=ne;function oe(e){let{titles:t,activeStep:r,handleClick:a}=e;return(0,c.jsx)(F,{activeStep:r,alternativeLabel:!0,sx:{py:4},children:t.map(((e,t)=>(0,c.jsx)(W,{onClick:a(t),children:(0,c.jsx)(ie,{children:e})},e)))})}var le=r(38344);const se=async(e,t,r,a,n,i)=>{a(0),i("Initializing memory",!1);const o=await async function(e,t,r){const a=JSON.stringify(r),n=await le.Z.validateDetails(e,t,a);return"error"!==n.status&&!0===n.Valid}(e,t,r);let l;return!0===o?(l=await async function(e,t,r){const a=JSON.stringify(r),n=["memories",r.key,"details.json"].join("/"),i=await le.Z.upload(e,t,n,a);return i&&!0===i.ok}(e,t,r),n("Initializing Memory",l),a(10)):n("Initializing Memory","failed"),o},ce=async(e,t,r,a,n,i,o,l)=>{const s=await function(e,t,r,a,n,i,o){const l=n.map(((e,t)=>{const a=i[t];return{Key:["memories",r,"images",e.name].join("/"),Body:a,ContentType:a.type}})),s=le.Z.uploadMultipleImages(e,t,l,o);return Promise.allSettled(s)}(e,t,r,0,n,i,o);for(let c=0;c<s.length;c+=1)if("rejected"===s[c].status||!0!==s[c].value.ok)return!1;return l(95),!0},de=async(e,t,r,a,n,i,o,l)=>{let s;if(!0===await se(e,t,r,a,n,i)){if(s=await ce(e,t,r.key,r.title,r.imageDetails,o,l,a),!0===s){const a=await le.Z.finalizeMemory(e,t,r.key);return parseInt(a.MemoryID,10)===r.key}n("Uploading Original Images","failed")}return!1};var ue=r(10195),me=r(14874),he=r(1413);var pe=r(29349);var xe=r(19482),ve=r(12862),ge=r(54641);function fe(e){let{title:t}=e;return(0,c.jsx)(ge.Z,{title:t,sx:{border:0,borderColor:"primary.main",textAlign:"center",width:1,mb:1,bgcolor:"button.main",p:0,py:2,borderRadius:2}})}var be=r(16783),Ze=r(4397),je=r(43394),ye=r(83077),Se=r(3463),Ce=r(31095);function we(e){let{label:t,handleClick:r,disabled:a}=e;return(0,c.jsx)(Ce.Z,{onClick:r,disabled:a,sx:{m:2,border:2,borderColor:a?"muted.main":"ternary.main",borderRadius:5,bgcolor:"input.background"},children:t})}function Le(e){let{handleNext:t,handlePrevious:r,isLast:a,isFirst:i}=e;return(0,c.jsxs)(n.Z,{sx:{display:"flex",flexDirection:"row",pt:2,width:1,justifyContent:"space-evenly"},children:[i?(0,c.jsx)(we,{disabled:!0,handleClick:()=>{},label:"Back"}):(0,c.jsx)(we,{handleClick:r,label:"Back"}),a?(0,c.jsx)(we,{handleClick:t,label:"Create Memory"}):(0,c.jsx)(we,{handleClick:t,label:"Next"})]})}function Pe(e){let{children:t}=e;return(0,c.jsx)(n.Z,{component:"form",sx:{"& .MuiTextField-root":{m:1,maxWidth:"90%",width:"45ch"},"& .MuiOutlinedInput-root":{backgroundColor:"form.input",borderRadius:5},flexDirection:"column",display:"flex",alignItems:"center",width:"auto",pt:2},autoComplete:"true",children:t})}we.defaultProps={disabled:!1};var Me=r(31798);function Ie(e){let{title:t,date:r,handleTitleChange:n,handleDateChange:i,handleNext:o,handlePrevious:l,isLast:s,isFirst:d,activeStep:u}=e;const[m,h]=(0,a.useState)(""),[p,x]=(0,a.useState)(""),[v,g]=(0,a.useState)(!1),[f,b]=(0,a.useState)(!1),Z=Se.Ry({title:Se.Z_().required("Memory Title is required").max(40,"Maximum length of memory title is 40")}).required(),j=Se.Ry({date:Se.hT("Enter date by clicking calendar icon on the right end of date picker").required("Memory Date is required").nullable()}).required();(0,a.useEffect)((()=>{v&&Me.ZP.isFieldValid("title",t,h,Z),f&&Me.ZP.isFieldValid("date",r,x,j)}),[t,r]);const y=async e=>{await(async()=>{const e=await Me.ZP.isFieldValid("title",t,h,Z),a=await Me.ZP.isFieldValid("date",r,x,j);return e&&a})()&&e()};return(0,c.jsxs)(Pe,{children:[(0,c.jsx)(be.Z,{required:!0,onChange:e=>{g(!0),n(e)},id:"outlined-required",label:"Memory Name",defaultValue:t,helperText:m||"E.g. Gogol's 2nd Birthday",error:!!m}),(0,c.jsx)(je._,{dateAdapter:ye.H,children:(0,c.jsx)(Ze.M,{label:"Memory Date",value:r,onChange:e=>{b(!0),i(e)},placeholder:"dd/MM/yyyy",inputFormat:"dd/MM/yyyy",maxDate:new Date,renderInput:e=>(0,c.jsx)(be.Z,(0,he.Z)((0,he.Z)({readOnly:!0,required:!0},e),{},{error:!!p,helperText:p||""}))})}),(0,c.jsx)(Le,{activeStep:u,handleNext:()=>y(o),handlePrevious:l,isLast:s,isFirst:d})]})}Ie.defaultProps={date:""};var ke=r(32195),Re=r(94469),Ne=r(73428),ze=r(93405);function Te(e){let{text:t}=e;return(0,c.jsx)(s.Z,{sx:{color:"error.main"},children:t})}var Fe=r(81998),De=r(45987),qe=r(25035),Be=r(23030),We=r(13482),Ee=r(8743),Ae=r(39295);const Oe=["alt","style","title"];function Ue(e){let{imageDetails:t,handleRemoveImage:r,thumbnail:o,handleThumbnailChange:l,handleCaptionChange:d}=e;const[u,m]=(0,a.useState)([]),[h,p]=(0,a.useState)(null),[x,v]=(0,a.useState)(!1),g=()=>t.map(((e,t)=>({alt:t,src:e.url,width:e.width,height:e.height,caption:e.caption||""})));(0,a.useEffect)((()=>m(g)),[t]);return u.length?(0,c.jsxs)(n.Z,{component:"div",sx:{py:2},children:[(0,c.jsx)(i.Z,{}),(0,c.jsx)(s.Z,{sx:{p:2},variant:"h6",align:"center",children:"Selected Images"}),(0,c.jsx)(Ae.Z,{images:u,renderPhoto:e=>{let{layout:t,imageProps:{alt:a,style:n,title:i}}=e,s=(0,De.Z)(e.imageProps,Oe);return(0,c.jsxs)(Ce.Z,{component:"div",sx:{padding:"2px"},children:[(0,c.jsx)("img",(0,he.Z)({alt:a,style:(0,he.Z)((0,he.Z)({},n),{},{width:t.width,padding:0})},s)),t.index!==o?(0,c.jsx)(Ee.Z,{index:t.index,handleRemoveImage:r}):null,(0,c.jsx)(qe.Z,{index:t.index,thumbnail:o,handleThumbnailChange:l}),(0,c.jsx)(We.Z,{handleClick:()=>{return e=t.index,p(e),void v(!0);var e},caption:"caption"in u[t.index]?u[t.index].caption:""})]})}}),null!==h?(0,c.jsx)(Be.Z,{imageCaption:"caption"in u[h]?u[h].caption:"",index:h,src:t[h].url,open:x,handleClose:()=>{p(null),v(!1)},handleSubmit:d}):null]}):null}function He(e){let{imageDetails:t,thumbnail:r,handleSelectedImageChange:n,handleThumbnailChange:o,removeSelectedImage:l,handleNext:d,handlePrevious:u,isLast:h,isFirst:p,handleCaptionChange:x}=e;const[v,g]=(0,a.useState)(""),[f,b]=(0,a.useState)(!1),[Z,j]=(0,a.useState)(0),[y,S]=(0,a.useState)(!1);function C(){let e=!0;return g(""),t.length<1&&(g("Need atleast one image to create a memory"),e=!1),t.length>15&&(g("Maximum Allowed Images per Memory: ".concat(15)),e=!1),e}(0,a.useEffect)((()=>{f&&C()}),[t,f]),(0,a.useEffect)((()=>{Z<t.length&&j(t.length),Z>t.length&&S(!0),Z===t.length&&S(!1)}),[t,Z]);return(0,c.jsxs)(Pe,{children:[(0,c.jsx)(m.ZP,{item:!0,children:(0,c.jsx)(Fe.Z,{handleChange:e=>{b(!0),e.target.files&&j(e.target.files.length+t.length),n(e,C)}})}),(0,c.jsxs)(m.ZP,{item:!0,container:!0,direction:"column",alignItems:"center",children:[(0,c.jsxs)(s.Z,{color:"gray",sx:{marginTop:2},children:["Total Images Selected: ",t.length,"/",15]}),(0,c.jsx)(Te,{text:v})]}),(0,c.jsx)(Le,{handleNext:()=>{return e=d,void(C()&&e());var e},handlePrevious:u,isLast:h,isFirst:p}),(0,c.jsx)(m.ZP,{item:!0,children:(0,c.jsx)(Ue,{imageDetails:t,handleRemoveImage:e=>{j((e=>e-1)),l(e)},thumbnail:r,handleThumbnailChange:o,handleCaptionChange:x})}),(0,c.jsx)(Re.Z,{open:y,fullWidth:!0,sx:{p:1},children:(0,c.jsxs)(Ne.Z,{sx:{maxWidth:1,p:1},children:[(0,c.jsx)(ge.Z,{title:"Adding Images",sx:{textAlign:"center"}}),(0,c.jsx)(i.Z,{}),(0,c.jsxs)(ze.Z,{children:[(0,c.jsxs)(s.Z,{variant:"h6",sx:{color:"muted.main"},children:["Total Images Selected:",t.length,"/",15]}),(0,c.jsx)(ke.Z,{justifyContent:"center",sx:{py:2},children:(0,c.jsx)(s.Z,{variant:"h5",color:"error",children:v})})]})]})})]})}var Ve=r(11001);function _e(e){let{storyError:t,story:r,handleStoryChange:i}=e;const o=(0,a.useRef)();return(0,a.useEffect)((()=>{o.current.focus()}),[]),(0,c.jsx)(n.Z,{sx:{p:2,m:1,my:2,border:1,borderColor:t?"error.main":"primary.main",bgcolor:"input.background",minHeight:"200px",borderRadius:5},onClick:()=>o.current.focus(),children:(0,c.jsx)(Ve.u,{autoFocus:!0,"aria-label":"minimum height",placeholder:"Tell your story...",value:r,onChange:i,style:{width:"100%",minHeight:"184px",maxHeight:"70vh",boxSizing:"border-box",paddingTop:"5px",border:0,overflow:"auto",outline:"none",resize:"vertical",borderRadius:5,"&:focus":{border:0}},ref:o})})}function Je(e){let{story:t,handleStoryChange:r,handleNext:i,handlePrevious:o,isLast:l,isFirst:s,progressDialog:d}=e;const u=1e5,[m,h]=(0,a.useState)("");return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(_e,{storyError:m,story:t,handleStoryChange:r}),(0,c.jsx)(n.Z,{sx:{p:1,m:1},children:(0,c.jsx)(Te,{text:m})}),(0,c.jsx)(Le,{handleNext:()=>{return e=i,void(t.length<=u?(h(""),e()):h("Maximum story length is: ".concat(u)));var e},handlePrevious:o,isLast:l,isFirst:s}),d]})}var Xe=r(30168),Ge=r(30686),Ke=r(88552),$e=r(58065);function Qe(e){return(0,Z.ZP)("MuiLinearProgress",e)}(0,b.Z)("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);var Ye,et,tt,rt,at,nt;const it=["className","color","value","valueBuffer","variant"];let ot,lt,st,ct,dt,ut;const mt=(0,Ge.F4)(ot||(ot=Ye||(Ye=(0,Xe.Z)(["\n  0% {\n    left: -35%;\n    right: 100%;\n  }\n\n  60% {\n    left: 100%;\n    right: -90%;\n  }\n\n  100% {\n    left: 100%;\n    right: -90%;\n  }\n"])))),ht=(0,Ge.F4)(lt||(lt=et||(et=(0,Xe.Z)(["\n  0% {\n    left: -200%;\n    right: 100%;\n  }\n\n  60% {\n    left: 107%;\n    right: -8%;\n  }\n\n  100% {\n    left: 107%;\n    right: -8%;\n  }\n"])))),pt=(0,Ge.F4)(st||(st=tt||(tt=(0,Xe.Z)(["\n  0% {\n    opacity: 1;\n    background-position: 0 -23px;\n  }\n\n  60% {\n    opacity: 0;\n    background-position: 0 -23px;\n  }\n\n  100% {\n    opacity: 1;\n    background-position: -200px -23px;\n  }\n"])))),xt=(e,t)=>"inherit"===t?"currentColor":e.vars?e.vars.palette.LinearProgress["".concat(t,"Bg")]:"light"===e.palette.mode?(0,Ke.$n)(e.palette[t].main,.62):(0,Ke._j)(e.palette[t].main,.5),vt=(0,f.ZP)("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t["color".concat((0,y.Z)(r.color))],t[r.variant]]}})((e=>{let{ownerState:t,theme:r}=e;return(0,p.Z)({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},backgroundColor:xt(r,t.color)},"inherit"===t.color&&"buffer"!==t.variant&&{backgroundColor:"none","&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}},"buffer"===t.variant&&{backgroundColor:"transparent"},"query"===t.variant&&{transform:"rotate(180deg)"})})),gt=(0,f.ZP)("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.dashed,t["dashedColor".concat((0,y.Z)(r.color))]]}})((e=>{let{ownerState:t,theme:r}=e;const a=xt(r,t.color);return(0,p.Z)({position:"absolute",marginTop:0,height:"100%",width:"100%"},"inherit"===t.color&&{opacity:.3},{backgroundImage:"radial-gradient(".concat(a," 0%, ").concat(a," 16%, transparent 42%)"),backgroundSize:"10px 10px",backgroundPosition:"0 -23px"})}),(0,Ge.iv)(ct||(ct=rt||(rt=(0,Xe.Z)(["\n    animation: "," 3s infinite linear;\n  "]))),pt)),ft=(0,f.ZP)("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.bar,t["barColor".concat((0,y.Z)(r.color))],("indeterminate"===r.variant||"query"===r.variant)&&t.bar1Indeterminate,"determinate"===r.variant&&t.bar1Determinate,"buffer"===r.variant&&t.bar1Buffer]}})((e=>{let{ownerState:t,theme:r}=e;return(0,p.Z)({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",backgroundColor:"inherit"===t.color?"currentColor":(r.vars||r).palette[t.color].main},"determinate"===t.variant&&{transition:"transform .".concat(4,"s linear")},"buffer"===t.variant&&{zIndex:1,transition:"transform .".concat(4,"s linear")})}),(e=>{let{ownerState:t}=e;return("indeterminate"===t.variant||"query"===t.variant)&&(0,Ge.iv)(dt||(dt=at||(at=(0,Xe.Z)(["\n      width: auto;\n      animation: "," 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;\n    "]))),mt)})),bt=(0,f.ZP)("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.bar,t["barColor".concat((0,y.Z)(r.color))],("indeterminate"===r.variant||"query"===r.variant)&&t.bar2Indeterminate,"buffer"===r.variant&&t.bar2Buffer]}})((e=>{let{ownerState:t,theme:r}=e;return(0,p.Z)({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left"},"buffer"!==t.variant&&{backgroundColor:"inherit"===t.color?"currentColor":(r.vars||r).palette[t.color].main},"inherit"===t.color&&{opacity:.3},"buffer"===t.variant&&{backgroundColor:xt(r,t.color),transition:"transform .".concat(4,"s linear")})}),(e=>{let{ownerState:t}=e;return("indeterminate"===t.variant||"query"===t.variant)&&(0,Ge.iv)(ut||(ut=nt||(nt=(0,Xe.Z)(["\n      width: auto;\n      animation: "," 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;\n    "]))),ht)})),Zt=a.forwardRef((function(e,t){const r=(0,g.i)({props:e,name:"MuiLinearProgress"}),{className:a,color:n="primary",value:i,valueBuffer:o,variant:l="indeterminate"}=r,s=(0,h.Z)(r,it),d=(0,p.Z)({},r,{color:n,variant:l}),u=(e=>{const{classes:t,variant:r,color:a}=e,n={root:["root","color".concat((0,y.Z)(a)),r],dashed:["dashed","dashedColor".concat((0,y.Z)(a))],bar1:["bar","barColor".concat((0,y.Z)(a)),("indeterminate"===r||"query"===r)&&"bar1Indeterminate","determinate"===r&&"bar1Determinate","buffer"===r&&"bar1Buffer"],bar2:["bar","buffer"!==r&&"barColor".concat((0,y.Z)(a)),"buffer"===r&&"color".concat((0,y.Z)(a)),("indeterminate"===r||"query"===r)&&"bar2Indeterminate","buffer"===r&&"bar2Buffer"]};return(0,v.Z)(n,Qe,t)})(d),m=(0,$e.V)(),f={},b={bar1:{},bar2:{}};if("determinate"===l||"buffer"===l)if(void 0!==i){f["aria-valuenow"]=Math.round(i),f["aria-valuemin"]=0,f["aria-valuemax"]=100;let e=i-100;m&&(e=-e),b.bar1.transform="translateX(".concat(e,"%)")}else 0;if("buffer"===l)if(void 0!==o){let e=(o||0)-100;m&&(e=-e),b.bar2.transform="translateX(".concat(e,"%)")}else 0;return(0,c.jsxs)(vt,(0,p.Z)({className:(0,x.Z)(u.root,a),ownerState:d,role:"progressbar"},f,{ref:t},s,{children:["buffer"===l?(0,c.jsx)(gt,{className:u.dashed,ownerState:d}):null,(0,c.jsx)(ft,{className:u.bar1,ownerState:d,style:b.bar1}),"determinate"===l?null:(0,c.jsx)(bt,{className:u.bar2,ownerState:d,style:b.bar2})]}))}));var jt=r(85281),yt=r(37957),St=r(59236);function Ct(e){let{value:t}=e;return(0,c.jsxs)(n.Z,{sx:{display:"flex",alignItems:"center",mb:1},children:[(0,c.jsx)(n.Z,{sx:{width:"100%",mr:1},children:(0,c.jsx)(Zt,{variant:"determinate",value:t})}),(0,c.jsx)(n.Z,{sx:{minWidth:35},children:(0,c.jsx)(s.Z,{variant:"body2",color:"text.secondary",children:"".concat(Math.round(t),"%")})})]})}function wt(e){let t,{message:r,done:a}=e;return t="failed"===a?(0,c.jsx)(s.Z,{color:"error.main",children:"Failed"}):!0===a?(0,c.jsx)(s.Z,{color:"success.main",children:"Done"}):(0,c.jsx)(jt.Z,{size:30}),(0,c.jsxs)(n.Z,{sx:{display:"flex",alignItems:"space-between"},children:[(0,c.jsx)(n.Z,{sx:{width:"100%",mr:1},children:(0,c.jsx)(s.Z,{children:r})}),(0,c.jsx)(n.Z,{sx:{minWidth:35},children:t})]})}function Lt(e){let{progress:t,counter:r}=e;return 100===t?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(n.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",m:2},children:[(0,c.jsx)(yt.Z,{color:"success",fontSize:"large",sx:{mr:2}}),(0,c.jsx)(s.Z,{variant:"h5",color:"primary.main",children:"Memory Created Successfully"})]}),(0,c.jsxs)(n.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,c.jsx)(n.Z,{children:(0,c.jsx)(s.Z,{children:"Navigating to memories page in "})}),(0,c.jsx)(n.Z,{sx:{mx:1},children:(0,c.jsx)(s.Z,{variant:"h6",color:"success.main",children:r})}),(0,c.jsx)(n.Z,{children:(0,c.jsx)(s.Z,{children:"seconds"})})]})]}):-1===t?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(n.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",m:2},children:[(0,c.jsx)(St.Z,{color:"error",fontSize:"large",sx:{mr:2}}),(0,c.jsx)(s.Z,{variant:"h5",color:"primary.main",children:"Memory Creation Failed"})]}),(0,c.jsxs)(n.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,c.jsx)(n.Z,{children:(0,c.jsx)(s.Z,{children:"Navigating to memories page in "})}),(0,c.jsx)(n.Z,{sx:{mx:1},children:(0,c.jsx)(s.Z,{variant:"h6",color:"success.main",children:r})}),(0,c.jsx)(n.Z,{children:(0,c.jsx)(s.Z,{children:"seconds"})})]})]}):null}function Pt(e){let{open:t,progress:r,messages:n}=e;const[o,l]=(0,a.useState)(0);return(0,a.useEffect)((()=>{let e;return o>0&&(e=setTimeout((()=>l(o-1)),1e3)),()=>clearTimeout(e)}),[o]),(0,a.useEffect)((()=>{100!==r&&-1!==r||l(3)}),[r]),(0,c.jsx)(Re.Z,{open:t,fullWidth:!0,sx:{p:1},children:(0,c.jsxs)(Ne.Z,{sx:{maxWidth:1,p:1},children:[(0,c.jsx)(ge.Z,{title:"Creating Memory",sx:{textAlign:"center"}}),(0,c.jsx)(i.Z,{}),(0,c.jsxs)(ze.Z,{children:[(0,c.jsx)(Ct,{value:r>0?r:0}),n.map((e=>(0,c.jsx)(wt,{message:e.message,done:e.done},e.message))),(0,c.jsx)(Lt,{progress:r,counter:o})]})]})})}function Mt(e){let{mode:t,bucket:r,authURL:o}=e;const l=(0,u.s0)(),s=["Enter memory title and date","Upload Pictures","Write story"],[d,h,p,x,v]=function(e){const[t,r]=(0,a.useState)(0);return[t,()=>{r((t+1)%e)},()=>{r((t-1+e)%e)},t===e-1,0===t]}(s.length),[g,,f]=(0,ue.Z)(""),[b,,Z]=(0,me.Z)(""),[j,y,S,C,w,L]=function(){const[e,t]=(0,a.useState)([]),[r,n]=(0,a.useState)([]),[i,o]=(0,a.useState)(0),l=[500,1e3,1500],s=e=>{o(e)};return[e,i,e=>{if(e.target.files){const r=Array.from(e.target.files);r.forEach((e=>{const r=new Image;r.onload=r=>{const a=Date.now(),n="".concat(a,"-").concat(e.name),i=l.map((e=>({height:e,width:Math.ceil(e*r.target.naturalWidth/r.target.naturalHeight)})));t((t=>t.concat([{name:n,size:e.size/1048576,url:r.target.src,height:r.target.naturalHeight,width:r.target.naturalWidth,imageFile:e,images:i}])))},r.src=URL.createObjectURL(e)})),n((e=>e.concat(r))),r.map((e=>URL.revokeObjectURL(e)))}},a=>{t([...e.slice(0,a),...e.slice(a+1)]),n([...r.slice(0,a),...r.slice(a+1)]),a<i?s(i-1):a===i&&s(0)},s,(r,a)=>{t([...e.slice(0,r),(0,he.Z)((0,he.Z)({},e[r]),{},{caption:a}),...e.slice(r+1)])}]}(),[P,,M]=(0,pe.Z)(""),[I,k]=(0,a.useState)(!1),[R,N]=(0,a.useState)(0),[z,T,F]=function(){const[e,t]=(0,a.useState)([]);return[e,(e,r)=>{const a=[{message:e,done:r}];t((e=>e.concat(a)))},(e,r)=>{const a=[{message:e,done:r}];t((e=>e.slice(0,-1).concat(a)))}]}(),[D,q]=(0,a.useState)(0),B=e=>N(e),W=()=>q((e=>e+1)),E=j.map((e=>e.imageFile));(0,a.useEffect)((()=>{const e="Uploading Images (".concat(D,"/").concat(j.length,")");D>=0&&R>=10&&(0===D?T(e,!1):F(e,!1),j.length===D&&F(e,!0))}),[D,R]);const A=(0,c.jsx)(Ie,{activeStep:d,handleNext:h,handlePrevious:p,isLast:x,isFirst:v,title:g,date:b,handleTitleChange:f,handleDateChange:Z}),O=(0,c.jsx)(He,{imageDetails:j,handleSelectedImageChange:S,removeSelectedImage:C,thumbnail:y,handleThumbnailChange:w,handleNext:h,handlePrevious:p,isLast:x,isFirst:v,handleCaptionChange:L}),U=async()=>{const e={key:new Date(2100,1,1).getTime()-Date.now(),title:g,date:b,lastModified:new Date,imageDetails:j,story:P,thumbnail:j[y],totalSize:(t=j,t.reduce(((e,t)=>e+t.size),0))};var t;k(!0);const a=await de(r,o,e,B,F,T,E,W);B(!0===a?100:-1),setTimeout((()=>l("/memories")),3e3)},H=(0,c.jsx)(Pt,{open:I,progress:R,messages:z});let V;const _=function(e,t,r,a,o){return(0,c.jsx)(m.ZP,{container:!0,justifyContent:"center",children:(0,c.jsx)(m.ZP,{item:!0,lg:6,xs:12,sx:{boxShadow:10,borderRadius:5,bgcolor:"button.main",mb:2},children:(0,c.jsxs)(n.Z,{children:[(0,c.jsx)(oe,{titles:t,activeStep:o,handleClick:()=>{}}),(0,c.jsx)(i.Z,{}),r[o]]})})})}(0,s,[A,O,(0,c.jsx)(Je,{story:P,handleStoryChange:M,handleNext:U,handlePrevious:p,isLast:x,isFirst:v,progressDialog:H})],0,d),J=function(e,t,r,a,n){return(0,c.jsxs)(m.ZP,{container:!0,justifyContent:"space-evenly",sx:{p:0},children:[(0,c.jsxs)(m.ZP,{item:!0,xs:6,sm:4,md:4,lg:3,xl:2,sx:{px:1,mb:1},children:[(0,c.jsx)(fe,{title:"Thumbnail Preview"}),(0,c.jsx)(xe.Z,{title:e,date:t||"",thumbnailImage:r.length>0?r[a].url:"",handleClick:()=>{}})]}),(0,c.jsxs)(m.ZP,{item:!0,xs:12,lg:9,xl:10,children:[(0,c.jsx)(fe,{title:"Memory Preview"}),(0,c.jsx)(ve.Z,{memType:"preview",memTitle:e,memDate:t,memStory:n,memImages:r.map((e=>({src:e.url,width:e.width,height:e.height,caption:e.caption||""}))),imageNames:r.map((e=>e.name))})]})]})}(g,b,j,y,P);return"Create"===t&&(V=_),"Preview"===t&&(V=J),V}function It(e){let{bucket:t,authURL:r}=e;const n=["Create","Preview"],[i,o]=(0,a.useState)(n[0]),l=(0,a.useRef)(null);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(d,{mode:i,handleModeChange:o,modes:n}),(0,c.jsx)(Mt,{mode:i,formRef:l,bucket:t,authURL:r})]})}Pt.defaultProps={messages:[]}},37957:(e,t,r)=>{var a=r(64836);t.Z=void 0;var n=a(r(45045)),i=r(46417),o=(0,n.default)((0,i.jsx)("path",{d:"M16.59 7.58 10 14.17l-3.59-3.58L5 12l5 5 8-8zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"CheckCircleOutline");t.Z=o},59236:(e,t,r)=>{var a=r(64836);t.Z=void 0;var n=a(r(45045)),i=r(46417),o=(0,n.default)((0,i.jsx)("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline");t.Z=o}}]);