"use strict";(self.webpackChunkprelaunch=self.webpackChunkprelaunch||[]).push([[3],{487:function(e,n,t){t.d(n,{Z:function(){return c}});var r=t(3400),a=t(9823),o=t(2065),i=t(184);function c(e){var n=e.size,t=e.handleClick;return(0,i.jsx)(r.Z,{size:n,sx:{color:"black",bgcolor:(0,o.Fq)("#fff",.4),position:"absolute",top:10,right:12},onClick:t,children:(0,i.jsx)(a.Z,{size:n})})}c.defaultProps={size:"small"}},4700:function(e,n,t){t.d(n,{Z:function(){return h}});var r=t(9439),a=t(2791),o=t(5646),i=t(3400),c=t(9823),s=t(3767),u=t(1428),l=t(890),d=t(184);function m(e){var n=e.message;return!0===e.error?(0,d.jsxs)(s.Z,{direction:"row",spacing:2,justifyContents:"space-between",alignItems:"center",children:[(0,d.jsx)(c.Z,{fontSize:"small",color:"error"}),(0,d.jsx)(l.Z,{children:n})]}):(0,d.jsxs)(s.Z,{direction:"row",spacing:2,justifyContents:"space-between",alignItems:"center",children:[(0,d.jsx)(u.Z,{fontSize:"small",color:"success"}),(0,d.jsx)(l.Z,{children:n})]})}function h(e){var n=e.snackBarOpen,t=e.message,s=e.onClose,u=e.error,l=(0,a.useState)(n),h=(0,r.Z)(l,2),p=h[0],f=h[1],x=(0,a.useState)(t),g=(0,r.Z)(x,2),Z=g[0],y=g[1];(0,a.useEffect)((function(){return f(n)}),[n]),(0,a.useEffect)((function(){return y(t)}),[t]);var v=function(){f(!1),y(null),s()},b=(0,d.jsx)(i.Z,{size:"small","aria-label":"close",color:"inherit",onClick:v,children:(0,d.jsx)(c.Z,{fontSize:"small"})});return(0,d.jsx)(o.Z,{open:p,autoHideDuration:3e3,onClose:v,message:(0,d.jsx)(m,{message:Z,error:u}),action:b,anchorOrigin:{vertical:"top",horizontal:"center"}})}h.defaultProps={error:!1}},4125:function(e,n,t){t.d(n,{Z:function(){return o}});var r=t(9439),a=t(2791);function o(e){var n=(0,a.useState)(e),t=(0,r.Z)(n,2),o=t[0],i=t[1];return[o,i,function(e){var n=new Date(e);if(e){var t=n.toLocaleDateString("en-in",{day:"numeric",month:"long",year:"numeric"});i(t)}else i(null)}]}},1619:function(e,n,t){t.d(n,{Z:function(){return o}});var r=t(9439),a=t(2791);function o(e){var n=(0,a.useState)(e),t=(0,r.Z)(n,2),o=t[0],i=t[1];return[o,i,function(e){return i(e.target.value)}]}},2168:function(e,n,t){t.d(n,{Z:function(){return o}});var r=t(9439),a=t(2791);function o(e){var n=(0,a.useState)(e),t=(0,r.Z)(n,2),o=t[0],i=t[1];(0,a.useEffect)((function(){return i(e)}),[e]);return[o,i,function(e){i(e.target.value)}]}},5899:function(e,n,t){var r=t(4165),a=t(5861),o=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n,t){var a,o,i,c,s=arguments;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>2&&void 0!==s[2]?s[2]:{},o="https://".concat(n).concat(t),i={method:"GET",credentials:"include",headers:new Headers({"content-type":"application/json"})},o+="?".concat(new URLSearchParams(a).toString()),e.next=6,fetch(o,i);case 6:if((c=e.sent).ok){e.next=13;break}if(401!==c.status){e.next=11;break}return document.cookie="userInfo=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",e.abrupt("return",{status:"unauthenticated"});case 11:if(403!==c.status){e.next=13;break}return e.abrupt("return",{status:"forbidden"});case 13:return e.abrupt("return",c.json());case 14:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}();function i(e,n,t,r){try{return o(n,"/api/presigned-url",{key:t,bucket:e,method:r}).then((function(e){return e.Error?(console.log(e.Error),""):e.URL}))}catch(a){return a}}function c(){return(c=(0,a.Z)((0,r.Z)().mark((function e(n,t,a){var o,i,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"/api/details/validate",o={bucket:n},i="https://".concat(t).concat("/api/details/validate"),i+="?".concat(new URLSearchParams(o).toString()),c={method:"POST",credentials:"include",headers:new Headers({"content-type":"application/json"}),body:a},e.next=8,fetch(i,c).then((function(e){return e.ok?e.json():{status:"error"}}));case 8:return e.abrupt("return",e.sent);case 11:return e.prev=11,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function s(e,n,t,r){return u.apply(this,arguments)}function u(){return(u=(0,a.Z)((0,r.Z)().mark((function e(n,t,a,o){var c,s,u;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i(n,t,a,"PUT");case 3:return c=e.sent,s={body:o,method:"PUT"},e.next=7,fetch(c,s).then((function(e){return e}));case 7:return u=e.sent,e.abrupt("return",u);case 11:return e.prev=11,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function l(){return(l=(0,a.Z)((0,r.Z)().mark((function e(n,t,a){var o,i,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"/api/memory",o={bucket:n,memory_id:a},i="https://".concat(t).concat("/api/memory"),i+="?".concat(new URLSearchParams(o).toString()),c={method:"DELETE",credentials:"include",headers:new Headers({"content-type":"application/json"})},e.next=8,fetch(i,c).then((function(e){return e.ok?{status:"ok",body:e.json()}:{status:"error"}}));case 8:return e.abrupt("return",e.sent);case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function d(){return(d=(0,a.Z)((0,r.Z)().mark((function e(n,t,a,o,i){var c,s,u;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"/api/memory",c={bucket:n,memory_id:a},s="https://".concat(t).concat("/api/memory"),s+="?".concat(new URLSearchParams(c).toString()),u={method:"PATCH",credentials:"include",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({item:o,value:i})},e.next=8,fetch(s,u).then((function(e){return e}));case 8:return e.abrupt("return",e.sent);case 11:return e.prev=11,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function m(){return(m=(0,a.Z)((0,r.Z)().mark((function e(n,t,a,o,i){var c,s,u;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"/api/memory",c={bucket:n,memory_id:a},s="https://".concat(t).concat("/api/memory"),s+="?".concat(new URLSearchParams(c).toString()),u={method:"PATCH",credentials:"include",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({item:"image",action:o,image:i})},e.next=8,fetch(s,u).then((function(e){return e}));case 8:return e.abrupt("return",e.sent);case 11:return e.prev=11,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function h(){return(h=(0,a.Z)((0,r.Z)().mark((function e(n,t){var a,o,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"mymemorystore-stage","authbridge-stage.mymemorystore.in","/api/memory/share/init",a={bucket:"mymemorystore-stage",memory_id:n},o="https://".concat("authbridge-stage.mymemorystore.in").concat("/api/memory/share/init"),o+="?".concat(new URLSearchParams(a).toString()),i={method:"POST",credentials:"include",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({email_list:t})},e.next=10,fetch(o,i).then((function(e){return e}));case 10:return e.abrupt("return",e.sent);case 13:return e.prev=13,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}function p(){return(p=(0,a.Z)((0,r.Z)().mark((function e(n){var t,a,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"mymemorystore-stage","authbridge-stage.mymemorystore.in","/api/memory/share/details",t={bucket:"mymemorystore-stage",memory_id:n},a="https://".concat("authbridge-stage.mymemorystore.in").concat("/api/memory/share/details"),a+="?".concat(new URLSearchParams(t).toString()),o={method:"GET",credentials:"include",headers:new Headers({"content-type":"application/json"})},e.next=10,fetch(a,o).then((function(e){return e.json()}));case 10:return e.abrupt("return",e.sent);case 13:return e.prev=13,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}function f(){return(f=(0,a.Z)((0,r.Z)().mark((function e(n,t){var a,o,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"mymemorystore-stage","authbridge-stage.mymemorystore.in","/api/memory/share/revoke",a={bucket:"mymemorystore-stage",memory_id:n},o="https://".concat("authbridge-stage.mymemorystore.in").concat("/api/memory/share/revoke"),o+="?".concat(new URLSearchParams(a).toString()),i={method:"POST",credentials:"include",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({email_list:t})},e.next=10,fetch(o,i).then((function(e){return e}));case 10:return e.abrupt("return",e.sent);case 13:return e.prev=13,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}function x(){return(x=(0,a.Z)((0,r.Z)().mark((function e(n,t){var a,o,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"mymemorystore-stage","authbridge-stage.mymemorystore.in","/api/memory/share/accept",a={bucket:"mymemorystore-stage",memory_id:n},o="https://".concat("authbridge-stage.mymemorystore.in").concat("/api/memory/share/accept"),o+="?".concat(new URLSearchParams(a).toString()),i={method:"POST",credentials:"include",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({email:t})},e.next=10,fetch(o,i).then((function(e){return e}));case 10:return e.abrupt("return",e.sent);case 13:return e.prev=13,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}n.Z={getObjectUrl:i,validateDetails:function(e,n,t){return c.apply(this,arguments)},upload:s,uploadMultipleImages:function(e,n,t,o){try{return t.map(function(){var t=(0,a.Z)((0,r.Z)().mark((function t(a){var i;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s(e,n,a.Key,a.Body);case 2:return i=t.sent,o(),t.abrupt("return",i);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}catch(i){return console.log(i),i}},getMemories:function(e){try{var n={bucket:"mymemorystore-stage"};return e&&(n.next_token=e),o("authbridge-stage.mymemorystore.in","/api/memories",n)}catch(t){return t}},getPendingMemories:function(e){try{var n={bucket:"mymemorystore-stage"};return e&&(n.next_token=e),o("authbridge-stage.mymemorystore.in","/api/memories/pending-memories",n)}catch(t){return t}},getAcceptedMemories:function(e){try{var n={bucket:"mymemorystore-stage"};return e&&(n.next_token=e),o("authbridge-stage.mymemorystore.in","/api/memories/accepted-memories",n)}catch(t){return t}},viewMemory:function(e,n,t){try{return o(n,"/api/memory",{bucket:e,memory_id:t})}catch(r){return r}},viewSharedMemory:function(e){try{return o("authbridge-stage.mymemorystore.in","/api/memory/shared",{bucket:"mymemorystore-stage",memory_id:e})}catch(n){return n}},getThumbnails:function(e){try{return e.map(function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={bucket:"mymemorystore-stage",memory_id:n},e.abrupt("return",o("authbridge-stage.mymemorystore.in","/api/memory/thumbnail",t));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())}catch(n){return console.log(n),n}},getPendingThumbnails:function(e){try{return e.map(function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={bucket:"mymemorystore-stage",memory_id:n.memory_id},e.abrupt("return",o("authbridge-stage.mymemorystore.in","/api/memory/thumbnail/pending-memories",t));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())}catch(n){return console.log(n),n}},getAcceptedThumbnails:function(e){try{return e.map(function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={bucket:"mymemorystore-stage",memory_id:n.memory_id},e.abrupt("return",o("authbridge-stage.mymemorystore.in","/api/memory/thumbnail/accepted-memories",t));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())}catch(n){return console.log(n),n}},finalizeMemory:function(e,n,t){try{return o(n,"/api/memory/finalize",{bucket:e,memory_id:t})}catch(r){return r}},deleteMemory:function(e,n,t){return l.apply(this,arguments)},updateMemoryDetails:function(e,n,t,r,a){return d.apply(this,arguments)},updateMemoryImage:function(e,n,t,r,a){return m.apply(this,arguments)},shareMemory:function(e,n){return h.apply(this,arguments)},getShareData:function(e){return p.apply(this,arguments)},revokeShare:function(e,n){return f.apply(this,arguments)},acceptShare:function(e,n){return x.apply(this,arguments)}}},6926:function(e,n,t){t.d(n,{Z:function(){return pe}});var r=t(9439),a=t(2791),o=t(7689),i=t(7621),c=t(9585),s=t(4554),u=t(2898),l=t(4721),d=t(3967),m=t(5193),h=t(4700),p=t(4165),f=t(5861),x=t(3400),g=t(184);function Z(e){var n=e.icon,t=e.label;return(0,g.jsxs)(s.Z,{sx:{alignItems:"center"},children:[(0,g.jsx)(x.Z,{"aria-label":"delete",sx:{bgcolor:"form.input"},children:n}),t]})}var y=t(5574),v=t(6151),b=t(890),j=t(3767),k=t(5661);function w(e){var n=e.confirm,t=e.handleCallback,o=e.handleCloseCallback,i=e.title,c=e.message,u=(0,a.useState)(n),l=(0,r.Z)(u,2),d=l[0],m=l[1];(0,a.useEffect)((function(){return m(n)}),[n]);var h=function(){m(!1),o()};return(0,g.jsxs)(y.Z,{open:d,sx:{backgroundColor:"faded.black"},children:[(0,g.jsx)(k.Z,{children:i}),(0,g.jsxs)(s.Z,{sx:{p:2},children:[(0,g.jsx)(b.Z,{sx:{pb:2},children:c}),(0,g.jsxs)(j.Z,{spacing:2,direction:"row",children:[(0,g.jsx)(v.Z,{variant:"contained",onClick:h,children:"Cancel"}),(0,g.jsx)(v.Z,{variant:"outlined",onClick:function(){h(),t()},children:"OK"})]})]})]})}var S=t(7247),C=t(5899);function P(){return(0,g.jsx)(Z,{icon:(0,g.jsx)(S.Z,{}),label:"Delete"})}function D(e){var n=e.callback,t=e.open,r=e.closeCallback;return(0,g.jsx)(w,{confirm:t,title:"Delete Memory",handleCallback:n,handleCloseCallback:function(){return r()},message:"Do you want to delete this memory?"})}function E(){return(E=(0,f.Z)((0,p.Z)().mark((function e(n,t,r,a){var o;return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.Z.deleteMemory(n,t,r);case 3:o=e.sent,a(o),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}var U=t(5422),z=t(3786),T=t(1286);function M(){return(0,g.jsx)(Z,{icon:(0,g.jsx)(T.Z,{}),label:"Edit"})}var I=t(580),R=t(3433);function L(){var e=(0,a.useState)([]),n=(0,r.Z)(e,2),t=n[0],o=n[1],i=(0,a.useState)(""),c=(0,r.Z)(i,2),s=c[0],u=c[1],l=(0,a.useState)(null),d=(0,r.Z)(l,2),m=d[0],h=d[1],p=function(e){return t.includes(e)};return[t,s,m,o,function(e){if(["Enter","Tab",","].includes(e.key)){e.preventDefault();var n=s.trim();n&&function(e){var n=null;return p(e)&&(n="".concat(e," has already been added.")),function(e){return/[\w\d\.-]+@[\w\d\.-]+\.[\w\d\.-]+/.test(e)}(e)||(n="".concat(e," is not a valid email address.")),!n||(h(n),!1)}(n)&&(o([].concat((0,R.Z)(t),[s])),u(""))}},function(e){u(e.target.value),h(null)},function(e){o((function(n){return n.filter((function(n){return n!==e}))}))},function(e){e.preventDefault();var n=e.clipboardData.getData("text").match(/[\w\d\.-]+@[\w\d\.-]+\.[\w\d\.-]+/g);if(n){var r=n.filter((function(e){return!p(e)}));o([].concat((0,R.Z)(t),(0,R.Z)(r)))}}]}var O=t(9218),A=t(1918),_=t(1889);function H(e){var n=e.items,t=e.value,r=e.error,a=e.handleKeyDown,o=e.handleChange,i=e.handleDelete,c=e.handlePaste;return(0,g.jsxs)(j.Z,{direction:"column",spacing:2,sx:{mb:3},children:[(0,g.jsx)(O.Z,{id:"outlined-error",value:t,label:"Email List",placeholder:"Type or paste email addresses and press `Enter`...",onKeyDown:a,onChange:o,onPaste:c,helperText:r||"Type or paste email addresses and press `Enter`...",error:!!r,sx:{my:1}}),(0,g.jsx)(_.ZP,{container:!0,spacing:2,children:n.map((function(e){return(0,g.jsx)(A.Z,{label:e,variant:"outlined",onDelete:function(){return i(e)},sx:{margin:.5},size:"small"},e)}))})]})}function B(e){var n=e.items,t=e.value,r=e.error,a=e.handleKeyDown,o=e.handleChange,i=e.handleDelete,c=e.handlePaste,u=e.handleClear,l=e.handleSubmit;return(0,g.jsxs)(s.Z,{sx:{p:2},children:[(0,g.jsx)(H,{items:n,value:t,error:r,handleKeyDown:a,handleChange:o,handleDelete:i,handlePaste:c}),(0,g.jsxs)(j.Z,{spacing:2,direction:"row",children:[(0,g.jsx)(v.Z,{variant:"outlined",onClick:u,children:"Clear"}),(0,g.jsx)(v.Z,{variant:"contained",onClick:l,disabled:0===n.length,children:"Share"})]})]})}var F=t(9836),N=t(3382),W=t(9281),K=t(4515),Y=t(5527),J=t(6125),q=t(5855),G=t(3994),X=t(6890);function V(e){var n=e.invitation,t=e.accept,r={pending:"warning",sent:"success",failed:"error",rejected:"error",accepted:"success"};return(0,g.jsxs)(F.Z,{size:"small","aria-label":"statuses",children:[(0,g.jsx)(X.Z,{children:(0,g.jsxs)(q.Z,{children:[(0,g.jsx)(G.Z,{align:"left",children:"Invitation"}),(0,g.jsx)(G.Z,{align:"left",children:"Accepted"})]})}),(0,g.jsx)(N.Z,{children:(0,g.jsxs)(q.Z,{children:[(0,g.jsx)(G.Z,{align:"left",children:(0,g.jsx)(A.Z,{color:r[n],size:"small",label:n})}),(0,g.jsx)(G.Z,{align:"left",children:(0,g.jsx)(A.Z,{color:r[t],size:"small",label:t})})]},new Date)})]})}var Q=t(4454);function $(e){var n=e.selected,t=e.handleChange,o=(0,a.useState)(n),i=(0,r.Z)(o,2),c=i[0],s=i[1];return(0,a.useEffect)((function(){s(n)}),[n]),console.log("check box cell",n,c,t),(0,g.jsx)(G.Z,{padding:"checkbox",children:(0,g.jsx)(Q.Z,{color:"primary",checked:c,onChange:t})},"checkbox")}var ee=t(3044);function ne(e){var n=e.email,t=e.picture,r=e.name;return(0,g.jsx)(G.Z,{component:"th",scope:"row",sx:{p:1},children:(0,g.jsx)(A.Z,{avatar:(0,g.jsx)(ee.Z,{alt:n,src:t,sx:{referrerPolicy:"no-referrer"}}),label:r,sx:{b:1,maxWidth:170},color:"primary",variant:"outlined"})},"personal-details")}var te=t(1283),re=t(2885);function ae(e){var n=e.open,t=e.handleClick;return(0,g.jsx)(G.Z,{align:"center",style:{paddingBottom:0,paddingTop:0},colSpan:6,onClick:t,children:(0,g.jsx)(x.Z,{"aria-label":"expand row",size:"small",children:n?(0,g.jsx)(re.Z,{}):(0,g.jsx)(te.Z,{})})},"expand-status")}function oe(e){var n=e.name,t=e.email,o=e.picture,i=e.invitation,c=e.accept,u=e.isSelected,l=e.onCheckBoxClick,d=(0,a.useState)(!1),m=(0,r.Z)(d,2),h=m[0],p=m[1];return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(q.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,g.jsx)($,{selected:u,handleChange:l}),(0,g.jsx)(ne,{email:t,picture:o,name:n}),(0,g.jsx)(ae,{open:h,handleClick:function(){return p(!h)}})]},"".concat({email:t},"details")),(0,g.jsx)(q.Z,{children:(0,g.jsx)(G.Z,{style:{paddingBottom:0,paddingTop:0},colSpan:6,children:(0,g.jsx)(J.Z,{in:h,timeout:"auto",unmountOnExit:!0,children:(0,g.jsxs)(s.Z,{sx:{margin:1},children:[(0,g.jsx)(b.Z,{variant:"h6",gutterBottom:!0,component:"div",children:"Status"}),(0,g.jsx)(V,{invitation:i,accept:c})]})})})},"".concat({email:t},"status"))]})}function ie(e){var n=e.numSelected,t=e.rowCount,r=e.onSelectAllClick;return(0,g.jsx)(G.Z,{padding:"checkbox",children:(0,g.jsx)(Q.Z,{color:"primary",indeterminate:n>0&&n<t,checked:t>0&&n===t,onChange:r})},"selectAll")}function ce(e){var n=e.numSelected,t=e.rowCount,r=e.onSelectAllClick,a=e.handleUnshareClick;return(0,g.jsx)(X.Z,{children:(0,g.jsxs)(q.Z,{children:[(0,g.jsx)(ie,{numSelected:n,rowCount:t,onSelectAllClick:r},"selectAll"),(0,g.jsx)(G.Z,{align:"center",sx:{fontWeight:"bold",fontSize:"1em"},children:0===n?"Shared With":"".concat(n," selected")},"message"),(0,g.jsx)(G.Z,{align:"center",sx:{fontWeight:"bold"},children:(0,g.jsx)(v.Z,{variant:"contained",color:"error",sx:{textTransform:"none"},disabled:0===n,onClick:a,children:"Unshare"})},"action")]})})}function se(e){var n=e.shareData,t=e.onUnShare,o=(0,a.useState)(0),i=(0,r.Z)(o,2),c=i[0],s=i[1],u=(0,a.useState)(0),l=(0,r.Z)(u,2),d=l[0],m=l[1],h=(0,a.useState)(Array(n.length).fill(0)),p=(0,r.Z)(h,2),f=p[0],x=p[1];console.log("share data",n,f),(0,a.useEffect)((function(){x(Array(n.length).fill(0)),m(0)}),[n]);return n.length>0?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(W.Z,{component:Y.Z,children:(0,g.jsxs)(F.Z,{stickyHeader:!0,"aria-label":"memory share table",children:[(0,g.jsx)(ce,{numSelected:d,rowCount:n.length,onSelectAllClick:function(){f.length>0&&d<f.length?(x(Array(n.length).fill(1)),m(f.length)):(x(Array(n.length).fill(0)),m(0))},handleUnshareClick:function(){for(var e=[],r=0;r<f.length;r+=1)1===f[r]&&e.push(n[r].email);console.log("Unshare emails",e),t(e)}}),(0,g.jsx)(N.Z,{children:n.slice(5*c,5*c+5).map((function(e,n){return(0,g.jsx)(oe,{email:e.email,name:e.name,picture:e.picture,invitation:e.status.invitation,accept:e.status.accept,isSelected:1===f[5*c+n],onCheckBoxClick:function(){return e=5*c+n,console.log("handle click index",e),1===f[e]?m((function(e){return e-1})):m((function(e){return e+1})),void x([].concat((0,R.Z)(f.slice(0,e)),[1-f[e]],(0,R.Z)(f.slice(e+1))));var e}},e.email)}))})]})}),(0,g.jsx)(K.Z,{rowsPerPageOptions:[5],component:"div",count:f.length,rowsPerPage:5,page:c,onPageChange:function(e,n){console.log(c,n),s(n)}})]}):null}var ue=t(9823);function le(e){var n=e.handleClose;return(0,g.jsx)(x.Z,{"aria-label":"close",onClick:n,sx:{position:"absolute",right:8,top:8,color:function(e){return e.palette.grey[500]}},children:(0,g.jsx)(ue.Z,{})})}function de(){return(0,g.jsx)(Z,{icon:(0,g.jsx)(I.Z,{}),label:"Share"})}function me(e){var n=e.confirm,t=e.memoryShareCallback,o=e.memoryUnShareCallback,i=e.closeCallback,c=e.memoryID,s=L(),u=(0,r.Z)(s,8),d=u[0],m=u[1],h=u[2],x=u[3],Z=u[4],v=u[5],j=u[6],w=u[7],S=(0,a.useState)(null),P=(0,r.Z)(S,2),D=P[0],E=P[1];(0,a.useEffect)((0,f.Z)((0,p.Z)().mark((function e(){var n;return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.Z.getShareData(c);case 3:n=e.sent,E(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[]);var U=(0,a.useState)(n),z=(0,r.Z)(U,2),T=z[0],M=z[1];(0,a.useEffect)((function(){return M(n)}),[n]);var I=function(){var e=(0,f.Z)((0,p.Z)().mark((function e(){var n,r;return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("share memory",c,d),e.next=4,C.Z.shareMemory(c,d);case 4:return n=e.sent,console.log(n),t(n),e.next=9,n.json();case 9:r=e.sent,x([]),E(r),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=(0,f.Z)((0,p.Z)().mark((function e(n){var t,r;return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("share memory",c,n),e.next=4,C.Z.revokeShare(c,n);case 4:return t=e.sent,console.log(t),o(t),e.next=9,t.json();case 9:r=e.sent,E(r),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(n){return e.apply(this,arguments)}}(),O=null!==D?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(b.Z,{sx:{m:2,fontSize:"1.2rem"},children:"Existing Shares"}),(0,g.jsx)(se,{shareData:D,onUnShare:R})]}):null;return console.log(D),(0,g.jsxs)(y.Z,{open:T,sx:{"& .MuiPaper-root":{m:0},backgroundColor:"faded.black"},children:[(0,g.jsxs)(k.Z,{children:["Share Memory",(0,g.jsx)(le,{handleClose:function(){M(!1),i()}})]}),(0,g.jsx)(l.Z,{}),(0,g.jsxs)(b.Z,{sx:{m:2},children:["New Shares (",d.length," ","added)"]}),(0,g.jsx)(B,{items:d,value:m,error:h,handleKeyDown:Z,handleChange:v,handleDelete:j,handlePaste:w,handleClear:function(){return x([])},handleSubmit:I}),(0,g.jsx)(l.Z,{}),O]})}function he(e){var n,t=e.snackBar,o=e.handleDelete,i=e.memoryShareCallback,c=e.memoryUnShareCallback,s=e.handleEditClick,l=e.memoryID,d=(0,a.useState)(null),m=(0,r.Z)(d,2),h=m[0],p=m[1],f=(0,a.useState)(null),x=(0,r.Z)(f,2),Z=x[0],y=x[1],v=Boolean(h),b=function(){return p(null)};"delete"===Z&&(n=(0,g.jsx)(D,{open:!0,callback:o,closeCallback:function(){return y(null)}})),"share"===Z&&(n=(0,g.jsx)(me,{confirm:!0,memoryShareCallback:i,memoryUnShareCallback:c,closeCallback:function(){return y(null)},memoryID:l}));return(0,g.jsxs)("div",{children:[(0,g.jsx)(u.Z,{onClick:function(e){return p(e.currentTarget)}}),(0,g.jsxs)(U.Z,{id:"memory-actions",anchorEl:h,open:v,onClose:b,MenuListProps:{"aria-labelledby":"basic-button"},sx:{borderRadius:"10px"},children:[(0,g.jsx)(z.Z,{onClick:function(){s(),b()},children:(0,g.jsx)(M,{})}),(0,g.jsx)(z.Z,{onClick:function(){y("share"),b()},children:(0,g.jsx)(de,{})}),(0,g.jsx)(z.Z,{onClick:function(){y("delete"),b()},children:(0,g.jsx)(P,{})})]}),n,t]})}function pe(e){var n,t=e.header,p=e.subheader,f=e.photoLayout,x=e.storyLayout,Z=e.bucket,y=e.memoryID,v=e.authURL,b=e.handleEditClick,j=e.preview,k=(0,a.useState)(null),w=(0,r.Z)(k,2),S=w[0],C=w[1],P=(0,a.useState)(null),D=(0,r.Z)(P,2),U=D[0],z=D[1],T=(0,a.useState)(null),M=(0,r.Z)(T,2),I=M[0],R=M[1],L=(0,a.useState)(null),O=(0,r.Z)(L,2),A=O[0],_=O[1],H=(0,d.Z)();n=(0,m.Z)(H.breakpoints.down("lg"))?"":"vertical-scroll";var B=function(e,n){z(e),R(n)},F=function(e){"ok"===e.status?B("Memory deleted successfully",!1):B("Error while deleting memory",!0),C(!0),_(!0)},N=(0,g.jsx)(h.Z,{snackBarOpen:S,message:U,onClose:function(){C(!1),z(null),R(null)},error:I}),W=j?(0,g.jsx)(u.Z,{}):(0,g.jsx)(he,{snackBar:N,handleDelete:function(){!function(e,n,t,r){E.apply(this,arguments)}(Z,v,y,F)},memoryID:y,memoryShareCallback:function(e){console.log(e),!0===e.ok?B("Memory shared successfully",!1):B("Error while sharing memory",!0),C(!0)},memoryUnShareCallback:function(e){console.log(e),!0===e.ok?B("Memory unshared successfully",!1):B("Error while unsharing memory",!0),C(!0)},handleEditClick:b});return!1===S&&!0===A?(0,g.jsx)(o.Fg,{to:"/memories",replace:!0}):(0,g.jsxs)(i.Z,{sx:{boxShadow:0,bgcolor:"button.main",p:1},children:[(0,g.jsx)(c.Z,{title:t,subheader:p,action:W}),(0,g.jsx)(l.Z,{}),(0,g.jsxs)(s.Z,{sx:{display:"flex",justifyContent:"flex-start",flexDirection:{lg:"row",xs:"column"},height:{lg:"72vh"},my:1},children:[(0,g.jsx)(s.Z,{sx:{width:{lg:"70%",xs:"100%"},overflowY:"scroll",borderRadius:5},className:n,children:f}),(0,g.jsx)(s.Z,{sx:{width:{lg:"30%",sx:"100%"},overflowY:"scroll",mt:{lg:0,xs:2},p:{lg:1},px:1},className:n,children:x})]})]})}},8003:function(e,n,t){t.d(n,{Z:function(){return me}});var r=t(7762),a=t(4165),o=t(5861),i=t(9439),c=t(2791),s=t(7689),u=t(6151),l=t(533),d=t(1428),m=t(7394),h=t(890),p=t(3767),f=t(5574),x=t(7621),g=t(9585),Z=t(9504),y=t(4721),v=t(4554),b=t(1133),j=t(5397),k=t(3400),w=t(487),S=t(1065),C=t(8894),P=t(184),D=(0,C.yP)((0,C.bH)((0,C.p6)(S.ZP)));function E(e){var n=e.ind,t=e.images,r=e.handleNext,a=e.handleStepChange,o=(0,c.useState)(n),s=(0,i.Z)(o,2),u=s[0],l=s[1],d=(0,c.useState)(0),m=(0,i.Z)(d,2),h=m[0],p=m[1],f=(0,c.useState)(null),x=(0,i.Z)(f,2),g=x[0],Z=x[1];(0,c.useEffect)((function(){l(n)}),[n]),(0,c.useEffect)((function(){h<t.length?Z("none"):Z("flex")}),[h]);var y=function(){return p((function(e){return e+1}))};return(0,P.jsx)(D,{index:u,onChangeIndex:a,enableMouseEvents:!0,animateTransitions:!0,interval:1e4,onClick:r,style:{backgroundColor:"muted.main"},slideRenderer:function(e){var n=e.index,r=e.key,a=function(e,n){var t=e%n;return t<0?t+n:t}(n,t.length),o=(t[a].images?t[a].images.map((function(e){var n=e.src,t=e.width;return"".concat(n," ").concat(t,"w")})):[]).join(",");return(0,P.jsx)(v.Z,{component:"img",onLoad:y,sx:{display:{display:g},justifyContents:"center",width:"100%",bgcolor:"#1c1c1c"},src:t[a].src,srcSet:o,style:{display:"block",boxSizing:"content-box",cursor:"pointer",objectFit:"contain",height:"100vh"},alt:t[a].src},r)}})}function U(e){var n=e.handleClick;return(0,P.jsx)(k.Z,{edge:"start",color:"primary","aria-label":"close",onClick:n,sx:{position:"absolute",top:"50%",right:0,transform:"translate(0%, -50%)"},children:(0,P.jsx)(j.Z,{sx:{color:"button.main",fontSize:"4.5rem"}})})}function z(e){var n=e.handleClick;return(0,P.jsx)(k.Z,{edge:"start",color:"primary","aria-label":"close",onClick:n,sx:{position:"absolute",top:"50%",left:0,transform:"translate(0%, -50%)"},children:(0,P.jsx)(b.Z,{sx:{color:"button.main",fontSize:"4.5rem"}})})}function T(e){var n=e.open,t=e.title,r=e.date,a=e.images,o=e.index,i=e.handleNext,c=e.handleBack,s=e.handleClose,u=e.handleChange;return(0,P.jsxs)(f.Z,{open:n,fullScreen:!0,children:[(0,P.jsx)(E,{images:a,ind:o,handleNext:i,handleStepChange:u}),(0,P.jsx)(g.Z,{title:t,subheader:r,sx:{position:"absolute",top:10,left:10,bgcolor:"button.main",borderRadius:3,padding:1}}),(0,P.jsx)(z,{handleClick:c}),(0,P.jsx)(U,{handleClick:i}),(0,P.jsx)(w.Z,{size:"large",handleClick:s})]})}E.defaultProps={ind:0},T.defaultProps={index:0};var M=t(6926),I=t(9218),R=t(9906),L=t(5130),O=t(1286),A=t(2168);function _(e){var n=e.editable,t=e.text,r=e.handleTitleUpdate,a=(0,A.Z)(t),o=(0,i.Z)(a,3),s=o[0],u=o[1],l=o[2],d=(0,c.useState)(n),m=(0,i.Z)(d,2),f=m[0],x=m[1],g=(0,c.useState)(!1),Z=(0,i.Z)(g,2),y=Z[0],v=Z[1];return(0,c.useEffect)((function(){x(n),u(t),v(!1)}),[n]),f||y?f&&!y?(0,P.jsxs)(p.Z,{direction:"row",sx:{alignItems:"center"},spacing:2,children:[(0,P.jsx)(h.Z,{variant:"h6",children:s}),(0,P.jsx)(O.Z,{fontSize:"medium",onClick:function(){return v(!0)}})]}):f&&y?(0,P.jsxs)(p.Z,{direction:"row",sx:{alignItems:"flex-end",justifyContent:"flex-start"},spacing:2,children:[(0,P.jsx)(I.Z,{id:"standard-basic",size:"small",label:"Title",onChange:l,variant:"standard",defaultValue:s,sx:{maxWidth:"200px"}}),(0,P.jsx)(R.Z,{fontSize:"medium",onClick:function(){r(s),v(!1)}}),(0,P.jsx)(L.Z,{fontSize:"medium",onClick:function(){u(t),v(!1)}})]}):void 0:(0,P.jsx)(h.Z,{variant:"h6",children:s})}var H=t(1413),B=t(8239),F=t(6571),N=t(41),W=t(4125);function K(e){var n=e.editable,t=e.prevDate,r=e.handleDateUpdate,a=(0,c.useState)(n),o=(0,i.Z)(a,2),s=o[0],u=o[1],l=(0,c.useState)(!1),d=(0,i.Z)(l,2),m=d[0],f=d[1],x=(0,W.Z)(t),g=(0,i.Z)(x,3),Z=g[0],y=g[1],v=g[2];return(0,c.useEffect)((function(){u(n),y(t),f(!1)}),[n,t]),s||m?s&&!m?(0,P.jsxs)(p.Z,{direction:"row",sx:{alignItems:"center"},spacing:2,children:[(0,P.jsx)(h.Z,{children:Z}),(0,P.jsx)(O.Z,{fontSize:"medium",onClick:function(){return f(!0)}})]}):s&&m?(0,P.jsxs)(p.Z,{direction:"row",sx:{alignItems:"flex-end",justifyContent:"flex-start",mt:3},spacing:2,children:[(0,P.jsx)(F._,{dateAdapter:N.H,children:(0,P.jsx)(B.M,{label:"Memory Date",value:Z,onChange:v,placeholder:"dd/MM/yyyy",inputFormat:"dd/MM/yyyy",maxDate:new Date,renderInput:function(e){return(0,P.jsx)(I.Z,(0,H.Z)({readOnly:!0,required:!0},e))}})}),(0,P.jsx)(R.Z,{fontSize:"medium",onClick:function(){r(Z),f(!1)}}),(0,P.jsx)(L.Z,{fontSize:"medium",onClick:function(){y(t),f(!1)}})]}):void 0:(0,P.jsx)(h.Z,{children:Z})}var Y=t(1747),J=t(1619);function q(e){var n=e.editable,t=e.prevStory,r=e.handleStoryUpdate,a=(0,c.useState)(n),o=(0,i.Z)(a,2),s=o[0],u=o[1],l=(0,c.useState)(!1),d=(0,i.Z)(l,2),m=d[0],f=d[1],x=(0,J.Z)(t),g=(0,i.Z)(x,3),Z=g[0],b=g[1],j=g[2],k=(0,c.useRef)();return(0,c.useEffect)((function(){u(n),b(t),f(!1)}),[n,t]),s||m?s&&!m?(0,P.jsxs)(p.Z,{direction:"column",spacing:2,children:[(0,P.jsxs)(p.Z,{direction:"row",spacing:2,justifyContent:"flex-end",children:[(0,P.jsx)(h.Z,{sx:{color:"muted.main"},children:"Edit Story"}),(0,P.jsx)(O.Z,{fontSize:"medium",onClick:function(){f(!0)}})]}),(0,P.jsx)(y.Z,{sx:{width:1}}),(0,P.jsx)(h.Z,{style:{whiteSpace:"pre-wrap"},children:Z})]}):s&&m?(0,P.jsxs)(p.Z,{direction:"column",spacing:2,children:[(0,P.jsxs)(p.Z,{direction:"row",spacing:2,justifyContent:"flex-end",children:[(0,P.jsx)(h.Z,{sx:{color:"muted.main"},children:"Editing Story"}),(0,P.jsx)(R.Z,{fontSize:"medium",onClick:function(){r(Z),f(!1)}}),(0,P.jsx)(L.Z,{fontSize:"medium",onClick:function(){b(t),f(!1)}})]}),(0,P.jsx)(y.Z,{sx:{width:1}}),(0,P.jsx)(v.Z,{sx:{p:2,m:1,my:2,border:1,borderColor:"primary.main",bgcolor:"input.background",minHeight:"70vh",borderRadius:5,width:"90%"},onClick:function(){return k.current.focus()},children:(0,P.jsx)(Y.Z,{autoFocus:!0,"aria-label":"minimum height",placeholder:"Tell your story...",value:Z,onChange:j,style:{width:"100%",minHeight:"184px",maxHeight:"70vh",boxSizing:"border-box",paddingTop:"5px",border:0,overflow:"auto",outline:"none",resize:"vertical",borderRadius:5,"&:focus":{border:0}},ref:k})})]}):void 0:(0,P.jsx)(h.Z,{style:{whiteSpace:"pre-wrap"},children:Z})}var G=t(5987),X=t(5684),V=t(9055),Q=t(5523),$=t(7247),ee=t(2913),ne=t(9823),te=t(2065),re=["alt","style"],ae=["alt","style"];function oe(e){var n=e.children,t=e.onClick,r=e.name,a=e.updateOp;return(0,P.jsx)(u.Z,{id:r,variant:"contained",component:"label",onClick:t,sx:{color:a===r?"button.main":"muted.main",borderRadius:5,backgroundColor:a===r?"primary.main":"button.main",padding:"6px 8px","&:hover":{color:a===r?"button.main":"muted.main",backgroundColor:a===r?"primary.main":"button.main"}},children:n})}function ie(e){var n=e.handleChange,t=e.onClick,r=e.updateOp;return(0,P.jsxs)(oe,{onClick:t,name:"add",updateOp:r,children:[(0,P.jsx)("input",{type:"file",hidden:!0,multiple:!0,accept:"image/*",onChange:n}),(0,P.jsx)(ee.Z,{sx:{fontSize:"1.5rem"}}),"Add"]})}function ce(e){var n=e.images,t=e.handlePhotoClick,r=e.renderPhoto,a=(0,c.useState)(null),o=(0,i.Z)(a,2),s=o[0],u=o[1];return(0,c.useEffect)((function(){var e=0,t=0;n.forEach((function(n){n.height>n.width?t+=1:e+=1})),u(e>t?"rows":"columns")}),[n]),r?(0,P.jsx)(X.Z,{layout:s,photos:n,onClick:t,spacing:2,renderPhoto:r}):(0,P.jsx)(X.Z,{layout:s,photos:n,onClick:t,spacing:2})}function se(e){var n=e.editable,t=e.images,r=e.handlePhotoClick,a=e.handleThumbnailUpdate,o=e.deleteImage,s=e.addImage,l=(0,c.useState)(n),d=(0,i.Z)(l,2),m=d[0],f=d[1],x=(0,c.useState)(null),g=(0,i.Z)(x,2),Z=g[0],y=g[1],v=(0,c.useState)(null),b=(0,i.Z)(v,2),j=b[0],w=b[1],S=function(e){y(Z===e?null:e)};(0,c.useEffect)((function(){f(n),y(null)}),[n]);var C=(0,P.jsxs)(p.Z,{direction:"row",spacing:2,children:[(0,P.jsx)(ie,{handleChange:s,onClick:function(){return S("add")},updateOp:Z}),(0,P.jsxs)(oe,{onClick:function(){return S("delete")},name:"delete",updateOp:Z,children:[(0,P.jsx)($.Z,{sx:{fontSize:"1.5rem"}}),"Delete"]}),(0,P.jsx)(oe,{onClick:function(){return S("thumbnail")},name:"thumbnail",updateOp:Z,children:"Set Thumbnail"})]}),D=(0,P.jsx)(p.Z,{direction:"row",children:(0,P.jsxs)(h.Z,{variant:"h6",color:"muted.main",children:["Images:",t.length]})});return m?m&&"delete"===Z?(0,P.jsxs)(p.Z,{direction:"column",spacing:2,sx:{p:2},children:[D,C,(0,P.jsx)(ce,{images:t,handlePhotoClick:r,renderPhoto:function(e){var n=e.layout,r=e.imageProps,a=r.alt,i=r.style,c=(0,G.Z)(r,re);return(0,P.jsxs)(u.Z,{component:"div",children:[(0,P.jsx)("img",(0,H.Z)({alt:a,style:(0,H.Z)((0,H.Z)({},i),{},{width:n.width,padding:0})},c)),(0,P.jsx)(k.Z,{size:"medium",sx:{color:"black",bgcolor:(0,te.Fq)("#fff",.4),position:"absolute",top:10,right:12},onClick:function(){return function(e){var n=t.find((function(n){return n.alt===e}));o(n)}(a)},children:(0,P.jsx)(ne.Z,{size:"medium"})})]})}})]}):m&&"thumbnail"===Z?(0,P.jsxs)(p.Z,{direction:"column",spacing:2,sx:{p:2},children:[D,C,(0,P.jsx)(ce,{images:t,handlePhotoClick:r,renderPhoto:function(e){var n=e.layout,r=e.imageProps,o=r.alt,i=r.style,c=(0,G.Z)(r,ae);return(0,P.jsxs)(u.Z,{component:"div",children:[(0,P.jsx)("img",(0,H.Z)({alt:o,style:(0,H.Z)((0,H.Z)({},i),{},{width:n.width,padding:0})},c)),(0,P.jsx)(Q.Z,{control:(0,P.jsx)(V.Z,{}),label:"",checked:o===j,onChange:function(){return function(e){w(e);var n=t.find((function(n){return n.alt===e}));a(n)}(o)},sx:{pr:1,position:"absolute",bgcolor:(0,te.Fq)("#fff",.6),color:"black",borderRadius:"0px 5px 5px 0px",borderColor:"secondary.main",borderLeft:0,bottom:20,left:15}})]})}})]}):m&&"add"===Z||m&&!Z?(0,P.jsxs)(p.Z,{direction:"column",spacing:2,sx:{p:2},children:[D,C,(0,P.jsx)(ce,{images:t,handlePhotoClick:r})]}):void 0:(0,P.jsx)(ce,{images:t,handlePhotoClick:r})}ce.defaultProps={renderPhoto:null},oe.defaultProps={onClick:function(){}};var ue=t(5899),le=t(4700);function de(e){return!1===e.preview?(0,P.jsx)(p.Z,{direction:"row",justifyContent:"flex-start",sx:{backgroundColor:"button.main",paddingX:2,paddingY:1},children:(0,P.jsx)(l.Z,{href:"/",underline:"none",children:(0,P.jsxs)(u.Z,{variant:"contained",component:"label",sx:{color:"primary.main",backgroundColor:"button.main",padding:"6px 8px",boxShadow:0,"&:hover":{backgroundColor:"button.main"}},children:[(0,P.jsx)(m.Z,{size:"medium",sx:{paddingRight:1}}),(0,P.jsx)(h.Z,{variant:"body1",color:"muted.main",children:"Memories"})]})})}):null}function me(e){var n=e.memTitle,t=e.memDate,l=e.memStory,m=e.memImages,b=e.bucket,j=e.memoryID,k=e.authURL,w=e.preview,S=(0,c.useState)(!1),C=(0,i.Z)(S,2),D=C[0],E=C[1],U=(0,c.useState)(!1),z=(0,i.Z)(U,2),I=z[0],R=z[1],L=(0,c.useState)(0),O=(0,i.Z)(L,2),A=O[0],H=O[1],B=(0,c.useState)(n),F=(0,i.Z)(B,2),N=F[0],W=F[1],Y=(0,c.useState)(t),J=(0,i.Z)(Y,2),G=J[0],X=J[1],V=(0,c.useState)(l),Q=(0,i.Z)(V,2),$=Q[0],ee=Q[1],ne=(0,c.useState)(m),te=(0,i.Z)(ne,2),re=te[0],ae=te[1],oe=(0,c.useState)(null),ie=(0,i.Z)(oe,2),ce=ie[0],me=ie[1],he=(0,c.useState)(null),pe=(0,i.Z)(he,2),fe=pe[0],xe=pe[1],ge=(0,c.useState)([]),Ze=(0,i.Z)(ge,2),ye=Ze[0],ve=Ze[1],be=(0,c.useState)(null),je=(0,i.Z)(be,2),ke=je[0],we=je[1],Se=(0,c.useState)([]),Ce=(0,i.Z)(Se,2),Pe=Ce[0],De=Ce[1],Ee=(0,c.useState)(!1),Ue=(0,i.Z)(Ee,2),ze=Ue[0],Te=Ue[1],Me=(0,c.useState)(null),Ie=(0,i.Z)(Me,2),Re=Ie[0],Le=Ie[1],Oe=(0,c.useState)(null),Ae=(0,i.Z)(Oe,2),_e=Ae[0],He=Ae[1],Be=(0,c.useState)(null),Fe=(0,i.Z)(Be,2),Ne=Fe[0],We=Fe[1],Ke=(0,c.useState)(!1),Ye=(0,i.Z)(Ke,2),Je=Ye[0],qe=Ye[1],Ge=re.length;(0,c.useEffect)((function(){return W(n)}),[n]),(0,c.useEffect)((function(){return X(t)}),[t]),(0,c.useEffect)((function(){return ee(l)}),[l]),(0,c.useEffect)((function(){return ae(m)}),[m]);var Xe=function(e,n){xe(e),We(n)},Ve=function(e,n,t){401===e.status?Xe("You have been logged out. Please login to continue.",!0):403===e.status?Xe("You do not have permissions to do this operation.",!0):Xe("Unknown error occured while ".concat(n),!0),t(e.status)},Qe=function(e){me(!0),qe(e)},$e=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(n,t){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ue.Z.updateMemoryDetails(b,k,j,n,t);case 3:return(r=e.sent).ok?Xe("Memory ".concat(n," updated successfully"),!1):Ve(r,"updating ".concat(n),Qe),me(!0),e.abrupt("return",r);case 9:return e.prev=9,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(n,t){return e.apply(this,arguments)}}(),en=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(n){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ue.Z.updateMemoryImage(b,k,j,"thumbnail",n);case 3:return(t=e.sent).ok?(Xe("Thumbnail updated successfully",!1),me(!0)):Ve(t,"updating thumbnail",Qe),e.abrupt("return",t);case 8:return e.prev=8,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(n){return e.apply(this,arguments)}}(),nn=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(n){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(re.length>1)){e.next=8;break}return e.next=4,ue.Z.updateMemoryImage(b,k,j,"delete",n);case 4:(t=e.sent).ok?(Xe("Memory image deleted successfully",!1),ae(re.filter((function(e){return e.title!==n.title})))):Ve(t,"deleting image",Qe),e.next=9;break;case 8:Xe("Atleast 1 image is needed for memory. Unable to delete",!0);case 9:return me(!0),e.abrupt("return",t);case 13:return e.prev=13,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(n){return e.apply(this,arguments)}}(),tn=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(n){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ue.Z.updateMemoryImage(b,k,j,"add",n);case 3:return t=e.sent,e.abrupt("return",t);case 7:return e.prev=7,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n){return e.apply(this,arguments)}}(),rn=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var n,t,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=(0,r.Z)(ye.entries()),e.prev=1,o=(0,a.Z)().mark((function e(){var n,r,o,c,s,u,l,d,m,h;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,i.Z)(t.value,2),r=n[0],o=n[1],c=(0,i.Z)(o,3),s=c[0],u=c[1],l=c[2],e.next=4,tn(s).then((function(e){return e.ok?e.text():(Ve(e,"adding image",Qe),"")}));case 4:return d=e.sent,m={key:"memories/".concat(j,"/images/").concat(s.name),src:l,alt:s.name,title:s.name,width:s.width,height:s.height,images:[]},e.next=8,fetch(d,{body:u,method:"PUT"});case 8:(h=e.sent).ok?(Le("Images uploaded: ".concat(r+1," / ").concat(ke," ")),ae((function(e){return e.concat([m])}))):(He("Error while uploading memory image"),De((function(e){return e.concat([s.name])})),Ve(h,"deleting image",Qe));case 10:case"end":return e.stop()}}),e)})),n.s();case 4:if((t=n.n()).done){e.next=8;break}return e.delegateYield(o(),"t0",6);case 6:e.next=4;break;case 8:e.next=13;break;case 10:e.prev=10,e.t1=e.catch(1),n.e(e.t1);case 13:return e.prev=13,n.f(),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,10,13,16]])})));return function(){return e.apply(this,arguments)}}();(0,c.useEffect)((0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ye.length>0&&(Te(!0),Le("Preparing images for upload....")),ye.length!==ke){e.next=9;break}return e.next=4,rn();case 4:Pe.length>0?He("Error while uploading ".concat(Pe.length," images")):He("".concat(ye.length," image(s) uploaded successfully")),De([]),we(null),ve([]),setTimeout((function(){Te(!1),He(null),Le(null)}),3e3);case 9:case"end":return e.stop()}}),e)}))),[ye]);var an=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(n){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.target.files&&(t=Array.from(n.target.files),we(t.length),re.length+t.length<=15?(t.forEach((function(e){var n=new Image;n.onload=function(){var n=(0,o.Z)((0,a.Z)().mark((function n(t){var r,o,i,c,s,u,l,d;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=t.target.naturalHeight,o=t.target.naturalWidth,i=e.size/1048576,c=e.name,s=[500,1e3,1500].map((function(e){return{height:e,width:Math.ceil(e*o/r)}})),u=Date.now(),l="".concat(u,"-").concat(c),d=[{name:l,size:i,height:r,width:o,images:s},e,t.target.src],ve((function(e){return e.concat([d])}));case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),n.src=URL.createObjectURL(e)})),t.map((function(e){return URL.revokeObjectURL(e)}))):(Xe("Unable to add ".concat(t.length," images. Maximum images allowed per memory is 15"),!0),me(!0)));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),on=(0,P.jsx)(_,{editable:I,text:N,handleTitleUpdate:function(e){$e("title",e)&&W(e)}}),cn=(0,P.jsx)(K,{editable:I,prevDate:G,handleDateUpdate:function(e){$e("date",e)&&X(e)}}),sn=(0,P.jsx)(q,{editable:I,prevStory:$,handleStoryUpdate:function(e){$e("story",e)&&ee(e)}}),un=(0,P.jsx)(se,{editable:I,images:re,handlePhotoClick:function(e,n,t){E(!0),H(t)},handleThumbnailUpdate:en,deleteImage:nn,addImage:an}),ln=(0,P.jsxs)(u.Z,{variant:"contained",component:"label",onClick:function(){return R(!1)},sx:{color:"primary.main",borderRadius:5,backgroundColor:"button.main",padding:"6px 8px"},children:[(0,P.jsx)(d.Z,{size:"medium",sx:{paddingRight:1}}),(0,P.jsx)(h.Z,{variant:"body1",color:"muted.main",children:"Edit"})]});return 401===Je&&!1===ce?(0,P.jsx)(s.Fg,{to:"/login"}):(0,P.jsxs)(P.Fragment,{children:[I?(0,P.jsx)(p.Z,{direction:"row",justifyContent:"flex-start",sx:{backgroundColor:"button.main",paddingX:2,paddingY:1},children:ln}):(0,P.jsx)(de,{preview:w}),(0,P.jsx)(v.Z,{component:"div",sx:{backgroundColor:"button.main",margin:I?"5px":0},children:(0,P.jsx)(M.Z,{header:on,subheader:cn,photoLayout:un,storyLayout:sn,memoryID:j,bucket:b,authURL:k,handleEditClick:function(){return R(!0)},preview:w})}),(0,P.jsx)(T,{open:D,title:N,date:G,images:re,index:A,handleNext:function(){H((function(e){return(e+1)%Ge}))},handleBack:function(){H((function(e){return(e-1+Ge)%Ge}))},handleClose:function(){return E(!1)},handleChange:function(e){return H(e)}}),(0,P.jsx)(le.Z,{snackBarOpen:ce,message:fe,onClose:function(){me(!1),xe(null),We(null)},error:Ne}),(0,P.jsx)(f.Z,{open:ze,fullWidth:!0,sx:{p:1},children:(0,P.jsxs)(x.Z,{sx:{maxWidth:1,p:1},children:[(0,P.jsx)(g.Z,{title:"Adding Images",sx:{textAlign:"center"}}),(0,P.jsx)(y.Z,{}),(0,P.jsxs)(Z.Z,{children:[(0,P.jsx)(h.Z,{variant:"h6",sx:{color:"muted.main"},children:Re}),(0,P.jsx)(p.Z,{justifyContent:"center",sx:{py:2},children:(0,P.jsx)(h.Z,{variant:"h5",children:_e})})]})]})})]})}me.defaultProps={memTitle:"Memory Title",memDate:"Memory Date",memStory:"Memory Text"}}}]);
//# sourceMappingURL=3.a7695f11.chunk.js.map