"use strict";(self.webpackChunkprelaunch=self.webpackChunkprelaunch||[]).push([[841],{19482:(e,t,r)=>{r.d(t,{Z:()=>h});var n=r(16957),a=r(93405),i=r(54641),s=r(61113),o=r(66212),l=r(56746),c=r(46417);function d(e){let{imageSrc:t,imageSrcSet:r,title:a,handleImageLoad:i}=e;return(0,c.jsx)(n.Z,{component:"img",src:t,srcSet:r,alt:a,sx:{textAlign:"center",objectFit:"cover",height:{lg:350,md:300,xs:250}},onLoad:i})}function u(e){let{title:t,date:r,avatar:n,shared:l}=e;return(0,c.jsx)(a.Z,{children:(0,c.jsx)(i.Z,{disableTypography:!0,avatar:n,title:(0,c.jsxs)(s.Z,{noWrap:!0,sx:{overflow:"hidden",textOverflow:"ellipsis",width:{xs:"calc(75%)",sm:"calc(100%)"},fontWeight:600},children:[t,""!==l?(0,c.jsxs)(c.Fragment,{children:[" ",(0,c.jsx)(o.Z,{label:l,size:"small",variant:"filled",color:"Shared"===l?"success":"default",sx:{height:"auto"}})]}):null]}),subheader:(0,c.jsx)(s.Z,{sx:{color:"muted.main"},children:r}),sx:{padding:0,color:"faded.black"}})})}function h(e){let{title:t,date:r,avatar:n,shared:a,thumbnailImage:i,thumbnailImageSrcSet:s,handleClick:o,handleImageLoad:h}=e;return(0,c.jsxs)(l.Z,{handleClick:o,children:[(0,c.jsx)(d,{imageSrc:i,imageSrcSet:s,title:t,handleImageLoad:h}),(0,c.jsx)(u,{title:t,date:r,avatar:n,shared:a})]})}u.defaultProps={title:"Memory Thumbnail Image",date:"",avatar:"",shared:""},d.defaultProps={title:"Memory Thumbnail Image",imageSrc:"",imageSrcSet:"",handleImageLoad:()=>{}},h.defaultProps={thumbnailImageSrcSet:"",handleImageLoad:()=>{},avatar:"",shared:""}},56746:(e,t,r)=>{r.d(t,{Z:()=>s});var n=r(73428),a=r(44183),i=r(46417);function s(e){let{handleClick:t,children:r}=e;return(0,i.jsx)(a.Z,{onClick:t,children:(0,i.jsx)(n.Z,{elevation:2,sx:{bgcolor:"#fff",borderRadius:5,color:"black",position:"relative",height:{lg:430,md:380,xs:330},"&:hover":{border:3,borderColor:"secondary.main",elevation:0}},children:r})})}},27681:(e,t,r)=>{r.r(t),r.d(t,{default:()=>Xe});var n=r(47313),a=r(41806),i=r(19536),s=r(43960),o=r(55719),l=r(61113),c=r(46417);function d(e){let{mode:t,handleModeChange:r,modes:n}=e;return(0,c.jsx)(i.Z,{children:(0,c.jsx)(a.Z,{sx:{display:"flex",justifyContent:"center",p:2},children:(0,c.jsx)(o.Z,{exclusive:!0,value:t,"aria-label":"view-change",color:"primary",sx:{bgcolor:"button.main"},children:n.map((e=>(0,c.jsx)(s.Z,{value:e,onClick:()=>r("".concat(e)),sx:{border:2,borderColor:"primary.main"},children:(0,c.jsx)(l.Z,{variant:"h6",children:e})},e)))})})})}var u=r(58467),h=r(9019),m=r(21917),x=r(78490),g=r(80315);function f(e){let{titles:t,activeStep:r,handleClick:n}=e;return(0,c.jsx)(m.Z,{activeStep:r,alternativeLabel:!0,sx:{py:4},children:t.map(((e,t)=>(0,c.jsx)(x.Z,{onClick:n(t),children:(0,c.jsx)(g.Z,{children:e})},e)))})}var p=r(38344);const b=async(e,t,r,n,a,i)=>{n(0),i("Initializing memory",!1);const s=await async function(e,t,r){const n=JSON.stringify(r),a=await p.Z.validateDetails(e,t,n);return"error"!==a.status&&!0===a.Valid}(e,t,r);let o;return!0===s?(o=await async function(e,t,r){const n=JSON.stringify(r),a=["memories",r.key,"details.json"].join("/"),i=await p.Z.upload(e,t,a,n);return i&&!0===i.ok}(e,t,r),a("Initializing Memory",o),n(10)):a("Initializing Memory","failed"),s},j=async(e,t,r,n,a,i,s,o)=>{const l=await function(e,t,r,n,a,i,s){const o=a.map(((e,t)=>{const n=i[t];return{Key:["memories",r,"images",e.name].join("/"),Body:n,ContentType:n.type}})),l=p.Z.uploadMultipleImages(e,t,o,s);return Promise.allSettled(l)}(e,t,r,0,a,i,s);for(let c=0;c<l.length;c+=1)if("rejected"===l[c].status||!0!==l[c].value.ok)return!1;return o(95),!0},v=async(e,t,r,n,a,i,s,o)=>{let l;if(!0===await b(e,t,r,n,a,i)){if(l=await j(e,t,r.key,r.title,r.imageDetails,s,o,n),!0===l){const n=await p.Z.finalizeMemory(e,t,r.key);return parseInt(n.MemoryID,10)===r.key}a("Uploading Original Images","failed")}return!1};var Z=r(10195),y=r(14874),C=r(1413);var S=r(29349);var w=r(19482),k=r(12862),P=r(54641);function I(e){let{title:t}=e;return(0,c.jsx)(P.Z,{title:t,sx:{border:0,borderColor:"primary.main",textAlign:"center",width:1,mb:1,bgcolor:"button.main",p:0,py:2,borderRadius:2}})}var M=r(16783),L=r(4397),F=r(43394),T=r(83077),D=r(3463),R=r(31095);function z(e){let{label:t,handleClick:r,disabled:n}=e;return(0,c.jsx)(R.Z,{onClick:r,disabled:n,sx:{m:2,border:2,borderColor:n?"muted.main":"ternary.main",borderRadius:5,bgcolor:"input.background"},children:t})}function N(e){let{handleNext:t,handlePrevious:r,isLast:n,isFirst:i}=e;return(0,c.jsxs)(a.Z,{sx:{display:"flex",flexDirection:"row",pt:2,width:1,justifyContent:"space-evenly"},children:[i?(0,c.jsx)(z,{disabled:!0,handleClick:()=>{},label:"Back"}):(0,c.jsx)(z,{handleClick:r,label:"Back"}),n?(0,c.jsx)(z,{handleClick:t,label:"Create Memory"}):(0,c.jsx)(z,{handleClick:t,label:"Next"})]})}function q(e){let{children:t}=e;return(0,c.jsx)(a.Z,{component:"form",sx:{"& .MuiTextField-root":{m:1,maxWidth:"90%",width:"45ch"},"& .MuiOutlinedInput-root":{backgroundColor:"form.input",borderRadius:5},flexDirection:"column",display:"flex",alignItems:"center",width:"auto",pt:2},autoComplete:"true",children:t})}z.defaultProps={disabled:!1};var B=r(31798);function E(e){let{title:t,date:r,handleTitleChange:a,handleDateChange:i,handleNext:s,handlePrevious:o,isLast:l,isFirst:d,activeStep:u}=e;const[h,m]=(0,n.useState)(""),[x,g]=(0,n.useState)(""),[f,p]=(0,n.useState)(!1),[b,j]=(0,n.useState)(!1),v=D.Ry({title:D.Z_().required("Memory Title is required").max(40,"Maximum length of memory title is 40")}).required(),Z=D.Ry({date:D.hT("Enter date by clicking calendar icon on the right end of date picker").required("Memory Date is required").nullable()}).required();(0,n.useEffect)((()=>{f&&B.ZP.isFieldValid("title",t,m,v),b&&B.ZP.isFieldValid("date",r,g,Z)}),[t,r]);const y=async e=>{await(async()=>{const e=await B.ZP.isFieldValid("title",t,m,v),n=await B.ZP.isFieldValid("date",r,g,Z);return e&&n})()&&e()};return(0,c.jsxs)(q,{children:[(0,c.jsx)(M.Z,{required:!0,onChange:e=>{p(!0),a(e)},id:"outlined-required",label:"Memory Name",defaultValue:t,helperText:h||"E.g. Gogol's 2nd Birthday",error:!!h}),(0,c.jsx)(F._,{dateAdapter:T.H,children:(0,c.jsx)(L.M,{label:"Memory Date",value:r,onChange:e=>{j(!0),i(e)},placeholder:"dd/MM/yyyy",inputFormat:"dd/MM/yyyy",maxDate:new Date,renderInput:e=>(0,c.jsx)(M.Z,(0,C.Z)((0,C.Z)({readOnly:!0,required:!0},e),{},{error:!!x,helperText:x||""}))})}),(0,c.jsx)(N,{activeStep:u,handleNext:()=>y(s),handlePrevious:o,isLast:l,isFirst:d})]})}E.defaultProps={date:""};var O=r(32195),W=r(94469),U=r(73428),A=r(93405);function V(e){let{text:t}=e;return(0,c.jsx)(l.Z,{sx:{color:"error.main"},children:t})}var H=r(81998),_=r(45987),J=r(25035),X=r(23030),G=r(13482),K=r(8743),$=r(39295);const Q=["alt","style","title"];function Y(e){let{imageDetails:t,handleRemoveImage:r,thumbnail:s,handleThumbnailChange:o,handleCaptionChange:d}=e;const[u,h]=(0,n.useState)([]),[m,x]=(0,n.useState)(null),[g,f]=(0,n.useState)(!1),p=()=>t.map(((e,t)=>({alt:t,src:e.url,width:e.width,height:e.height,caption:e.caption||""})));(0,n.useEffect)((()=>h(p)),[t]);return u.length?(0,c.jsxs)(a.Z,{component:"div",sx:{py:2},children:[(0,c.jsx)(i.Z,{}),(0,c.jsx)(l.Z,{sx:{p:2},variant:"h6",align:"center",children:"Selected Images"}),(0,c.jsx)($.Z,{images:u,renderPhoto:e=>{let{layout:t,imageProps:{alt:n,style:a,title:i}}=e,l=(0,_.Z)(e.imageProps,Q);return(0,c.jsxs)(R.Z,{component:"div",sx:{padding:"2px"},children:[(0,c.jsx)("img",(0,C.Z)({alt:n,style:(0,C.Z)((0,C.Z)({},a),{},{width:t.width,padding:0})},l)),t.index!==s?(0,c.jsx)(K.Z,{index:t.index,handleRemoveImage:r}):null,(0,c.jsx)(J.Z,{index:t.index,thumbnail:s,handleThumbnailChange:o}),(0,c.jsx)(G.Z,{handleClick:()=>{return e=t.index,x(e),void f(!0);var e},caption:"caption"in u[t.index]?u[t.index].caption:""})]})}}),null!==m?(0,c.jsx)(X.Z,{imageCaption:"caption"in u[m]?u[m].caption:"",index:m,src:t[m].url,open:g,handleClose:()=>{x(null),f(!1)},handleSubmit:d}):null]}):null}function ee(e){let{imageDetails:t,thumbnail:r,handleSelectedImageChange:a,handleThumbnailChange:s,removeSelectedImage:o,handleNext:d,handlePrevious:u,isLast:m,isFirst:x,handleCaptionChange:g}=e;const[f,p]=(0,n.useState)(""),[b,j]=(0,n.useState)(!1),[v,Z]=(0,n.useState)(0),[y,C]=(0,n.useState)(!1);function S(){let e=!0;return p(""),t.length<1&&(p("Need atleast one image to create a memory"),e=!1),t.length>15&&(p("Maximum Allowed Images per Memory: ".concat(15)),e=!1),e}(0,n.useEffect)((()=>{b&&S()}),[t,b]),(0,n.useEffect)((()=>{v<t.length&&Z(t.length),v>t.length&&C(!0),v===t.length&&C(!1)}),[t,v]);return(0,c.jsxs)(q,{children:[(0,c.jsx)(h.ZP,{item:!0,children:(0,c.jsx)(H.Z,{handleChange:e=>{j(!0),e.target.files&&Z(e.target.files.length+t.length),a(e,S)}})}),(0,c.jsxs)(h.ZP,{item:!0,container:!0,direction:"column",alignItems:"center",children:[(0,c.jsxs)(l.Z,{color:"gray",sx:{marginTop:2},children:["Total Images Selected: ",t.length,"/",15]}),(0,c.jsx)(V,{text:f})]}),(0,c.jsx)(N,{handleNext:()=>{return e=d,void(S()&&e());var e},handlePrevious:u,isLast:m,isFirst:x}),(0,c.jsx)(h.ZP,{item:!0,children:(0,c.jsx)(Y,{imageDetails:t,handleRemoveImage:e=>{Z((e=>e-1)),o(e)},thumbnail:r,handleThumbnailChange:s,handleCaptionChange:g})}),(0,c.jsx)(W.Z,{open:y,fullWidth:!0,sx:{p:1},children:(0,c.jsxs)(U.Z,{sx:{maxWidth:1,p:1},children:[(0,c.jsx)(P.Z,{title:"Adding Images",sx:{textAlign:"center"}}),(0,c.jsx)(i.Z,{}),(0,c.jsxs)(A.Z,{children:[(0,c.jsxs)(l.Z,{variant:"h6",sx:{color:"muted.main"},children:["Total Images Selected:",t.length,"/",15]}),(0,c.jsx)(O.Z,{justifyContent:"center",sx:{py:2},children:(0,c.jsx)(l.Z,{variant:"h5",color:"error",children:f})})]})]})})]})}var te=r(11001);function re(e){let{storyError:t,story:r,handleStoryChange:i}=e;const s=(0,n.useRef)();return(0,n.useEffect)((()=>{s.current.focus()}),[]),(0,c.jsx)(a.Z,{sx:{p:2,m:1,my:2,border:1,borderColor:t?"error.main":"primary.main",bgcolor:"input.background",minHeight:"200px",borderRadius:5},onClick:()=>s.current.focus(),children:(0,c.jsx)(te.u,{autoFocus:!0,"aria-label":"minimum height",placeholder:"Tell your story...",value:r,onChange:i,style:{width:"100%",minHeight:"184px",maxHeight:"70vh",boxSizing:"border-box",paddingTop:"5px",border:0,overflow:"auto",outline:"none",resize:"vertical",borderRadius:5,"&:focus":{border:0}},ref:s})})}function ne(e){let{story:t,handleStoryChange:r,handleNext:i,handlePrevious:s,isLast:o,isFirst:l,progressDialog:d}=e;const u=1e5,[h,m]=(0,n.useState)("");return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(re,{storyError:h,story:t,handleStoryChange:r}),(0,c.jsx)(a.Z,{sx:{p:1,m:1},children:(0,c.jsx)(V,{text:h})}),(0,c.jsx)(N,{handleNext:()=>{return e=i,void(t.length<=u?(m(""),e()):m("Maximum story length is: ".concat(u)));var e},handlePrevious:s,isLast:o,isFirst:l}),d]})}var ae=r(30168),ie=r(63366),se=r(87462),oe=r(2197),le=r(8007),ce=r(30686),de=r(88552),ue=r(58065),he=r(91615),me=r(17592),xe=r(31033),ge=r(14363),fe=r(1167);function pe(e){return(0,fe.ZP)("MuiLinearProgress",e)}(0,ge.Z)("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);var be,je,ve,Ze,ye,Ce;const Se=["className","color","value","valueBuffer","variant"];let we,ke,Pe,Ie,Me,Le;const Fe=(0,ce.F4)(we||(we=be||(be=(0,ae.Z)(["\n  0% {\n    left: -35%;\n    right: 100%;\n  }\n\n  60% {\n    left: 100%;\n    right: -90%;\n  }\n\n  100% {\n    left: 100%;\n    right: -90%;\n  }\n"])))),Te=(0,ce.F4)(ke||(ke=je||(je=(0,ae.Z)(["\n  0% {\n    left: -200%;\n    right: 100%;\n  }\n\n  60% {\n    left: 107%;\n    right: -8%;\n  }\n\n  100% {\n    left: 107%;\n    right: -8%;\n  }\n"])))),De=(0,ce.F4)(Pe||(Pe=ve||(ve=(0,ae.Z)(["\n  0% {\n    opacity: 1;\n    background-position: 0 -23px;\n  }\n\n  60% {\n    opacity: 0;\n    background-position: 0 -23px;\n  }\n\n  100% {\n    opacity: 1;\n    background-position: -200px -23px;\n  }\n"])))),Re=(e,t)=>"inherit"===t?"currentColor":e.vars?e.vars.palette.LinearProgress["".concat(t,"Bg")]:"light"===e.palette.mode?(0,de.$n)(e.palette[t].main,.62):(0,de._j)(e.palette[t].main,.5),ze=(0,me.ZP)("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t["color".concat((0,he.Z)(r.color))],t[r.variant]]}})((e=>{let{ownerState:t,theme:r}=e;return(0,se.Z)({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},backgroundColor:Re(r,t.color)},"inherit"===t.color&&"buffer"!==t.variant&&{backgroundColor:"none","&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}},"buffer"===t.variant&&{backgroundColor:"transparent"},"query"===t.variant&&{transform:"rotate(180deg)"})})),Ne=(0,me.ZP)("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.dashed,t["dashedColor".concat((0,he.Z)(r.color))]]}})((e=>{let{ownerState:t,theme:r}=e;const n=Re(r,t.color);return(0,se.Z)({position:"absolute",marginTop:0,height:"100%",width:"100%"},"inherit"===t.color&&{opacity:.3},{backgroundImage:"radial-gradient(".concat(n," 0%, ").concat(n," 16%, transparent 42%)"),backgroundSize:"10px 10px",backgroundPosition:"0 -23px"})}),(0,ce.iv)(Ie||(Ie=Ze||(Ze=(0,ae.Z)(["\n    animation: "," 3s infinite linear;\n  "]))),De)),qe=(0,me.ZP)("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.bar,t["barColor".concat((0,he.Z)(r.color))],("indeterminate"===r.variant||"query"===r.variant)&&t.bar1Indeterminate,"determinate"===r.variant&&t.bar1Determinate,"buffer"===r.variant&&t.bar1Buffer]}})((e=>{let{ownerState:t,theme:r}=e;return(0,se.Z)({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",backgroundColor:"inherit"===t.color?"currentColor":(r.vars||r).palette[t.color].main},"determinate"===t.variant&&{transition:"transform .".concat(4,"s linear")},"buffer"===t.variant&&{zIndex:1,transition:"transform .".concat(4,"s linear")})}),(e=>{let{ownerState:t}=e;return("indeterminate"===t.variant||"query"===t.variant)&&(0,ce.iv)(Me||(Me=ye||(ye=(0,ae.Z)(["\n      width: auto;\n      animation: "," 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;\n    "]))),Fe)})),Be=(0,me.ZP)("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.bar,t["barColor".concat((0,he.Z)(r.color))],("indeterminate"===r.variant||"query"===r.variant)&&t.bar2Indeterminate,"buffer"===r.variant&&t.bar2Buffer]}})((e=>{let{ownerState:t,theme:r}=e;return(0,se.Z)({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left"},"buffer"!==t.variant&&{backgroundColor:"inherit"===t.color?"currentColor":(r.vars||r).palette[t.color].main},"inherit"===t.color&&{opacity:.3},"buffer"===t.variant&&{backgroundColor:Re(r,t.color),transition:"transform .".concat(4,"s linear")})}),(e=>{let{ownerState:t}=e;return("indeterminate"===t.variant||"query"===t.variant)&&(0,ce.iv)(Le||(Le=Ce||(Ce=(0,ae.Z)(["\n      width: auto;\n      animation: "," 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;\n    "]))),Te)})),Ee=n.forwardRef((function(e,t){const r=(0,xe.i)({props:e,name:"MuiLinearProgress"}),{className:n,color:a="primary",value:i,valueBuffer:s,variant:o="indeterminate"}=r,l=(0,ie.Z)(r,Se),d=(0,se.Z)({},r,{color:a,variant:o}),u=(e=>{const{classes:t,variant:r,color:n}=e,a={root:["root","color".concat((0,he.Z)(n)),r],dashed:["dashed","dashedColor".concat((0,he.Z)(n))],bar1:["bar","barColor".concat((0,he.Z)(n)),("indeterminate"===r||"query"===r)&&"bar1Indeterminate","determinate"===r&&"bar1Determinate","buffer"===r&&"bar1Buffer"],bar2:["bar","buffer"!==r&&"barColor".concat((0,he.Z)(n)),"buffer"===r&&"color".concat((0,he.Z)(n)),("indeterminate"===r||"query"===r)&&"bar2Indeterminate","buffer"===r&&"bar2Buffer"]};return(0,le.Z)(a,pe,t)})(d),h=(0,ue.V)(),m={},x={bar1:{},bar2:{}};if("determinate"===o||"buffer"===o)if(void 0!==i){m["aria-valuenow"]=Math.round(i),m["aria-valuemin"]=0,m["aria-valuemax"]=100;let e=i-100;h&&(e=-e),x.bar1.transform="translateX(".concat(e,"%)")}else 0;if("buffer"===o)if(void 0!==s){let e=(s||0)-100;h&&(e=-e),x.bar2.transform="translateX(".concat(e,"%)")}else 0;return(0,c.jsxs)(ze,(0,se.Z)({className:(0,oe.Z)(u.root,n),ownerState:d,role:"progressbar"},m,{ref:t},l,{children:["buffer"===o?(0,c.jsx)(Ne,{className:u.dashed,ownerState:d}):null,(0,c.jsx)(qe,{className:u.bar1,ownerState:d,style:x.bar1}),"determinate"===o?null:(0,c.jsx)(Be,{className:u.bar2,ownerState:d,style:x.bar2})]}))}));var Oe=r(85281),We=r(37957),Ue=r(59236);function Ae(e){let{value:t}=e;return(0,c.jsxs)(a.Z,{sx:{display:"flex",alignItems:"center",mb:1},children:[(0,c.jsx)(a.Z,{sx:{width:"100%",mr:1},children:(0,c.jsx)(Ee,{variant:"determinate",value:t})}),(0,c.jsx)(a.Z,{sx:{minWidth:35},children:(0,c.jsx)(l.Z,{variant:"body2",color:"text.secondary",children:"".concat(Math.round(t),"%")})})]})}function Ve(e){let t,{message:r,done:n}=e;return t="failed"===n?(0,c.jsx)(l.Z,{color:"error.main",children:"Failed"}):!0===n?(0,c.jsx)(l.Z,{color:"success.main",children:"Done"}):(0,c.jsx)(Oe.Z,{size:30}),(0,c.jsxs)(a.Z,{sx:{display:"flex",alignItems:"space-between"},children:[(0,c.jsx)(a.Z,{sx:{width:"100%",mr:1},children:(0,c.jsx)(l.Z,{children:r})}),(0,c.jsx)(a.Z,{sx:{minWidth:35},children:t})]})}function He(e){let{progress:t,counter:r}=e;return 100===t?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(a.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",m:2},children:[(0,c.jsx)(We.Z,{color:"success",fontSize:"large",sx:{mr:2}}),(0,c.jsx)(l.Z,{variant:"h5",color:"primary.main",children:"Memory Created Successfully"})]}),(0,c.jsxs)(a.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,c.jsx)(a.Z,{children:(0,c.jsx)(l.Z,{children:"Navigating to memories page in "})}),(0,c.jsx)(a.Z,{sx:{mx:1},children:(0,c.jsx)(l.Z,{variant:"h6",color:"success.main",children:r})}),(0,c.jsx)(a.Z,{children:(0,c.jsx)(l.Z,{children:"seconds"})})]})]}):-1===t?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(a.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",m:2},children:[(0,c.jsx)(Ue.Z,{color:"error",fontSize:"large",sx:{mr:2}}),(0,c.jsx)(l.Z,{variant:"h5",color:"primary.main",children:"Memory Creation Failed"})]}),(0,c.jsxs)(a.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,c.jsx)(a.Z,{children:(0,c.jsx)(l.Z,{children:"Navigating to memories page in "})}),(0,c.jsx)(a.Z,{sx:{mx:1},children:(0,c.jsx)(l.Z,{variant:"h6",color:"success.main",children:r})}),(0,c.jsx)(a.Z,{children:(0,c.jsx)(l.Z,{children:"seconds"})})]})]}):null}function _e(e){let{open:t,progress:r,messages:a}=e;const[s,o]=(0,n.useState)(0);return(0,n.useEffect)((()=>{let e;return s>0&&(e=setTimeout((()=>o(s-1)),1e3)),()=>clearTimeout(e)}),[s]),(0,n.useEffect)((()=>{100!==r&&-1!==r||o(3)}),[r]),(0,c.jsx)(W.Z,{open:t,fullWidth:!0,sx:{p:1},children:(0,c.jsxs)(U.Z,{sx:{maxWidth:1,p:1},children:[(0,c.jsx)(P.Z,{title:"Creating Memory",sx:{textAlign:"center"}}),(0,c.jsx)(i.Z,{}),(0,c.jsxs)(A.Z,{children:[(0,c.jsx)(Ae,{value:r>0?r:0}),a.map((e=>(0,c.jsx)(Ve,{message:e.message,done:e.done},e.message))),(0,c.jsx)(He,{progress:r,counter:s})]})]})})}function Je(e){let{mode:t,bucket:r,authURL:s}=e;const o=(0,u.s0)(),l=["Enter memory title and date","Upload Pictures","Write story"],[d,m,x,g,p]=function(e){const[t,r]=(0,n.useState)(0);return[t,()=>{r((t+1)%e)},()=>{r((t-1+e)%e)},t===e-1,0===t]}(l.length),[b,,j]=(0,Z.Z)(""),[P,,M]=(0,y.Z)(""),[L,F,T,D,R,z]=function(){const[e,t]=(0,n.useState)([]),[r,a]=(0,n.useState)([]),[i,s]=(0,n.useState)(0),o=[500,1e3,1500],l=e=>{s(e)};return[e,i,e=>{if(e.target.files){const r=Array.from(e.target.files);r.forEach((e=>{const r=new Image;r.onload=r=>{const n=Date.now(),a="".concat(n,"-").concat(e.name),i=o.map((e=>({height:e,width:Math.ceil(e*r.target.naturalWidth/r.target.naturalHeight)})));t((t=>t.concat([{name:a,size:e.size/1048576,url:r.target.src,height:r.target.naturalHeight,width:r.target.naturalWidth,imageFile:e,images:i}])))},r.src=URL.createObjectURL(e)})),a((e=>e.concat(r))),r.map((e=>URL.revokeObjectURL(e)))}},n=>{t([...e.slice(0,n),...e.slice(n+1)]),a([...r.slice(0,n),...r.slice(n+1)]),n<i?l(i-1):n===i&&l(0)},l,(r,n)=>{t([...e.slice(0,r),(0,C.Z)((0,C.Z)({},e[r]),{},{caption:n}),...e.slice(r+1)])}]}(),[N,,q]=(0,S.Z)(""),[B,O]=(0,n.useState)(!1),[W,U]=(0,n.useState)(0),[A,V,H]=function(){const[e,t]=(0,n.useState)([]);return[e,(e,r)=>{const n=[{message:e,done:r}];t((e=>e.concat(n)))},(e,r)=>{const n=[{message:e,done:r}];t((e=>e.slice(0,-1).concat(n)))}]}(),[_,J]=(0,n.useState)(0),X=e=>U(e),G=()=>J((e=>e+1)),K=L.map((e=>e.imageFile));(0,n.useEffect)((()=>{const e="Uploading Images (".concat(_,"/").concat(L.length,")");_>=0&&W>=10&&(0===_?V(e,!1):H(e,!1),L.length===_&&H(e,!0))}),[_,W]);const $=(0,c.jsx)(E,{activeStep:d,handleNext:m,handlePrevious:x,isLast:g,isFirst:p,title:b,date:P,handleTitleChange:j,handleDateChange:M}),Q=(0,c.jsx)(ee,{imageDetails:L,handleSelectedImageChange:T,removeSelectedImage:D,thumbnail:F,handleThumbnailChange:R,handleNext:m,handlePrevious:x,isLast:g,isFirst:p,handleCaptionChange:z}),Y=async()=>{const e={key:new Date(2100,1,1).getTime()-Date.now(),title:b,date:P,lastModified:new Date,imageDetails:L,story:N,thumbnail:L[F],totalSize:(t=L,t.reduce(((e,t)=>e+t.size),0))};var t;O(!0);const n=await v(r,s,e,X,H,V,K,G);X(!0===n?100:-1),setTimeout((()=>o("/memories")),3e3)},te=(0,c.jsx)(_e,{open:B,progress:W,messages:A});let re;const ae=function(e,t,r,n,s){return(0,c.jsx)(h.ZP,{container:!0,justifyContent:"center",children:(0,c.jsx)(h.ZP,{item:!0,lg:6,xs:12,sx:{boxShadow:10,borderRadius:5,bgcolor:"button.main",mb:2},children:(0,c.jsxs)(a.Z,{children:[(0,c.jsx)(f,{titles:t,activeStep:s,handleClick:()=>{}}),(0,c.jsx)(i.Z,{}),r[s]]})})})}(0,l,[$,Q,(0,c.jsx)(ne,{story:N,handleStoryChange:q,handleNext:Y,handlePrevious:x,isLast:g,isFirst:p,progressDialog:te})],0,d),ie=function(e,t,r,n,a){return(0,c.jsxs)(h.ZP,{container:!0,justifyContent:"space-evenly",sx:{p:0},children:[(0,c.jsxs)(h.ZP,{item:!0,xs:6,sm:4,md:4,lg:3,xl:2,sx:{px:1,mb:1},children:[(0,c.jsx)(I,{title:"Thumbnail Preview"}),(0,c.jsx)(w.Z,{title:e,date:t||"",thumbnailImage:r.length>0?r[n].url:"",handleClick:()=>{}})]}),(0,c.jsxs)(h.ZP,{item:!0,xs:12,lg:9,xl:10,children:[(0,c.jsx)(I,{title:"Memory Preview"}),(0,c.jsx)(k.Z,{memType:"preview",memTitle:e,memDate:t,memStory:a,memImages:r.map((e=>({src:e.url,width:e.width,height:e.height,caption:e.caption||""}))),imageNames:r.map((e=>e.name))})]})]})}(b,P,L,F,N);return"Create"===t&&(re=ae),"Preview"===t&&(re=ie),re}function Xe(e){let{bucket:t,authURL:r}=e;const a=["Create","Preview"],[i,s]=(0,n.useState)(a[0]),o=(0,n.useRef)(null);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(d,{mode:i,handleModeChange:s,modes:a}),(0,c.jsx)(Je,{mode:i,formRef:o,bucket:t,authURL:r})]})}_e.defaultProps={messages:[]}},37957:(e,t,r)=>{var n=r(64836);t.Z=void 0;var a=n(r(45045)),i=r(46417),s=(0,a.default)((0,i.jsx)("path",{d:"M16.59 7.58 10 14.17l-3.59-3.58L5 12l5 5 8-8zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"CheckCircleOutline");t.Z=s},59236:(e,t,r)=>{var n=r(64836);t.Z=void 0;var a=n(r(45045)),i=r(46417),s=(0,a.default)((0,i.jsx)("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline");t.Z=s}}]);