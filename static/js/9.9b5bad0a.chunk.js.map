{"version":3,"sources":["components/simple_snackbar.jsx","hooks/title.jsx","hooks/date.jsx","hooks/story.jsx","pages/memory/RemovePhotoIcon.jsx","pages/memory/UpdateMemoryIcon.jsx","pages/memory/DeleteMemoryIcon.jsx","components/confirmation.jsx","pages/memory/MemoryActions.jsx","pages/memory/MemoryContentStructure.jsx","pages/memory/MemoryImageSlide.jsx","pages/memory/MemoryCarousel.jsx","pages/memory/MemoryTitle.jsx","pages/memory/MemoryDate.jsx","pages/memory/MemoryStory.jsx","pages/memory/MemoryImages.jsx","pages/memory/MemoryContent.jsx","static/data/loading_album.js","pages/memory/MemoryContentLoading.jsx","pages/memory/ViewMemory.jsx"],"names":["SimpleSnackbar","snackBarOpen","message","onClose","useState","open","setOpen","snackMessage","setSnackMessage","useEffect","handleClose","action","size","color","onClick","fontSize","console","log","autoHideDuration","anchorOrigin","vertical","horizontal","useTitle","initialValue","title","setTitle","e","target","value","useDate","initialDate","date","setDate","newDate","Date","formattedDate","toLocaleDateString","day","month","year","useStory","initialState","editorState","setEditorState","newEditorState","RemovePhotoIcon","handleClick","sx","bgcolor","alpha","position","top","right","defaultProps","UpdateMemoryIcon","Box","alignItems","IconButton","DeleteMemoryIcon","Confirm","confirm","handleCallback","handleCloseCallback","Dialog","backgroundColor","DialogTitle","p","Typography","pb","Stack","spacing","direction","Button","variant","MemoryActions","deleteItem","updateItem","snackBar","confirmMessage","handleDeleteObject","handleEditClick","setConfirm","anchorEl","setAnchorEl","Boolean","event","currentTarget","Menu","id","MenuListProps","borderRadius","MenuItem","bucket","authURL","memoryID","memoryDeleteCallback","a","api","deleteMemory","deleteResults","MemoryContentStructure","className","header","subheader","photoLayout","storyLayout","preview","snack","setSnack","theme","useTheme","useMediaQuery","breakpoints","down","handleSnackMessage","msg","status","actions","to","replace","Card","boxShadow","CardHeader","Divider","display","justifyContent","flexDirection","lg","xs","height","my","width","overflowY","mt","px","AutoPlaySwipeableViews","autoPlay","SwipeableViews","MemoryImageSlide","index","images","handleNext","React","activeStep","setActiveStep","imgElements","map","image","srcSet","src","join","component","justifyContents","style","boxSizing","cursor","objectFit","alt","onChangeIndex","step","enableMouseEvents","animateTransitions","interval","springConfig","duration","easeFunction","delay","NextPic","edge","transform","PreviousPic","left","MemoryCarousel","handleBack","fullScreen","padding","MemoryTitle","editable","text","handleTitleUpdate","handleTitleChange","edit","setEdit","startEdit","setStartEdit","TextField","label","onChange","defaultValue","maxWidth","MemoryDate","prevDate","handleDateUpdate","handleDateChange","LocalizationProvider","dateAdapter","AdapterDateFns","placeholder","inputFormat","maxDate","renderInput","props","readOnly","required","MemoryStory","prevEditorState","handleEditorStateUpdate","handleEditorStateChange","storyRef","useRef","JSON","stringify","convertToRaw","getCurrentContent","m","border","borderColor","minHeight","current","focus","autoFocus","ref","OptionsButton","children","name","updateOp","AddPhotos","handleChange","type","hidden","multiple","accept","MemoryPhotoAlbum","handlePhotoClick","renderPhoto","arrangement","setArrangement","twidth","theight","forEach","layout","photos","MemoryImages","handleThumbnailUpdate","deleteImage","addImage","setUpdateOp","thumbnail","setThumbnail","OptionsRow","updatePanel","length","layoutOptions","imageProps","restImageProps","deleted","find","handleImageDelete","FormControlLabel","control","Radio","checked","thumbnailImage","handleThumbnailChange","pr","borderLeft","bottom","BackButton","paddingX","paddingY","Link","href","underline","paddingRight","MemoryContent","memTitle","memDate","memEditorState","memImages","activeIndex","setActiveIndex","setImages","newImages","setNewImages","newImagesCount","setNewImagesCount","errorUploadImages","setErrorUploadImages","addImageOpen","setAddImageOpen","uploadImageProgress","setUploadImageProgress","uploadImageStatus","setUploadImageStatus","maxSteps","UpdateDetails","item","updateMemoryDetails","resp","UpdateThumbnail","updateMemoryImage","ok","filter","details","handleNewImages","entries","img","det","file","then","response","putURL","photo","key","fetch","body","method","uploadResp","pics","concat","errImgs","handleImageAdd","files","Array","from","Image","onload","naturalHeight","naturalWidth","resImages","resHeight","Math","ceil","creationDate","now","newName","imageDetails","URL","createObjectURL","revokeObjectURL","memoryTitle","memoryDate","state","updateDone","margin","prevActiveStep","fullWidth","textAlign","CardContent","EditorState","createWithText","imageLoading","MemoryContentLoading","Skeleton","md","loadingAlbum","getMemory","memoryId","handleMemoryCallback","handleMemoryError","viewMemory","memoryData","ViewMemory","useParams","memory","setMemory","handleMemory","mem","memError","setMemError","handleSnackBarClose","results","setInterval","clearInterval","pictures","createWithContent","convertFromRaw","contentState"],"mappings":"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","file":"static/js/9.9b5bad0a.chunk.js","sourcesContent":["import { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport Snackbar from '@mui/material/Snackbar';\nimport IconButton from '@mui/material/IconButton';\nimport CloseIcon from '@mui/icons-material/Close';\n\nexport default function SimpleSnackbar({ snackBarOpen, message, onClose }) {\n  const [open, setOpen] = useState(snackBarOpen);\n  const [snackMessage, setSnackMessage] = useState(message);\n\n  useEffect(() => setOpen(snackBarOpen), [snackBarOpen]);\n  useEffect(() => setSnackMessage(message), [message]);\n\n  const handleClose = () => {\n    /*    if (reason === 'clickaway') { */\n    /* return; */\n    /* } */\n\n    setOpen(false);\n    setSnackMessage(null);\n    onClose();\n  };\n\n  const action = (\n    <IconButton\n      size=\"small\"\n      aria-label=\"close\"\n      color=\"inherit\"\n      onClick={handleClose}\n    >\n      <CloseIcon fontSize=\"small\" />\n    </IconButton>\n  );\n\n  console.log('in snackbar', open, message);\n\n  return (\n    <Snackbar\n      open={open}\n      autoHideDuration={3000}\n      onClose={handleClose}\n      message={snackMessage}\n      action={action}\n      anchorOrigin={{ vertical: 'top', horizontal: 'center' }}\n    />\n  );\n}\n\nSimpleSnackbar.propTypes = {\n  message: PropTypes.string.isRequired,\n  snackBarOpen: PropTypes.bool.isRequired,\n  onClose: PropTypes.func.isRequired,\n};\n","import { useState, useEffect } from 'react';\n\nexport default function useTitle(initialValue) {\n  const [title, setTitle] = useState(initialValue);\n  useEffect(() => setTitle(initialValue), [initialValue]);\n  const handleTitleChange = (e) => {\n    setTitle(e.target.value);\n  };\n  return [title, setTitle, handleTitleChange];\n}\n","import { useState } from 'react';\n\nexport default function useDate(initialDate) {\n  const [date, setDate] = useState(initialDate);\n  const handleDateChange = (e) => {\n    const newDate = new Date(e);\n    if (e) {\n      const formattedDate = newDate.toLocaleDateString('en-in', {\n        day: 'numeric',\n        month: 'long',\n        year: 'numeric',\n      });\n      setDate(formattedDate);\n    } else {\n      setDate(null);\n    }\n  };\n  return [date, setDate, handleDateChange];\n}\n","import { useState } from 'react';\n\nexport default function useStory(initialState) {\n  const [editorState, setEditorState] = useState(initialState);\n  const handleEditorStateChange = (newEditorState) => setEditorState(newEditorState);\n  return [editorState, setEditorState, handleEditorStateChange];\n}\n","import PropTypes from 'prop-types';\nimport IconButton from '@mui/material/IconButton';\nimport CloseIcon from '@mui/icons-material/Close';\nimport { alpha } from '@mui/material/styles';\n\nexport default function RemovePhotoIcon({ size, handleClick }) {\n  return (\n    <IconButton\n      size={size}\n      sx={{\n        color: 'black',\n        bgcolor: alpha('#fff', 0.4),\n        position: 'absolute',\n        top: 10,\n        right: 12,\n      }}\n      onClick={handleClick}\n    >\n      <CloseIcon size={size} />\n    </IconButton>\n  );\n}\n\nRemovePhotoIcon.defaultProps = {\n  size: 'small',\n};\n\nRemovePhotoIcon.propTypes = {\n  handleClick: PropTypes.func.isRequired,\n  size: PropTypes.string,\n};\n","import Box from '@mui/material/Box';\nimport IconButton from '@mui/material/IconButton';\nimport EditIcon from '@mui/icons-material/Edit';\n\nexport default function UpdateMemoryIcon() {\n  return (\n    <Box sx={{ alignItems: 'center' }} onClick={() => {}}>\n      <IconButton\n        aria-label=\"update\"\n        sx={{\n          bgcolor: 'form.input',\n        }}\n        onClick={() => {}}\n      >\n        <EditIcon />\n      </IconButton>\n      Edit\n    </Box>\n  );\n}\n","import Box from '@mui/material/Box';\nimport IconButton from '@mui/material/IconButton';\nimport DeleteIcon from '@mui/icons-material/Delete';\n\nexport default function DeleteMemoryIcon() {\n  return (\n    <Box sx={{ alignItems: 'center' }}>\n      <IconButton\n        aria-label=\"delete\"\n        sx={{\n          bgcolor: 'form.input',\n        }}\n      >\n        <DeleteIcon />\n      </IconButton>\n      Delete\n    </Box>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\n\nimport Dialog from '@mui/material/Dialog';\nimport Button from '@mui/material/Button';\nimport Typography from '@mui/material/Typography';\nimport Stack from '@mui/material/Stack';\nimport Box from '@mui/material/Box';\nimport DialogTitle from '@mui/material/DialogTitle';\n\nexport default function Confirm({\n  confirm, handleCallback, handleCloseCallback, title, message,\n}) {\n  const [open, setOpen] = useState(confirm);\n  useEffect(() => setOpen(confirm), [confirm]);\n\n  const handleClose = () => {\n    setOpen(false);\n    handleCloseCallback();\n  };\n\n  const handleSubmit = () => {\n    handleClose();\n    handleCallback();\n  };\n\n  console.log('in confirm', open);\n\n  return (\n    <Dialog open={open} sx={{ backgroundColor: 'faded.black' }}>\n      <DialogTitle>{title}</DialogTitle>\n      <Box sx={{ p: 2 }}>\n        <Typography sx={{ pb: 2 }}>{message}</Typography>\n        <Stack spacing={2} direction=\"row\">\n          <Button variant=\"contained\" onClick={handleClose}>Cancel</Button>\n          <Button variant=\"outlined\" onClick={handleSubmit}>OK</Button>\n        </Stack>\n      </Box>\n    </Dialog>\n  );\n}\n\nConfirm.propTypes = {\n  confirm: PropTypes.bool.isRequired,\n  title: PropTypes.string.isRequired,\n  message: PropTypes.string.isRequired,\n  handleCallback: PropTypes.func.isRequired,\n  handleCloseCallback: PropTypes.func.isRequired,\n};\n","import { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport MoreVertIcon from '@mui/icons-material/MoreVert';\nimport Menu from '@mui/material/Menu';\nimport MenuItem from '@mui/material/MenuItem';\nimport Confirm from '../../components/confirmation';\n\nexport default function MemoryActions({\n  deleteItem, updateItem, snackBar, confirmMessage, handleDeleteObject, handleEditClick,\n}) {\n  const [confirm, setConfirm] = useState(false);\n  const [anchorEl, setAnchorEl] = useState(null);\n  const open = Boolean(anchorEl);\n  const handleClick = (event) => setAnchorEl(event.currentTarget);\n  const handleClose = () => setAnchorEl(null);\n\n  const handleDeleteClick = () => {\n    setConfirm(true);\n    handleClose();\n  };\n\n  const handleEdit = () => {\n    handleEditClick();\n    handleClose();\n  };\n\n  return (\n    <div>\n      <MoreVertIcon onClick={handleClick} />\n      <Menu\n        id=\"basic-menu\"\n        anchorEl={anchorEl}\n        open={open}\n        onClose={handleClose}\n        MenuListProps={{\n          'aria-labelledby': 'basic-button',\n        }}\n        sx={{ borderRadius: '10px' }}\n      >\n        <MenuItem onClick={handleEdit}>{updateItem}</MenuItem>\n        <MenuItem onClick={handleDeleteClick}>{deleteItem}</MenuItem>\n      </Menu>\n      <Confirm\n        title=\"Delete Memory\"\n        confirm={confirm}\n        handleCallback={handleDeleteObject}\n        handleCloseCallback={() => setConfirm(false)}\n        message={confirmMessage}\n      />\n      {snackBar}\n    </div>\n  );\n}\n\nMemoryActions.propTypes = {\n  deleteItem: PropTypes.node.isRequired,\n  updateItem: PropTypes.node.isRequired,\n  confirmMessage: PropTypes.string.isRequired,\n  snackBar: PropTypes.node.isRequired,\n  handleDeleteObject: PropTypes.func.isRequired,\n  handleEditClick: PropTypes.func.isRequired,\n};\n","import { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { Navigate } from 'react-router-dom';\nimport Card from '@mui/material/Card';\nimport CardHeader from '@mui/material/CardHeader';\nimport Box from '@mui/material/Box';\nimport MoreVertIcon from '@mui/icons-material/MoreVert';\nimport Divider from '@mui/material/Divider';\nimport { useTheme } from '@mui/material/styles';\nimport useMediaQuery from '@mui/material/useMediaQuery';\nimport UpdateMemoryIcon from './UpdateMemoryIcon';\nimport DeleteMemoryIcon from './DeleteMemoryIcon';\nimport SimpleSnackbar from '../../components/simple_snackbar';\nimport MemoryActions from './MemoryActions';\nimport api from '../Api';\n\nasync function deleteMemory(bucket, authURL, memoryID, memoryDeleteCallback) {\n  try {\n    const deleteResults = await api.deleteMemory(bucket, authURL, memoryID);\n    memoryDeleteCallback(deleteResults);\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nexport default function MemoryContentStructure({\n  header, subheader, photoLayout, storyLayout, bucket, memoryID, authURL, handleEditClick, preview,\n}) {\n  const [snack, setSnack] = useState(null);\n  const [snackMessage, setSnackMessage] = useState(null);\n  let className;\n  const theme = useTheme();\n  const lgdown = useMediaQuery(theme.breakpoints.down('lg'));\n  if (lgdown) className = '';\n  else className = 'vertical-scroll';\n\n  const handleSnackMessage = (msg) => setSnackMessage(msg);\n\n  const memoryDeleteCallback = (open) => {\n    if (open.status === 'ok') {\n      handleSnackMessage('Memory deleted successfully');\n    } else {\n      handleSnackMessage('Error while deleting memory');\n    }\n    setSnack(true);\n  };\n\n  const handleSnackBarClose = () => {\n    setSnack(false);\n  };\n\n  const snackBar = (\n    <SimpleSnackbar\n      snackBarOpen={snack}\n      message={snackMessage}\n      onClose={handleSnackBarClose}\n    />\n  );\n\n  const actions = !preview ? (\n    <MemoryActions\n      confirmMessage=\"Do you want to delete this memory?\"\n      snackBar={snackBar}\n      handleDeleteObject={() => {\n        deleteMemory(bucket, authURL, memoryID, memoryDeleteCallback);\n      }}\n      deleteItem={<DeleteMemoryIcon />}\n      updateItem={<UpdateMemoryIcon />}\n      handleEditClick={handleEditClick}\n    />\n  ) : <MoreVertIcon />;\n\n  console.log('Rendering', snack, snackMessage);\n\n  return (snack === false) ? (\n    <Navigate to=\"/memories\" replace />\n  ) : (\n    <Card\n      sx={{\n        boxShadow: 0,\n        bgcolor: 'button.main',\n        p: 1,\n      }}\n    >\n      <CardHeader\n        title={header}\n        subheader={subheader}\n        action={actions}\n      />\n      <Divider />\n      <Box\n        sx={{\n          display: 'flex',\n          justifyContent: 'flex-start',\n          flexDirection: {\n            lg: 'row',\n            xs: 'column',\n          },\n          height: {\n            lg: '72vh',\n          },\n          my: 1,\n        }}\n      >\n        <Box\n          sx={{\n            width: {\n              lg: '70%',\n              xs: '100%',\n            },\n            overflowY: 'scroll',\n            borderRadius: 5,\n          }}\n          className={className}\n        >\n          {photoLayout}\n        </Box>\n        <Box\n          sx={{\n            width: { lg: '30%', sx: '100%' },\n            overflowY: 'scroll',\n            mt: {\n              lg: 0,\n              xs: 2,\n            },\n            p: {\n              lg: 1,\n            },\n            px: 1,\n          }}\n          className={className}\n        >\n          {storyLayout}\n        </Box>\n      </Box>\n    </Card>\n  );\n}\n\nMemoryContentStructure.propTypes = {\n  header: PropTypes.oneOfType([PropTypes.string, PropTypes.element]).isRequired,\n  subheader: PropTypes.oneOfType([PropTypes.string, PropTypes.element]).isRequired,\n  photoLayout: PropTypes.element.isRequired,\n  storyLayout: PropTypes.element.isRequired,\n  memoryID: PropTypes.string.isRequired,\n  bucket: PropTypes.string.isRequired,\n  authURL: PropTypes.string.isRequired,\n  handleEditClick: PropTypes.func.isRequired,\n  preview: PropTypes.bool.isRequired,\n};\n","import * as React from 'react';\nimport PropTypes from 'prop-types';\nimport SwipeableViews from 'react-swipeable-views';\nimport Box from '@mui/material/Box';\nimport { autoPlay } from 'react-swipeable-views-utils';\n\nconst AutoPlaySwipeableViews = autoPlay(SwipeableViews);\n\nexport default function MemoryImageSlide({ index, images, handleNext }) {\n  const [activeStep, setActiveStep] = React.useState(index);\n\n  React.useEffect(() => {\n    setActiveStep(index);\n  }, [index]);\n\n  const handleStepChange = (step) => {\n    setActiveStep(step);\n  };\n\n  const imgElements = images.map((image) => {\n    const srcSetList = image.images ? image.images.map(({ src, width }) => `${src} ${width}w`) : [];\n    const srcSet = srcSetList.join(',');\n    const style = {\n      display: 'block',\n      boxSizing: 'content-box',\n      cursor: 'pointer',\n      objectFit: 'contain',\n      height: '100vh',\n    };\n    return (\n      <Box\n        component=\"img\"\n        sx={{\n          display: 'flex',\n          justifyContents: 'center',\n          width: '100%',\n          bgcolor: '#1c1c1c',\n        }}\n        src={image.src}\n        srcSet={srcSet}\n        style={style}\n        alt={image.src}\n        key={image.src}\n      />\n    );\n  });\n\n  return (\n    <AutoPlaySwipeableViews\n      index={activeStep}\n      onChangeIndex={handleStepChange}\n      enableMouseEvents\n      animateTransitions\n      interval={10000}\n      onClick={handleNext}\n      springConfig={{\n        duration: '0.7s',\n        easeFunction: 'cubic-bezier(0.83, 0, 0.17, 1)',\n        delay: '0s',\n      }}\n      style={{ backgroundColor: 'muted.main' }}\n    >\n      {imgElements}\n    </AutoPlaySwipeableViews>\n  );\n}\n\nMemoryImageSlide.defaultProps = {\n  index: 0,\n};\n\nMemoryImageSlide.propTypes = {\n  index: PropTypes.number,\n  handleNext: PropTypes.func.isRequired,\n  images: PropTypes.arrayOf(PropTypes.shape({\n    src: PropTypes.string,\n    width: PropTypes.number,\n    height: PropTypes.number,\n  })).isRequired,\n};\n","import PropTypes from 'prop-types';\nimport Dialog from '@mui/material/Dialog';\nimport CardHeader from '@mui/material/CardHeader';\nimport KeyboardArrowLeft from '@mui/icons-material/KeyboardArrowLeft';\nimport KeyboardArrowRight from '@mui/icons-material/KeyboardArrowRight';\nimport IconButton from '@mui/material/IconButton';\n\nimport MemoryImageSlide from './MemoryImageSlide';\nimport RemovePhotoIcon from './RemovePhotoIcon';\n\nfunction NextPic({ handleClick }) {\n  return (\n    <IconButton\n      edge=\"start\"\n      color=\"primary\"\n      aria-label=\"close\"\n      onClick={handleClick}\n      sx={{\n        position: 'absolute', top: '50%', right: 0, transform: 'translate(0%, -50%)',\n      }}\n    >\n      <KeyboardArrowRight sx={{ color: 'button.main', fontSize: '4.5rem' }} />\n    </IconButton>\n  );\n}\n\nfunction PreviousPic({ handleClick }) {\n  return (\n    <IconButton\n      edge=\"start\"\n      color=\"primary\"\n      aria-label=\"close\"\n      onClick={handleClick}\n      sx={{\n        position: 'absolute', top: '50%', left: 0, transform: 'translate(0%, -50%)',\n      }}\n    >\n      <KeyboardArrowLeft sx={{ color: 'button.main', fontSize: '4.5rem' }} />\n    </IconButton>\n  );\n}\n\nexport default function MemoryCarousel({\n  open, title, date, images, index, handleNext, handleBack, handleClose,\n}) {\n  return (\n    <Dialog\n      open={open}\n      fullScreen\n    >\n      <MemoryImageSlide images={images} index={index} handleNext={handleNext} />\n      <CardHeader\n        title={title}\n        subheader={date}\n        sx={{\n          position: 'absolute',\n          top: 10,\n          left: 10,\n          bgcolor: 'button.main',\n          borderRadius: 3,\n          padding: 1,\n        }}\n      />\n      <PreviousPic handleClick={handleBack} />\n      <NextPic handleClick={handleNext} />\n      <RemovePhotoIcon size=\"large\" handleClick={handleClose} />\n    </Dialog>\n  );\n}\n\nNextPic.propTypes = {\n  handleClick: PropTypes.func.isRequired,\n};\n\nPreviousPic.propTypes = {\n  handleClick: PropTypes.func.isRequired,\n};\n\nMemoryCarousel.defaultProps = {\n  index: 0,\n};\n\nMemoryCarousel.propTypes = {\n  open: PropTypes.bool.isRequired,\n  title: PropTypes.string.isRequired,\n  date: PropTypes.string.isRequired,\n  index: PropTypes.number,\n  handleNext: PropTypes.func.isRequired,\n  handleBack: PropTypes.func.isRequired,\n  handleClose: PropTypes.func.isRequired,\n  images: PropTypes.arrayOf(PropTypes.shape({\n    src: PropTypes.string,\n    width: PropTypes.number,\n    height: PropTypes.number,\n  })).isRequired,\n};\n","import PropTypes from 'prop-types';\nimport { useState, useEffect } from 'react';\nimport Stack from '@mui/material/Stack';\nimport Typography from '@mui/material/Typography';\nimport TextField from '@mui/material/TextField';\nimport DoneTwoToneIcon from '@mui/icons-material/DoneTwoTone';\nimport ClearIcon from '@mui/icons-material/Clear';\nimport EditIcon from '@mui/icons-material/Edit';\nimport useTitle from '../../hooks/title';\n\nexport default function MemoryTitle({ editable, text, handleTitleUpdate }) {\n  const [title, setTitle, handleTitleChange] = useTitle(text);\n  const [edit, setEdit] = useState(editable);\n  const [startEdit, setStartEdit] = useState(false);\n\n  useEffect(() => {\n    setEdit(editable);\n    setTitle(text);\n    setStartEdit(false);\n  }, [editable]);\n\n  console.log('Memory Title ', edit, startEdit, title);\n\n  if (!edit && !startEdit) {\n    return <Typography variant=\"h6\">{title}</Typography>;\n  }\n\n  if (edit && !startEdit) {\n    return (\n      <Stack direction=\"row\" sx={{ alignItems: 'center' }} spacing={2}>\n        <Typography variant=\"h6\">{title}</Typography>\n        <EditIcon fontSize=\"medium\" onClick={() => setStartEdit(true)} />\n      </Stack>\n    );\n  }\n\n  if (edit && startEdit) {\n    return (\n      <Stack direction=\"row\" sx={{ alignItems: 'flex-end', justifyContent: 'flex-start' }} spacing={2}>\n        <TextField\n          id=\"standard-basic\"\n          size=\"small\"\n          label=\"Title\"\n          onChange={handleTitleChange}\n          variant=\"standard\"\n          defaultValue={title}\n          sx={{ maxWidth: '200px' }}\n        />\n        <DoneTwoToneIcon\n          fontSize=\"medium\"\n          onClick={() => {\n            console.log(title);\n            handleTitleUpdate(title);\n            setStartEdit(false);\n          }}\n        />\n        <ClearIcon fontSize=\"medium\" onClick={() => { setTitle(text); setStartEdit(false); }} />\n      </Stack>\n    );\n  }\n}\n\nMemoryTitle.propTypes = {\n  editable: PropTypes.bool.isRequired,\n  text: PropTypes.string.isRequired,\n  handleTitleUpdate: PropTypes.func.isRequired,\n};\n","import PropTypes from 'prop-types';\nimport { useState, useEffect } from 'react';\nimport Stack from '@mui/material/Stack';\nimport Typography from '@mui/material/Typography';\nimport TextField from '@mui/material/TextField';\nimport DoneTwoToneIcon from '@mui/icons-material/DoneTwoTone';\nimport ClearIcon from '@mui/icons-material/Clear';\nimport EditIcon from '@mui/icons-material/Edit';\nimport DatePicker from '@mui/lab/DesktopDatePicker';\nimport LocalizationProvider from '@mui/lab/LocalizationProvider';\nimport AdapterDateFns from '@mui/lab/AdapterDateFns';\n\nimport useDate from '../../hooks/date';\n\nexport default function MemoryDate({ editable, prevDate, handleDateUpdate }) {\n  const [edit, setEdit] = useState(editable);\n  const [startEdit, setStartEdit] = useState(false);\n  const [date, setDate, handleDateChange] = useDate(prevDate);\n\n  useEffect(() => {\n    setEdit(editable);\n    setDate(prevDate);\n    setStartEdit(false);\n  }, [editable, prevDate]);\n  console.log('Memory Date ', edit, startEdit, date);\n\n  if (!edit && !startEdit) {\n    return <Typography>{date}</Typography>;\n  }\n\n  if (edit && !startEdit) {\n    return (\n      <Stack direction=\"row\" sx={{ alignItems: 'center' }} spacing={2}>\n        <Typography>{date}</Typography>\n        <EditIcon fontSize=\"medium\" onClick={() => setStartEdit(true)} />\n      </Stack>\n    );\n  }\n\n  if (edit && startEdit) {\n    return (\n      <Stack direction=\"row\" sx={{ alignItems: 'flex-end', justifyContent: 'flex-start', mt: 3 }} spacing={2}>\n        <LocalizationProvider dateAdapter={AdapterDateFns}>\n          <DatePicker\n            label=\"Memory Date\"\n            value={date}\n            onChange={handleDateChange}\n            placeholder=\"dd/MM/yyyy\"\n            inputFormat=\"dd/MM/yyyy\"\n            maxDate={new Date()}\n            renderInput={(props) => (\n              <TextField\n                readOnly\n                required\n          // eslint-disable-next-line react/jsx-props-no-spreading\n                {...props}\n              />\n            )}\n          />\n        </LocalizationProvider>\n        <DoneTwoToneIcon\n          fontSize=\"medium\"\n          onClick={() => {\n            handleDateUpdate(date);\n            setStartEdit(false);\n          }}\n        />\n        <ClearIcon fontSize=\"medium\" onClick={() => { setDate(prevDate); setStartEdit(false); }} />\n      </Stack>\n    );\n  }\n}\n\nMemoryDate.propTypes = {\n  editable: PropTypes.bool.isRequired,\n  prevDate: PropTypes.string.isRequired,\n  handleDateUpdate: PropTypes.func.isRequired,\n};\n","import { useState, useEffect, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport Stack from '@mui/material/Stack';\nimport DoneTwoToneIcon from '@mui/icons-material/DoneTwoTone';\nimport ClearIcon from '@mui/icons-material/Clear';\nimport EditIcon from '@mui/icons-material/Edit';\nimport Divider from '@mui/material/Divider';\nimport Typography from '@mui/material/Typography';\nimport { Editor, EditorState, convertToRaw } from 'draft-js';\nimport Box from '@mui/material/Box';\nimport useStory from '../../hooks/story';\nimport './memory.css';\n\nexport default function MemoryStory({ editable, prevEditorState, handleEditorStateUpdate }) {\n  const [edit, setEdit] = useState(editable);\n  const [startEdit, setStartEdit] = useState(false);\n  const [editorState, setEditorState, handleEditorStateChange] = useStory(prevEditorState);\n  const storyRef = useRef();\n\n  useEffect(() => {\n    setEdit(editable);\n    setEditorState(prevEditorState);\n    setStartEdit(false);\n  }, [editable, prevEditorState]);\n  console.log('Memory Title ', edit, startEdit);\n\n  if (!edit && !startEdit) {\n    return (\n      <Editor\n        readOnly\n        editorState={editorState}\n      />\n    );\n  }\n\n  if (edit && !startEdit) {\n    return (\n      <Stack direction=\"column\" spacing={2}>\n        <Stack direction=\"row\" spacing={2} justifyContent=\"flex-end\">\n          <Typography sx={{ color: 'muted.main' }}>Edit Story</Typography>\n          <EditIcon\n            fontSize=\"medium\"\n            onClick={() => {\n              setStartEdit(true);\n            }}\n          />\n        </Stack>\n        <Divider sx={{ width: 1 }} />\n        <Editor\n          readOnly\n          editorState={editorState}\n        />\n      </Stack>\n    );\n  }\n\n  if (edit && startEdit) {\n    return (\n      <Stack direction=\"column\" spacing={2}>\n        <Stack direction=\"row\" spacing={2} justifyContent=\"flex-end\">\n          <Typography sx={{ color: 'muted.main' }}>Editing Story</Typography>\n          <DoneTwoToneIcon\n            fontSize=\"medium\"\n            onClick={() => {\n              handleEditorStateUpdate(\n                JSON.stringify(\n                  convertToRaw(editorState.getCurrentContent()),\n                ),\n                editorState,\n              );\n              setStartEdit(false);\n            }}\n          />\n          <ClearIcon\n            fontSize=\"medium\"\n            onClick={() => {\n              setEditorState(prevEditorState);\n              setStartEdit(false);\n            }}\n          />\n        </Stack>\n        <Divider sx={{ width: 1 }} />\n        <Box\n          sx={{\n            p: 2,\n            m: 1,\n            my: 2,\n            border: 1,\n            borderColor: 'primary.main',\n            bgcolor: 'input.background',\n            minHeight: '200px',\n            borderRadius: 5,\n            width: '90%',\n          }}\n          onClick={() => storyRef.current.focus()}\n        >\n          <Editor\n            autoFocus\n            onChange={handleEditorStateChange}\n            editorState={editorState}\n            ref={storyRef}\n          />\n        </Box>\n      </Stack>\n    );\n  }\n}\n\nMemoryStory.propTypes = {\n  prevEditorState: PropTypes.instanceOf(EditorState).isRequired,\n  editable: PropTypes.bool.isRequired,\n  handleEditorStateUpdate: PropTypes.func.isRequired,\n};\n","import PropTypes from 'prop-types';\nimport { useState, useEffect } from 'react';\nimport PhotoAlbum from 'react-photo-album';\nimport Radio from '@mui/material/Radio';\nimport FormControlLabel from '@mui/material/FormControlLabel';\n//  import EditIcon from '@mui/icons-material/Edit';\n//  import FormControl from '@mui/material/FormControl';\n//  import MenuItem from '@mui/material/MenuItem';\n//  import Select from '@mui/material/Select';\n//  import InputLabel from '@mui/material/InputLabel';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport IconButton from '@mui/material/IconButton';\nimport AddPhotoIcon from '@mui/icons-material/AddPhotoAlternate';\n//  import ImageSelector from './ImageSelector';\nimport Button from '@mui/material/Button';\nimport CloseIcon from '@mui/icons-material/Close';\nimport Typography from '@mui/material/Typography';\nimport Stack from '@mui/material/Stack';\nimport { alpha } from '@mui/material/styles';\n//  import Box from '@mui/material/Box';\n//  import rp from './RenderPhotos';\n\nfunction OptionsButton({\n  children, onClick, name, updateOp,\n}) {\n  //  console.log('options button', name, updateOp, (updateOp === name));\n  return (\n    <Button\n      id={name}\n      variant=\"contained\"\n      component=\"label\"\n      onClick={onClick}\n      sx={{\n        color: (updateOp === name) ? 'button.main' : 'muted.main',\n        borderRadius: 5,\n        backgroundColor: (updateOp === name) ? 'primary.main' : 'button.main',\n        padding: '6px 8px',\n      }}\n    >\n      {children}\n    </Button>\n  );\n}\n\nfunction AddPhotos({ handleChange, onClick, updateOp }) {\n  return (\n    <OptionsButton onClick={onClick} name=\"add\" updateOp={updateOp}>\n      <input type=\"file\" hidden multiple accept=\"image/*\" onChange={handleChange} />\n      <AddPhotoIcon sx={{ fontSize: '1.5rem' }} />\n      Add\n    </OptionsButton>\n  );\n}\n\nfunction MemoryPhotoAlbum({ images, handlePhotoClick, renderPhoto }) {\n  const [arrangement, setArrangement] = useState(null);\n  useEffect(() => {\n    let twidth = 0;\n    let theight = 0;\n    images.forEach(({ height, width }) => {\n      if (height > width) theight += 1;\n      else twidth += 1;\n    });\n    if (twidth > theight) setArrangement('rows');\n    else setArrangement('columns');\n  }, [images]);\n\n  return renderPhoto ? (\n    <PhotoAlbum\n      layout={arrangement}\n      photos={images}\n      onClick={handlePhotoClick}\n      spacing={2}\n      renderPhoto={renderPhoto}\n    />\n  ) : (\n    <PhotoAlbum\n      layout={arrangement}\n      photos={images}\n      onClick={handlePhotoClick}\n      spacing={2}\n    />\n  );\n}\n\nexport default function MemoryImages({\n  editable, images, handlePhotoClick, handleThumbnailUpdate, deleteImage, addImage,\n}) {\n  const [edit, setEdit] = useState(editable);\n  const [updateOp, setUpdateOp] = useState(null);\n  const [thumbnail, setThumbnail] = useState(null);\n\n  console.log('memory images', updateOp, edit);\n  useEffect(() => {\n    setEdit(editable);\n    setUpdateOp(null);\n  }, [editable]);\n\n  const handleThumbnailChange = (name) => {\n    console.log('name', name);\n    console.log('images', images);\n    setThumbnail(name);\n    const thumbnailImage = images.find((image) => image.alt === name);\n    console.log('thumbnail image', thumbnailImage);\n    handleThumbnailUpdate(thumbnailImage);\n  };\n\n  const handleImageDelete = (name) => {\n    const deleted = images.find((image) => image.alt === name);\n    deleteImage(deleted);\n  };\n\n  const renderPhotosWithDeleteIcon = ({\n    layout,\n    layoutOptions,\n    imageProps: { alt, style, ...restImageProps },\n  }) => {\n    console.log(layout, layoutOptions);\n    return (\n      <Button component=\"div\">\n        <img\n          alt={alt}\n          // eslint-disable-next-line react/jsx-props-no-spreading\n          style={{ ...style, width: layout.width, padding: 0 }}\n          // eslint-disable-next-line react/jsx-props-no-spreading\n          {...restImageProps}\n        />\n        <IconButton\n          size=\"medium\"\n          sx={{\n            color: 'black',\n            bgcolor: alpha('#fff', 0.4),\n            position: 'absolute',\n            top: 10,\n            right: 12,\n          }}\n          onClick={() => handleImageDelete(alt)}\n        >\n          <CloseIcon size=\"medium\" />\n        </IconButton>\n      </Button>\n    );\n  };\n\n  const renderPhotosWithRadioButton = ({\n    layout,\n    layoutOptions,\n    imageProps: { alt, style, ...restImageProps },\n  }) => {\n    console.log(layoutOptions);\n    return (\n      <Button component=\"div\">\n        <img\n          alt={alt}\n          // eslint-disable-next-line react/jsx-props-no-spreading\n          style={{ ...style, width: layout.width, padding: 0 }}\n          // eslint-disable-next-line react/jsx-props-no-spreading\n          {...restImageProps}\n        />\n        <FormControlLabel\n          control={<Radio />}\n          label=\"\"\n          checked={alt === thumbnail}\n          onChange={() => handleThumbnailChange(alt)}\n          sx={{\n            pr: 1,\n            position: 'absolute',\n            bgcolor: alpha('#fff', 0.6),\n            color: 'black',\n            borderRadius: '0px 5px 5px 0px',\n            borderColor: 'secondary.main',\n            borderLeft: 0,\n            bottom: 20,\n            left: 15,\n          }}\n        />\n      </Button>\n    );\n  };\n\n  const OptionsRow = (\n    <Stack direction=\"row\" spacing={2}>\n      <AddPhotos handleChange={addImage} onClick={() => setUpdateOp('add')} updateOp={updateOp} />\n      <OptionsButton onClick={() => setUpdateOp('delete')} name=\"delete\" updateOp={updateOp}>\n        <DeleteIcon sx={{ fontSize: '1.5rem' }} />\n        Delete\n      </OptionsButton>\n      <OptionsButton onClick={() => setUpdateOp('thumbnail')} name=\"thumbnail\" updateOp={updateOp}>Set Thumbnail</OptionsButton>\n    </Stack>\n  );\n\n  const updatePanel = (\n    <Stack direction=\"row\">\n      <Typography variant=\"h6\" color=\"muted.main\">\n        Images:\n        {images.length}\n      </Typography>\n    </Stack>\n  );\n\n  if (!edit) {\n    return (\n      <MemoryPhotoAlbum images={images} handlePhotoClick={handlePhotoClick} />\n    );\n  }\n\n  if (edit && updateOp === 'delete') {\n    return (\n      <Stack direction=\"column\" spacing={2} sx={{ p: 2 }}>\n        {updatePanel}\n        {OptionsRow}\n        <MemoryPhotoAlbum\n          images={images}\n          handlePhotoClick={handlePhotoClick}\n          renderPhoto={renderPhotosWithDeleteIcon}\n        />\n      </Stack>\n    );\n  }\n\n  if (edit && updateOp === 'thumbnail') {\n    return (\n      <Stack direction=\"column\" spacing={2} sx={{ p: 2 }}>\n        {updatePanel}\n        {OptionsRow}\n        <MemoryPhotoAlbum\n          images={images}\n          handlePhotoClick={handlePhotoClick}\n          renderPhoto={renderPhotosWithRadioButton}\n        />\n      </Stack>\n    );\n  }\n\n  if (edit && updateOp === 'add') {\n    return (\n      <Stack direction=\"column\" spacing={2} sx={{ p: 2 }}>\n        {updatePanel}\n        {OptionsRow}\n        <MemoryPhotoAlbum\n          images={images}\n          handlePhotoClick={handlePhotoClick}\n        />\n      </Stack>\n    );\n  }\n\n  if (edit && !updateOp) {\n    return (\n      <Stack direction=\"column\" spacing={2} sx={{ p: 2 }}>\n        {updatePanel}\n        {OptionsRow}\n        <MemoryPhotoAlbum images={images} handlePhotoClick={handlePhotoClick} />\n      </Stack>\n    );\n  }\n}\n\nMemoryImages.propTypes = {\n  editable: PropTypes.bool.isRequired,\n  images: PropTypes.arrayOf(\n    PropTypes.shape({\n      src: PropTypes.string,\n      width: PropTypes.number,\n      height: PropTypes.number,\n    }),\n  ).isRequired,\n  handlePhotoClick: PropTypes.func.isRequired,\n  handleThumbnailUpdate: PropTypes.func.isRequired,\n  deleteImage: PropTypes.func.isRequired,\n  addImage: PropTypes.func.isRequired,\n};\n\nMemoryPhotoAlbum.propTypes = {\n  images: PropTypes.arrayOf(\n    PropTypes.shape({\n      src: PropTypes.string,\n      width: PropTypes.number,\n      height: PropTypes.number,\n    }),\n  ).isRequired,\n  handlePhotoClick: PropTypes.func.isRequired,\n  renderPhoto: PropTypes.func,\n};\n\nMemoryPhotoAlbum.defaultProps = {\n  renderPhoto: null,\n};\n\nAddPhotos.propTypes = {\n  handleChange: PropTypes.func.isRequired,\n  onClick: PropTypes.func.isRequired,\n  updateOp: PropTypes.string.isRequired,\n};\n\nOptionsButton.defaultProps = {\n  onClick: () => {},\n};\n\nOptionsButton.propTypes = {\n  children: PropTypes.node.isRequired,\n  onClick: PropTypes.func,\n  name: PropTypes.string.isRequired,\n  updateOp: PropTypes.string.isRequired,\n};\n","import PropTypes from 'prop-types';\n//  import PhotoAlbum from 'react-photo-album';\nimport { useState, useEffect } from 'react';\nimport { EditorState } from 'draft-js';\nimport Button from '@mui/material/Button';\nimport Link from '@mui/material/Link';\nimport DoneIcon from '@mui/icons-material/Done';\nimport ArrowBackIcon from '@mui/icons-material/ArrowBack';\nimport Typography from '@mui/material/Typography';\nimport Stack from '@mui/material/Stack';\nimport Dialog from '@mui/material/Dialog';\nimport Card from '@mui/material/Card';\nimport CardHeader from '@mui/material/CardHeader';\nimport CardContent from '@mui/material/CardContent';\nimport Divider from '@mui/material/Divider';\nimport Box from '@mui/material/Box';\nimport MemoryCarousel from './MemoryCarousel';\nimport MemoryContentStructure from './MemoryContentStructure';\nimport MemoryTitle from './MemoryTitle';\nimport MemoryDate from './MemoryDate';\nimport MemoryStory from './MemoryStory';\nimport MemoryImages from './MemoryImages';\nimport api from '../Api';\nimport SimpleSnackbar from '../../components/simple_snackbar';\nimport './memory.css';\n\nfunction BackButton({ preview }) {\n  if (preview === false) {\n    return (\n      <Stack\n        direction=\"row\"\n        justifyContent=\"flex-start\"\n        sx={{ backgroundColor: 'button.main', paddingX: 2, paddingY: 1 }}\n      >\n        <Link href=\"/\" underline=\"none\">\n          <Button\n            variant=\"contained\"\n            component=\"label\"\n            sx={{\n              color: 'primary.main',\n              backgroundColor: 'button.main',\n              padding: '6px 8px',\n              boxShadow: 0,\n              '&:hover': {\n                backgroundColor: 'button.main',\n              },\n            }}\n          >\n            <ArrowBackIcon size=\"medium\" sx={{ paddingRight: 1 }} />\n            <Typography variant=\"body1\" color=\"muted.main\">Memories</Typography>\n          </Button>\n        </Link>\n      </Stack>\n    );\n  }\n  return null;\n}\n\nexport default function MemoryContent({\n  memTitle,\n  memDate,\n  memEditorState,\n  memImages,\n  bucket,\n  memoryID,\n  authURL,\n  preview,\n}) {\n  const [open, setOpen] = useState(false);\n  const [edit, setEdit] = useState(false);\n  const [activeIndex, setActiveIndex] = useState(0);\n  const [title, setTitle] = useState(memTitle);\n  const [date, setDate] = useState(memDate);\n  const [editorState, setEditorState] = useState(memEditorState);\n  const [images, setImages] = useState(memImages);\n  const [snack, setSnack] = useState(null);\n  const [snackMessage, setSnackMessage] = useState(null);\n\n  const [newImages, setNewImages] = useState([]);\n  const [newImagesCount, setNewImagesCount] = useState(null);\n  const [errorUploadImages, setErrorUploadImages] = useState([]);\n  const [addImageOpen, setAddImageOpen] = useState(false);\n  const [uploadImageProgress, setUploadImageProgress] = useState(null);\n  const [uploadImageStatus, setUploadImageStatus] = useState(null);\n\n  console.log('images', images);\n  const maxSteps = images.length;\n\n  useEffect(() => setTitle(memTitle), [memTitle]);\n  useEffect(() => setDate(memDate), [memDate]);\n  useEffect(() => setEditorState(memEditorState), [memEditorState]);\n  useEffect(() => setImages(memImages), [memImages]);\n\n  const handleSnackMessage = (msg) => {\n    console.log('Setting snack message', msg);\n    setSnackMessage(msg);\n  };\n\n  const handleSnackBarClose = () => {\n    console.log('snack close, set snack false, message null');\n    setSnack(false);\n    setSnackMessage(null);\n  };\n\n  const UpdateDetails = async (item, value) => {\n    try {\n      const resp = await api.updateMemoryDetails(\n        bucket,\n        authURL,\n        memoryID,\n        item,\n        value,\n      );\n      if (resp) {\n        handleSnackMessage(`Memory ${item} updated successfully`);\n      } else {\n        handleSnackMessage(`Error while updating memory ${item}`);\n      }\n      setSnack(true);\n      return resp;\n    } catch (error) {\n      console.log(error);\n      return false;\n    }\n  };\n\n  const UpdateThumbnail = async (image) => {\n    try {\n      const resp = await api.updateMemoryImage(\n        bucket,\n        authURL,\n        memoryID,\n        'thumbnail',\n        image,\n      );\n      console.log('Response', resp);\n      if (resp.ok) {\n        handleSnackMessage('Memory thumbnail updated successfully');\n      } else {\n        handleSnackMessage('Error while updating memory thumbnail');\n      }\n      setSnack(true);\n      return resp;\n    } catch (error) {\n      console.log(error);\n      return false;\n    }\n  };\n\n  const deleteImage = async (image) => {\n    try {\n      let resp;\n      if (images.length > 1) {\n        resp = await api.updateMemoryImage(\n          bucket,\n          authURL,\n          memoryID,\n          'delete',\n          image,\n        );\n        console.log('Response', resp);\n        if (resp) {\n          console.log('set snack message - successfully deleted memory image');\n          handleSnackMessage('Memory image deleted successfully');\n          setImages(images.filter((item) => item.title !== image.title));\n        } else {\n          console.log('set snack message - error while deleting memory image');\n          handleSnackMessage('Error while deleting memory image');\n        }\n      } else {\n        console.log('set snack message - atleast one image is needed for memory');\n        handleSnackMessage('Atleast 1 image is needed for memory. Unable to delete');\n      }\n      setSnack(true);\n      return resp;\n    } catch (error) {\n      console.log(error);\n      return false;\n    }\n  };\n\n  const addImage = async (details) => {\n    try {\n      console.log('addImage details', details);\n      const resp = await api.updateMemoryImage(\n        bucket,\n        authURL,\n        memoryID,\n        'add',\n        details,\n      );\n      return resp;\n    } catch (error) {\n      console.log(error);\n      return false;\n    }\n  };\n\n  const handleNewImages = async () => {\n    /* eslint-disable  no-await-in-loop, no-restricted-syntax */\n    for (const [index, img] of newImages.entries()) {\n      const [det, file, src] = img;\n      console.log(det.name, src);\n      const putURL = await addImage(det).then((response) => response.text());\n      console.log('response for ', det.name, putURL);\n      const photo = {\n        key: `memories/${memoryID}/images/${det.name}`,\n        src,\n        alt: det.name,\n        title: det.name,\n        width: det.width,\n        height: det.height,\n        images: [],\n      };\n      const uploadResp = await fetch(putURL, { body: file, method: 'PUT' });\n      console.log('upload response', uploadResp);\n      if (uploadResp.ok) {\n        console.log(`Setting snack message - image ${det.name} add success`);\n        handleSnackMessage(`Memory image ${index + 1} / ${newImagesCount} added successfully`);\n        setUploadImageProgress(`Images uploaded successfully: ${index + 1} / ${newImagesCount} `);\n        setSnack(true);\n        setImages((pics) => pics.concat([photo]));\n      } else {\n        console.log('Setting snack message - error uploading image');\n        handleSnackMessage('Error while uploading memory image');\n        setUploadImageStatus('Error while uploading memory image');\n        setSnack(true);\n        setErrorUploadImages((errImgs) => errImgs.concat([det.name]));\n      }\n    }\n  };\n\n  useEffect(async () => {\n    if (newImages.length === newImagesCount) {\n      setAddImageOpen(true);\n      console.log(newImages, newImagesCount);\n      await handleNewImages();\n      console.log('Resetting new image count and images');\n      console.log('Add done');\n      if (errorUploadImages.length > 0) {\n        handleSnackMessage(`Error while uploading ${errorUploadImages.length} memory images`);\n        setUploadImageStatus(`Error while uploading ${errorUploadImages.length} images`);\n        setSnack(true);\n      } else {\n        handleSnackMessage(`${newImages.length} image(s) uploaded successfully`);\n        setUploadImageStatus(`${newImages.length} image(s) uploaded successfully`);\n        setSnack(true);\n      }\n      setErrorUploadImages([]);\n      setNewImagesCount(null);\n      setNewImages([]);\n      setAddImageOpen(false);\n    } else if (newImages.length > 0) {\n      handleSnackMessage('Preparing images for upload. Please wait...');\n      setUploadImageProgress('Preparing images for upload....');\n      setSnack(true);\n    }\n  }, [newImages]);\n\n  const handleImageAdd = async (event) => {\n    if (event.target.files) {\n      const files = Array.from(event.target.files);\n      console.log('files to add:', files.length, 'exsting images:', images.length);\n      setNewImagesCount(files.length);\n      if (images.length + files.length <= 15) {\n        files.forEach((file) => {\n          const image = new Image();\n          image.onload = async (e) => {\n            const height = e.target.naturalHeight;\n            const width = e.target.naturalWidth;\n            const size = file.size / (1024 * 1024);\n            const { name } = file;\n            const resImages = [500, 1000, 1500].map((resHeight) => ({\n              height: resHeight, width: Math.ceil((resHeight * width) / height),\n            }));\n            const creationDate = Date.now();\n            const newName = `${creationDate}-${name}`;\n            const imageDetails = [{\n              name: newName, size, height, width, images: resImages,\n            }, file, e.target.src];\n            setNewImages((pics) => pics.concat([imageDetails]));\n          };\n          image.src = URL.createObjectURL(file);\n        });\n        files.map((file) => URL.revokeObjectURL(file)); // avoid memory leak\n      } else {\n        console.log('Setting snack message - error adding image as exceeding 15');\n        handleSnackMessage(`Unable to add ${files.length} images. Maximum images allowed pre memory is 15`);\n        setSnack(true);\n      }\n      //  console.log('set snack true, handleImageAdd');\n    }\n  };\n\n  const updateTitle = (value) => {\n    const resp = UpdateDetails('title', value);\n    if (resp) {\n      setTitle(value);\n    }\n  };\n\n  const updateDate = (value) => {\n    const resp = UpdateDetails('date', value);\n    if (resp) {\n      setDate(value);\n    }\n  };\n\n  const updateEditorState = (value, state) => {\n    const resp = UpdateDetails('story', value);\n    if (resp) {\n      setEditorState(state);\n    }\n  };\n\n  const handleClose = () => setOpen(false);\n\n  const handleBack = () => {\n    setActiveIndex(\n      (prevActiveStep) => (prevActiveStep - 1 + maxSteps) % maxSteps,\n    );\n  };\n\n  const handleNext = () => {\n    setActiveIndex((prevActiveStep) => (prevActiveStep + 1) % maxSteps);\n  };\n\n  const handlePhotoClick = (photo, event, index) => {\n    setOpen(true);\n    setActiveIndex(index);\n  };\n\n  const handleEditClick = () => setEdit(true);\n\n  const memoryTitle = (\n    <MemoryTitle\n      editable={edit}\n      text={title}\n      handleTitleUpdate={updateTitle}\n    />\n  );\n\n  const memoryDate = (\n    <MemoryDate editable={edit} prevDate={date} handleDateUpdate={updateDate} />\n  );\n\n  const storyLayout = (\n    <MemoryStory\n      editable={edit}\n      prevEditorState={editorState}\n      handleEditorStateUpdate={updateEditorState}\n    />\n  );\n\n  const photoLayout = (\n    <MemoryImages\n      editable={edit}\n      images={images}\n      handlePhotoClick={handlePhotoClick}\n      handleThumbnailUpdate={UpdateThumbnail}\n      deleteImage={deleteImage}\n      addImage={handleImageAdd}\n    />\n  );\n\n  const updateDone = (\n    <Button\n      variant=\"contained\"\n      component=\"label\"\n      onClick={() => setEdit(false)}\n      sx={{\n        color: 'primary.main',\n        borderRadius: 5,\n        backgroundColor: 'button.main',\n        padding: '6px 8px',\n      }}\n    >\n      <DoneIcon size=\"medium\" sx={{ paddingRight: 1 }} />\n      <Typography variant=\"body1\" color=\"muted.main\">Edit</Typography>\n    </Button>\n  );\n\n  console.log('preview', preview);\n\n  return (\n    <>\n      {edit ? (\n        <Stack\n          direction=\"row\"\n          justifyContent=\"flex-start\"\n          sx={{ backgroundColor: 'button.main', paddingX: 2, paddingY: 1 }}\n        >\n          {updateDone}\n        </Stack>\n      ) : <BackButton preview={preview} /> }\n      <Box\n        component=\"div\"\n        sx={{\n          backgroundColor: 'button.main',\n          margin: edit ? '5px' : 0,\n        }}\n      >\n        <MemoryContentStructure\n          header={memoryTitle}\n          subheader={memoryDate}\n          photoLayout={photoLayout}\n          storyLayout={storyLayout}\n          memoryID={memoryID}\n          bucket={bucket}\n          authURL={authURL}\n          handleEditClick={handleEditClick}\n          preview={preview}\n        />\n      </Box>\n      <MemoryCarousel\n        open={open}\n        title={title}\n        date={date}\n        images={images}\n        index={activeIndex}\n        handleNext={handleNext}\n        handleBack={handleBack}\n        handleClose={handleClose}\n      />\n      <SimpleSnackbar\n        snackBarOpen={snack}\n        message={snackMessage}\n        onClose={handleSnackBarClose}\n      />\n      <Dialog\n        open={addImageOpen}\n        fullWidth\n        sx={{\n          p: 1,\n        }}\n      >\n        <Card sx={{ maxWidth: 1, p: 1 }}>\n          <CardHeader title=\"Adding Images\" sx={{ textAlign: 'center' }} />\n          <Divider />\n          <CardContent>\n            <Typography>{uploadImageProgress}</Typography>\n            <Typography>{uploadImageStatus}</Typography>\n          </CardContent>\n        </Card>\n      </Dialog>\n\n    </>\n  );\n}\n\nMemoryContent.defaultProps = {\n  memTitle: 'Memory Title',\n  memDate: 'Memory Date',\n  memEditorState: EditorState.createWithText('Memory Text'),\n};\n\nMemoryContent.propTypes = {\n  memTitle: PropTypes.string,\n  memDate: PropTypes.string,\n  memEditorState: PropTypes.instanceOf(EditorState),\n  memoryID: PropTypes.string.isRequired,\n  bucket: PropTypes.string.isRequired,\n  authURL: PropTypes.string.isRequired,\n  memImages: PropTypes.arrayOf(\n    PropTypes.shape({\n      src: PropTypes.string,\n      width: PropTypes.number,\n      height: PropTypes.number,\n    }),\n  ).isRequired,\n  preview: PropTypes.bool.isRequired,\n};\n\nBackButton.propTypes = {\n  preview: PropTypes.bool.isRequired,\n};\n","import imageLoading from '../images/image-loading.gif';\n\nexport default [\n  {\n    key: 1, src: imageLoading, width: 667, height: 500,\n  },\n  {\n    key: 2, src: imageLoading, width: 667, height: 500,\n  },\n  {\n    key: 3, src: imageLoading, width: 375, height: 500,\n  },\n  {\n    key: 4, src: imageLoading, width: 667, height: 500,\n  },\n  {\n    key: 5, src: imageLoading, width: 375, height: 500,\n  },\n  {\n    key: 6, src: imageLoading, width: 667, height: 500,\n  },\n  {\n    key: 7, src: imageLoading, width: 667, height: 500,\n  },\n  {\n    key: 8, src: imageLoading, width: 667, height: 500,\n  },\n  {\n    key: 9, src: imageLoading, width: 667, height: 500,\n  },\n  {\n    key: 10, src: imageLoading, width: 667, height: 500,\n  },\n  {\n    key: 11, src: imageLoading, width: 375, height: 500,\n  },\n  {\n    key: 12, src: imageLoading, width: 375, height: 500,\n  },\n  {\n    key: 13, src: imageLoading, width: 375, height: 500,\n  },\n  {\n    key: 14, src: imageLoading, width: 375, height: 500,\n  },\n  {\n    key: 15, src: imageLoading, width: 667, height: 500,\n  },\n];\n","import Skeleton from '@mui/material/Skeleton';\nimport PhotoAlbum from 'react-photo-album';\n\nimport MemoryContentStructure from './MemoryContentStructure';\nimport loadingAlbum from '../../static/data/loading_album';\n\nexport default function MemoryContentLoading() {\n  return (\n    <MemoryContentStructure\n      header={(\n        <Skeleton\n          type=\"rectangular\"\n          sx={{\n            width: {\n              lg: '20%',\n              md: '30%',\n              xs: '70%',\n            },\n          }}\n        />\n  )}\n      subheader={(\n        <Skeleton\n          type=\"rectangular\"\n          sx={{\n            width: {\n              lg: '15%',\n              md: '20%',\n              xs: '60%',\n            },\n          }}\n        />\n  )}\n      photoLayout={(\n        <PhotoAlbum\n          layout=\"rows\"\n          photos={loadingAlbum}\n          spacing={2}\n        />\n  )}\n      storyLayout={(\n        <>\n          <Skeleton type=\"rectangular\" sx={{ width: '98%' }} />\n          <Skeleton type=\"rectangular\" sx={{ width: '98%' }} />\n          <Skeleton type=\"rectangular\" sx={{ width: '98%' }} />\n          <Skeleton type=\"rectangular\" sx={{ width: '98%' }} />\n          <Skeleton type=\"rectangular\" sx={{ width: '98%' }} />\n          <Skeleton type=\"rectangular\" sx={{ width: '50%' }} />\n          <Skeleton type=\"rectangular\" sx={{ width: '98%' }} />\n          <Skeleton type=\"rectangular\" sx={{ width: '98%' }} />\n          <Skeleton type=\"rectangular\" sx={{ width: '98%' }} />\n          <Skeleton type=\"rectangular\" sx={{ width: '98%' }} />\n          <Skeleton type=\"rectangular\" sx={{ width: '98%' }} />\n          <Skeleton type=\"rectangular\" sx={{ width: '50%' }} />\n          <Skeleton type=\"rectangular\" sx={{ width: '98%' }} />\n          <Skeleton type=\"rectangular\" sx={{ width: '98%' }} />\n          <Skeleton type=\"rectangular\" sx={{ width: '98%' }} />\n          <Skeleton type=\"rectangular\" sx={{ width: '98%' }} />\n          <Skeleton type=\"rectangular\" sx={{ width: '98%' }} />\n          <Skeleton type=\"rectangular\" sx={{ width: '50%' }} />\n          <Skeleton type=\"rectangular\" sx={{ width: '98%' }} />\n          <Skeleton type=\"rectangular\" sx={{ width: '98%' }} />\n          <Skeleton type=\"rectangular\" sx={{ width: '98%' }} />\n          <Skeleton type=\"rectangular\" sx={{ width: '98%' }} />\n          <Skeleton type=\"rectangular\" sx={{ width: '98%' }} />\n          <Skeleton type=\"rectangular\" sx={{ width: '50%' }} />\n        </>\n    )}\n    />\n  );\n}\n","import { useParams, Navigate } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport { useState, useEffect } from 'react';\nimport { EditorState, convertFromRaw } from 'draft-js';\n\nimport api from '../Api';\nimport BasePage from '../base_page';\nimport MemoryContent from './MemoryContent';\nimport MemoryContentLoading from './MemoryContentLoading';\nimport SimpleSnackbar from '../../components/simple_snackbar';\n\nasync function getMemory(\n  bucket,\n  authURL,\n  memoryId,\n  handleMemoryCallback,\n  handleMemoryError,\n) {\n  try {\n    const memoryData = await api.viewMemory(bucket, authURL, memoryId);\n    console.log(memoryData);\n    if (memoryData.status) {\n      handleMemoryError(memoryData);\n      return;\n    }\n    handleMemoryCallback(memoryData);\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nexport default function ViewMemory({ bucket, authURL }) {\n  const params = useParams();\n  const { memoryId } = params;\n  const [memory, setMemory] = useState();\n  const [snack, setSnack] = useState(null);\n  const [snackMessage, setSnackMessage] = useState(null);\n\n  const handleMemory = (mem) => setMemory(mem);\n\n  const [memError, setMemError] = useState(null);\n\n  const handleSnackMessage = (msg) => {\n    console.log('Setting snack message', msg);\n    setSnackMessage(msg);\n  };\n\n  const handleSnackBarClose = () => {\n    console.log('snack close, set snack false, message null');\n    setSnack(false);\n    setSnackMessage(null);\n  };\n\n  const handleMemoryError = (results) => {\n    if (results.status === 'unauthenticated') {\n      handleSnackMessage('You have been logged out. Navigating to login page');\n      setSnack(true);\n      setInterval(() => setMemError('unauthenticated'), 3000);\n    }\n\n    if (results.status === 'forbidden') {\n      handleSnackMessage('You do not have access to this memory. Navigating to memories page');\n      setSnack(true);\n      setInterval(() => setMemError('forbidden'), 3000);\n    }\n  };\n\n  useEffect(() => {\n    getMemory(bucket, authURL, memoryId, handleMemory, handleMemoryError);\n    const interval = setInterval(\n      () => getMemory(bucket, authURL, memoryId, handleMemory, handleMemoryError),\n      300000,\n    );\n    return () => clearInterval(interval);\n  }, []);\n\n  if (memError === 'unauthenticated') {\n    return <Navigate to=\"/login\" />;\n  }\n\n  if (memError === 'forbidden') {\n    return <Navigate to=\"/memories\" />;\n  }\n\n  console.log('memory', memory, 'memError', memError);\n  return memory ? (\n    <BasePage>\n      <MemoryContent\n        memTitle={memory.title}\n        memDate={memory.date}\n        memImages={memory.pictures.photos}\n        memEditorState={EditorState.createWithContent(convertFromRaw(memory.contentState))}\n        memoryID={memoryId}\n        bucket={bucket}\n        authURL={authURL}\n        preview={false}\n      />\n      <SimpleSnackbar\n        snackBarOpen={snack}\n        message={snackMessage}\n        onClose={handleSnackBarClose}\n      />\n    </BasePage>\n  ) : (\n    <BasePage>\n      <MemoryContentLoading />\n      <SimpleSnackbar\n        snackBarOpen={snack}\n        message={snackMessage}\n        onClose={handleSnackBarClose}\n      />\n    </BasePage>\n  );\n}\n\nViewMemory.propTypes = {\n  bucket: PropTypes.string.isRequired,\n  authURL: PropTypes.string.isRequired,\n};\n"],"sourceRoot":""}