"use strict";(self.webpackChunkprelaunch=self.webpackChunkprelaunch||[]).push([[413],{44768:function(e,t,n){n.d(t,{Z:function(){return r}});var i=n(32913),a=n(36151),o=n(80184);function l(e){var t=e.children,n=e.onClick,i=e.name;return(0,o.jsx)(a.Z,{id:i,variant:"contained",component:"label",onClick:n,sx:{color:"muted.main",borderRadius:15,backgroundColor:"button.main",padding:"6px 8px","&:hover":{color:"muted.main",backgroundColor:"button.main"}},children:t})}function r(e){var t=e.handleChange;return(0,o.jsxs)(l,{name:"add",children:[(0,o.jsx)("input",{type:"file",hidden:!0,multiple:!0,accept:"image/*",onChange:t}),(0,o.jsx)(i.Z,{sx:{fontSize:"2rem"}}),"Add Images"]})}l.defaultProps={onClick:function(){}}},43188:function(e,t,n){n.r(t),n.d(t,{default:function(){return be}});var i=n(29439),a=n(72791),o=n(93433),l=n(64554),r=n(44768),s=n(15671),u=n(43144),h=n(20890),c=n(12065),d=n(1413),g=n(13400),f=n(27247),v=n(20068);function p(e,t,n,i){return i-e[t]>=e[n]-i?n:t}var x={getCut:function(){return["v","h"][Math.round(Math.random())]},findClosest:function(e,t){var n=e.length;if(t<=e[0])return 0;if(t>=e[n-1])return n-1;for(var i=0,a=n,o=0;i<a;){if(e[o=(i+a)/2]===t)return o;if(t<e[o]){if(o>0&&t>e[o-1])return p(e,o-1,o,t);a=o}else{if(o<n-1&&t<e[o+1])return p(e,o,o+1,t);i=o+1}}return o},findImgPair:function(e,t){for(var n=0,i=e.length-1,a=n,o=i,l=Math.abs(e[n]+e[i]-t);n<=i;)if(e[n]+e[i]>t)Math.abs(e[n]+e[i]-t)<l&&(l=Math.abs(e[n]+e[i]-t),a=n,o=i),i-=1;else{if(!(e[n]+e[i]<=t)){a=n,o=i;break}Math.abs(e[n]+e[i]-t)<l&&(l=Math.abs(e[n]+e[i]-t),a=n,o=i),n+=1}return Math.round(Math.random())?[a,o]:[o,a]},getAspectRatio:function(e,t,n){return"v"===e?t+n:t*n/(t+n)}},m=n(80184),b=function(){function e(t){(0,s.Z)(this,e),this.value=t,this.left=null,this.right=null}return(0,u.Z)(e,[{key:"display",value:function(){var e=[],t=this.value,n=t.cut,i=t.title,a=t.aspectRatio;return null===this?null:("cut"in this.value&&e.push([n,a]),"title"in this.value&&e.push([i,a]),null!==this.left&&(e=e.concat(this.left.display())),null!==this.right&&(e=e.concat(this.right.display())),e)}},{key:"copy",value:function(){if(null===this)return null;var t=new e((0,d.Z)({},this.value));return null!=this.left&&(t.left=this.left.copy()),null!=this.right&&(t.right=this.right.copy()),t}},{key:"RenderImage",value:function(e,t,n,i,a,o){console.log("in render image",this.value.title,n);var r=this.value,s=r.width,u=r.title,h=r.url;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(l.Z,{component:"img",title:u,alt:u,width:s,src:h,sx:{position:"absolute",padding:"".concat(e,"px"),borderRadius:"".concat(t,"px"),left:this.value.x+o,top:this.value.y+a}},u),!0===n?(0,m.jsx)(v.Z,{title:"Remove Image",children:(0,m.jsx)(g.Z,{size:"medium",sx:{color:(0,c.Fq)("#000",.7),bgcolor:(0,c.Fq)("#fff",.4),position:"absolute",top:this.value.y+5+a,left:this.value.x+this.value.width,padding:0,px:"4px",borderRadius:"5px 0 0 5px",transform:"translate(-100%)"},onClick:function(){return i(u)},children:(0,m.jsx)(f.Z,{size:"medium"})})}):null]})}},{key:"DOMDisplay",value:function(e,t,n,i,a,o){var l=this.value.cut;return null===this?null:l?(0,m.jsxs)(m.Fragment,{children:[this.left.DOMDisplay(e,t,n,i,a,o),this.right.DOMDisplay(e,t,n,i,a,o)]}):"title"in this.value?this.RenderImage(e,t,n,i,a,o):null}},{key:"ResizeImage",value:function(e){var t=document.createElement("canvas");t.width=this.value.naturalWidth,t.height=this.value.naturalHeight;var n,i,a=t.getContext("2d"),o=this.value.naturalWidth,l=this.value.naturalHeight,r=Math.floor(Math.log2(this.value.naturalWidth/this.value.width));if(console.log("scalefactor",r,this.value.naturalWidth,this.value.width,this.value.naturalHeight,this.value.height),0===r)a.drawImage(e,0,0,o,l,0,0,this.value.width,this.value.height);else{for(var s=0;s<r;s+=1)i=(n=o>>1)/this.value.aspectRatio,0===s?a.drawImage(e,0,0,o,l,0,0,n,i):a.drawImage(t,0,0,o,l,0,0,n,i),o=n,l=i;console.log("last scale down",o,l,this.value.width,this.value.height),a.drawImage(t,0,0,o,l,0,0,this.value.width,this.value.height)}return t}},{key:"ImageStyling",value:function(e,t,n,i,a,o){var l=this.value.x+n+o,r=this.value.y+n+a,s=this.value.width-2*n,u=s/this.value.aspectRatio;e.save(),e.beginPath(),e.moveTo(l+i,r),e.lineTo(l+s-i,r),e.quadraticCurveTo(l+s,r,l+s,r+i),e.lineTo(l+s,r+u-i),e.quadraticCurveTo(l+s,r+u,l+s-i,r+u),e.lineTo(l+i,r+u),e.quadraticCurveTo(l,r+u,l,r+u-i),e.lineTo(l,r+i),e.quadraticCurveTo(l,r,l+i,r),e.closePath(),e.clip(),e.drawImage(t,0,0,this.value.width,this.value.height,l,r,s,u),e.restore()}},{key:"CanvasDisplay",value:function(e,t,n,i,a){var o=this;if("cut"in this.value&&(this.left.CanvasDisplay(e,t,n,i,a),this.right.CanvasDisplay(e,t,n,i,a)),"title"in this.value){var l=e.getContext("2d"),r=new Image;r.onload=function(){var e=o.ResizeImage(r),s=e.getContext("2d");console.log("image styling",o.value.title,o.value.x+a,o.value.y+i),o.ImageStyling(l,e,t,n,i,a),s.clearRect(0,0,e.width,e.height)},r.src=this.value.url}}},{key:"generate",value:function(t,n,a){var l=t.map((function(e){return e.naturalWidth/e.naturalHeight}));if(a<1)return[];if(1===a){var r=x.findClosest(l,n);return this.value=t[r],this.left=null,this.right=null,[].concat((0,o.Z)(t.slice(0,r)),(0,o.Z)(t.slice(r+1)))}var s,u,h=x.getCut();if(this.value={cut:h,targetAspectRatio:n},2===a){var c=x.findImgPair(l,n),d=(0,i.Z)(c,2),g=d[0],f=d[1];return this.value.aspectRatio=x.getAspectRatio(this.value.cut,t[g].aspectRatio,t[f].aspectRatio),this.left=new e(t[g]),this.right=new e(t[f]),t.filter((function(e,t){return![g,f].includes(t)}))}return this.left=new e({cut:x.getCut()}),this.right=new e({cut:x.getCut()}),u="v"===h?2*n:n/2,s=this.left.generate(t,u,a-Math.floor(a/2)),s=this.right.generate(s,u,Math.floor(a/2)),this.value.aspectRatio=x.getAspectRatio(this.value.cut,this.left.value.aspectRatio,this.right.value.aspectRatio),s}},{key:"adjust",value:function(e){var t=0;return null===this||null!==this.left&&null!==this.right&&(this.value.aspectRatio>this.value.targetAspectRatio*e&&(this.value.cut="h",t+=1),this.value.aspectRatio<this.value.targetAspectRatio/e&&(this.value.cut="v",t+=1),"v"===this.value.cut?(this.left.value.targetAspectRatio=this.value.targetAspectRatio/2,this.right.value.targetAspectRatio=this.value.targetAspectRatio/2):(this.left.value.targetAspectRatio=2*this.value.targetAspectRatio,this.right.value.targetAspectRatio=2*this.value.targetAspectRatio),t+=this.left.adjust(e)+this.right.adjust(e),this.value.aspectRatio=x.getAspectRatio(this.value.cut,this.left.value.aspectRatio,this.right.value.aspectRatio)),t}},{key:"addSize",value:function(e,t,n,i,a,o){"v"===a?(this.value.height=t,this.value.width=this.value.height*this.value.aspectRatio):(this.value.width=e,this.value.height=this.value.width/this.value.aspectRatio),"left"===o?(this.value.x=n,this.value.y=i):"h"===a?(this.value.y=i+t-this.value.height,this.value.x=n):(this.value.x=n+e-this.value.width,this.value.y=i),null!==this.left&&this.left.addSize(this.value.width,this.value.height,this.value.x,this.value.y,this.value.cut,"left"),null!==this.right&&this.right.addSize(this.value.width,this.value.height,this.value.x,this.value.y,this.value.cut,"right")}}]),e}(),Z=function(){function e(t){if((0,s.Z)(this,e),void 0===this.root)return this.root=new b(t),this}return(0,u.Z)(e,[{key:"display",value:function(){return null!==this.root?this.root.display():null}},{key:"DOMDisplay",value:function(e,t,n,i,a,o,r,s,u,d,g){console.log("Y offset",a,this.root.value.height,(a-this.root.value.height)/2);var f,v=(n-this.root.value.height)/2,p=(i-this.root.value.width)/2;return e&&u.length>0&&(v+=50),u.length>0&&e&&(f=(0,m.jsx)(h.Z,{sx:{width:"100%",position:"absolute",top:5,left:"50%",transform:"translate(-50%, 0)",bgcolor:(0,c.Fq)("#1c1c1c",.7),padding:1,color:"button.main",margin:"auto",textAlign:"center",display:"inline-block"},children:u})),u.length>0&&!e&&(f=(0,m.jsx)(h.Z,{sx:{width:"100%",position:"absolute",bottom:5,left:"50%",transform:"translate(-50%, 0)",bgcolor:(0,c.Fq)("#1c1c1c",.7),padding:1,color:"button.main",margin:"auto",textAlign:"center",display:"inline-block"},children:u})),null!==this.root?(0,m.jsxs)(l.Z,{width:i,height:a,sx:{position:"relative",backgroundColor:s,outline:"1px solid white"},children:[this.root.DOMDisplay(o,r,d,g,v,p),f]}):null}},{key:"CanvasDisplay",value:function(e,t,n,i,a,o,l,r,s){if(console.log(r),null!==this.root){var u=(t-this.root.value.height)/2,h=(e-this.root.value.width)/2;r&&l.length>0&&(u+=50);var c=n.getContext("2d");console.log("canvas 2d context",c),c.fillStyle=o,c.textAlign="center",console.log("canvas dimensions",n.width,n.height),c.fillRect(0,0,n.width,n.height),this.root.CanvasDisplay(n,i,a,u,h),l.length>0&&(c.fillStyle="#1c1c1cb3",c.fillRect(0,n.height-34*s,n.width,24*s),console.log(l,n.width/2,n.height-5),c.font="".concat(s,"rem Arial"),c.fillStyle="white",c.shadowColor="transparent",r?c.fillText(l,n.width/2,13*s):c.fillText(l,n.width/2,n.height-13*s))}}},{key:"generateCollageTree",value:function(e,t){console.log("In generate collage tree"),this.root.generate(e,t,e.length)}},{key:"adjust",value:function(e){console.log("In adjust");for(var t=0,n=this.copy(),i=this.root.value.aspectRatio,a=this.root.value.targetAspectRatio*(1-e),o=1e3;t<100&&o>0;){console.log(t,o,i),o=this.root.adjust(e),t+=1;var l=this.root.value.aspectRatio-this.root.value.targetAspectRatio;if((l>0&&this.root.value.aspectRatio<i||i<this.root.value.targetAspectRatio&&this.root.value.aspectRatio>this.root.value.targetAspectRatio)&&(i=this.root.value.aspectRatio,n=this.copy()),l>0&&l<a||0===l)break}return[i,n]}},{key:"copy",value:function(){var t=new e({});return t.root=this.root.copy(),t}},{key:"addSize",value:function(e,t,n){console.log("In add size",e,t,n,e/n),this.root.value.width=e,this.root.value.height=e/n,this.root.value.x=0,this.root.value.y=0;var i=this.root.value,a=i.width,o=i.height,l=i.x,r=i.y,s=i.cut;null!==this.root.left&&this.root.left.addSize(a,o,l,r,s,"left"),null!==this.root.right&&this.root.right.addSize(a,o,l,r,s,"right")}}]),e}();function w(e){var t=e.paperWidth,n=e.paperHeight,o=e.generate,l=e.generateCallback,r=e.topText,s=e.imageHeight,u=e.imageWidth,h=e.images,c=e.aspectRatio,d=e.canvasWidth,g=e.canvasHeight,f=e.tolerance,v=e.padding,p=e.borderRadius,x=e.color,b=e.text,w=e.refresh,j=e.handleRefresh,C=e.removeImage,y=e.handleRemoveImage,R=e.stopRemoveImage,k=(0,a.useRef)(),I=(0,a.useState)(null),W=(0,i.Z)(I,2),S=W[0],A=W[1],D=(0,a.useState)(null),H=(0,i.Z)(D,2),T=H[0],z=H[1],E=(0,a.useState)(null),P=(0,i.Z)(E,2),M=P[0],F=P[1],q=(0,a.useState)(null),L=(0,i.Z)(q,2),O=L[0],U=L[1],V=function(e){return"rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(e.a,")")},B=function(e){null!=e&&z(e.DOMDisplay(r,u,s,d,g,v,p,V(x),b,C,y))},X=function(){console.log("finding best adjust tree"),F(null);var e=new Z({cut:"v"}),t=h.sort((function(e,t){return e.aspectRatio<=t.aspectRatio?1:-1}));e.generateCollageTree(t,u/s);var n=e.adjust(1-f),a=(0,i.Z)(n,2),o=a[0],l=a[1];return F(o),U(l),[o,l]};return(0,a.useEffect)((function(){return A(k.current)}),[S]),(0,a.useEffect)((function(){var e=X(),t=(0,i.Z)(e,2),n=t[0],a=t[1];a.addSize(u,s,n),B(a)}),[]),(0,a.useEffect)((function(){z(null);var e=X(),t=(0,i.Z)(e,2),n=t[0],a=t[1];a.addSize(u,s,n),B(a)}),[h,c]),(0,a.useEffect)((function(){return B(O)}),[v,p,x,b,r]),(0,a.useEffect)((function(){null!=O&&O.addSize(u,s,M),B(O)}),[u,s]),(0,a.useEffect)((function(){var e=b.length>0?50*n/g:0,i=n-e,a=(n-e)*c;if(!0===o){var s=O.copy();s.addSize(a,i,M),S.width=t,S.height=n,s.CanvasDisplay(t,i,S,v*t/d,p*t/d,V(x),b,r,t/d),setTimeout((function(){var e=document.createElement("a");e.download="collage-".concat(t,"X").concat(n,"-").concat(Date.now(),".png"),e.href=k.current.toDataURL(),e.click(),l()}),"5000")}}),[o]),(0,a.useEffect)((function(){if(!0===w){console.log("refresh is true"),R();var e=X(),t=(0,i.Z)(e,2),n=t[0],a=t[1];a.addSize(u,s,n),B(a),j()}}),[w]),(0,a.useEffect)((function(){return B(O)}),[C]),(0,m.jsxs)(m.Fragment,{children:[T,(0,m.jsx)("canvas",{ref:k,style:{display:"none"}})]})}var j=n.p+"static/media/back_blur.3b20d1aec4b51c2091f2.webp";function C(e){var t=e.paperWidth,n=e.paperHeight,i=e.generate,a=e.generateCallback,s=e.topText,u=e.imageWidth,h=e.imageHeight,c=e.aspectRatio,d=e.images,g=e.imgCount,f=e.padding,v=e.radius,p=e.text,x=e.color,b=e.setImages,Z=e.setImageCount,C=e.width,y=e.height,R=e.refresh,k=e.handleRefresh,I=e.removeImage,W=e.stopRemoveImage,S=e.handleLoad;return 0===d.length?(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(l.Z,{sx:{width:C,height:y,position:"relative",backgroundImage:"url(".concat(j,")"),backgroundSize:C,objectFit:"contain",backgroundRepeat:"no-repeat",alignItems:"center"},children:(0,m.jsx)(l.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:(0,m.jsx)(r.Z,{handleChange:S})})})}):d.length>0&&d.length===g?(console.log("rendering collage",d),(0,m.jsx)(w,{paperWidth:t,paperHeight:n,generate:i,generateCallback:a,topText:s,imageHeight:h,imageWidth:u,images:d,aspectRatio:c,canvasWidth:C,canvasHeight:y,padding:f,borderRadius:v,tolerance:.1,text:p,color:x,refresh:R,handleRefresh:k,removeImage:I,handleRemoveImage:function(e){var t=d.findIndex((function(t){return t.title===e}));b([].concat((0,o.Z)(d.slice(0,t)),(0,o.Z)(d.slice(t+1)))),Z((function(e){return e-1}))},stopRemoveImage:W})):(0,m.jsx)("div",{children:"Loading..."})}var y=n(35527),R=n(77849),k=n(59646),I=n(43950),W=n(41286),S=n(61223),A=n(32913);function D(e){var t=e.controlsRef,n=e.onRefresh,o=e.onDelete,l=e.onAdd,r=e.onText,s=e.onEdit,u=e.clearDelete,h=(0,a.useState)(),d=(0,i.Z)(h,2),g=d[0],v=d[1];return(0,m.jsx)(y.Z,{ref:t,sx:{position:"fixed",bottom:0,left:0,right:0,mt:1,backgroundColor:"black",borderRadius:0},elevation:4,children:(0,m.jsxs)(R.Z,{showLabels:!0,value:g,onChange:function(e,t){console.log(t),u(),v(t),"refresh"===t?n():"delete"===t?o():"add"===t?(console.log(e),l()):"text"===t?(console.log(e),r()):"edit"===t?(console.log(e),s()):console.log("functionality for ",t,"not yet implemented")},sx:{fontWeight:"bold",backgroundColor:(0,c.Fq)("#fff",.2)},children:[(0,m.jsx)(k.Z,{label:"Refresh",value:"refresh",icon:(0,m.jsx)(I.Z,{}),sx:{fontWeight:"bold",color:"gray"}}),(0,m.jsx)(k.Z,{label:"Delete",value:"delete",icon:(0,m.jsx)(f.Z,{}),sx:{fontWeight:"bold",color:"gray"}}),(0,m.jsx)(k.Z,{label:"Edit",value:"edit",icon:(0,m.jsx)(W.Z,{}),sx:{fontWeight:"bold",color:"gray"}}),(0,m.jsx)(k.Z,{label:"Add",value:"add",icon:(0,m.jsx)(A.Z,{}),sx:{fontWeight:"bold",color:"gray"}}),(0,m.jsx)(k.Z,{label:"Text",value:"text",icon:(0,m.jsx)(S.Z,{}),sx:{fontWeight:"bold",color:"gray"}})]})})}var H=n(50533),T=n(67394);function z(e){var t=e.headerRef;return(0,m.jsxs)(y.Z,{ref:t,sx:{display:"flex",alignItems:"center",justifyContent:"center",p:1,backgroundColor:(0,c.Fq)("#fff",.1),borderRadius:0},elevation:3,children:[(0,m.jsx)(l.Z,{sx:{position:"absolute",left:"5px"},children:(0,m.jsx)(H.Z,{href:"/collages",color:"muted.main",underline:"none",children:(0,m.jsx)(l.Z,{sx:{display:"flex",alignItems:"center"},children:(0,m.jsx)(T.Z,{})})})}),(0,m.jsx)(h.Z,{variant:"h4",component:"h4",sx:{color:(0,c.Fq)("#fff",.5)},children:"Collage Maker"})]})}var E=n(53329),P=n(73518),M=n(88014);function F(e){var t=e.actionsRef,n=e.onDownload,o=(0,a.useState)(),l=(0,i.Z)(o,2),r=l[0],s=l[1];return(0,m.jsxs)(R.Z,{ref:t,showLabels:!0,value:r,onChange:function(e,t){console.log(t),s(t),"download"===t?n():console.log("functionality for ",t,"not yet implemented")},sx:{py:1,fontWeight:"bold",backgroundColor:(0,c.Fq)("#fff",.2)},children:[(0,m.jsx)(k.Z,{label:"Save",value:"save",icon:(0,m.jsx)(E.Z,{}),sx:{fontWeight:"bold",color:"gray"}}),(0,m.jsx)(k.Z,{label:"Download",value:"download",icon:(0,m.jsx)(P.Z,{}),sx:{fontWeight:"bold",color:"gray"}}),(0,m.jsx)(k.Z,{label:"Print",value:"print",icon:(0,m.jsx)(M.Z,{}),sx:{fontWeight:"bold",color:"gray"}})]})}var q=n(4942),L=n(4708),O=n(5519),U=n(33402),V=n(81748),B=function(e){var t,n=e.anchor;return(0,m.jsx)(l.Z,{sx:(t={width:30,height:6,backgroundColor:O.Z[300],borderRadius:3,position:"absolute"},(0,q.Z)(t,"top"===n?"bottom":"top",8),(0,q.Z)(t,"left","calc(50% - 15px)"),t)})};function X(e){var t=e.anchor,n=e.open,i=e.title,a=e.toggleDrawer,o=e.drawerChild;return(0,m.jsxs)(l.Z,{children:[(0,m.jsx)(L.ZP,{}),(0,m.jsxs)(V.Z,{anchor:t,open:n,onClose:a,onOpen:a,swipeAreaWidth:56,disableSwipeToOpen:!1,ModalProps:{keepMounted:!1},PaperProps:{sx:{borderRadius:"top"===t?"0 0 15px 15px":"15px 15px 0 0",backgroundColor:"black"}},children:[(0,m.jsxs)(l.Z,{sx:{visibility:n?"visible":"hidden",backgroundColor:(0,c.Fq)("#fff",.1)},children:[(0,m.jsx)(B,{anchor:t}),(0,m.jsx)(h.Z,{sx:{pt:3,pb:1,color:"gray",fontWeight:"bold",textAlign:"center"},children:i})]}),o||(0,m.jsx)(l.Z,{sx:{px:2,pb:2,height:"100%",overflow:"auto"},children:(0,m.jsx)(U.Z,{variant:"rectangular",height:"50px"})})]})]})}var J=n(53767),N=n(17133),Y=n(27391),_=n(79012),G=n(85523),K=n(94454);function Q(e){var t=e.text,n=e.handleTextChange,o=e.topText,r=e.handlePositionChange,s=(0,a.useState)(""),u=(0,i.Z)(s,1)[0];return(0,m.jsxs)(l.Z,{sx:{px:1,backgroundColor:(0,c.Fq)("#fff",.2)},children:[(0,m.jsxs)(J.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",spacing:2,children:[(0,m.jsx)(h.Z,{sx:{fontWeight:"bold",color:"gray"},children:" Collage Text "}),(0,m.jsxs)(_.Z,{row:!0,children:[(0,m.jsx)(N.Z,{label:"Position"}),(0,m.jsx)(G.Z,{control:(0,m.jsx)(K.Z,{checked:!1===o,onChange:function(){return r(!1)}}),label:"Bottom"}),(0,m.jsx)(G.Z,{control:(0,m.jsx)(K.Z,{checked:!0===o,onChange:function(){return r(!0)}}),label:"Top"})]})]}),(0,m.jsx)(Y.Z,{variant:"outlined",label:"",defaultValue:t,onChange:n,sx:{width:"100%",mb:2},InputProps:{sx:{backgroundColor:"white"}},helperText:u||"E.g. Marriage Anniversary 2018",error:!!u})]})}var $=n(10889);function ee(e){var t=e.padding,n=e.handlePaddingChange;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(h.Z,{sx:{fontWeight:"bold",color:"gray"},children:"Padding"}),(0,m.jsx)($.ZP,{"aria-label":"Temperature",defaultValue:0,value:t,valueLabelDisplay:"auto",step:1,marks:!0,min:0,max:10,size:"large",onChange:n,sx:{color:"white"}})]})}function te(e){var t=e.radius,n=e.handleRadiusChange;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(h.Z,{sx:{fontWeight:"bold",color:"gray"},children:"Border Radius"}),(0,m.jsx)($.ZP,{"aria-label":"Temperature",defaultValue:0,value:t,valueLabelDisplay:"auto",step:5,marks:!0,min:0,max:40,onChange:n,sx:{color:"white"}})]})}var ne=n(63108);function ie(e){var t=e.color,n=e.displayColorPicker,i=e.handleClick,a=e.handleClose,o=e.handleChange;return console.log(t,n),(0,m.jsxs)(J.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",spacing:2,sx:{my:2},children:[(0,m.jsx)(h.Z,{sx:{fontWeight:"bold",color:"gray"},children:"Background Color"}),(0,m.jsx)(l.Z,{component:"div",sx:{padding:"5px",background:"#fff",borderRadius:"1px",boxShadow:"0 0 0 1px rgba(0,0,0,.1)",display:"inline-block",cursor:"pointer"},onClick:i,children:(0,m.jsx)(l.Z,{component:"div",sx:{width:"72px",height:"28px",borderRadius:"2px",background:"rgba(".concat(t.r,", ").concat(t.g,", ").concat(t.b,", ").concat(t.a,")")}})}),n?(0,m.jsxs)(l.Z,{component:"div",sx:{position:"absolute",zIndex:"2"},children:[(0,m.jsx)(l.Z,{component:"div",sx:{position:"fixed",top:"0px",right:"0px",bottom:"50px",left:"0px"},onClick:a}),(0,m.jsx)(ne.AI,{color:t,onChange:o})]}):null]})}function ae(e){var t=e.padding,n=e.handlePaddingChange,i=e.color,a=e.displayColorPicker,o=e.handleColorChange,r=e.handleClose,s=e.handleClick,u=e.radius,h=e.handleRadiusChange;return(0,m.jsxs)(l.Z,{sx:{p:2,backgroundColor:(0,c.Fq)("#fff",.2)},children:[(0,m.jsx)(ee,{padding:t,handlePaddingChange:n}),(0,m.jsx)(ie,{color:i,displayColorPicker:a,handleChange:o,handleClose:r,handleClick:s}),(0,m.jsx)(te,{radius:u,handleRadiusChange:h})]})}var oe=n(36151),le=n(5574),re=n(65661),se=n(97123),ue=n(39157),he=n(51691),ce=n(23786),de=n(99321),ge=n(30829),fe=n(68096);function ve(e){var t=e.open,n=e.onClick,o=e.onClose,l=e.sizes,r=(0,a.useState)(""),s=(0,i.Z)(r,2),u=s[0],h=s[1];return(0,m.jsxs)(le.Z,{open:t,fullWidth:!0,children:[(0,m.jsx)(re.Z,{sx:{textAlign:"center"},children:"Download Collage"}),(0,m.jsxs)(ue.Z,{dividers:!0,sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,m.jsx)(he.Z,{sx:{display:"inline",pr:1},children:"Choose collage size"}),(0,m.jsxs)(fe.Z,{fullWidth:!0,sx:{maxWidth:"60%"},children:[(0,m.jsx)(ge.Z,{id:"demo-simple-select-label",children:"Download Size"}),(0,m.jsx)(de.Z,{labelId:"demo-simple-select-label",id:"demo-simple-select",defaultValue:"A4",value:u,label:"Download Size",onChange:function(e){return h(e.target.value)},children:Object.keys(l).map((function(e){return(0,m.jsx)(ce.Z,{value:e,children:l[e].text},l[e].text)}))})]})]}),(0,m.jsxs)(se.Z,{children:[(0,m.jsx)(oe.Z,{variant:"outlined",disabled:0===u.length,onClick:function(){console.log(l[u].width,l[u].height,n),n(l[u].width,l[u].height),h("")},children:"Download"}),(0,m.jsx)(oe.Z,{variant:"text",onClick:function(){h(""),o()},children:"Cancel"})]})]})}var pe=n(28257),xe=n(76476);function me(e,t){var n=(0,a.useState)(t),o=(0,i.Z)(n,2),l=o[0],r=o[1];return(0,a.useEffect)((function(){var t,n=(t=e,JSON.parse(localStorage.getItem(t)));n&&r(n)}),[]),(0,a.useEffect)((function(){console.log("in local state",l,e),localStorage.setItem(e,JSON.stringify(l))}),[l]),[l,r]}var be=function(){var e=(0,a.useRef)(),t=(0,a.useRef)(),n=(0,a.useRef)(),o=(0,a.useState)(0),r=(0,i.Z)(o,2),s=r[0],u=r[1],h=.7,c=(0,a.useRef)(),d=me("color",{r:0,g:0,b:0,a:1}),g=(0,i.Z)(d,2),f=g[0],v=g[1],p=me("paperWidth",0),x=(0,i.Z)(p,2),b=x[0],Z=x[1],w=me("paperHeight",0),j=(0,i.Z)(w,2),y=j[0],R=j[1],k=me("displayColorPicker",!1),I=(0,i.Z)(k,2),W=I[0],S=I[1],A=me("generate",!1),H=(0,i.Z)(A,2),T=H[0],E=H[1],P=me("height",0),M=(0,i.Z)(P,2),q=M[0],L=M[1],O=me("imageHeight",0),U=(0,i.Z)(O,2),V=U[0],B=U[1],J=me("imageWidth",0),N=(0,i.Z)(J,2),Y=N[0],_=N[1],G=me("images",[]),K=(0,i.Z)(G,2),$=K[0],ee=K[1],te=me("imgCount",0),ne=(0,i.Z)(te,2),ie=ne[0],oe=ne[1],le=me("maxHeight",0),re=(0,i.Z)(le,2),se=re[0],ue=re[1],he=me("maxWidth",0),ce=(0,i.Z)(he,2),de=ce[0],ge=ce[1],fe=me("controlsOpen",!1),be=(0,i.Z)(fe,2),Ze=be[0],we=be[1],je=me("padding",2),Ce=(0,i.Z)(je,2),ye=Ce[0],Re=Ce[1],ke=me("radius",5),Ie=(0,i.Z)(ke,2),We=Ie[0],Se=Ie[1],Ae=me("refresh",!1),De=(0,i.Z)(Ae,2),He=De[0],Te=De[1],ze=me("removeImage",!1),Ee=(0,i.Z)(ze,2),Pe=Ee[0],Me=Ee[1],Fe=me("text",""),qe=(0,i.Z)(Fe,2),Le=qe[0],Oe=qe[1],Ue=me("title",""),Ve=(0,i.Z)(Ue,2),Be=Ve[0],Xe=Ve[1],Je=me("topText",!1),Ne=(0,i.Z)(Je,2),Ye=Ne[0],_e=Ne[1],Ge=me("width",0),Ke=(0,i.Z)(Ge,2),Qe=Ke[0],$e=Ke[1],et=me("open",!1),tt=(0,i.Z)(et,2),nt=tt[0],it=tt[1],at=(0,a.useState)(null),ot=(0,i.Z)(at,2),lt=ot[0],rt=ot[1],st=function(){console.log("max usable dimensions",window.innerWidth,window.innerHeight-s,s),ge(window.innerWidth),ue(window.innerHeight-s),(window.innerHeight-s)*h<=window.innerWidth?($e((window.innerHeight-s)*h),L(window.innerHeight-s),console.log("collage dimensions",(window.innerHeight-s)*h,window.innerHeight-s)):($e(window.innerWidth),L(window.innerWidth/h))},ut=function(e){if(e.target.files){oe((function(t){return t+e.target.files.length}));var t=Array.from(e.target.files);t.forEach((function(e){var t=new Image;t.onload=function(t){var n=t.target,i=Date.now(),a="".concat(i,"-").concat(e.name);ee((function(e){return e.concat([{title:a,url:n.src,naturalHeight:n.naturalHeight,naturalWidth:n.naturalWidth,aspectRatio:n.naturalWidth/n.naturalHeight}])}))},t.src=URL.createObjectURL(e)})),t.map((function(e){return URL.revokeObjectURL(e)}))}},ht=function(e){return Re(e.target.value)},ct=function(e){return Se(e.target.value)},dt=function(){return S((function(e){return!e}))},gt=function(){return S(!1)},ft=function(e){return v(e.rgb)},vt=function(e){var t=e.target;Oe(t.value),t.value.length>0?(_((q-50)*h),B(q-50)):(_(Qe),B(q))},pt=function(){return(0,m.jsx)(Q,{text:Le,handleTextChange:vt,topText:Ye,handlePositionChange:_e})},xt=function(){return(0,m.jsx)(ae,{padding:ye,handlePaddingChange:ht,color:f,displayColorPicker:W,handleColorChange:ft,handleClose:gt,handleClick:dt,radius:We,handleRadiusChange:ct})};return(0,a.useLayoutEffect)((function(){console.log("setting otherHeight effect"),e.current&&t.current&&n.current&&(console.log("other heights",e.current.offsetHeight,t.current.offsetHeight,n.current.offsetHeight),u(e.current.offsetHeight+t.current.offsetHeight+n.current.offsetHeight))}),[e.current,t.current,n.current]),(0,a.useEffect)((function(){return st()}),[s]),(0,a.useEffect)((function(){return rt(pt)}),[Le,Ye]),(0,a.useEffect)((function(){return st(),window.addEventListener("resize",st),function(){return window.removeEventListener("resize",st)}}),[]),(0,a.useEffect)((function(){Le.length>0?(_((q-50)*h),B(q-50)):(_e(!1),_(Qe),B(q))}),[Qe,q,Le]),(0,a.useEffect)((function(){return rt(xt)}),[ye,We,f,W]),console.log(f,T),(0,m.jsxs)(l.Z,{component:"div",sx:{backgroundColor:"black"},children:[(0,m.jsx)(z,{headerRef:e}),(0,m.jsx)(F,{actionsRef:t,onDownload:function(){return it(!0)}}),nt?(0,m.jsx)(xe.Z,{children:(0,m.jsx)(ve,{open:nt,onClick:function(e,t){Z(e),R(t),E(!0),it(!1)},onClose:function(){return it(!1)},sizes:{A4:{width:2480,height:3508,text:"8 X 11 inches"},A3:{width:3508,height:4961,text:"11 X 16 inches"}}})}):null,(0,m.jsx)(l.Z,{width:de,height:se,sx:{display:"flex",alignItems:Ze?"start":"center",justifyContent:"center"},children:(0,m.jsx)(C,{paperWidth:b,paperHeight:y,aspectRatio:h,color:f,generate:T,generateCallback:function(){E(!1),Z(0),R(0)},handleLoad:ut,handleRefresh:function(){return Te(!1)},height:q,imageHeight:V,imageWidth:Y,images:$,imgCount:ie,padding:ye,radius:We,refresh:He,removeImage:Pe,setImageCount:oe,setImages:ee,stopRemoveImage:function(){return Me(!1)},text:Le,topText:Ye,width:Qe})}),(0,m.jsx)("input",{ref:c,type:"file",hidden:!0,multiple:!0,accept:"image/*",onChange:ut}),Ze?(0,m.jsx)(X,{anchor:"bottom",title:Be,open:Ze,toggleDrawer:function(){Ze&&(rt(null),Xe("")),we((function(e){return!e}))},drawerChild:lt}):(0,m.jsx)(D,{controlsRef:n,onRefresh:function(){return Te(!0)},onDelete:function(){return Me(!0)},onAdd:function(){c.current&&c.current.click()},onText:function(){Xe("Add Text"),we(!0),rt(pt)},onEdit:function(){Xe("Edit Collage"),we(!0),rt(xt)},clearDelete:function(){return Me(!1)}}),T?(0,m.jsx)(pe.Z,{title:"Creating collage ..."}):null]})}}}]);
//# sourceMappingURL=413.6bbcf5ef.chunk.js.map