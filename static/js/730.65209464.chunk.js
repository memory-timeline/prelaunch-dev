"use strict";(self.webpackChunkprelaunch=self.webpackChunkprelaunch||[]).push([[730],{67098:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(79105);const i={getProductList:async e=>{const t={pagination:{page:1,perPage:24},sort:{field:"name",order:"ASC"}};e&&(t.filter={category_id:e});const n=await a.Z.httpClient("/api/product/list",a.Z.encodeParams(t),{method:"GET"});return console.log("product list resp ",n),{data:n.json.products,total:n.json.count}},getProduct:async e=>({data:(await a.Z.httpClient("/api/product/get",{id:e},{method:"GET"})).json}),getManyProducts:async e=>{const t=await a.Z.httpClient("/api/product/getMany",{ids:e},{method:"GET"});return{data:t.json.products,total:t.json.count}},getCategories:async()=>{const e=await a.Z.httpClient("/api/category/list",a.Z.encodeParams({pagination:{page:1,perPage:24},sort:{field:"name",order:"ASC"}}),{method:"GET"});return{data:e.json.categories,total:e.json.count}}}},72429:(e,t,n)=>{n.d(t,{Z:()=>r});var a=n(47131),i=n(11198),o=n(46417);function r(e){let{handleClose:t}=e;return(0,o.jsx)(a.Z,{"aria-label":"close",onClick:t,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,o.jsx)(i.Z,{})})}},88685:(e,t,n)=>{n.d(t,{Z:()=>o});var a=n(47313),i=n(67098);function o(){const[e,t]=(0,a.useState)({data:[],total:0}),[n,o]=(0,a.useState)(!0);return(0,a.useEffect)((async()=>{const e=await i.Z.getCategories();o(!1),t({data:[{id:"All",name:"All"},...e.data],total:e.total+1})}),[]),[e,n]}},82358:(e,t,n)=>{n.d(t,{Z:()=>o});var a=n(47313),i=n(67098);function o(){const[e,t]=(0,a.useState)({data:[],total:0}),[n,o]=(0,a.useState)(!0);return[e,n,async e=>{if(e){const n="All"===e?await i.Z.getProductList():await i.Z.getProductList(e);console.log("in get category products",e,n),t(n),o(!1)}}]}},58587:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(47313);function i(){const[e,t]=(0,a.useState)([0,0]);return(0,a.useLayoutEffect)((()=>{function e(){t([window.innerWidth,window.innerHeight])}return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)}),[]),e}},24494:(e,t,n)=>{n.r(t),n.d(t,{default:()=>xn});var a=n(47313),i=n(9019),o=n(73428),r=n(54641),s=n(16957),l=n(56104),c=n(32195),d=n(31095),h=n(88685);const g=(0,a.createContext)({});var m=n(58587);function u(e,t){const n=(0,m.Z)(),[i,o]=(0,a.useState)({}),{aspectRatio:r,smallScreenWidthFraction:s}=t,{defaultMonthWidth:l}=t[e];return console.log("use month dimensions",r,l,l/r,t),(0,a.useEffect)((()=>{const[t]=n;o((()=>0===t?{}:t>l?"potrait"===e?{width:l,height:l/r}:{width:l,height:l*r}:"potrait"===e?{width:t*s,height:t*s/r}:{width:t*s,height:t*s*r}))}),[n,e]),i}var p=n(1413),x=n(58018),f=n(71829),b=n(47597);const w=603.74,y={monthList:["January","February","March","April","May","June","July","August","September","October","November","December"],year:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return e.getMonth()>=9?e.getFullYear()+1:e.getFullYear()}(),padding:50,lineWidth:.5,cutLength:40,cutColor:"black",monthCanvas:{BrowserSingle:{width:427,height:427/.666},Browser:{width:427,height:427/.707},A3Single:{width:3600,height:5400,minWidth:864,minHeight:1296,printWidth:12,printHeight:18,rows:1,columns:1,sheets:12},A3:{width:3508,height:4961,minWidth:842,minHeight:1191,printWidth:11.7,printHeight:16.5,rows:1,columns:1,sheets:12},A5:{width:1754,height:2480,minWidth:420,minHeight:595,printWidth:6,printHeight:8.47,rows:2,columns:2,sheets:3},A6:{minWidth:298,minHeight:421,printWidth:4.13,printHeight:5.85,width:1240,height:1754,rows:4,columns:2,sheets:2,rotateRequired:!0},A7:{minWidth:210,minHeight:298,printWidth:2.91,printHeight:4.13,width:878,height:1240,rows:4,columns:4,sheets:1}},printCanvas:{width:3508,height:4961},pdfOptions:{orientation:"p",unit:"in",format:[12.5,18.5]},maxCanvasWidth:2e3,monthItemWidth:427,monthItemHeight:w,social:{Facebook:{path:"M 20 10 c 0 -5.52 -4.48 -10 -10 -10 S 0 4.48 0 10 c 0 4.84 3.44 8.87 8 9.8 V 13 H 6 v -3 h 2 V 7.5 C 8 5.57 9.57 4 11.5 4 H 14 v 3 h -2 c -0.55 0 -1 0.45 -1 1 v 2 h 3 v 3 h -3 v 6.95 c 5.05 -0.5 9 -4.76 9 -9.95 z",Icon:x.Z,color:"#4267B2",text:"colorfulpossibilities"},Instagram:{path:"M 5.8 0 h 8.4 C 17.4 0 20 2.6 20 5.8 v 8.4 a 5.8 5.8 0 0 1 -5.8 5.8 H 5.8 C 2.6 20 0 17.4 0 14.2 V 5.8 A 5.8 5.8 0 0 1 5.8 0 m -0.2 2 A 3.6 3.6 0 0 0 2 5.6 v 8.8 C 2 16.39 3.61 18 5.6 18 h 8.8 a 3.6 3.6 0 0 0 3.6 -3.6 V 5.6 C 18 3.61 16.39 2 14.4 2 H 5.6 m 9.65 1.5 a 1.25 1.25 0 0 1 1.25 1.25 A 1.25 1.25 0 0 1 15.25 6 A 1.25 1.25 0 0 1 14 4.75 a 1.25 1.25 0 0 1 1.25 -1.25 M 10 5 a 5 5 0 0 1 5 5 a 5 5 0 0 1 -5 5 a 5 5 0 0 1 -5 -5 a 5 5 0 0 1 5 -5 m 0 2 a 3 3 0 0 0 -3 3 a 3 3 0 0 0 3 3 a 3 3 0 0 0 3 -3 a 3 3 0 0 0 -3 -3 z",Icon:f.Z,color:"#E1306C",text:"colorfulpossibilities"},Whatsapp:{path:"M 14.75 11.96 c 0.25 0.13 0.41 0.2 0.46 0.3 c 0.06 0.11 0.04 0.61 -0.21 1.18 c -0.2 0.56 -1.24 1.1 -1.7 1.12 c -0.46 0.02 -0.47 0.36 -2.96 -0.73 c -2.49 -1.09 -3.99 -3.75 -4.11 -3.92 c -0.12 -0.17 -0.96 -1.38 -0.92 -2.61 c 0.05 -1.22 0.69 -1.8 0.95 -2.04 c 0.24 -0.26 0.51 -0.29 0.68 -0.26 h 0.47 c 0.15 0 0.36 -0.06 0.55 0.45 l 0.69 1.87 c 0.06 0.13 0.1 0.28 0.01 0.44 l -0.27 0.41 l -0.39 0.42 c -0.12 0.12 -0.26 0.25 -0.12 0.5 c 0.12 0.26 0.62 1.09 1.32 1.78 c 0.91 0.88 1.71 1.17 1.95 1.3 c 0.24 0.14 0.39 0.12 0.54 -0.04 l 0.81 -0.94 c 0.19 -0.25 0.35 -0.19 0.58 -0.11 l 1.67 0.88 M 10 0 a 10 10 0 0 1 10 10 a 10 10 0 0 1 -10 10 c -1.97 0 -3.8 -0.57 -5.35 -1.55 L 0 20 l 1.55 -4.65 A 9.969 9.969 0 0 1 0 10 A 10 10 0 0 1 10 0 m 0 2 a 8 8 0 0 0 -8 8 c 0 1.72 0.54 3.31 1.46 4.61 L 2.5 17.5 l 2.89 -0.96 A 7.95 7.95 0 0 0 10 18 a 8 8 0 0 0 8 -8 a 8 8 0 0 0 -8 -8 z",Icon:b.Z,color:"#128C7E",text:"7975218926"}},themes:{contextual:{monthWidth:427,monthHeight:w,imageWidthFrac:1,imageHeightFrac:.6,dateWidthFrac:1,dateHeightFrac:.4,paddingFrac:.0375,brandingHeightFrac:.0375,brandingWidthFrac:1,brandingBorderRadiusFrac:.0075,brandingPaddingYFrac:.00375,brandingMarginTFrac:.00375,brandingBorderRadius:.0075,backgroundColor:"rgba(255, 255, 255, 0.8)",brand:[{text:"Colorful Possibilities",fontFamily:"KaushanScript",fontSize:"0.4rem",color:"brown"},{text:" by MemoryTimeline",fontFamily:"sans-serif",fontSize:"0.4rem",color:"brown"}],social:[{text:"colorfulpossibilities",fontFamily:"sans-serif",fontSize:"0.4rem",color:"#4267B2"},{text:"colorfulpossibilities",fontFamily:"sans-serif",fontSize:"0.4rem",color:"#E1306C"},{text:"7975218926",fontFamily:"sans-serif",fontSize:"0.4rem",color:"#E1306C"}]}},icons:{cake:{color:"#FF5B61",path:"M 9 6 c 1.11 0 2 -0.9 2 -2 c 0 -0.38 -0.1 -0.73 -0.29 -1.03 L 9 0 l -1.71 2.97 c -0.19 0.3 -0.29 0.65 -0.29 1.03 c 0 1.1 0.9 2 2 2 m 4.6 9.99 l -1.07 -1.07 l -1.08 1.07 c -1.3 1.3 -3.58 1.31 -4.89 0 l -1.07 -1.07 l -1.09 1.07 C 3.75 16.64 2.88 17 1.96 17 c -0.73 0 -1.4 -0.23 -1.96 -0.61 V 21 c 0 0.55 0.45 1 1 1 h 16 c 0.55 0 1 -0.45 1 -1 v -4.61 c -0.56 0.38 -1.23 0.61 -1.96 0.61 c -0.92 0 -1.79 -0.36 -2.44 -1.01 M 15 9 h -5 V 7 h -2 v 2 H 3 c -1.66 0 -3 1.34 -3 3 v 1.54 c 0 1.08 0.88 1.96 1.96 1.96 c 0.52 0 1.02 -0.2 1.38 -0.57 l 2.14 -2.13 l 2.13 2.13 c 0.74 0.74 2.03 0.74 2.77 0 l 2.14 -2.13 l 2.13 2.13 c 0.37 0.37 0.86 0.57 1.38 0.57 c 1.08 0 1.96 -0.88 1.96 -1.96 V 12 C 18 10.34 16.66 9 15 9"},favorite:{color:"red",path:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54z"},home:{color:"#5F9EA0",path:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"},travel:{color:"blue",path:"M2.5 19h19v2h-19v-2zm19.57-9.36c-.21-.8-1.04-1.28-1.84-1.06L14.92 10l-6.9-6.43-1.93.51 4.14 7.17-4.97 1.33-1.97-1.54-1.45.39 2.59 4.49s7.12-1.9 16.57-4.43c.81-.23 1.28-1.05 1.07-1.85z"}},textSettings:{brand:{text:"Colorful Possibilities",color:"brown"},company:{text:" by MemoryTimeline",color:"black"}}},C=n.p+"static/media/January.f631bfe587ab40ca785b.jpeg",j=n.p+"static/media/February.3e139cde496c24d811f8.jpeg",Z=n.p+"static/media/March.4d253c6abff9c67c87bc.jpeg",v=n.p+"static/media/April.453b743d7bc16b3b1886.jpeg",I=n.p+"static/media/May.87697cadfa4c64d69285.jpeg",D=n.p+"static/media/June.3082b41ae5798335b32a.jpeg",S=n.p+"static/media/July.e436e047a1a9dbb89599.jpeg",F=n.p+"static/media/August.fcf8c1e87674967c75f6.jpeg",W=n.p+"static/media/September.5167afdb1086b7660649.jpeg",k=n.p+"static/media/October-new.caa72fb13d910555e49c.jpg",H=n.p+"static/media/November-new.3d83d038e74fb5c4b0f8.jpg",R=n.p+"static/media/December.a5f762212b6c69a22b70.jpeg",B={aspectRatio:.707,potrait:{defaultMonthWidth:427,imageHeightFraction:.6,dateHeightFraction:.4,brandingHeightFraction:.075,bindingHeightFraction:.05,dateBoxHeightFraction:.95},landscape:{defaultMonthWidth:603.96,imageWidthFraction:.5,dateWidthFraction:.5,brandingHeightFraction:.1,bindingHeightFraction:.070722,yearBoxHeightFraction:.15,dateBoxHeightFraction:.7},smallScreenWidthFraction:.95,backgroundColor:"rgba(255,255,255,0.8)",branding:{brandText:"Colorful Possibilities",companyText:"by MemoryTimeline"},social:{Facebook:{path:"M22 12c0-5.52-4.48-10-10-10S2 6.48 2 12c0 4.84 3.44 8.87 8 9.8V15H8v-3h2V9.5C10 7.57 11.57 6 13.5 6H16v3h-2c-.55 0-1 .45-1 1v2h3v3h-3v6.95c5.05-.5 9-4.76 9-9.95z",Icon:x.Z,color:"#4267B2",text:"colorfulpossibilities"},Instagram:{path:"M7.8 2h8.4C19.4 2 22 4.6 22 7.8v8.4a5.8 5.8 0 0 1-5.8 5.8H7.8C4.6 22 2 19.4 2 16.2V7.8A5.8 5.8 0 0 1 7.8 2m-.2 2A3.6 3.6 0 0 0 4 7.6v8.8C4 18.39 5.61 20 7.6 20h8.8a3.6 3.6 0 0 0 3.6-3.6V7.6C20 5.61 18.39 4 16.4 4H7.6m9.65 1.5a1.25 1.25 0 0 1 1.25 1.25A1.25 1.25 0 0 1 17.25 8 1.25 1.25 0 0 1 16 6.75a1.25 1.25 0 0 1 1.25-1.25M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3z",Icon:f.Z,color:"#E1306C",text:"colorfulpossibilities"},Whatsapp:{path:"M16.75 13.96c.25.13.41.2.46.3.06.11.04.61-.21 1.18-.2.56-1.24 1.1-1.7 1.12-.46.02-.47.36-2.96-.73-2.49-1.09-3.99-3.75-4.11-3.92-.12-.17-.96-1.38-.92-2.61.05-1.22.69-1.8.95-2.04.24-.26.51-.29.68-.26h.47c.15 0 .36-.06.55.45l.69 1.87c.06.13.1.28.01.44l-.27.41-.39.42c-.12.12-.26.25-.12.5.12.26.62 1.09 1.32 1.78.91.88 1.71 1.17 1.95 1.3.24.14.39.12.54-.04l.81-.94c.19-.25.35-.19.58-.11l1.67.88M12 2a10 10 0 0 1 10 10 10 10 0 0 1-10 10c-1.97 0-3.8-.57-5.35-1.55L2 22l1.55-4.65A9.969 9.969 0 0 1 2 12 10 10 0 0 1 12 2m0 2a8 8 0 0 0-8 8c0 1.72.54 3.31 1.46 4.61L4.5 19.5l2.89-.96A7.95 7.95 0 0 0 12 20a8 8 0 0 0 8-8 8 8 0 0 0-8-8z",Icon:b.Z,color:"#128C7E",text:"7975218926"}},months:{January:{image:C},February:{image:j},March:{image:Z},April:{image:v},May:{image:I},June:{image:D},July:{image:S},August:{image:F},September:{image:W},October:{image:k},November:{image:H},December:{image:R}}};var Y=n(46417);function A(e){let{handleChange:t,handleEditChange:n,MonthComp:a,DateComp:i,ImageComp:o}=e;return y.monthList.map((e=>(0,Y.jsx)(a,{month:e,year:y.year,handleChange:t,handleImageEdit:t=>{var a;if(!t.current)return;const{width:i,height:o,x:r,y:s}=null===(a=t.current)||void 0===a?void 0:a.getCroppingRect();n({cropWidth:i,cropHeight:o,x:r,y:s},e)},ImageComp:o,DateComp:i},e)))}function M(e){let{handleImageChange:t,handleEditChange:n,MonthComp:a,DateComp:o,ImageComp:r}=e;return(0,Y.jsx)(i.ZP,{container:!0,direction:"row",justifyContent:"space-evenly",alignItems:"center",sx:{backgroundColor:"black",mt:0},rowSpacing:2,children:(0,Y.jsx)(A,{handleChange:t,handleEditChange:n,spacing:2,MonthComp:a,ImageComp:r,DateComp:o})})}const E=(0,a.memo)(M);const T={generateCalendar:function(e,t){const n=[];let a=new Array(t).fill(0),i=1;for(;i<=e;)a.push(i),i+=1,7===a.length&&(n.push(a),a=[]);if(a.length>0){for(;a.length<7;)a.push(0);n.push(a)}return n},renderImage:function(e,t){const{width:n,height:a}=e.canvas,i=new Image;i.onload=()=>{const o=n/a,r=t.width/t.height;let s,l,c,d;r>o?(s=a*r,l=a,c=-(s-n)/2,d=0):(s=n,l=n/r,c=0,d=-(l-a)/2),e.drawImage(i,c,d,s,l)},i.src=t.src},resizeImageSlowly:function(e,t,n,a,i){console.log("image resize start",e.src,new Date);const o=document.createElement("canvas");o.width=t,o.height=n;const r=o.getContext("2d"),s=t/n;let l,c,[d,h]=[t,n];r.webkitImageSmoothingEnabled=!1,r.mozImageSmoothingEnabled=!1,r.imageSmoothingEnabled=!1;const g=Math.floor(Math.log2(t/a));if(0===g)r.drawImage(e,0,0,d,h,0,0,a,i);else{for(let t=0;t<g;t+=1)l=d/2,c=l/s,0===t?r.drawImage(e,0,0,d,h,0,0,l,c):r.drawImage(o,0,0,d,h,0,0,l,c),d=l,h=c;r.drawImage(o,0,0,d,h,0,0,a,i)}const m=document.createElement("canvas");return m.width=a,m.height=i,m.getContext("2d").drawImage(o,0,0,a,i,0,0,a,i),console.log("image resize end",e.src,new Date),m},imagePosition:function(e,t,n,a){const i=n/a;let o,r,s,l;return i>e/t?(o=t*i,r=t,s=(o-e)/2,l=0):(o=e,r=e/i,s=0,l=(r-t)/2),[parseFloat(o.toFixed(5)),parseFloat(r.toFixed(5)),s,l]},getCanvasDimensions:(e,t,n,a)=>{let i,o;if(n.width<e||n.height<t){const a=e/t;n.width/n.height>a?(i=n.height,o=i*(e/t)):(o=n.width,i=o/(e/t))}else i=t,o=e;const r=o>a?a:o,s=r*i/o;return console.log("in get canvas dimensions",e,t,parseFloat(r.toFixed(5)),parseFloat(s.toFixed(5)),a,o>a),[parseFloat(r.toFixed(5)),parseFloat(s.toFixed(5))]},getImageDets:function(e,t,n,a){console.log("image dets",a);const{lastModified:i,size:o,name:r,type:s}=e;return{height:n,lastModified:i,rawFile:e,size:o,src:a.src,title:r,type:s,width:t}},getYearInfo:function(e,t){const n={};for(let i=0;i<12;i+=1){const o=new Date(t,i,1).getDay();let r;r=1===i?(a=t)%4===0&&a%100!==0||a%400===0?29:28:new Date(t,i+1,0).getDate(),n[e[i]]={days:r,firstDay:o}}var a;return n}},X=T;function z(e,t,n){const a=e.getContext("2d");return a.canvas.width=t,a.canvas.height=n,a.webkitImageSmoothingEnabled=!1,a.mozImageSmoothingEnabled=!1,a.imageSmoothingEnabled=!1,a.clearRect(0,0,t,n),a}function P(e,t,n,a,i,o,r){if(console.log("render image",t),"elem"in t){const{width:s,height:l,elem:c}=t,[d,h,g,m]=X.imagePosition(n,a,s,l),u=X.resizeImageSlowly(c,s,l,d,h);e.drawImage(u,"x"in t?t.x*d:g,"y"in t?t.y*h:m,n,a,i,o,n,a),r()}else!function(e,t,n,a,i,o,r){console.log("image timer render start",t.src,new Date);const s=new Image;s.onerror=()=>{console.log("Error while loading image",t)},s.onload=()=>{console.log("image timer load",t.src,new Date);const{naturalWidth:l,naturalHeight:c}=s,[d,h,g,m]=X.imagePosition(n,a,l,c),u=X.resizeImageSlowly(s,l,c,d,h);e.drawImage(u,"x"in t?t.x*d:g,"y"in t?t.y*h:m,n,a,i,o,n,a),r(),console.log("image timer finished",t.src,new Date)},s.src=t.src}(e,t,n,a,i,o,r)}const L=(e,t,n,a,i,o)=>{e.fillStyle=n,e.save(),e.translate(i,o),e.scale(t,t),e.fill(new Path2D(a)),e.restore()};function O(e,t,n,a,i,o){let r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"start",s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"";e.save(),e.font=n,e.fillStyle=a,e.textAlign=r,""!==s&&(e.textBaseline=s),console.log("in render text",t,i,e.textAlign,n,i,o,r,s),e.fillText(t,i,o);const l=e.measureText(t);return e.restore(),l}const J=(e,t,n,a,i,o,r,s)=>{const{color:l,path:c,text:d}=n;L(e,t,l,c,i,o),O(e," ".concat(d),a,l,r,s)};function N(e,t,n,a,i,o,r){e.beginPath(),e.roundRect(t,n,a,i,[o]),e.fillStyle=r,e.fill()}function U(e,t,n,a,i,o,r,s){e.save(),e.textAlign="center",e.textBaseline="bottom";const{cake:l,favorite:c,home:d,travel:h}=y.icons;"Birthday"===r?L(e,t,l.color,l.path,n,a):"Home"===r?L(e,t,d.color,d.path,n,a):"Travel"===r?L(e,t,h.color,h.path,n,a):"Anniversary"===r?L(e,t,c.color,c.path,n,a):"Other"===r&&(e.fillStyle="brown",e.fillText(0===s?" ":s,i,o)),e.restore()}const V={initialize:z,renderImage:P,socialBrand:J,drawLine:function(e,t,n,a,i,o,r){e.save(),e.beginPath(),e.moveTo(t,n),e.lineTo(a,i),e.strokeStyle=o,e.lineWidth=r,e.stroke(),e.restore()},drawIcon:L,renderDateBoxArea:function(e,t,n,a){const{width:i,height:o,startX:r,startY:s}=t;console.log("in render date box area",t,n),P(e,n,i,o,r,s,a)},renderSpecialDates:U,renderDates:function(e,t,n,a){e.save(),e.textAlign="center",e.textBaseline="alphabetic";const{letterHeight:i,letterWidth:o,startX:r,startY:s,scale:l,width:c,height:d,font:h}=t;e.font=h;const g=(c-7*o)/6,m=(d-n.length*i)/n.length;n.forEach(((t,n)=>{t.forEach(((t,c)=>{const d=r+g*c+o*c+o/2,h=s+n*m+n*i;t in a?U(e,l,d-o/2,h-o,d,h,a[t],t):0===c||6===c?(e.fillStyle="red",e.fillText(0===t?" ":t,d,h)):(e.fillStyle="black",e.fillText(0===t?" ":t,d,h))}))})),e.restore()},renderWeekRow:function(e,t){e.save(),e.textAlign="center",e.font=t.font;const n=(t.width-7*t.letterWidth)/6;t.letters.forEach(((a,i)=>{e.fillStyle=0===i||6===i?"red":"black",e.fillText(a,t.startX+n*i+t.letterWidth*i+t.letterWidth/2,t.startY)})),e.restore()},renderText:O,renderRoundedRect:N,renderBranding:function(e,t){const{Facebook:n,Instagram:a,Whatsapp:i}=y.social,{scale:o,bfr:r,bstx:s,bsty:l,iconWidth:c}=t;N(e,t.bsx,t.bsy,t.bw,t.bh,t.br,t.bc),e.textAlign="start",e.textBaseline="middle";const{brand:d,company:h}=y.textSettings,g=O(e,d.text,t.bf,d.color,s,l),m=O(e,h.text,t.bfr,h.color,s+g.width,l),u=g.width+m.width;e.font=r;const p=e.measureText(n.text),x=e.measureText(i.text),f=u+2*p.width+x.width,b=(t.bw-t.bstx-f)/3,w=s+u+b,C=w-c,j=l-c/2,Z=b+p.width;J(e,o,n,r,C,j,w,l),J(e,o,a,r,C+Z,j,w+Z,l),J(e,o,i,r,C+2*Z,j,w+2*Z,l)},generateDates:function(e,t,n,a,i,o,r,s,l,c,d,h,g){const[m,u]="width"in o?X.getCanvasDimensions(r,s,{width:o.width,height:o.height},l):[r,s],p=z(e,m,u),x=h(m,u),f=X.generateCalendar(a,i),b=()=>g(p,x,t,n,d,f,c),{width:w,height:y,startX:C,startY:j}=x.dateBoxArea;return"width"in o?P(p,o,w,y,C,j,b):b(),e},generateImage:(e,t,n,a,i,o)=>{const[r,s]=X.getCanvasDimensions(n,a,t,i),l=z(e,r,s);return t&&P(l,t,r,s,0,0,o),e}};const G=(e,t)=>{console.log("in get config",e,t);const n=427,a=n/.707,i=16*e/n,o=16*e/n,r=t;return{dateBoxArea:{width:e,height:t,startX:0,startY:0,endX:e,endY:t,bgcolor:"white"},dateBox:{width:e-2*i,height:.95*r-2*i,startX:i,startY:0+i,endX:e-i,endY:.95*t-i,radius:10*e/n,color:"rgba(255,255,255,0.8)"},branding:{bsx:i,bsy:.95*t-i+1.3*t*8/a,bw:e-2*i,bh:.075*t,br:5*e/n,bf:"bold ".concat(.5*o,"px KaushanScript"),bfr:"bold ".concat(.4*o,"px sans-serif"),bc:"rgba(255,255,255,1)",bstx:2*i,bsty:.95*t-i+1.3*t*8/a+.075*t/2,scale:16*e*.4/8540,iconWidth:16*e*.4/n},year:{startX:e-2*i,startY:0+2*i+1*o,color:"green",font:"bold ".concat(1*o,"px sans-serif")},month:{startX:2*i,startY:0+2*i+1*o,color:"green",font:"bold ".concat(1*o,"px sans-serif")},divider:{startX:2*i,startY:0+2*i+1.5*o*1,endX:e-2*i,endY:0+2*i+1.5*o*1,color:"rgba(0, 0, 0, 0.12)",lineWidth:2},weekRow:{letters:["S","M","T","W","T","F","S"],letterWidth:16*e/n,startX:2*i,startY:0+2*i+1.5*o*1.9+2,endX:e-2*i,width:e-4*i,font:"bold ".concat(o,"px sans-serif")},dates:{letters:["S","M","T","W","T","F","S"],letterWidth:16*e*.8/n,letterHeight:.8*o*1.5,startX:2*i,startY:0+2*i+1.5*o*2.8,endX:e-2*i,width:e-4*i,height:.95*r-4*i-1.5*o*1.9,font:"bold ".concat(.8*o,"px sans-serif"),scale:16*e*.8/8540,iconWidth:16*e*.8/n}}},_=function(e,t,n,a,i,o,r){const{dateBox:s,month:l,divider:c}=t;V.renderRoundedRect(e,s.startX,s.startY,s.width,s.height,s.radius,s.color),function(e,t,n){e.save(),e.textAlign="right",e.font=t.font,e.fillStyle=t.color,e.fillText(n,t.startX,t.startY),e.restore()}(e,t.year,n),V.renderText(e,a.toUpperCase(),l.font,l.color,l.startX,l.startY),V.drawLine(e,c.startX,c.startY,c.endX,c.endY,c.color,c.lineWidth),V.renderWeekRow(e,t.weekRow);const d=a in i?i[a]:{};V.renderDates(e,t.dates,o,d,a),V.renderBranding(e,t.branding),r()};const K=(e,t)=>{const{yearBoxHeightFraction:n,dateBoxHeightFraction:a}=B.landscape;console.log("in get config",e,t);const i=301.98,o=8*e/i,r=10*e/i,s=16*e/i,l=t,c="rgba(255,255,255,0.8)",d={width:e,height:t,startX:0,startY:0,endX:e,endY:t,bgcolor:"white"},h={width:e-4*o,height:(d.height-4*o)*n,startX:2*o,startY:d.startY+2*o,radius:r,color:c,marginBottom:8*e/i},g={startX:h.startX+2*o,startY:h.startY+2*o+2*s*1.5/2,color:"green",font:"bold ".concat(2*s,"px sans-serif"),width:h.width-4*o},m={width:e-4*o,height:(d.height-4*o)*a,startX:2*o,startY:d.startY+2*o+h.height+h.marginBottom,radius:r,color:c},u={letters:["S","M","T","W","T","F","S"],letterWidth:20*e*.9/i,startX:4*o,startY:m.startY+2*o+.9*s,endX:e-4*o,width:e-8*o,font:"bold ".concat(.9*s,"px sans-serif")},p={letters:["S","M","T","W","T","F","S"],letterWidth:16*e*.8/i,letterHeight:.8*s*1.5,startX:4*o,startY:u.startY+.9*s*.5+.8*s,endX:e-4*o,width:e-8*o,height:m.height-(u.startY-m.startY),font:"bold ".concat(.8*s,"px sans-serif"),scale:16*e*.8/6039.6,iconWidth:16*e*.8/i};return{dateBoxArea:d,yearBox:h,dateBox:m,branding:{startX:2*o,startY:0+4*o+.85*(l-4*o),width:e-4*o,height:.1*(t-4*o),radius:5*e/i,bf:"bold ".concat(.6*s,"px KaushanScript"),bfmr:"bold ".concat(.5*s,"px sans-serif"),bfr:"bold ".concat(.4*s,"px sans-serif"),color:"rgba(255,255,255,1)",bstx:4*o,bsty:0+4*o+.85*(l-4*o)+.1*(t-4*o)/2,bssy:0+4*o+.85*(l-4*o)+o,scale:6.4*e/6039.6,iconWidth:6.4*e/i,linecolor:"rgba(0, 0, 0, 0.12)",bley:0+4*o+.85*(l-4*o)+.1*(t-4*o)-o,lineWidth:2*t/(603.96/.707),contentWidth:e-8*o,contentHeight:.1*(t-4*o)-2*o},year:g,weekRow:u,dates:p}},q=function(e,t,n,a,i,o,r){const{yearBox:s,dateBox:l}=t;V.renderRoundedRect(e,s.startX,s.startY,s.width,s.height,s.radius,s.color),V.renderRoundedRect(e,l.startX,l.startY,l.width,l.height,l.radius,l.color),function(e,t,n,a){console.log("in render year"),e.font=t.font,e.fillStyle=t.color;const i=e.measureText(a),o=e.measureText(n),r=t.width-(i.width+o.width);e.fillText(a,t.startX,t.startY),e.fillText(n,t.startX+i.width+r,t.startY)}(e,t.year,n,a),V.renderWeekRow(e,t.weekRow);const c=a in i?i[a]:{};V.renderDates(e,t.dates,o,c,a),((e,t)=>{e.textAlign="start",((e,t)=>{e.beginPath(),e.roundRect(t.startX,t.startY,t.width,t.height,[t.radius]),e.fillStyle=t.color,e.fill()})(e,t);const n="Colorful Possibilities";e.textBaseline="middle",e.fillStyle="brown",e.font=t.bf;const a=e.measureText(n);e.fillText(n,t.bstx,t.bsty),e.fillStyle="black",e.font=t.bfmr;const i=" by MemoryTimeline",o=e.measureText(i);e.fillText(i,t.bstx+a.width,t.bsty);const{Facebook:r,Instagram:s,Whatsapp:l}=B.social;e.font=t.bfr;const c=e.measureText(r.text),d=(t.contentWidth-(a.width+o.width+t.lineWidth+t.iconWidth+c.width))/2,h=(t.contentHeight-3*t.iconWidth)/2;console.log("branding gap",d,h,t);const{bssy:g,bley:m,linecolor:u,lineWidth:p,scale:x,bfr:f}=t,b=t.bstx+a.width+o.width+d;V.drawLine(e,b,g,b,m,u,p);const w=b+p+d;e.textBaseline="ideographic",V.socialBrand(e,x,r,f,w,g,w+t.iconWidth,g+t.iconWidth),V.socialBrand(e,x,s,f,w,t.bssy+t.iconWidth+h,w+t.iconWidth,t.bssy+2*t.iconWidth+h),e.textBaseline="alphabetic",V.socialBrand(e,x,l,f,w,t.bssy+2*t.iconWidth+2*h,w+t.iconWidth,t.bssy+3*t.iconWidth+2*h)})(e,t.branding),r()},Q=(e,t,n,a,i,o,r,s,l,c,d,h)=>{console.log("draw pdf page",l,c,d,h,s,n,a,i,o,r);const g=n.findIndex((e=>e[0]===t)),m=s.findIndex((e=>e[0]===t)),u=n[g][1],p=s[m][1],x=u.toDataURL("image/jpeg",1),f=p.toDataURL("image/png",1);e.addImage(x,o,r,a,i,"","FAST"),e.addImage(f,d,h,l,c,"","FAST")},$={generateImage:(e,t,n,a,i,o,r)=>{const{width:s,height:l}=y.monthCanvas[i],{maxCanvasWidth:c}=y;if(console.log("I am in contextual generate",t,c),"potrait"===n){const{imageHeightFraction:n,bindingHeightFraction:i}=r.potrait;console.log("I am in contextual generate potrait",t,c,n),V.generateImage(e,t,s,"none"===a?l*n:l*(n-i),c,o)}if("landscape"===n){const{imageWidthFraction:n,bindingHeightFraction:i}=r.landscape;V.generateImage(e,t,l*n,"none"===a?s:s*(1-i),c,o)}},generateDates:(e,t,n,a,i,o,r,s,l)=>{console.log("default generate date",o);const{year:c,monthList:d}=y,{width:h,height:g,maxCanvasWidth:m}=y.monthCanvas[o],u=X.getYearInfo(d,c),{days:p,firstDay:x}=u[t];if("potrait"===a){const{dateHeightFraction:a}=l.potrait;V.generateDates(e,c,t,p,x,n||{},h,g*a,m,r,s,G,_)}if("landscape"===a){const{dateWidthFraction:a,bindingHeightFraction:o}=l.landscape;V.generateDates(e,c,t,p,x,n||{},g*a,"none"===i?h:h*(1-o),m,r,s,K,q)}},drawSheet:(e,t,n,a,i,o,r,s)=>{const{printWidth:l,printHeight:c}=y.monthCanvas[i];if("potrait"===r){const{imageHeightFraction:i,bindingHeightFraction:r,dateHeightFraction:d}=s.potrait;Q(e,t,n,l,"none"===o?c*i:c*(i-r),0,"none"===o?0:c*r,a,l,c*d,0,c*(1-d))}if("landscape"===r){const{imageWidthFraction:i,bindingHeightFraction:r,dateWidthFraction:d}=s.landscape;Q(e,t,n,c*i,"none"===o?l:l*(1-r),0,"none"===o?0:l*r,a,c*d,"none"===o?l:l*(1-r),c*i,"none"===o?0:l*r)}}},ee={config:B,generateImage:$.generateImage,generateDates:$.generateDates,drawSheet:$.drawSheet,totalImageRenderCount:24,Year:E},te={config:(0,p.Z)((0,p.Z)({},B),{},{potrait:(0,p.Z)((0,p.Z)({},B.potrait),{},{imageHeightFraction:1}),months:{}}),generateImage:$.generateImage,generateDates:$.generateDates,drawSheet:$.drawSheet,totalImageRenderCount:24,Year:E},ne=(0,p.Z)((0,p.Z)({},B),{},{potrait:(0,p.Z)((0,p.Z)({},B.potrait),{},{imageHeightFraction:.5,dateHeightFraction:.5}),months:{"\u09ac\u09c8\u09b6\u09be\u0996":{fullMoon:28,newMoon:13,days:31,firstDay:2,english:{months:[["April",2025],["May",2025]],dates:{April:{start:15,end:30},May:{start:1,end:15}}},bengaliSpecialDates:{10:["\u098f\u0995\u09be\u09a6\u09b6\u09c0"],24:["\u098f\u0995\u09be\u09a6\u09b6\u09c0"],1:["\u09a8\u09ac\u09ac\u09b0\u09cd\u09b7"],28:["\u09ac\u09c1\u09a6\u09cd\u09a7","\u09aa\u09c2\u09b0\u09cd\u09a3\u09bf\u09ae\u09be"],25:["\u09b0\u09ac\u09c0\u09a8\u09cd\u09a6\u09cd\u09b0","\u099c\u09df\u09a8\u09cd\u09a4\u09c0"],16:["\u0985\u0995\u09cd\u09b7\u09df","\u09a4\u09c3\u09a4\u09c0\u09df\u09be"],17:["\u09ae\u09c7 \u09a6\u09bf\u09ac\u09b8"]}},"\u099c\u09cd\u09af\u09c8\u09b7\u09cd\u09a0":{newMoon:12,fullMoon:27,days:31,firstDay:5,english:{months:[["May",2025],["June",2025]],dates:{May:{start:16,end:31},June:{start:1,end:15}}},bengaliSpecialDates:{11:["\u09a8\u099c\u09b0\u09c1\u09b2","\u099c\u09df\u09a8\u09cd\u09a4\u09c0"],17:["\u099c\u09be\u09ae\u09be\u0987","\u09b7\u09b7\u09cd\u09a0\u09c0"],23:["\u09ac\u0995\u09b0\u09bf \u0988\u09a6"],8:["\u098f\u0995\u09be\u09a6\u09b6\u09c0"],22:["\u098f\u0995\u09be\u09a6\u09b6\u09c0"]}},"\u0986\u09b7\u09be\u09a2\u09bc":{newMoon:10,fullMoon:25,days:32,firstDay:1,english:{months:[["June",2025],["July",2025]],dates:{June:{start:16,end:30},July:{start:1,end:17}}},bengaliSpecialDates:{6:["\u098f\u0995\u09be\u09a6\u09b6\u09c0"],12:["\u09b0\u09a5 \u09af\u09be\u09a4\u09cd\u09b0\u09be"],21:["\u098f\u0995\u09be\u09a6\u09b6\u09c0"]}},"\u09b6\u09cd\u09b0\u09be\u09ac\u09a3":{fullMoon:23,newMoon:7,days:31,firstDay:5,english:{months:[["July",2025],["August",2025]],dates:{July:{start:18,end:31},August:{start:1,end:17}}},bengaliSpecialDates:{4:["\u098f\u0995\u09be\u09a6\u09b6\u09c0"],19:["\u098f\u0995\u09be\u09a6\u09b6\u09c0"],23:["\u09b0\u09be\u0996\u09bf","\u09ac\u09a8\u09cd\u09a7\u09a8"],27:["\u09a8\u09be\u0997","\u09aa\u099e\u09cd\u099a\u09ae\u09c0"],29:["\u09b8\u09cd\u09ac\u09be\u09a7\u09c0\u09a8\u09a4\u09be","\u09a6\u09bf\u09ac\u09b8"],30:["\u099c\u09a8\u09cd\u09ae\u09be\u09b7\u09cd\u099f\u09ae\u09c0"]}},"\u09ad\u09be\u09a6\u09cd\u09b0":{fullMoon:21,newMoon:6,days:31,firstDay:1,english:{months:[["August",2025],["September",2025]],dates:{August:{start:18,end:31},September:{start:1,end:17}}},bengaliSpecialDates:{19:["\u09b6\u09bf\u0995\u09cd\u09b7\u0995","\u09a6\u09bf\u09ac\u09b8"],31:["\u09ac\u09bf\u09b6\u09cd\u09ac\u0995\u09b0\u09cd\u09ae\u09be","\u09aa\u09c1\u099c\u09cb"],2:["\u098f\u0995\u09be\u09a6\u09b6\u09c0"],17:["\u098f\u0995\u09be\u09a6\u09b6\u09c0"]}},"\u0986\u09b6\u09cd\u09ac\u09bf\u09a8":{fullMoon:20,newMoon:4,days:31,firstDay:4,english:{months:[["September",2025],["October",2025]],dates:{September:{start:18,end:30},October:{start:1,end:18}}},bengaliSpecialDates:{4:["\u09ae\u09b9\u09be\u09b2\u09df\u09be"],10:["\u09aa\u099e\u09cd\u099a\u09ae\u09c0"],11:["\u09b7\u09b7\u09cd\u09a0\u09c0"],12:["\u09b8\u09aa\u09cd\u09a4\u09ae\u09c0"],13:["\u0985\u09b7\u09cd\u099f\u09ae\u09c0"],14:["\u09a8\u09ac\u09ae\u09c0"],15:["\u09a6\u09b6\u09ae\u09c0"],19:["\u09b2\u0995\u09cd\u09b7\u09cd\u09ae\u09c0","\u09aa\u09c1\u099c\u09cb"],31:["\u09a7\u09a8\u09cd\u09a4\u09c7\u09b0\u09be\u09b8"],16:["\u098f\u0995\u09be\u09a6\u09b6\u09c0"],30:["\u098f\u0995\u09be\u09a6\u09b6\u09c0"]}},"\u0995\u09be\u09b0\u09cd\u09a4\u09bf\u0995":{fullMoon:18,newMoon:3,bengaliSpecialDates:{2:["\u0995\u09be\u09b2\u09c0 \u09aa\u09c1\u099c\u09cb"],3:["\u09a6\u09c0\u09aa\u09be\u09ac\u09b2\u09c0"],4:["\u09ad\u09be\u0987\u09ab\u09cb\u0981\u099f\u09be"],5:["\u09ad\u09be\u0987\u09ab\u09cb\u0981\u099f\u09be"],9:["\u099b\u099f \u09aa\u09c1\u099c\u09cb"],18:["\u0997\u09c1\u09b0\u09c1  \u09a8\u09be\u09a8\u0995","\u099c\u09df\u09a8\u09cd\u09a4\u09c0"],14:["\u098f\u0995\u09be\u09a6\u09b6\u09c0"],28:["\u098f\u0995\u09be\u09a6\u09b6\u09c0"]},days:30,firstDay:0,english:{months:[["October",2025],["November",2025]],dates:{October:{start:19,end:31},November:{start:1,end:17}}}},"\u0985\u0997\u09cd\u09b0\u09b9\u09be\u09af\u09bc\u09a3":{fullMoon:17,newMoon:3,bengaliSpecialDates:{14:["\u098f\u0995\u09be\u09a6\u09b6\u09c0"],28:["\u098f\u0995\u09be\u09a6\u09b6\u09c0"]},days:29,firstDay:2,english:{months:[["November",2025],["December",2025]],dates:{November:{start:18,end:30},December:{start:1,end:16}}}},"\u09aa\u09cc\u09b7":{fullMoon:18,newMoon:3,bengaliSpecialDates:{9:["\u09ac\u09dc\u09a6\u09bf\u09a8"],14:["\u098f\u0995\u09be\u09a6\u09b6\u09c0"],16:["\u09a8\u09bf\u0989 \u0987\u09df\u09be\u09b0"],27:["\u09b8\u09cd\u09ac\u09be\u09ae\u09c0 \u09ac\u09bf\u09ac\u09c7\u0995\u09be\u09a8\u09a8\u09cd\u09a6","\u099c\u09a8\u09cd\u09ae\u09a6\u09bf\u09a8"],29:["\u09ae\u0995\u09b0","\u09b8\u0982\u0995\u09cd\u09b0\u09be\u09a8\u09cd\u09a4\u09bf"]},days:29,firstDay:3,english:{months:[["December",2025],["January",2026]],dates:{December:{start:17,end:31},January:{start:1,end:14}}}},"\u09ae\u09be\u0998":{fullMoon:18,newMoon:4,bengaliSpecialDates:{9:["\u09b8\u09b0\u09b8\u09cd\u09ac\u09a4\u09c0","\u09aa\u09c1\u099c\u09cb"],12:["\u09aa\u09cd\u09b0\u099c\u09be\u09a4\u09a8\u09cd\u09a4\u09cd\u09b0","\u09a6\u09bf\u09ac\u09b8"],30:["\u098f\u0995\u09be\u09a6\u09b6\u09c0"],15:["\u098f\u0995\u09be\u09a6\u09b6\u09c0"]},days:30,firstDay:4,english:{months:[["January",2026],["February",2026]],dates:{January:{start:15,end:31},February:{start:1,end:13}}}},"\u09ab\u09be\u09b2\u09cd\u0997\u09c1\u09a8":{fullMoon:18,newMoon:4,bengaliSpecialDates:{30:["\u098f\u0995\u09be\u09a6\u09b6\u09c0"],2:["\u09b6\u09bf\u09ac\u09b0\u09be\u09a4\u09cd\u09b0\u09bf",""],14:["\u098f\u0995\u09be\u09a6\u09b6\u09c0"],18:["\u09a6\u09cb\u09b2\u09af\u09be\u09a4\u09cd\u09b0\u09be"]},days:30,firstDay:6,english:{months:[["February",2026],["March",2026]],dates:{February:{start:14,end:28},March:{start:1,end:15}}}},"\u099a\u09c8\u09a4\u09cd\u09b0":{fullMoon:18,newMoon:4,bengaliSpecialDates:{11:["\u09b0\u09be\u09ae \u09a8\u09ac\u09ae\u09c0"],12:["\u09b0\u09be\u09ae \u09a8\u09ac\u09ae\u09c0"],14:["\u098f\u0995\u09be\u09a6\u09b6\u09c0"],29:["\u09a8\u09c0\u09b2 \u09aa\u09c1\u099c\u09cb","\u098f\u0995\u09be\u09a6\u09b6\u09c0"]},days:30,firstDay:1,english:{months:[["March",2026],["April",2026]],dates:{March:{start:16,end:31},April:{start:1,end:14}}}}},monthList:["\u09ac\u09c8\u09b6\u09be\u0996","\u099c\u09cd\u09af\u09c8\u09b7\u09cd\u09a0","\u0986\u09b7\u09be\u09a2\u09bc","\u09b6\u09cd\u09b0\u09be\u09ac\u09a3","\u09ad\u09be\u09a6\u09cd\u09b0","\u0986\u09b6\u09cd\u09ac\u09bf\u09a8","\u0995\u09be\u09b0\u09cd\u09a4\u09bf\u0995","\u0985\u0997\u09cd\u09b0\u09b9\u09be\u09af\u09bc\u09a3","\u09aa\u09cc\u09b7","\u09ae\u09be\u0998","\u09ab\u09be\u09b2\u09cd\u0997\u09c1\u09a8","\u099a\u09c8\u09a4\u09cd\u09b0"]});const ae={0:"\u09e6",1:"\u09e7",2:"\u09e8",3:"\u09e9",4:"\u09ea",5:"\u09eb",6:"\u09ec",7:"\u09ed",8:"\u09ee",9:"\u09ef"};const ie={generateEnglishDates:function(e,t){const n=ne.months[e].english.dates,a=ne.months[e].english.months;let[i]=a[0];const o=[];let r=0;return t.forEach((e=>{const t=[];e.forEach((e=>{if(0===e)t.push(e);else{const e=n[i].start+r;e>n[i].end?(r=0,[i]=a[1],t.push([i,n[i].start+r])):t.push([i,e]),r+=1}})),o.push(t)})),o},getMonthSpecialDates:function(e,t){const n=ne.months[e].english.months,a={};return n.forEach((n=>{let[i]=n;if(i in t&&Object.keys(t[i]).length>0){console.log("get month special dates",e,t,i,i in t);const n=ne.months[e].english.dates[i];Object.entries(t[i]).forEach((e=>{let[t,o]=e;t>=n.start&&t<=n.end&&(i in a||(a[i]={}),a[i][t]=o)}))}})),a},getEnglishMonthsHeader:function(e){const[t,n]=e,[a,i]=t,[o,r]=n,s=a.slice(0,3),l=o.slice(0,3);return i===r?"".concat(s," - ").concat(l," ").concat(i):"".concat(s," ").concat(i," - ").concat(l," ").concat(r)},getBengali:function(e){const t=e.toString().split("").map(Number).map((e=>ae[e]));return"".concat(...t)}},oe=(e,t)=>{const n=427;console.log("in get bengali config",e,t,.25*e/n);const a=16*e/n,i=16*e/n,o=G(e,t);return(0,p.Z)((0,p.Z)({},o),{},{dateBox:{width:e,height:t,startX:0,startY:0,endX:e,radius:0,endY:t,color:"rgba(204,119,34,0.1)"},year:(0,p.Z)((0,p.Z)({},o.year),{},{startX:e-a,startY:0+a/2+1*i,color:"gray"}),month:(0,p.Z)((0,p.Z)({},o.month),{},{startX:a,startY:0+a/2+1*i,color:"green",font:"".concat(1.2*i,"px NotoBengali")}),divider:(0,p.Z)((0,p.Z)({},o.divider),{},{startX:a,startY:a/2+1.5*i*1,endX:e-a,endY:a+1.5*i*1}),weekRow:{letters:["\u09b0","\u09b8\u09cb","\u09ae","\u09ac\u09c1","\u09ac\u09c3","\u09b6\u09c1","\u09b6"],letterWidth:16*e/n,startX:a,startY:a/2+1.5*i*1.7,endX:e-a,width:e-2*a,font:"".concat(i,"px NotoBengali")},dates:(0,p.Z)((0,p.Z)({},o.dates),{},{startX:a,startY:a/2+1.5*i*1.9,endX:e-a,width:e-2*a,height:.95*t-1.5*a-1.5*i*1.9,color:"rgba(0, 0, 0, 0.12)",lineWidth:2,font:"".concat(1*i,"px NotoBengali"),efont:"".concat(.8*i,"px sans-serif"),sfont:"".concat(.6*i,"px NotoBengali"),scale:o.dates.scale/1.5,radius:5*e/n}),grid:{lineWidth:.25*e/n}})};function re(e,t,n,a,i,o){e.save(),e.beginPath(),e.arc(t,n,a,0,2*Math.PI),e.fillStyle=i,e.fill(),e.lineWidth=1,e.strokeStyle=o,e.stroke(),e.restore()}function se(e,t,n,a,i,o,r,s){e.save(),e.textBaseline="bottom";const{radius:l,startX:c,startY:d}=t;n.forEach(((n,h)=>{const g=d+h*o;n.forEach(((n,d)=>{const m=0===n?" ":ie.getBengali(n),u=0===n?" ":r[h][d][1],p=r[h][d][0],x=c+i*d;!function(e,t,n,a,i,o,r,s){const l=o+13*a/16,c=r+i/4,{fullMoon:d,newMoon:h}=ne.months[n];d===t&&re(e,l,c,s,"white","gray"),h===t&&re(e,l,c,s,"black","gray")}(e,n,s,i,o,x,g,l),function(e,t,n,a,i,o,r,s,l){const{scale:c,letterWidth:d,efont:h}=t,g=l+r,m=s+13*o/16;if(n in i&&a in i[n]){const t=i[n][a];if("Other"===t)V.renderText(e,a,h,"brown",m,g,"center");else{const n=m-o/16,i=g-d;V.renderSpecialDates(e,c,n,i,m,g,t,a)}}else V.renderText(e,a,h,"gray",m,g,"center")}(e,t,p,u,a,i,o,x,g),function(e,t,n,a,i,o,r,s){const{font:l}=t,c=r+i/4,d=s+o/2,h=0===a||6===a?"red":"green";V.renderText(e,n,l,h,c,d,"center")}(e,t,m,d,i,o,x,g),function(e,t,n,a,i,o,r,s){const{sfont:l}=t,c=s+o/2,d=r+i/2,h="bengaliSpecialDates"in ne.months[a]?ne.months[a].bengaliSpecialDates:{};if(n in h)if(1===h[n].length)V.renderText(e,h[n],l,"#0047AB",d,c,"center","top");else{const t=r+i/16,a=s+o;V.renderText(e,h[n][0],l,"#0047AB",t,c,"start","top"),V.renderText(e,h[n][1],l,"#0047AB",t,a,"start","bottom")}}(e,t,n,s,i,o,x,g)}))})),e.restore()}function le(e,t,n,a,i,o,r){const{dateBox:s,month:l,divider:c,year:d}=t,h=ne.months[a].english.months,g=ie.generateEnglishDates(a,o);V.renderRoundedRect(e,s.startX,s.startY,s.width,s.height,s.radius,s.color);const{font:m,color:u,startX:p,startY:x}=d,f=ie.getEnglishMonthsHeader(h);V.renderText(e,f,m,u,p,x,"right");const b="".concat(a.toUpperCase(),"  ").concat(ie.getBengali(n)),{font:w,color:y,startX:C,startY:j}=l;V.renderText(e,b,w,y,C,j);const{startX:Z,endX:v}=c,I=(v-Z)/7,D=t.dates.height/o.length,S=ie.getMonthSpecialDates(a,i);!function(e,t,n,a,i){const{startX:o,startY:r}=t.divider,{startX:s,startY:l,width:c,height:d}=t.dates;V.drawLine(e,o,r,o+7*n,r,"black",t.grid.lineWidth);for(let h=0;h<=7;h+=1){const a=o+n*h,i=r+d+(l-r);V.drawLine(e,a,r,a,i,"black",t.grid.lineWidth)}for(let h=0;h<=i;h+=1){const n=l+a*h,i=s+c;V.drawLine(e,s,n,i,n,"black",t.grid.lineWidth)}}(e,t,I,D,o.length),function(e,t,n){e.save(),e.textAlign="center",e.font=t.font,t.letters.forEach(((a,i)=>{e.fillStyle=0===i||6===i?"red":"black",e.fillText(a,t.startX+n*(i+1)-n/2,t.startY)})),e.restore()}(e,t.weekRow,I),se(e,t.dates,o,S,I,D,g,a),V.renderBranding(e,t.branding),r()}const ce={generateDates:(e,t,n,a,i,o,r,s,l)=>{console.log("bengali generate date",o);const{width:c,height:d,maxCanvasWidth:h}=y.monthCanvas[o],{days:g,firstDay:m}=l.months[t];if("potrait"===a){const{dateHeightFraction:a}=l.potrait;V.generateDates(e,1432,t,g,m,n||{},c,d*a,h,r,s,oe,le)}if("landscape"===a){const{dateWidthFraction:a,bindingHeightFraction:o}=l.landscape;V.generateDates(e,1432,t,g,m,n||{},d*a,"none"===i?c:c*(1-o),h,r,s,K,q)}}};var de=n(41806);function he(e){let{month:t}=e;const n=(0,a.useRef)(null),{config:i,dimensions:o,backImages:r,specialDates:s}=(0,a.useContext)(g),{dateHeightFraction:l}=i.potrait,{height:c,width:d}=o,h=c*l,m=c*(1-l);return console.log("bengali date box",r,s),(0,a.useEffect)((()=>{null!=n.current&&ce.generateDates(n.current,t,r[t]||{},"potrait","none","Browser",(()=>{}),s||{},i)}),[n,r,s]),(0,Y.jsx)(de.Z,{width:d,height:h,sx:{mt:0,mb:0,boxSizing:"border-box",position:"absolute",top:m,zIndex:120},children:(0,Y.jsx)("canvas",{style:{zIndex:120},ref:n})})}function ge(e){let{handleChange:t,handleEditChange:n,MonthComp:a,DateComp:i,ImageComp:o}=e;return ne.monthList.map((e=>(0,Y.jsx)(a,{month:e,year:1432,handleChange:t,handleImageEdit:t=>{var a;if(!t.current)return;const{width:i,height:o,x:r,y:s}=null===(a=t.current)||void 0===a?void 0:a.getCroppingRect();n({cropWidth:i,cropHeight:o,x:r,y:s},e)},ImageComp:o,DateComp:i},e)))}function me(e){let{handleImageChange:t,handleEditChange:n,MonthComp:a,ImageComp:o}=e;return(0,Y.jsx)(i.ZP,{container:!0,direction:"row",justifyContent:"space-evenly",alignItems:"center",sx:{backgroundColor:"black",mt:0},rowSpacing:2,children:(0,Y.jsx)(ge,{handleChange:t,handleEditChange:n,spacing:2,MonthComp:a,ImageComp:o,DateComp:he})})}const ue={config:ne,generateImage:$.generateImage,generateDates:ce.generateDates,drawSheet:$.drawSheet,totalImageRenderCount:24,Year:(0,a.memo)(me)},pe=(0,p.Z)((0,p.Z)({},B),{},{potrait:(0,p.Z)((0,p.Z)({},B.potrait),{},{imageHeightFraction:1}),months:{}}),xe=(e,t)=>{console.log("in get config",e,t);const n=427,a=n/.707,i=16*e/n,o=16*e/n;return{dateBoxArea:{width:e,height:t,startX:0,startY:0,endX:e,endY:t,bgcolor:"white"},branding:{bsx:i,bsy:.95*t-i+1.3*t*8/a,bw:e-2*i,bh:.075*t,br:5*e/n,bf:"bold ".concat(.5*o,"px KaushanScript"),bfr:"bold ".concat(.4*o,"px sans-serif"),bc:"rgba(255,255,255,1)",bstx:2*i,bsty:.95*t-i+1.3*t*8/a+.075*t/2,scale:16*e*.4/8540,iconWidth:16*e*.4/n},month:{startX:e-i,startY:t-3*i,color:"#0047AB",font:"bold ".concat(1.2*o,"px sans-serif")}}};function fe(e,t,n,a,i,o,r){console.log("default generate date",n,i,o);const{month:s}=t;V.renderRoundedRect(e,s.startX-75,s.startY-25,150,40,5,"rgba(255,255,255,0.6)"),V.renderText(e,a.toUpperCase(),s.font,s.color,s.startX,s.startY,"right"),V.renderBranding(e,t.branding),r()}const be={config:pe,generateImage:$.generateImage,generateDates:(e,t,n,a,i,o,r,s,l)=>{console.log("default generate date",o,i);const{year:c}=y,{width:d,height:h,maxCanvasWidth:g}=y.monthCanvas[o],{days:m,firstDay:u}=y.months[t];if("potrait"===a){const{dateHeightFraction:a}=l.potrait;V.generateDates(e,c,t,m,u,n||{},d,h*a,g,r,s,xe,fe)}},drawSheet:$.drawSheet,totalImageRenderCount:24,Year:E},we={default:ee,fullimage:te,bengali:ue,custom:be};var ye=n(35508);function Ce(){const[e,t]=(0,a.useState)([]),n=(0,a.useCallback)(((e,n)=>t((t=>(0,p.Z)((0,p.Z)({},t),{},{[n]:e})))),[]),i=(0,a.useCallback)(((n,a)=>{const i=e[a];t((e=>(0,p.Z)((0,p.Z)({},e),{},{[a]:(0,p.Z)((0,p.Z)({},i),n)})))}));return[e,n,i,()=>{console.log("in empty images"),t({})}]}function je(){const[e,t]=(0,a.useState)([]);return[e,(e,n)=>t((t=>0===t.length?[[e,n]]:[...t,[e,n]])),()=>t([])]}var Ze=n(45987),ve=n(49142);function Ie(){const[e,t]=(0,a.useState)({January:{},February:{},March:{},April:{},May:{},June:{},July:{},August:{},September:{},October:{},November:{},December:{}});return[e,(n,a,i)=>{t((t=>{const o=(0,p.Z)((0,p.Z)({},t[n]),{},{[a]:i});return console.log("in add date",(0,p.Z)((0,p.Z)({},e),{},{[n]:o})),(0,p.Z)((0,p.Z)({},e),{},{[n]:o})}))},(n,a)=>{const i=e[n],{[a]:o}=i,r=(0,Ze.Z)(i,[a].map(ve.Z));console.log("in remove date",n,a,(0,p.Z)((0,p.Z)({},e),{},{[n]:r})),t((0,p.Z)((0,p.Z)({},e),{},{[n]:r}))}]}var De=n(94469),Se=n(33604),Fe=n(96467),We=n(61113),ke=n(19536),He=n(93405),Re=n(72429),Be=n(23306),Ye=n(51405),Ae=n(1550),Me=n(24256),Ee=n(83213),Te=n(74748);function Xe(e){let{label:t,value:n,options:a,handleChange:i,disabled:o}=e;return(0,Y.jsxs)(Ae.Z,{variant:"standard",sx:{minWidth:{xs:68,sm:50,md:100},mr:1},size:"small",children:[(0,Y.jsx)(Be.Z,{id:"demo-simple-select-label",children:t}),(0,Y.jsx)(Me.Z,{labelId:"demo-simple-select-label",id:"demo-simple-select",autoWidth:!0,value:n,label:t,onChange:e=>i(e.target.value),sx:{fontSize:"0.9rem",maxHeight:"100px"},MenuProps:{sx:{maxHeight:"300px"}},disabled:o,children:a.map((e=>(0,Y.jsx)(Ye.Z,{value:e.value,children:(0,Y.jsxs)(c.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.icon?(0,Y.jsx)(Te.Z,{children:e.icon}):null,(0,Y.jsx)(Ee.Z,{children:e.label})]})},e.value)))})]})}Xe.defaultProps={disabled:!1};var ze=n(49695),Pe=n(11069),Le=n(15919),Oe=n(75930),Je=n(98481);function Ne(e){let{handleOpen:t,addDate:n}=e;const[i]=(0,m.Z)(),{monthList:s,year:l}=y,h=X.getYearInfo(s,l),[g,u]=(0,a.useState)(""),[p,x]=(0,a.useState)(""),[f,b]=(0,a.useState)(""),w=s.map((e=>({label:e,value:e}))),C=[{value:"Birthday",label:"Birthday",icon:(0,Y.jsx)(ze.Z,{sx:{color:"#FF5B61"}})},{value:"Anniversary",label:"Anniversary",icon:(0,Y.jsx)(Pe.Z,{sx:{color:"red"}})},{value:"Home",label:"Home",icon:(0,Y.jsx)(Le.Z,{sx:{color:"#5F9EA0"}})},{value:"Travel",label:"Travel",icon:(0,Y.jsx)(Oe.Z,{sx:{color:"blue"}})},{value:"Other",label:"Other",icon:(0,Y.jsx)(Je.Z,{sx:{color:"brown"}})}],j=[];if(""!==g){const e=h[g].days;for(let t=1;t<=e;t+=1)j.push({label:t,value:t})}const Z=i<500;return(0,Y.jsxs)(o.Z,{sx:{mb:1},children:[(0,Y.jsx)(r.Z,{title:"Add Special Dates",sx:{color:"gray"},action:(0,Y.jsx)(Re.Z,{handleClose:()=>t(!1)})}),(0,Y.jsx)(ke.Z,{}),(0,Y.jsx)(He.Z,{children:(0,Y.jsxs)(c.Z,{direction:Z?"column":"row",justifyContent:"space-around",spacing:1,children:[(0,Y.jsx)(Xe,{label:"Month",value:g,options:w,handleChange:u}),(0,Y.jsx)(Xe,{label:"Date",value:p,options:j,handleChange:x,disabled:!g}),(0,Y.jsx)(Xe,{label:"Type",value:f,options:C,handleChange:b,disabled:!p}),(0,Y.jsx)(d.Z,{disabled:!(g&&p&&f),variant:"outlined",onClick:()=>{n(g,p,f),u(""),x(""),b("")},children:"Add"})]})})]})}var Ue=n(24076),Ve=n(67478),Ge=n(47131),_e=n(23477),Ke=n(66835),qe=n(57861),Qe=n(11198);const $e={Birthday:(0,Y.jsx)(ze.Z,{sx:{color:"#FF5B61"}}),Anniversary:(0,Y.jsx)(Pe.Z,{sx:{color:"red"}}),Home:(0,Y.jsx)(Le.Z,{sx:{color:"#5F9EA0"}}),Travel:(0,Y.jsx)(Oe.Z,{sx:{color:"blue"}}),Other:(0,Y.jsx)(Je.Z,{sx:{color:"brown"}})};function et(e){let{date:t,type:n,handleRemove:a}=e;return(0,Y.jsxs)(Ue.Z,{children:[(0,Y.jsx)(Ve.Z,{align:"right",children:t},t),(0,Y.jsxs)(Ve.Z,{align:"right",children:[n," "]},n),(0,Y.jsx)(Ve.Z,{align:"right",children:$e[n]},$e[n]),(0,Y.jsx)(Ve.Z,{align:"right",children:(0,Y.jsx)(Ge.Z,{onClick:a,children:(0,Y.jsx)(Qe.Z,{})})},"remove-button")]},"".concat(t,"-").concat(n))}function tt(e){let{label:t}=e;return(0,Y.jsx)(Ve.Z,{align:"right",sx:{fontWeight:"bold",color:"gray"},children:t})}function nt(){return(0,Y.jsx)(_e.Z,{children:(0,Y.jsxs)(Ue.Z,{children:[(0,Y.jsx)(tt,{label:"Date"},"Date"),(0,Y.jsx)(tt,{label:"Type"},"Type"),(0,Y.jsx)(tt,{label:"Icon"},"Icon"),(0,Y.jsx)(tt,{label:"Remove"},"Remove")]})})}function at(e){let{removeDate:t}=e;const{specialDates:n}=(0,a.useContext)(g),{monthList:i}=y,s=i.map((e=>Object.keys(n[e]).length>0?(0,Y.jsxs)("div",{children:[(0,Y.jsx)(We.Z,{variant:"h6",sx:{textAlign:"center",fontWeight:"bold",p:1},children:e},e),(0,Y.jsxs)(Ke.Z,{size:"small",children:[(0,Y.jsx)(nt,{}),(0,Y.jsx)(qe.Z,{children:Object.keys(n[e]).map((a=>(0,Y.jsx)(et,{date:a,type:n[e][a],handleRemove:()=>t(e,a)},"".concat(e,"-").concat(a))))})]})]},e):null)).filter((e=>!!e));return s.length>0?(0,Y.jsxs)(o.Z,{sx:{maxHeight:"500px",overflowY:"scroll",scrollbarWidth:"none"},children:[(0,Y.jsx)(r.Z,{title:"Added Dates",sx:{fontColor:"gray"}}),(0,Y.jsx)(ke.Z,{}),(0,Y.jsx)(He.Z,{children:s})]}):null}function it(e){let{open:t,handleOpen:n,addDate:a,removeDate:i}=e;return(0,Y.jsxs)(De.Z,{fullWidth:!0,open:t,PaperProps:{sx:{backgroundColor:"transparent"},elevation:0},children:[(0,Y.jsx)(Ne,{handleOpen:n,addDate:a}),(0,Y.jsx)(at,{removeDate:i})]})}function ot(e){let{open:t,bgs:n,handleClose:a,handleClick:o}=e;return console.log("background images",n),(0,Y.jsxs)(De.Z,{open:t,PaperProps:{position:"fixed",top:0},children:[(0,Y.jsx)(Se.Z,{id:"alert-dialog-title",children:"Change Background"}),(0,Y.jsx)(Re.Z,{handleClose:a}),(0,Y.jsx)(Fe.Z,{dividers:!0,children:(0,Y.jsx)(i.ZP,{container:!0,sx:{width:"100%",justifyContent:"space-between"},children:n.map(((e,t)=>(0,Y.jsxs)(i.ZP,{item:!0,sx:{m:1,display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center"},onClick:()=>o(t),children:[(0,Y.jsx)(de.Z,{component:"img",src:e[0],alt:e[1],sx:{width:"100px",borderRadius:"5px","&:hover":{outline:"2px solid black",borderRadius:"5px"},"&:active":{outline:"2px solid blue"}}}),(0,Y.jsxs)(We.Z,{sx:{fontWeight:"bold",color:"gray"},children:[e[1]," "]})]},e[0])))})})]})}const rt=[{label:"Default",value:"default"},{label:"Full Image",value:"fullimage"},{label:"Side Image",value:"sideimage"}];function st(e){let{setOptions:t,handleDatesClick:n}=e;const[i,o]=(0,a.useState)("default");return(0,a.useEffect)((()=>t(i)),[i]),(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(Xe,{label:"Theme",value:i,options:rt,handleChange:e=>o(e)}),(0,Y.jsx)(d.Z,{onClick:n,children:"Dates"})]})}var lt=n(75908),ct=n(9289),dt=n(85281);function ht(e){let{setOptions:t,handleDatesClick:n,generate:a,status:i}=e;return(0,Y.jsx)(lt.Z,{position:"static",sx:{backgroundColor:"transparent",py:.5,borderTop:"1px solid gray",elevation:0},children:(0,Y.jsxs)(ct.Z,{variant:"dense",sx:{justifyContent:"center"},children:[(0,Y.jsx)(st,{setOptions:t,handleDatesClick:n}),(0,Y.jsx)(d.Z,{variant:"outlined",onClick:a,startIcon:i?(0,Y.jsx)(dt.Z,{size:"20px",sx:{color:"gray"}}):"",disabled:Boolean(i),children:i||"Add To Cart"})]})})}function gt(e){let{month:t}=e;const n=(0,a.useRef)(null),{config:i,dimensions:o,backImages:r,specialDates:s,generateDates:l}=(0,a.useContext)(g),{dateHeightFraction:c}=i.potrait,{height:d,width:h}=o,m=d*c,u=d*(1-c);return console.log("potrait date box",r),(0,a.useEffect)((()=>{null!=n.current&&l(n.current,t,r[t]||{},"potrait","none","Browser",(()=>{}),s||{},i)}),[n,r,s[t]]),(0,Y.jsx)(de.Z,{width:h,height:m,sx:{mt:0,mb:0,boxSizing:"border-box",position:"absolute",top:u,zIndex:120},children:(0,Y.jsx)("canvas",{style:{zIndex:120},ref:n})})}function mt(e){let{month:t,children:n}=e;const{dimensions:o}=(0,a.useContext)(g);return(0,Y.jsx)(i.ZP,{item:!0,children:(0,Y.jsx)(de.Z,{component:"div",sm:12,md:6,lg:4,sx:{width:o.width,height:o.height,color:"black",display:"flex",position:"relative",overflow:"hidden",backgroundColor:"white"},children:n})},t)}function ut(e){let{year:t,month:n,ImageComp:a,DateComp:i,handleChange:o,handleImageEdit:r,genDateFunc:s}=e;return console.log("potrait month",t,n),(0,Y.jsxs)(mt,{month:n,children:[(0,Y.jsx)(a,{month:n,handleChange:o,handleImageEdit:r}),(0,Y.jsx)(i,{year:t,month:n,genDateFunc:s})]})}ht.defaultProps={status:""},ut.defaultProps={genDateFunc:()=>{}};var pt=n(41070),xt=n.n(pt),ft=n(65954),bt=n(61689),wt=n(67257),yt=n(78107);function Ct(e){let{image:t,width:n,height:i,border:o,color:r,scale:s,rotate:l,onImageChange:c,onImageReady:h,handleImageChange:g}=e;const m=(0,a.useRef)(),[u,p]=(0,a.useState)("");return(0,a.useEffect)((()=>{p(t.src)}),[t,n,i,s]),(0,Y.jsxs)(de.Z,{component:"div",sx:{width:n,height:i,zIndex:2,position:"absolute",top:0,left:0},children:[(0,Y.jsx)(xt(),{ref:m,image:u,style:{width:n,height:i,pointerEvents:"all"},width:n,height:i,border:o,color:r,scale:s,rotate:l,onImageChange:()=>c(m),onImageReady:()=>h(m)}),"src"in t?(0,Y.jsx)(d.Z,{variant:"outlined",sx:{position:"absolute",top:"50%",left:"50%",backgroundColor:"rgba(0,0,0, 0.6)",transform:"translate(-50%, -50%)",borderRadius:"5px",fontSize:"10px",pointerEvents:"none",color:"rgb(255,255,255,0.8)",alignItems:"center"},startIcon:(0,Y.jsx)(wt.Z,{}),children:(0,Y.jsx)(We.Z,{variant:"caption",sx:{fontWeight:"bold"},children:"Drag"})}):null,(0,Y.jsx)(bt.Z,{title:"src"in t?"Change Image":"Add Image",children:(0,Y.jsx)(Ge.Z,{onClick:g,sx:{position:"absolute",top:"30px",left:"10px",backgroundColor:"rgba(255,255,255, 0.5)","&:hover":{backgroundColor:"rgba(255,255,255, 0.7)",p:1.2},transform:"translate(0, -50%)"},children:"src"in t?(0,Y.jsx)(ft.Z,{}):(0,Y.jsx)(yt.Z,{})})})]})}Ct.defaultProps={scale:1,rotate:0,border:0,onImageReady:()=>{},onImageChange:()=>{},color:[0,0,0,.6],handleImageChange:()=>{},image:{src:""}};var jt=n(30627);function Zt(e){let{height:t}=e;return(0,Y.jsxs)(c.Z,{direction:"row",justifyContent:"space-around",alignItems:"center",sx:{width:"100%",height:t,backgroundSize:"cover"},children:[(0,Y.jsx)(jt.Z,{fontSize:"5px",sx:{color:"rgba(0,0,0,0.12)"}}),(0,Y.jsx)(jt.Z,{fontSize:"5px",sx:{color:"rgba(0,0,0,0.12)"}}),(0,Y.jsx)(jt.Z,{fontSize:"5px",sx:{color:"rgba(0,0,0,0.12)"}}),(0,Y.jsx)(jt.Z,{fontSize:"5px",sx:{color:"rgba(0,0,0,0.12)"}}),(0,Y.jsx)(jt.Z,{fontSize:"5px",sx:{color:"rgba(0,0,0,0.12)"}}),(0,Y.jsx)(jt.Z,{fontSize:"5px",sx:{color:"rgba(0,0,0,0.12)"}}),(0,Y.jsx)(jt.Z,{fontSize:"5px",sx:{color:"rgba(0,0,0,0.12)"}})]})}var vt=n(75192),It=n.n(vt);const Dt=(0,a.forwardRef)(((e,t)=>{let{month:n,handleChange:a}=e;return(0,Y.jsxs)(de.Z,{sx:{position:"relative",width:"100%",height:"100%",border:"2px dashed gray",backgroundColor:"rgba(0,0,0,0.05)","&:hover":{borderColor:"#2196f3"}},children:[(0,Y.jsx)("input",{ref:t,type:"file",accept:"image/*",style:{opacity:"0.0",position:"absolute",width:"100%",height:"100%",zIndex:1,border:"2px dashed gray"},onChange:e=>a(e.target.files[0],n)}),(0,Y.jsx)(Ge.Z,{size:"large",sx:{top:"50%",left:"50%",position:"absolute",transform:"translate(-50%, -50%)",color:"gray"},children:(0,Y.jsx)(We.Z,{children:"Drag 'n' drop image, or click to select image"})})]})}));Dt.propTypes={month:It().string.isRequired,handleChange:It().func.isRequired};const St=Dt;function Ft(e){let{month:t,handleChange:n,handleImageEdit:i}=e;const[o,r]=(0,a.useState)({}),s=(0,a.useRef)(null),{config:l,dimensions:c,binding:d}=(0,a.useContext)(g),{imageHeightFraction:h,bindingHeightFraction:m}=l.potrait,{height:u,width:x}=c,f=u*h,b=u*m,w="none"===d?f:f-b,y="none"===d?0:b;return console.log("potrait image box",l,d),(0,Y.jsxs)(de.Z,{sx:{height:f,width:"inherit",position:"relative"},children:["none"===d?null:(0,Y.jsx)(Zt,{height:b}),(0,Y.jsxs)(de.Z,{width:x,height:w,sx:{position:"absolute",top:y},children:[(0,Y.jsx)(St,{month:t,handleChange:(e,t)=>{const a=new Image;a.onload=i=>{const{naturalWidth:o,naturalHeight:s}=i.target,l=(0,p.Z)((0,p.Z)({},X.getImageDets(e,o,s,a)),{},{elem:a});r(l),n(l,t)},a.src=e instanceof File?URL.createObjectURL(e):e},ref:s}),"src"in o?(0,Y.jsx)(Ct,{scale:1,image:o,width:x,height:w,onImageChange:i,onImageReady:i,handleImageChange:()=>{var e;return null===(e=s.current)||void 0===e?void 0:e.click()}}):null]})]})}function Wt(e){let{year:t,month:n,ImageComp:a,DateComp:i,handleChange:o,handleImageEdit:r}=e;return console.log("landscape month",t,n),(0,Y.jsx)(mt,{month:n,children:(0,Y.jsxs)(c.Z,{direction:"row",sx:{width:"inherit"},justifyContent:"space-between",children:[(0,Y.jsx)(a,{month:n,handleChange:o,handleImageEdit:r}),(0,Y.jsx)(i,{year:t,month:n})]})})}function kt(e){let{month:t,handleChange:n,handleImageEdit:i}=e;const[o,r]=(0,a.useState)({}),s=(0,a.useRef)(null),{config:l,dimensions:c,binding:d}=(0,a.useContext)(g),{imageWidthFraction:h,bindingHeightFraction:m}=l.landscape,{height:u,width:x}=c,f=x*h,b=u*m,w="none"===d?u:u-b,y="none"===d?0:b;return(0,Y.jsxs)(de.Z,{sx:{height:u,width:f},children:["none"===d?null:(0,Y.jsx)(Zt,{height:b}),(0,Y.jsxs)(de.Z,{width:f,height:w,sx:{position:"absolute",top:y},children:[(0,Y.jsx)(St,{month:t,handleChange:(e,t)=>{const a=new Image;a.onload=i=>{const{naturalWidth:o,naturalHeight:s}=i.target,l=(0,p.Z)((0,p.Z)({},X.getImageDets(e,o,s,a)),{},{elem:a});r(l),n(l,t)},a.src=e instanceof File?URL.createObjectURL(e):e},ref:s}),"src"in o?(0,Y.jsx)(Ct,{scale:1,image:o,width:f,height:w,onImageChange:i,onImageReady:i,handleImageChange:()=>{var e;return null===(e=s.current)||void 0===e?void 0:e.click()}}):null]})]})}function Ht(e){let{month:t}=e;const n=(0,a.useRef)(null),{config:i,dimensions:o,backImages:r,specialDates:s,binding:l}=(0,a.useContext)(g),{dateWidthFraction:c,imageWidthFraction:d,bindingHeightFraction:h}=i.landscape,{height:m,width:u}=o,p=m*h,x=u*c,f="none"===l?0:p,b=u*d,w="none"===l?m:m-p;return(0,a.useEffect)((()=>{null!=n.current&&t in r&&$.generateDates(n.current,t,r[t],"landscape",l,"Browser",(()=>{}),s||{})}),[n,r,s[t]]),(0,Y.jsxs)(de.Z,{width:x,height:m,children:["none"===l?null:(0,Y.jsx)(Zt,{height:p}),(0,Y.jsx)(de.Z,{width:x,height:w,sx:{boxSizing:"border-box",position:"absolute",top:f,left:b},children:(0,Y.jsx)("canvas",{style:{zIndex:120},ref:n})})]})}function Rt(e){let{orientation:t,binding:n,size:i,productId:o}=e;const[r,s,l,c,d,h,m,x,f]=function(e,t,n,i,o){const[r,s]=(0,a.useState)(0),[l,c,d]=je(),[h,g,m]=je(),[u,x,f]=Ce(),[b,w,,C]=Ce(),[j,Z]=(0,a.useState)(i),[v,I,D]=Ie(),S=()=>s((e=>e+1)),{printWidth:F,printHeight:W}=y.monthCanvas[n],k=we[j].config.monthList||y.monthList;(0,a.useEffect)((()=>{C(),Object.entries(we[j].config.months).forEach((e=>{let[t,n]=e;const a=new Image;a.onload=e=>{const{naturalWidth:i,naturalHeight:o}=e.target,r=(0,p.Z)((0,p.Z)({},X.getImageDets({src:n.image},i,o,a)),{},{elem:a});w(r,t)},a.src=n.image}))}),[j]);const H=we[j].config,R=()=>{const a="potrait"===e?{orientation:"p",unit:"in",format:[F,W],compress:!0}:{orientation:"l",unit:"in",format:[W,F],compress:!0},i=new ye.kH(a);for(let o=0;o<k.length;o+=1)o>0&&i.addPage(a),we[j].drawSheet(i,k[o],l,h,n,t,e,H);console.timeEnd("timer draw sheet loop"),i.save("tc-".concat(e,"-").concat(n,"-").concat(t,".pdf")),m(),d()};return(0,a.useEffect)((()=>{r===we[j].totalImageRenderCount&&(s(0),R())}),[r,R]),console.log("multi page use ",b,o),[j,Z,v,I,D,x,f,()=>{s(0),d(),m();const{generateImage:a,generateDates:i}=we[j];k.forEach((o=>{const r=document.createElement("canvas"),s=document.createElement("canvas");if(c(o,r),g(o,s),a(r,u[o],e,t,n,S,H),"color"===j){const a=we[j].config.months[o].color;i(s,o,a,e,t,n,H)}else i(s,o,b[o],e,t,n,S,v,H)}))},b]}(t,n,i,"default",o),[b,w]=(0,a.useState)(!1),C=()=>w(!0),j=u(t,we[r].config),Z=we[r].Year;return console.log("default calendar",r,ht,s,C,x),(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(ht,{setOptions:s,handleDatesClick:C,generate:x}),(0,Y.jsxs)(g.Provider,{value:{backImages:f,specialDates:l,orientation:t,binding:n,config:we[r].config,dimensions:j,generateDates:we[r].generateDates},children:[(0,Y.jsx)(Z,{MonthComp:"potrait"===t?ut:Wt,DateComp:"potrait"===t?gt:Ht,ImageComp:"potrait"===t?Ft:kt,handleEditChange:m,handleImageChange:h}),(0,Y.jsx)(it,{open:b,handleOpen:w,addDate:c,removeDate:d})]})]})}var Bt=n(82358),Yt=n(2244),At=n(25551),Mt=n(67098),Et=n(84525);const Tt=(e,t)=>{const n=427,a=427/(e/t),i=8*e/n,o=16*e/n,r={width:e,height:t,startX:0,startY:0},s={startX:e-20*e/n,startY:20*t/a,color:"green",font:"bold ".concat(2*o,"px sans-serif"),fontSize:2*o,radius:5*t/a,bgcolor:"#ffffff99",rectPad:i/2,textAlign:"right",textBaseline:"top"},l={bsx:i,bsy:t-i-.055*t,bw:e-2*i,bh:.055*t,br:5*e/n,bf:"bold ".concat(.45*o,"px KaushanScript"),bfr:"bold ".concat(.45*o,"px sans-serif"),bc:"rgba(255,255,255,1)",bstx:2*i,bsty:t-i-.055*t/2,scale:16*e*.45/8540,iconWidth:16*e*.45/n},c={letters:["S","M","T","W","T","F","S"],letterWidth:8*e/n,font:"".concat(.5*o,"px NotoBengali"),width:(e-3*i)/4-2*i,letterHeight:.75*o},d={letterWidth:6.4*e/n,letterHeight:1.5*.4*o,font:"".concat(.4*o,"px NotoBengali"),scale:6.4*e/8540,iconWidth:6.4*e/n};return{dateBoxArea:r,year:s,branding:l,dateBox:{width:(e-3*i)/4,height:(t-3*i-.055*t)/3,startX:i,startY:i,radius:5*e/n,endX:e,endY:t,bgcolor:"rgba(255,255,255, 0.7)",color:"rgba(255,255,255, 0.85)",gapX:i/3,gapY:i/3,monthFont:"".concat(.65*o,"px NotoBengali"),monthTopGap:4*e/n,letterHeight:.65*o,dividerColor:"rgba(0,0,0,0.12)",lineWidth:1*e/n,weekRow:c,dates:d},weekRow:c}};const Xt={generateImage:(e,t,n,a,i,o)=>{const{imageHeightFraction:r,imageWidthFraction:s}=i,{width:l,height:c}=y.monthCanvas[n],{maxCanvasWidth:d}=y,[h,g]=X.getCanvasDimensions(l*s,c*r,t,d);console.log("single generate image",h,g,r,l,c,t.width,t.height,i);const m=V.initialize(e,h,g),u=Tt(h,g);return t&&V.renderImage(m,t,h,g,0,0,(()=>{o(m,u),a()})),e},generateDates:(e,t,n,a,i,o,r)=>{console.log("generate dates single",t);const{dateHeightFraction:s}=o,{width:l,height:c,maxCanvasWidth:d}=n,{width:h,height:g}=t,[m,u]="width"in t?X.getCanvasDimensions(l,c*s,{width:h,height:g},d):[l,c*s],p=V.initialize(e,m,u),x=Tt(m,u),f=()=>{r(p,x,i),a()},{width:b,height:w,startX:y,startY:C}=x.dateBoxArea;return"width"in t?V.renderImage(p,t,b,w,y,C,f):f(),e},renderDateBox:function(e,t,n){e.save();const{startX:a,startY:i,width:o,height:r,bgcolor:s,radius:l,gapX:c,gapY:d,monthTopGap:h}=t,{monthList:g,year:m}=y,u=X.getYearInfo(g,m);for(let x=0;x<3;x+=1)for(let m=0;m<4;m+=1){const f=g[4*x+m],b=a+m*o+m*c,w=i+x*r+x*d;V.renderRoundedRect(e,b,w,o,r,l,s),e.save(),e.fillStyle="green",e.textAlign="center",e.font=t.monthFont,e.textBaseline="hanging",e.fillText(f,b+o/2,w+h),e.restore(),V.drawLine(e,b+a,w+h+t.letterHeight,b+o-a,w+h+t.letterHeight,t.dividerColor,t.lineWidth),e.textBaseline="middle",V.renderWeekRow(e,(0,p.Z)((0,p.Z)({},t.weekRow),{},{startX:b+a,startY:w+h+t.letterHeight+t.weekRow.letterHeight/2,endX:b+o-t.startX,endY:w+h+t.letterHeight+t.weekRow.letterHeight/2}));const y=X.generateCalendar(u[f].days,u[f].firstDay);V.renderDates(e,(0,p.Z)((0,p.Z)({},t.dates),{},{startX:b+t.startX,startY:w+h+t.letterHeight+t.weekRow.letterHeight+t.dates.letterHeight/2,width:t.weekRow.width,height:t.height-(h+t.letterHeight+t.weekRow.letterHeight/2)-h}),y,n[f])}e.restore()},renderYear:function(e,t,n){e.save(),e.textAlign=t.textAlign,e.textBaseline=t.textBaseline,e.font=t.font;const a=e.measureText(n),i=a.width;V.renderRoundedRect(e,t.startX-i,t.startY,i+2*t.rectPad,-1*a.ideographicBaseline+t.radius,t.radius,t.bgcolor),e.fillStyle=t.color,e.fillText(n,t.startX+t.rectPad,t.startY+t.radius/2),e.restore()}};function zt(e){let{image:t,width:n,height:i,handleChange:o,handleImageEdit:r}=e;const{inputRef:s}=(0,a.useContext)(g);return console.log(o),(0,Y.jsx)(Y.Fragment,{children:(0,Y.jsxs)(de.Z,{width:n,height:i,sx:{position:"absolute",top:0,zIndex:13,bgcolor:"white"},children:[(0,Y.jsx)(St,{month:"",handleChange:o,ref:s}),"src"in t?(0,Y.jsx)(Ct,{scale:1,image:t,width:n,height:i,onImageChange:r,onImageReady:r,handleImageChange:()=>{s.current&&s.current.click()}}):null]})})}zt.defaultProps={width:0,height:0};const Pt=n.p+"static/media/October.fce013a8cad5d39991f3.jpeg",Lt=n.p+"static/media/November.fb218e2f2804d4eec8f6.jpeg",Ot=(0,p.Z)((0,p.Z)({},B),{},{imageWidthFraction:1,imageHeightFraction:.55,dateHeightFraction:.45,defaultBgImage:0,bgImages:[[C,"Winter"],[j,"Flowers"],[Z,"Holi"],[v,"Spring"],[I,"Beach"],[D,"Rain"],[S,"Dew"],[F,"Autumn"],[W,"Leaves"],[Pt,"Durga Puja"],[Lt,"Diwali"],[R,"Christmas"]],aspectRatio:.666}),Jt={config:Ot,generateImage:Xt.generateImage,generateDates:Xt.generateDates,renderContents:(e,t,n)=>{Xt.renderDateBox(e,t.dateBox,n),V.renderBranding(e,t.branding)},renderImageContents:(e,t)=>{const{year:n}=y;Xt.renderYear(e,t.year,n)},createPDF:(e,t)=>{const{printWidth:n,printHeight:a}=y.monthCanvas.A3Single,i=new ye.kH({orientation:"p",unit:"in",format:[n,a]}),{imageHeightFraction:o,dateHeightFraction:r}=Ot,s=e.toDataURL("image/jpeg",1),l=t.toDataURL("image/png",1);return i.addImage(s,0,0,n,a*o),i.addImage(l,0,a*(1-r),n,a*r),[i,i.output("blob")]},createThumbnail:(e,t,n,a)=>{const{dateHeightFraction:i}=Ot,o=document.createElement("canvas"),r=V.initialize(o,n,a);return r.drawImage(e,0,0),r.drawImage(t,0,a*(1-i),n,a*i),o},Year:function(e){let{image:t,handleChange:n,handleImageEdit:i}=e;const o=(0,a.useRef)(null),{theme:r,config:s,dimensions:l,bgImage:c,specialDates:d,renderContents:h}=(0,a.useContext)(g),{width:m,height:u}=l,{imageWidthFraction:p,imageHeightFraction:x,dateHeightFraction:f}=s,b=u*(1-f);return(0,a.useEffect)((()=>{null!=o.current&&Xt.generateDates(o.current,c||"",l,(()=>{}),d||{},s,h)}),[o,c,d,m,u]),(0,Y.jsx)(Y.Fragment,{children:(0,Y.jsxs)(de.Z,{id:"singlecal",component:"div",width:m,height:u,sx:{position:"relative",zIndex:"auto",outline:"1px solid black"},children:["sideimage"===r?null:(0,Y.jsx)(We.Z,{sx:{position:"absolute",top:20,right:10,px:"4px",pt:"2.5px",lineHeight:1,backgroundColor:"rgba(255,255,255, 0.6)",borderRadius:"5px 5px 5px 5px",fontWeight:"bold",fontSize:m<400?"1.5rem":"2rem",zIndex:14,color:"green",verticalAlign:"middle"},children:y.year}),(0,Y.jsx)(zt,{id:"calendarimage",image:t,width:m*p,height:u*x,handleChange:n,handleImageEdit:e=>{var t;if(!e.current)return;const{width:n,height:a,x:o,y:r}=null===(t=e.current)||void 0===t?void 0:t.getCroppingRect();i({cropWidth:n,cropHeight:a,x:o,y:r})}}),(0,Y.jsx)(de.Z,{id:"dates",width:m,height:u*f,sx:{boxSizing:"border-box",position:"absolute",top:b,zIndex:12},children:(0,Y.jsx)("canvas",{style:{zIndex:12},ref:o})})]})})}},Nt=(0,p.Z)((0,p.Z)({name:"fullimage"},Ot),{},{imageWidthFraction:1,imageHeightFraction:1,dateHeightFraction:.45,defaultBgImage:0,bgImages:[]}),Ut=(0,p.Z)((0,p.Z)({},Jt),{},{config:Nt}),Vt=n.p+"static/media/Brazil.be1b192c099d90605a56.jpeg",Gt=n.p+"static/media/pink_mountains.abd1a5fd719d502e9823.jpg",_t=(0,p.Z)((0,p.Z)({},B),{},{imageWidthFraction:.74,imageHeightFraction:.69,dateHeightFraction:1,defaultBgImage:0,bgImages:[[Vt,"Brazil"],[Gt,"Mountains"]],aspectRatio:.666});const Kt={renderContents:function(e,t,n){console.log("side image render contents");const{width:a,height:i}=e.canvas,o=function(e,t,n){const a=8*e/427,i=.027,o=(0,p.Z)((0,p.Z)({},n.weekRow),{},{width:(e-2*a)/4-a});return{dateBox:(0,p.Z)((0,p.Z)({},n.dateBox),{},{width:(e-2*a)/4,height:(.31*t-2*a-t*i)/2,startX:a/2,startY:t-(.31*t-2*a-t*i)/2*6-t*i-3*a,weekRow:o}),branding:(0,p.Z)((0,p.Z)({},n.branding),{},{bsy:t-a-t*i,bh:t*i,bsty:t-a-t*i/2}),weekRow:o,year:(0,p.Z)((0,p.Z)({},n.year),{},{textAlign:"center",startX:.87*e})}}(a,i,t);console.log("render contents sideimage",a,i,o.dateBox,t),function(e,t,n){e.save();const{startX:a,startY:i,width:o,height:r,gapX:s,gapY:l,bgcolor:c,radius:d,monthTopGap:h}=t,{monthList:g,year:m}=y,u=[[-1,-1,-1,0],[-1,-1,-1,1],[-1,-1,-1,2],[-1,-1,-1,3],[4,5,6,7],[8,9,10,11]],x=X.getYearInfo(g,m);for(let f=0;f<6;f+=1)for(let m=0;m<4;m+=1)if(u[f][m]>"-1"){const b=g[u[f][m]],w=a+m*o+m*s,y=i+f*r+f*l;V.renderRoundedRect(e,w,y,o,r,d,c),e.save(),e.fillStyle="green",e.textAlign="center",e.font=t.monthFont,e.textBaseline="hanging",e.fillText(b,w+o/2,y+h),e.restore(),V.drawLine(e,w+a,y+h+t.letterHeight,w+o-a,y+h+t.letterHeight,t.dividerColor,t.lineWidth),e.textBaseline="middle",V.renderWeekRow(e,(0,p.Z)((0,p.Z)({},t.weekRow),{},{startX:w+a,startY:y+h+t.letterHeight+t.weekRow.letterHeight/2,endX:w+o-t.startX,endY:y+h+t.letterHeight+t.weekRow.letterHeight/2}));const C=X.generateCalendar(x[b].days,x[b].firstDay);V.renderDates(e,(0,p.Z)((0,p.Z)({},t.dates),{},{startX:w+t.startX,startY:y+h+t.letterHeight+t.weekRow.letterHeight+t.dates.letterHeight/2,width:t.weekRow.width,height:r-(h+t.letterHeight+t.weekRow.letterHeight/2)-h}),C,n[b])}e.restore()}(e,o.dateBox,n),function(e,t,n){e.save(),e.textAlign=t.textAlign,e.textBaseline=t.textBaseline,e.font=t.font;const a=e.measureText(n),i=a.width;V.renderRoundedRect(e,t.startX-i/2-t.rectPad,t.startY,i+2*t.rectPad,-1*a.ideographicBaseline+t.radius,t.radius,t.bgcolor),e.fillStyle=t.color,e.fillText(n,t.startX,t.startY+t.radius/2),e.restore()}(e,o.year,y.year),V.renderBranding(e,o.branding)},createPDF:function(e,t){const{printWidth:n,printHeight:a}=y.monthCanvas.A3Single,i=new ye.kH({orientation:"p",unit:"in",format:[n,a]}),{imageHeightFraction:o,dateHeightFraction:r,imageWidthFraction:s}=_t,l=e.toDataURL("image/jpeg",1),c=t.toDataURL("image/png",1);return console.log("side image create pdf",n,a,s,o,n*s,a*o),i.addImage(c,0,a*(1-r),n,a*r),i.addImage(l,0,0,n*s,a*o),[i,i.output("blob")]},createThumbnail:function(e,t,n,a){const{dateHeightFraction:i}=_t,o=document.createElement("canvas"),r=V.initialize(o,n,a);return r.drawImage(t,0,a*(1-i),n,a*i),r.drawImage(e,0,0),o}},qt={default:Jt,fullimage:Ut,sideimage:(0,p.Z)((0,p.Z)({},Jt),{},{config:_t,renderImageContents:()=>{},renderContents:Kt.renderContents,createPDF:Kt.createPDF,createThumbnail:Kt.createThumbnail})};var Qt=n(79105);const $t=async(e,t)=>{try{const n={body:t,method:"PUT"};return await fetch(e,n).then((e=>e))}catch(n){return console.log(n),n}},en=async e=>await Qt.Z.httpClient("/api/calendar/create",{},{method:"POST",body:JSON.stringify(e)});function tn(){const[e,t]=(0,a.useState)({});return[e,(0,a.useCallback)((e=>{const n=new Image;e instanceof File?(n.onload=a=>{const{naturalWidth:i,naturalHeight:o}=a.target;t((0,p.Z)((0,p.Z)({},X.getImageDets(e,i,o,n)),{},{elem:n}))},n.src=URL.createObjectURL(e)):(n.onload=a=>{const{naturalWidth:i,naturalHeight:o}=a.target;t((0,p.Z)((0,p.Z)({},X.getImageDets({src:e},i,o,n)),{},{elem:n}))},n.src=e)}),[]),e=>t((t=>(0,p.Z)((0,p.Z)({},t),e))),()=>t({})]}function nn(e){const{addToCart:t}=(0,a.useContext)(Et.A),[n,i]=(0,a.useState)(0),[o,r,s]=tn(),[l,c,,d]=tn(),[h,g]=(0,a.useState)("default"),[m,u,p]=Ie(),[x,f]=(0,a.useState)(),[b,w]=(0,a.useState)(),[C,j]=(0,a.useState)(""),{width:Z,height:v}=y.monthCanvas.A3Single,I=e=>c(qt[h].config.bgImages[e][0]);(0,a.useEffect)((()=>{d(),qt[h].config.bgImages.length>0&&I(qt[h].config.defaultBgImage)}),[h]);const D=qt[h].config,S=()=>i((e=>e+1)),F=()=>{const{imageWidthFraction:e}=qt[h].config,t=x.getContext("2d").canvas.width/e,n=t/D.aspectRatio;return console.log("single thumbnail canvas dims",t,n),[t,n]};(0,a.useEffect)((()=>{(async()=>{if(2===n){const{createPDF:n,createThumbnail:a}=qt[h];i(0),j("Creating");const[o,r]=n(x,b);((e,t)=>{e.save(t)})(o);const[s,l]=F(),c=a(x,b,s,l);console.log("finalize calendar",r,c),j("Saving");const d=await(()=>{const[t,n]=F();return en({product_id:e,type:"single",binding:"none",orientation:"potrait",theme:h,thumbnail:{title:"thumbnail.jpeg",width:t,height:n,type:"image/jpeg"}})})(),g=d.json.url;j("Uploading");const m=d.json.thumbnail.src;c.toBlob((e=>$t(m,e))),$t(g,r),t({product_id:d.json.id}),j("")}})()}),[n]);return console.log("single page ",e),[o,l,h,g,m,u,p,r,s,()=>{j("Generating layers");const e=document.createElement("canvas"),t=document.createElement("canvas"),{generateImage:n,generateDates:a,renderContents:i,renderImageContents:r}=qt[h];f(e),w(t),n(e,o,"A3Single",S,D,r),a(t,l,{width:Z,height:v},S,m,D,i)},C,I]}var an=n(42420),on=n(89237),rn=n(82047),sn=n(75331),ln=n(55525),cn=n(9056),dn=n(52408);function hn(e){let{open:t,handleClick:n}=e;return(0,Y.jsxs)(an.Z,{id:"basic-button",color:"primary","aria-controls":t?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":t?"true":void 0,onClick:n,variant:"extended",sx:{position:"absolute",bottom:70,right:10},children:[(0,Y.jsx)(sn.Z,{sx:{mr:1}}),"Options"]})}function gn(e){let{anchorEl:t,open:n,handleClose:a,handleDatesClick:i,handleBgClick:o}=e;return(0,Y.jsxs)(rn.Z,{id:"basic-menu",anchorEl:t,open:n,onClose:a,slotProps:{list:{"aria-labelledby":"basic-button"}},children:[(0,Y.jsxs)(Ye.Z,{onClick:o,children:[(0,Y.jsx)(Te.Z,{children:(0,Y.jsx)(ln.Z,{})}),(0,Y.jsx)(Ee.Z,{children:"Change Background"})]}),(0,Y.jsxs)(Ye.Z,{onClick:()=>{i(),a()},children:[(0,Y.jsx)(Te.Z,{children:(0,Y.jsx)(cn.Z,{})}),(0,Y.jsx)(Ee.Z,{children:"+/- SpecialDates"})]}),(0,Y.jsxs)(Ye.Z,{onClick:a,children:[(0,Y.jsx)(Te.Z,{children:(0,Y.jsx)(dn.Z,{})}),(0,Y.jsx)(Ee.Z,{children:"Change Image"})]}),(0,Y.jsxs)(Ye.Z,{onClick:a,children:[(0,Y.jsx)(Te.Z,{children:(0,Y.jsx)(wt.Z,{})}),(0,Y.jsx)(Ee.Z,{children:"Repositon Image"})]})]})}function mn(e){let{handleDatesClick:t,handleBgClick:n,handleImageChange:i}=e;const{dimensions:o}=(0,a.useContext)(g),{height:r}=o,[s,l]=(0,a.useState)(null),d=Boolean(s),[h]=(0,m.Z)(),u=h<500,p=()=>{l(null)};return console.log("calendar menu",s,d),(0,Y.jsx)(de.Z,{component:"div",sx:{ml:1},children:u?(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(hn,{open:d,handleClick:e=>{l(e.currentTarget)}}),(0,Y.jsx)(gn,{open:d,anchorEl:s,handleClose:p,handleDatesClick:t,handleBgClick:n})]}):(0,Y.jsxs)(c.Z,{direction:"column",alignItems:"center",justifyContent:"space-between",sx:{height:r},children:[(0,Y.jsxs)(c.Z,{direction:"column",alignItems:"center",children:[(0,Y.jsx)(We.Z,{sx:{fontWeight:"bold",color:"gray",mb:1},children:" Image "}),(0,Y.jsx)(on.Z,{showLabel:!0,label:"Reposition",sx:{mb:.5},icon:(0,Y.jsx)(wt.Z,{})}),(0,Y.jsx)(on.Z,{showLabel:!0,label:"Add/Change",icon:(0,Y.jsx)(dn.Z,{}),onClick:i})]}),(0,Y.jsxs)(c.Z,{direction:"column",alignItems:"center",children:[(0,Y.jsx)(We.Z,{sx:{fontWeight:"bold",color:"gray",mb:1},children:"Dates"}),(0,Y.jsx)(on.Z,{showLabel:!0,label:"Special Dates",icon:(0,Y.jsx)(cn.Z,{}),sx:{mb:.5},onClick:()=>{t(),p()}}),(0,Y.jsx)(on.Z,{showLabel:!0,label:"Background",icon:(0,Y.jsx)(ln.Z,{}),onClick:n})]})]})})}function un(e){let{productId:t}=e;const n=(0,a.useRef)(null),[i,o]=(0,a.useState)(!1),[r,s]=(0,a.useState)(!1),[l,c,d,h,m,p,x,f,b,w,y,C]=nn(t),j=()=>o(!0),Z=qt[d],{Year:v,renderContents:I}=Z,D=u("potrait",Z.config);return console.log("single theme config",d,Z,D),(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(ht,{status:y,setOptions:h,handleDatesClick:j,generate:w}),(0,Y.jsxs)(g.Provider,{value:{theme:d,config:Z.config,dimensions:D,bgImage:c,specialDates:m,inputRef:n,renderContents:I},children:[(0,Y.jsxs)(de.Z,{sx:{flexGrow:1,alignItems:"start",justifyContent:"center",display:"flex",mt:1},children:[d?(0,Y.jsx)(v,{image:l,handleChange:f,handleImageEdit:b}):null,(0,Y.jsx)(mn,{handleDatesClick:j,handleBgClick:()=>s(!0),handleImageChange:()=>{console.log("in handle image change",n),n.current&&n.current.click()}})]}),(0,Y.jsx)(it,{open:i,handleOpen:o,dates:m,addDate:p,removeDate:x}),(0,Y.jsx)(ot,{open:r,bgs:Z.config.bgImages,handleClose:()=>s(!1),handleClick:C})]})]})}function pn(e){let{image:t,handleClick:n,text:a,subText:h="Wall * Binded * Potrait"}=e;return(0,Y.jsx)(i.ZP,{item:!0,children:(0,Y.jsxs)(o.Z,{sx:{width:"350px"},onClick:n,children:[(0,Y.jsx)(r.Z,{title:a,subheader:h,subheaderTypographyProps:{textAlign:"center"},titleTypographyProps:{sx:{fontWeight:"bold",color:"primary.main",textAlign:"center"},variant:"body"}}),(0,Y.jsx)(s.Z,{component:"img",image:t,alt:a,sx:{height:"300px"}}),(0,Y.jsx)(l.Z,{sx:{width:"100%"},children:(0,Y.jsxs)(c.Z,{direction:"row",justifyContent:"space-between",sx:{width:"inherit"},children:[(0,Y.jsx)(d.Z,{sx:{fontSize:"1rem"},children:"Details"}),(0,Y.jsx)(d.Z,{color:"primary",sx:{fontSize:"1rem"},variant:"outlined",startIcon:(0,Y.jsx)(At.Z,{}),children:"Create"})]})})]})})}function xn(){const[e,t]=(0,h.Z)(),[n,o]=(0,a.useState)({}),[r,s,l]=(0,Bt.Z)();console.log("state calendar create",e,t,e.data.length,r,n),(0,a.useEffect)((()=>{!t&&e.data.length>0&&(console.log("in create useeffect",t,e.data.length),e.data.forEach((e=>{console.log("category calendar",e.name),"Calendar"===e.name&&l(e.id)})))}),[t,e]);const c=async e=>{const t=await Mt.Z.getProduct(e),{attributes:n}=t.data,a=new Map(n.map((e=>[e.key,e.value])));console.log("product details",t,a);const{binding:i,orientation:r,type:s,pages:l}=Object.fromEntries(a);((e,t,n,a,i)=>{o({binding:e,orientation:t,type:n,pages:a,product_id:i})})(i,r,s,l,e)};return"wall"===n.type&&"single"===n.pages?(0,Y.jsx)(un,{productId:n.product_id}):"wall"===n.type&&"multiple"===n.pages?(0,Y.jsx)(Rt,{binding:"none",size:"A3",orientation:"potrait",productId:n.product_id}):"table"===n.type?(0,Y.jsx)(Rt,{binding:n.binding,size:"A5",orientation:n.orientation,productId:n.id}):s?(0,Y.jsx)(Yt.Z,{title:"Loading products"}):r.data.length>0?(0,Y.jsx)(i.ZP,{container:!0,spacing:2,sx:{p:1,width:"100%"},justifyContent:"space-between",children:r.data.map((e=>(0,Y.jsx)(pn,{text:e.name,subText:e.sub_title,handleClick:()=>c(e.id),image:e.thumbnail.src},"".concat(e.name,"-").concat(e.sub_title))))}):void 0}gn.defaultProps={anchorEl:null}}}]);