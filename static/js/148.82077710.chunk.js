"use strict";(self.webpackChunkprelaunch=self.webpackChunkprelaunch||[]).push([[148],{41148:function(e,t,n){n.r(t),n.d(t,{default:function(){return d}});var r=n(29439),a=n(74165),i=n(1413),l=n(45987),o=n(15861),s=n(57689),u=n(94606),c=n(74144),g=n(84985),f=n(80184),p=["src","originalSRC","file"];function m(e,t,n,r){return h.apply(this,arguments)}function h(){return h=(0,o.Z)((0,a.Z)().mark((function e(t,n,i,l){var s,u,g;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={},e.next=3,Promise.allSettled(Object.entries(n).map((function(e){var t=(0,r.Z)(e,2),n=t[0],a=t[1];return fetch(a).then((function(e){return e.blob()})).then((function(e){s[n]=e}))})));case 3:return console.log("get images",s),u={},e.next=7,Promise.allSettled(Object.entries(s).map((function(e){var t=(0,r.Z)(e,2),n=t[0],a=t[1];return c.Z.convertBase64(a).then((function(e){u[n]=e}))})));case 7:return console.log("get images base64",u),l(),e.next=11,Promise.allSettled(t.map(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r,l,o,g,f,p,m;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.naturalWidth,r=t.naturalHeight,l=t.title,o=t.aspectRatio,g=t.type,console.log("handle image convert",l),f=s[l],p=u[l],m=new Promise((function(e){var t=new Image;t.onload=function(a){var s=a.target.size,u={title:l,src:c.Z.optimizeImage(t,1500,1500/o),originalSRC:p,originalHeight:r,originalWidth:n,naturalHeight:1500/o,naturalWidth:1500,aspectRatio:o,type:g,file:f};i(u),console.log("handle image convert done",l,s),e(u)},t.src=p})),e.abrupt("return",m);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 11:return g=e.sent,e.abrupt("return",g.map((function(e){return e.value})));case 13:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}function d(){var e=(0,s.UO)().collageID,t=function(){var t=(0,o.Z)((0,a.Z)().mark((function t(n,r,o){var s,c,g;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("get collage from params",e),console.time("view collage"),t.next=4,u.Z.getCollage(e);case 4:return s=t.sent,n(s.details.images.length),r(s.details.images.length),t.next=9,m(s.details.images,s.urls,o,(function(){n(s.details.images.length),r(s.details.images.length)}));case 9:return c=t.sent,console.log("image details",c),g=c.map((function(e){e.src,e.originalSRC,e.file;return(0,l.Z)(e,p)})),console.timeEnd("view collage"),t.abrupt("return",{details:(0,i.Z)((0,i.Z)({},s.details),{},{images:g}),images:c});case 14:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}();return(0,f.jsx)(g.default,{getCollage:t,clearCollage:function(){return u.Z.deleteCollage(e)},saveType:"existing"})}}}]);
//# sourceMappingURL=148.82077710.chunk.js.map