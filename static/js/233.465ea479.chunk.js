"use strict";(self.webpackChunkprelaunch=self.webpackChunkprelaunch||[]).push([[233],{95739:function(e,t,n){var r=n(74165),a=n(15861),i=n(79105);function o(){return(o=(0,a.Z)((0,r.Z)().mark((function e(t,n){var a,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={body:n,method:"PUT"},e.next=4,fetch(t,a).then((function(e){return e}));case 4:return i=e.sent,e.abrupt("return",i);case 8:return e.prev=8,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}t.Z={newCollage:function(e,t){try{var n={collage_id:e};return i.Z.post("authbridge-stage.mymemorystore.in","/api/collage/new",n,JSON.stringify(t))}catch(r){return console.log(r),r}},saveCollage:function(e,t){try{var n={collage_id:e};return i.Z.post("authbridge-stage.mymemorystore.in","/api/collage/save",n,JSON.stringify(t))}catch(r){return console.log(r),r}},upload:function(e,t){return o.apply(this,arguments)},listCollages:function(e){try{var t={next_token:e};return i.Z.get("authbridge-stage.mymemorystore.in","/api/collage/list",t)}catch(n){return console.log(n),n}},getThumbnail:function(e){try{var t={collage_id:e};return i.Z.get("authbridge-stage.mymemorystore.in","/api/collage/thumbnail",t)}catch(n){return console.log(n),n}},getCollage:function(e){try{var t={collage_id:e};return i.Z.get("authbridge-stage.mymemorystore.in","/api/collage/get",t)}catch(n){return console.log(n),n}},deleteCollage:function(e){try{var t={collage_id:e};return i.Z.deleteMethod("authbridge-stage.mymemorystore.in","/api/collage/delete",t)}catch(n){return console.log(n),n}},checkOptimizeStatus:function(e){try{var t={collage_id:e};return i.Z.get("authbridge-stage.mymemorystore.in","/api/collage/resized-count",t)}catch(n){return console.log(n),n}}}},79105:function(e,t,n){var r=n(74165),a=n(15861),i=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t,n){var a,i,o,l,s=arguments;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>2&&void 0!==s[2]?s[2]:{},i="https://".concat(t).concat(n),o={method:"GET",credentials:"include",headers:new Headers({"content-type":"application/json"})},i+="?".concat(new URLSearchParams(a).toString()),e.next=6,fetch(i,o);case 6:if((l=e.sent).ok){e.next=13;break}if(401!==l.status){e.next=11;break}return document.cookie="userInfo=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",e.abrupt("return",{status:"unauthenticated"});case 11:if(403!==l.status){e.next=13;break}return e.abrupt("return",{status:"forbidden"});case 13:return e.abrupt("return",l.json());case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),o=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t,n,a,i){var o,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o="https://".concat(t).concat(n),o+="?".concat(new URLSearchParams(a).toString()),l={method:"POST",credentials:"include",headers:new Headers({"content-type":"application/json"}),body:i},e.abrupt("return",fetch(o,l).then((function(e){return e.ok?e.json():{status:"error"}})));case 4:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),l=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t,n,a){var i,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="https://".concat(t).concat(n),i+="?".concat(new URLSearchParams(a).toString()),o={method:"DELETE",credentials:"include",headers:new Headers({"content-type":"application/json"})},e.abrupt("return",fetch(i,o).then((function(e){return e.ok?e.json():{status:"error"}})));case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();t.Z={get:i,post:o,deleteMethod:l}},81998:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(59344),a=n(69099),i=n(46417);function o(e){var t=e.children,n=e.onClick,r=e.name;return(0,i.jsx)(a.Z,{id:r,variant:"contained",component:"label",onClick:n,sx:{color:"muted.main",borderRadius:15,backgroundColor:"button.main",padding:"6px 8px","&:hover":{color:"muted.main",backgroundColor:"button.main"}},children:t})}o.defaultProps={onClick:function(){}};var l=n(61113);function s(e){var t=e.handleChange;return(0,i.jsxs)(o,{name:"add",children:[(0,i.jsx)("input",{type:"file",hidden:!0,multiple:!0,accept:"image/*",onChange:t}),(0,i.jsx)(r.Z,{sx:{fontSize:"2rem"}}),(0,i.jsx)(l.Z,{sx:{fontWeight:"bold"},children:"Add Images"})]})}},42506:function(e,t,n){n.d(t,{Z:function(){return Tt}});var r=n(74165),a=n(15861),i=n(29439),o=n(47313),l=n(4942),s=n(1413);var c=n(45987),u=n(93433),d=n(37762),h=n(30040),f=n(47597),g=n(71829),p=n(8130),x=n(46417),m={defaultCollageName:"Untitled",defaultCollageType:"A4",tolerance:.1,resizeImageWidth:1500,fontSize:20,lineHeight:25,textPadding:.02,thumbnailHeight:500,maxNameLength:20,maxColllageTextLength:40,minImages:2,maxImages:15,maxImageSize:8,paperSizes:{A4:{display:!0,width:2480,height:3508,text:"A4 Potrait",icon:(0,x.jsx)(p.Z,{sx:{mr:1,fill:"black"}}),downloadSizes:["A4","A3"]},A3:{display:!1,width:3508,height:4961,text:"A3 Potrait",icon:(0,x.jsx)(p.Z,{sx:{mr:1,fill:"black"}})},A4LandScape:{display:!0,height:2480,width:3508,text:"A4 LandScape",icon:(0,x.jsx)(p.Z,{sx:{mr:1,transform:"rotate(90deg)",fill:"black"}}),downloadSizes:["A4LandScape","A3LandScape"]},A3LandScape:{display:!1,height:3508,width:4961,text:"A3 LandScape",icon:(0,x.jsx)(p.Z,{sx:{mr:1,transform:"rotate(90deg)",fill:"black"}})},FBCoverDesktop:{display:!0,height:740,width:2e3,text:"Cover Photo (Desktop)",icon:(0,x.jsx)(h.Z,{sx:{fill:"#3b5998",mr:1}})},FBCoverMobile:{display:!0,height:720,width:1280,text:"Cover Photo (Mobile)",icon:(0,x.jsx)(h.Z,{sx:{fill:"#3b5998",mr:1}})},FBPost:{display:!0,height:1260,width:2400,text:"Post",icon:(0,x.jsx)(h.Z,{sx:{fill:"#3b5998",mr:1}})},WhatsappStatus:{display:!0,height:1920,width:1080,text:"Status",icon:(0,x.jsx)(f.Z,{sx:{backgroundColor:"#25D366",fill:"white",mr:1}})},InstaStory:{display:!0,height:1920,width:1080,text:"Story",icon:(0,x.jsx)(g.Z,{sx:{fill:"white",background:"linear-gradient(45deg, #f09433 0%,#e6683c 25%,#dc2743 50%,#cc2366 75%,#bc1888 100%)",mr:1}})},InstaPostSquare:{display:!0,height:1080,width:1080,text:"Post",icon:(0,x.jsx)(g.Z,{sx:{fill:"white",background:"linear-gradient(45deg, #f09433 0%,#e6683c 25%,#dc2743 50%,#cc2366 75%,#bc1888 100%)",mr:1}})}}},v=n(31798);function C(e,t,n,r,a){var i=document.createElement("canvas");i.width=t,i.height=n;var o,l,s=i.getContext("2d"),c=t/n,u=t,d=n,h=Math.floor(Math.log2(t/r));if(0===h)s.drawImage(e,0,0,u,d,0,0,r,a);else{for(var f=0;f<h;f+=1)l=(o=u>>1)/c,0===f?s.drawImage(e,0,0,u,d,0,0,o,l):s.drawImage(i,0,0,u,d,0,0,o,l),u=o,d=l;s.drawImage(i,0,0,u,d,0,0,r,a)}var g=document.createElement("canvas");return g.width=r,g.height=a,g.getContext("2d").drawImage(i,0,0,r,a,0,0,r,a),g}function A(e,t,n,r){return r-e[t]>=e[n]-r?n:t}function Z(e,t,n,r,a,i){return w.apply(this,arguments)}function w(){return(w=(0,a.Z)((0,r.Z)().mark((function e(t,n,a,i,o,l){var s,c,u,d,h,f;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=i/o,c=n/Math.sqrt(s),u=a/Math.sqrt(s),d=C(t,n,a,c,u),e.next=5,new Promise((function(e){return d.toBlob(e,l)}));case 5:return h=e.sent,f=URL.createObjectURL(h),e.abrupt("return",[h,f,c,u]);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e,t,n,r){return b.apply(this,arguments)}function b(){return(b=(0,a.Z)((0,r.Z)().mark((function e(t,n,a,o){var l,c,u,d,h,f,g,p,x,C,A,w,j,b;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=t.target,c=l.naturalWidth,u=l.naturalHeight,d=l.src,h="".concat(Date.now(),"-").concat(a.name),f=c/u,g=v.Z.getSize(a),p={title:h,src:d,naturalHeight:u,naturalWidth:c,aspectRatio:f,targetAspectRatio:f,type:a.type,file:a,size:v.Z.getSize(a)},!(g>m.maxImageSize)){e.next=17;break}return console.time("Loading image optimize"),e.next=9,Z(n,c,u,g,m.maxImageSize,a.type);case 9:x=e.sent,C=(0,i.Z)(x,4),A=C[0],w=C[1],j=C[2],b=C[3],p=(0,s.Z)((0,s.Z)({},p),{},{src:w,naturalHeight:b,naturalWidth:j,file:A,size:v.Z.getSize(A)}),console.timeEnd("Loading image optimize");case 17:o(p);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){return y=(0,a.Z)((0,r.Z)().mark((function e(t,n,i,o){var l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.target.files&&(n((function(e){return e+t.target.files.length})),i(t.target.files.length),(l=Array.from(t.target.files)).map(function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=new Image).onload=function(e){return j(e,n,t,o)},n.src=URL.createObjectURL(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),l.map((function(e){return URL.revokeObjectURL(e)})));case 1:case"end":return e.stop()}}),e)}))),y.apply(this,arguments)}function S(e,t,n){var r=e/t;return r<n?[e,e/n]:r>n?[t*n,t]:[e,t]}function k(e,t,n,r,a,i){if(0===e.length)return[];var o=document.createElement("canvas");o.width=r-16,o.height=1e3;var l=o.getContext("2d");l.font="".concat(a,"px Arial"),l.textAlign="center";for(var s=t,c=n,u=e.split(" "),d="",h="",f=[],g=0;g<u.length;g+=1){h+="".concat(u[g]," "),l.measureText(h).width>o.width&&g>0?(f.push([d,s,c]),c+=i,d="".concat(u[g]," "),h="".concat(u[g]," ")):d+="".concat(u[g]," "),g===u.length-1&&f.push([d,s,c])}return f}function R(e,t,n,r,a,i,o){if(0===e.length)return 0;var l=m.textPadding;return(k(e,t,n,r,a*o,i*o).length*i+2*l)*o}var P={getCut:function(){return["v","h"][Math.round(Math.random())]},findClosest:function(e,t){var n=e.length;if(t<=e[0])return 0;if(t>=e[n-1])return n-1;for(var r=0,a=n,i=0;r<a;){if(e[i=(r+a)/2]===t)return i;if(t<e[i]){if(i>0&&t>e[i-1])return A(e,i-1,i,t);a=i}else{if(i<n-1&&t<e[i+1])return A(e,i,i+1,t);r=i+1}}return i},findImgPair:function(e,t){for(var n=0,r=e.length-1,a=n,i=r,o=Math.abs(e[n]+e[r]-t);n<=r;)if(e[n]+e[r]>t)Math.abs(e[n]+e[r]-t)<o&&(o=Math.abs(e[n]+e[r]-t),a=n,i=r),r-=1;else{if(!(e[n]+e[r]<=t)){a=n,i=r;break}Math.abs(e[n]+e[r]-t)<o&&(o=Math.abs(e[n]+e[r]-t),a=n,i=r),n+=1}return Math.round(Math.random())?[a,i]:[i,a]},getAspectRatio:function(e,t,n){return"v"===e?t+n:t*n/(t+n)},handleImageLoad:function(e,t,n,r){return y.apply(this,arguments)},wrapText:k,convertToRGBA:function(e){return"rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(e.a,")")},getCollageDimension:S,textCanvasDraw:function(e,t,n,r,a,o,l){var s=m.fontSize,c=m.textPadding;e.font="".concat(r*s,"px Arial"),e.textAlign="center",e.textBaseline="top",e.fillStyle="#1c1c1cb3",e.fillRect(0,n,a,n+l),e.fillStyle="white";var u,h=(0,d.Z)(t);try{for(h.s();!(u=h.n()).done;){var f=u.value,g=(0,i.Z)(f,3),p=g[0],x=g[2];e.fillText(p,parseInt(a/2,10),parseInt(x+n+2.5*r+c*o,10))}}catch(v){h.e(v)}finally{h.f()}},getTextHeight:R,getImageDimensions:function(e,t,n,r,a,i,o,l,s){return S(e,t-R(n,r,a,e,i,o,l),s)},optimizeDimensions:function(e,t,n){var r=e/t,a=n.map((function(n){var a=e*n.value.naturalWidth/n.value.width,i=a/r;return[e-a+t-i,[a,i]]}));return a.sort((function(e,t){return t[0]-e[0]})),a[0][1]}},I=["file","src"],E=["file","src"];var T=n(15671),D=n(43144),z=n(57829),M=n(61113),H=n(35898),W=n(17551);function O(e,t,n,r){var a=m.fontSize,i=m.lineHeight,o=m.textPadding;return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(H.Z,{sx:{height:n,backgroundColor:(0,W.Fq)("#1c1c1c",.7),position:"absolute",top:t,width:"100%"}}),e.map((function(e){return(0,x.jsx)(M.Z,{sx:{width:"100%",position:"absolute",top:t+e[2]+o*r,paddingX:1,color:"button.main",textAlign:"center",fontFamily:"Arial",fontSize:"".concat(a,"px"),lineHeight:"".concat(i,"px"),letterSpacing:"normal"},children:e[0]},e[2])}))]})}function B(e){var t=e.title,n=e.width,r=e.onLoad,a=e.padding,i=e.borderRadius,o=e.left,l=e.top,s=e.src;return(0,x.jsx)(z.Z,{component:"img",title:t,alt:t,width:n,onLoad:r,src:s,sx:{position:"absolute",padding:"".concat(a,"px"),borderRadius:"".concat(i,"px"),left:o,top:l}},t)}var Q=n(47131),L=n(51997),F=n(61689);function q(e){var t=e.top,n=e.left,r=e.onClick;return(0,x.jsx)(F.Z,{title:"Remove Image",children:(0,x.jsx)(Q.Z,{size:"medium",sx:{color:(0,W.Fq)("#000",.7),bgcolor:(0,W.Fq)("#fff",.5),position:"absolute",top:t,left:n,padding:1,borderRadius:"0 5px 0 5px",transform:"translate(-100%, 0)"},onClick:r,children:(0,x.jsx)(L.Z,{size:"medium"})})})}var V=["src"],U=function(){function e(t){(0,T.Z)(this,e),this.value=t,this.left=null,this.right=null}return(0,D.Z)(e,[{key:"fromObject",value:function(t){return null!=t?(this.value=t.value,null!=t.left&&(this.left=new e(t.left.value),this.left.fromObject(t.left)),null!=t.right&&(this.right=new e(t.right.value),this.right.fromObject(t.right)),this):null}},{key:"getScore",value:function(){return"cut"in this.value?[].concat((0,u.Z)(this.left.getScore()),(0,u.Z)(this.right.getScore())):[this.value.width+this.value.height]}},{key:"display",value:function(){var e=[],t=this.value,n=t.cut,r=t.title,a=t.aspectRatio;return null===this?null:("cut"in this.value&&e.push([n,a]),"title"in this.value&&e.push([r,a]),null!==this.left&&(e=e.concat(this.left.display())),null!==this.right&&(e=e.concat(this.right.display())),e)}},{key:"copy",value:function(){if(null===this)return null;var t=new e((0,s.Z)({},this.value));return null!=this.left&&(t.left=this.left.copy()),null!=this.right&&(t.right=this.right.copy()),t}},{key:"replaceImages",value:function(e){var t=this;if(null!==this){if("title"in this.value){var n=e.findIndex((function(e){return e.title===t.value.title})),r=e[n];this.value.src=r.src}null!=this.left&&this.left.replaceImages(e),null!=this.right&&this.right.replaceImages(e)}}},{key:"removeImageData",value:function(){if(null!==this){if("title"in this.value){var e=this.value,t=(e.src,(0,c.Z)(e,V));this.value=t}null!=this.left&&this.left.removeImageData(),null!=this.right&&this.right.removeImageData()}}},{key:"addImageData",value:function(e){var t=this;if(null!==this){if("title"in this.value){var n=e.find((function(e){return e.title===t.value.title}));this.value.src=n.src}null!=this.left&&this.left.addImageData(e),null!=this.right&&this.right.addImageData(e)}}},{key:"RenderImage",value:function(e,t,n,r,a,i,o){var l=this.value,s=l.width,c=l.title,u=l.src,d=l.x+i,h=l.y+a;return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(B,{title:c,width:s,onLoad:o,src:u,padding:e,borderRadius:t,left:d,top:h}),!0===n?(0,x.jsx)(q,{top:h+e,left:d+s-e,onClick:function(){return r(c)}}):null]})}},{key:"DOMDisplay",value:function(e,t,n,r,a,i,o){var l=this.value.cut;return null===this?null:l?(0,x.jsxs)(x.Fragment,{children:[null!=this.left?this.left.DOMDisplay(e,t,n,r,a,i,o):null,null!=this.right?this.right.DOMDisplay(e,t,n,r,a,i,o):null]}):"title"in this.value?this.RenderImage(e,t,n,r,a,i,o):null}},{key:"ResizeImage",value:function(e){var t=document.createElement("canvas");t.width=this.value.naturalWidth,t.height=this.value.naturalHeight;var n,r,a=t.getContext("2d"),i=this.value.naturalWidth,o=this.value.naturalHeight,l=Math.floor(Math.log2(this.value.naturalWidth/this.value.width));if(0===l)a.drawImage(e,0,0,i,o,0,0,this.value.width,this.value.height);else{for(var s=0;s<l;s+=1)r=(n=i>>1)/this.value.aspectRatio,0===s?a.drawImage(e,0,0,i,o,0,0,n,r):a.drawImage(t,0,0,i,o,0,0,n,r),i=n,o=r;a.drawImage(t,0,0,i,o,0,0,this.value.width,this.value.height)}return t}},{key:"ImageStyling",value:function(e,t,n,r,a,i){var o=this.value.x+n+i,l=this.value.y+n+a,s=this.value.width-2*n,c=s/this.value.aspectRatio;e.save(),e.beginPath(),e.moveTo(o+r,l),e.lineTo(o+s-r,l),e.quadraticCurveTo(o+s,l,o+s,l+r),e.lineTo(o+s,l+c-r),e.quadraticCurveTo(o+s,l+c,o+s-r,l+c),e.lineTo(o+r,l+c),e.quadraticCurveTo(o,l+c,o,l+c-r),e.lineTo(o,l+r),e.quadraticCurveTo(o,l,o+r,l),e.closePath(),e.clip(),e.drawImage(t,0,0,this.value.width,this.value.height,o,l,s,c),e.restore()}},{key:"CanvasDisplay",value:function(e,t,n,r,a){var i=this;if("cut"in this.value&&(this.left.CanvasDisplay(e,t,n,r,a),this.right.CanvasDisplay(e,t,n,r,a)),"title"in this.value){var o=e.getContext("2d"),l=new Image;l.onload=function(){var e=i.ResizeImage(l),s=e.getContext("2d");i.ImageStyling(o,e,t,n,r,a),s.clearRect(0,0,e.width,e.height)},l.src=this.value.src}}},{key:"generate",value:function(t,n,r){if(r<1)return[];if(1===r){return this.value=t[0],this.left=null,this.right=null,t.slice(1)}var a,o,l=P.getCut();if(this.value={cut:l,targetAspectRatio:n},2===r){var s=0,c=1;return this.value.aspectRatio=P.getAspectRatio(this.value.cut,t[s].aspectRatio,t[c].aspectRatio),this.left=new e(t[s]),this.right=new e(t[c]),t.filter((function(e,t){return![s,c].includes(t)}))}this.left=new e({cut:P.getCut()}),this.right=new e({cut:"v"===this.left.value.cut?"h":"v"}),o=n/2,"v"===l&&(o=2*n);var u=Math.round(Math.random())?["left","right"]:["right","left"],d=(0,i.Z)(u,2),h=d[0],f=d[1];return a=this[h].generate(t,o,r-Math.floor(r/2)),a=this[f].generate(a,o,Math.floor(r/2)),this.value.aspectRatio=P.getAspectRatio(this.value.cut,this.left.value.aspectRatio,this.right.value.aspectRatio),a}},{key:"adjust",value:function(e){var t=0;return null===this||null!==this.left&&null!==this.right&&(this.value.aspectRatio>this.value.targetAspectRatio*e&&(this.value.cut="h",t+=1),this.value.aspectRatio<this.value.targetAspectRatio/e&&(this.value.cut="v",t+=1),"v"===this.value.cut?(this.left.value.targetAspectRatio=this.value.targetAspectRatio/2,this.right.value.targetAspectRatio=this.value.targetAspectRatio/2):(this.left.value.targetAspectRatio=2*this.value.targetAspectRatio,this.right.value.targetAspectRatio=2*this.value.targetAspectRatio),t+=this.left.adjust(e)+this.right.adjust(e),this.value.aspectRatio=P.getAspectRatio(this.value.cut,this.left.value.aspectRatio,this.right.value.aspectRatio)),t}},{key:"addSize",value:function(e,t,n,r,a,i){"v"===a?(this.value.height=t,this.value.width=this.value.height*this.value.aspectRatio):(this.value.width=e,this.value.height=this.value.width/this.value.aspectRatio),"left"===i?(this.value.x=n,this.value.y=r):"h"===a?(this.value.y=r+t-this.value.height,this.value.x=n):(this.value.x=n+e-this.value.width,this.value.y=r);var o=this.value,l=o.width,s=o.height,c=o.x,u=o.y,d=o.cut;null!==this.left&&this.left.addSize(l,s,c,u,d,"left"),null!==this.right&&this.right.addSize(l,s,c,u,d,"right")}},{key:"validateAddSize",value:function(){if("cut"in this.value){var e=this.left.validateAddSize(),t=(0,i.Z)(e,2),n=t[0],r=t[1],a=this.right.validateAddSize(),o=(0,i.Z)(a,2),l=o[0],c=o[1];return[n&&l,r.concat(c)]}if("title"in this.value){var u=this.value.width<=this.value.naturalWidth&&this.value.height<=this.value.naturalHeight;return u?[u,[]]:[u,[(0,s.Z)({},this)]]}return!1}}]),e}(),J=function(){function e(t){if((0,T.Z)(this,e),void 0===this.root)return this.root=new U(t),this}return(0,D.Z)(e,[{key:"addOptions",value:function(e){this.root.options=(0,s.Z)({},e)}},{key:"display",value:function(){return null!==this.root?this.root.display():null}},{key:"replaceImages",value:function(e){null!==this.root&&this.root.replaceImages(e)}},{key:"fromObject",value:function(e){return null!=e.root&&this.root.fromObject(e.root),this}},{key:"removeImageData",value:function(){var e=this.copy();return null!==this.root&&e.root.removeImageData(),e}},{key:"addImageData",value:function(e){null!==this.root&&this.root.addImageData(e)}},{key:"DOMDisplay",value:function(e,t,n,r,a){var i=m.fontSize,o=m.lineHeight,l=m.textPadding,s=this.root.value,c=s.width,u=s.height,d=this.root.options,h=d.text,f=d.topText,g=d.padding,p=d.borderRadius,v=d.color,C=P.wrapText(h,0,0,e,i,o),A=h.length?C.length*o+2*l*u:0,Z=(t-A-u)/2,w=(e-c)/2,j=t-A;return f&&h.length>0&&(Z+=A,j=0),null!==this.root?(0,x.jsx)(z.Z,{sx:{backgroundColor:"white"},children:(0,x.jsxs)(z.Z,{width:e,height:t,sx:{position:"relative",backgroundColor:P.convertToRGBA(v)},children:[this.root.DOMDisplay(g,p,n,r,Z,w,a),h.length?O(C,j,A,u):null]})}):null}},{key:"CanvasDisplay",value:function(e,t,n,r){var a=m.fontSize,i=m.lineHeight,o=m.textPadding;if(null!==this.root){var l=this.root.options,s=l.text,c=l.topText,u=l.padding,d=l.borderRadius,h=l.color,f=this.root.value,g=f.width,p=f.height,x=P.wrapText(s,0,0,e,a*r,i*r),v=s.length?x.length*i*r+2*o*t:0,C=(t-v-p)/2,A=(e-g)/2,Z=t-v;c&&s.length>0&&(C+=v,Z=0);var w=n.getContext("2d");w.fillStyle="white",w.fillRect(0,0,n.width,n.height),w.fillStyle=P.convertToRGBA(h),w.fillRect(0,0,n.width,n.height),this.root.CanvasDisplay(n,u*r,d*r,C,A),P.textCanvasDraw(w,x,Z,r,e,t,v)}}},{key:"generateScore",value:function(){var e=this.root.getScore();return Math.min.apply(Math,(0,u.Z)(e))}},{key:"generateCollageTree",value:function(e,t){this.root.generate(e,t,e.length)}},{key:"adjust",value:function(e){for(var t=0,n=this.copy(),r=this.root.value.aspectRatio,a=this.root.value.targetAspectRatio*(1-e),i=1e3;t<100&&i>0;){i=this.root.adjust(e),t+=1;var o=this.root.value.aspectRatio-this.root.value.targetAspectRatio;if(Math.abs(o)<Math.abs(r-this.root.value.targetAspectRatio)&&(r=this.root.value.aspectRatio,n=this.copy()),o>0&&o<a||0===o)break}return[r,n]}},{key:"copy",value:function(){var t=new e({});return t.root=this.root.copy(),t.root.options=(0,s.Z)({},this.root.options),t}},{key:"addSize",value:function(e,t,n){var r=P.getCollageDimension(e,t,n),a=(0,i.Z)(r,2),o=a[0],l=a[1];this.root.value.width=o,this.root.value.height=l,this.root.value.x=0,this.root.value.y=0;var s=this.root.value,c=s.width,u=s.height,d=s.x,h=s.y,f=s.cut;null!==this.root.left&&this.root.left.addSize(c,u,d,h,f,"left"),null!==this.root.right&&this.root.right.addSize(c,u,d,h,f,"right")}},{key:"validateAddSize",value:function(){return this.root.validateAddSize()}}]),e}();var N={findBestAdjustTree:function(e,t,n,r){for(var a=function(e){for(var t=e,n=t.length-1;n>0;n-=1){var r=Math.floor(Math.random()*(n+1)),a=e[n];t[n]=t[r],t[r]=a}return t}(e),i=[],o=0;o<100;o+=1){var l=new J({cut:P.getCut()});l.generateCollageTree(a,n/r),i.push(l.adjust(1-t))}i.sort((function(e,t){var a=n/r;return Math.abs(e[0]-a)-Math.abs(t[0]-a)}));var s=i.filter((function(e){return e[0].toFixed(1)===i[0][0].toFixed(1)})),c=0,u={};return s.forEach((function(e){e[1].addSize(n/r*1e3,1e3,n/r);var t=e[1].generateScore();t>c&&(c=t,u=e)})),u}};var X=n(95739);var K={uploadCollageImages:function(e,t,n,i,o){var l=Object.keys(t).map(function(){var l=(0,a.Z)((0,r.Z)().mark((function l(s){var c,u,d;return(0,r.Z)().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:if(c="thumbnail-".concat(o,".jpg"),s!==c){l.next=3;break}return l.abrupt("return",e.toBlob(function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",X.Z.upload(t[c],n));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:return u=t[s],d=i.find((function(e){return e.title===s})),l.abrupt("return",X.Z.upload(u,d.file).then((function(e){return n(),e})));case 6:case"end":return l.stop()}}),l)})));return function(e){return l.apply(this,arguments)}}());return l},verifyPromises:function(e){for(var t,n=0;n<e.length;n+=1){if("fulfilled"!==e[n].status&&!0!==e[n].value.ok){t=!1;break}t=!0}return t}};function Y(e){var t=m.defaultCollageName,n=m.defaultCollageType,d=m.paperSizes,h=m.tolerance,f=m.thumbnailHeight,g=m.fontSize,p=m.lineHeight,x=m.textPadding,v=(0,o.useState)(e),C=(0,i.Z)(v,2),A=C[0],Z=C[1],w=(0,o.useState)(t),j=(0,i.Z)(w,2),b=j[0],y=j[1],S=(0,o.useState)(n),k=(0,i.Z)(S,2),R=k[0],T=k[1],D=(0,o.useState)(0),z=(0,i.Z)(D,2),M=z[0],H=z[1],W=function(){var e=(0,o.useRef)(),t=(0,o.useRef)(),n=(0,o.useRef)(),r=(0,o.useRef)(),a=(0,o.useRef)(),l=(0,o.useState)(0),s=(0,i.Z)(l,2),c=s[0],u=s[1],d=(0,o.useState)(0),h=(0,i.Z)(d,2),f=h[0],g=h[1],p=(0,o.useState)(0),x=(0,i.Z)(p,2),m=x[0],v=x[1],C=(0,o.useState)(0),A=(0,i.Z)(C,2),Z=A[0],w=A[1],j=(0,o.useState)(0),b=(0,i.Z)(j,2),y=b[0],S=b[1],k=(0,o.useState)(0),R=(0,i.Z)(k,2),P=R[0],I=R[1],E=(0,o.useState)(0),T=(0,i.Z)(E,2),D=T[0],z=T[1],M=function(){var a=window.innerWidth<window.innerHeight,i=e.current?e.current.offsetHeight:0,o=r.current?r.current.offsetHeight:0;if(!0===a){var l=i+(t.current?t.current.offsetHeight:0)+(n.current?n.current.offsetHeight:0)+o;I(Math.min(window.innerWidth,window.screen.availWidth)),S(Math.min(window.innerHeight,window.screen.availHeight)-l-10)}else{var s=t.current?t.current.offsetWidth:0,c=n.current?n.current.offsetWidth:0;I(window.innerWidth-(c+s)-10),S(window.innerHeight-i-o)}};return(0,o.useEffect)((function(){M()}),[e.current,t.current,n.current]),(0,o.useEffect)((function(){return M(),window.addEventListener("resize",M),function(){return window.removeEventListener("resize",M)}}),[]),{addImageRef:a,actionsRef:t,headerRef:e,footerRef:n,collageMetaRef:r,width:Z,height:c,imageHeight:f,imageWidth:m,setImageWidth:v,setImageHeight:g,maxHeight:y,maxWidth:P,handleImageAddClick:function(){a.current&&a.current.click()},textHeight:D,setTextHeight:z,setWidth:w,setHeight:u}}(),O=function(){var e={padding:2,borderRadius:5,color:{r:255,g:255,b:255,a:1},text:"",topText:!0},t=(0,o.useState)(e),n=(0,i.Z)(t,2),r=n[0],a=n[1],l=(0,o.useState)(!1),c=(0,i.Z)(l,2),u=c[0],d=c[1],h=(0,o.useState)(null),f=(0,i.Z)(h,2),g=f[0],p=f[1],x=(0,o.useState)(""),m=(0,i.Z)(x,2),v=m[0],C=m[1],A=function(e){var t=e.target;a((function(e){return(0,s.Z)((0,s.Z)({},e),{},{text:t.value})}))};return{options:r,setOptions:a,clear:function(){return a(e)},handlePaddingChange:function(e){return a((function(t){return(0,s.Z)((0,s.Z)({},t),{},{padding:e.target.value})}))},handleRadiusChange:function(e){a((function(t){return(0,s.Z)((0,s.Z)({},t),{},{borderRadius:e.target.value})}))},handleColorClick:function(){return d((function(e){return!e}))},handleColorClose:function(){return d(!1)},handleColorChange:function(e){return a((function(t){return(0,s.Z)((0,s.Z)({},t),{},{color:e.rgb})}))},handlePositionChange:function(e){return a((function(t){return(0,s.Z)((0,s.Z)({},t),{},{topText:e})}))},handleTextChange:A,displayColorPicker:u,editControl:g,setEditControl:p,editOptionsValue:v,setEditOptionsValue:C,handleTextSubmit:function(e){A(e),p(null),C(null)}}}(),B=function(){var e=(0,o.useState)(!1),t=(0,i.Z)(e,2),n=t[0],r=t[1],a=(0,o.useState)(!1),l=(0,i.Z)(a,2),s=l[0],c=l[1],u=(0,o.useState)(!1),d=(0,i.Z)(u,2),h=d[0],f=d[1],g=(0,o.useState)(!1),p=(0,i.Z)(g,2),x=p[0],m=p[1],v=(0,o.useState)(!1),C=(0,i.Z)(v,2),A=C[0],Z=C[1],w=(0,o.useState)(!1),j=(0,i.Z)(w,2),b=j[0],y=j[1],S=(0,o.useState)(!1),k=(0,i.Z)(S,2),R=k[0],P=k[1],I=(0,o.useState)({paperWidth:0,paperHeight:0}),E=(0,i.Z)(I,2),T=E[0],D=E[1];return{clearDelete:function(){return P(!1)},generate:b,handleDownload:function(){return r(!0)},handleGenerateCallback:function(){y(!1),D({paperWidth:0,paperHeight:0})},onDelete:function(){return P((function(e){return!e}))},onDownloadClick:function(e,t){D({paperWidth:e,paperHeight:t}),y(!0),r(!1)},onDownloadClose:function(){return r(!1)},onRefresh:function(){return Z(!0)},open:n,printOptions:T,refresh:A,setGenerate:y,setOpen:r,setPrintOptions:D,setRefresh:Z,removeImage:R,setRemoveImage:P,saveOpen:s,setSaveOpen:c,onSaveClose:function(){return c(!1)},onSaveClick:function(){f(!0),c(!1)},handleSave:function(){return c(!0)},saveStart:h,setSaveStart:f,printOpen:x,setPrintOpen:m,handlePrint:function(){console.log("someone ordered a print"),m(!0)},onPrintClose:function(){return m(!1)}}}(),Q=function(e){var t=(0,o.useState)(0),n=(0,i.Z)(t,2),l=n[0],s=n[1],d=(0,o.useState)(0),h=(0,i.Z)(d,2),f=h[0],g=h[1],p=(0,o.useState)(0),x=(0,i.Z)(p,2),v=x[0],C=x[1],A=(0,o.useState)(0),Z=(0,i.Z)(A,2),w=Z[0],j=Z[1],b=(0,o.useState)([]),y=(0,i.Z)(b,2),S=y[0],k=y[1],R=(0,o.useState)(""),T=(0,i.Z)(R,2),D=T[0],z=T[1],M=(0,o.useState)(""),H=(0,i.Z)(M,2),W=H[0],O=H[1];(0,o.useEffect)((function(){"images"in e&&(k(e.images),0===v&&C(e.images.length))}),[e]);var B=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:k((function(e){return e.concat([t])})),g((function(e){return e+1}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(e){if(0===e)return O(""),!0;if(e>0){if(e<m.minImages)return O("Image Count Error: Need atleast ".concat(m.minImages," images to create a collage")),z(""),!1;if(e>m.maxImages)return z("Image Count Error: Maximum images allowed in collage is ".concat(m.maxImages)),O(""),!1;if(e>=m.minImages&&e<=m.maxImages)return z(""),O(""),!0}return!1},L=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.target.files.length+v,!0!==Q(n)){e.next=5;break}return e.next=5,P.handleImageLoad(t,C,s,B);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{clear:function(){k([]),C(0),j(0),g(0)},handleImageData:B,handleLoad:L,images:S,imgCount:v,loaded:w,newImagesLoaded:f,newImgCount:l,remove:function(e){var t=S.findIndex((function(t){return t.title===e})),n=[].concat((0,u.Z)(S.slice(0,t)),(0,u.Z)(S.slice(t+1)));return k(n),C((function(e){return e-1})),n},setImageCount:C,setImages:k,setLoaded:j,setNewImageCount:s,setNewImagesLoaded:g,getImageData:function(e){return(0,u.Z)(e).map((function(e){return e.file,e.src,(0,c.Z)(e,I)}))},removeImageData:function(e){return(0,u.Z)(e).map((function(e){return e.file,e.src,(0,c.Z)(e,E)}))},incrementNewImageCount:function(){g((function(e){return e+1}))},imageCountMinError:W,setImageCountMinError:O,imageCountMaxError:D,setImageCountMaxError:z,handleImageCount:Q}}(A),L=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=(0,o.useState)(new J({})),r=(0,i.Z)(n,2),a=r[0],l=r[1];(0,o.useEffect)((function(){var n=new J({});"details"in e&&Object.keys(e.details).length>0&&(n.fromObject(e.details.tree),"options"in e.details.tree.root&&t((function(t){return(0,s.Z)((0,s.Z)({},t),e.details.tree.root.options)})),l(n))}),[e]);var c=function(){return l({})},u=function(e,t,n,r,a){var o=N.findBestAdjustTree(e,t,n,r),s=(0,i.Z)(o,2)[1];s.addOptions(a),l(s)};return{tree:a,setTree:l,clear:c,reAdjust:u}}(A,O.setOptions),F=(0,o.useState)({}),q=(0,i.Z)(F,2),V=q[0],U=q[1],Y=(0,o.useState)((function(){return{details:{text:"Saving Details",status:"pending"},images:{text:"Saving Images (".concat(M," / ").concat(Q.images.length,")"),status:"pending"},finalizing:{text:"Finalizing Collage",status:"pending"}}})),G=(0,i.Z)(Y,2),_=G[0],$=G[1],ee="details"in e&&"collage_id"in e.details?e.details.collage_id:Date.now(),te=function(){return d[R].width/d[R].height},ne=function(){return H((function(e){return e+1}))},re=function(e,t){var n=(0,s.Z)((0,s.Z)({},_[e]),{},{status:t});$((function(t){return(0,s.Z)((0,s.Z)({},t),{},(0,l.Z)({},e,n))}))},ae=function(){var e=L.tree.root.value.aspectRatio,t=f*e,n=document.createElement("canvas"),r=L.tree.copy();r.root.options.text="",r.addSize(t,f,e),n.width=t,n.height=f,r.CanvasDisplay(t,f,n,t/W.width);var a={title:"thumbnail-".concat(ee,".png"),src:"",naturalHeight:f,naturalWidth:t,aspectRatio:e,type:"image/png"};return U(a),[a,n]},ie=function(e,t){return y(e),{collage_id:ee.toString(),name:e,collage_type:R,created_at:"2021-02-18T21:54:42.123Z",last_updated_at:"2021-02-18T21:54:45.123Z",images:Q.getImageData(Q.images),tree:L.tree.removeImageData(),thumbnail:t}},oe=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t,n){var a,o,l,s,c,u,d;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=ae(),o=(0,i.Z)(a,2),l=o[0],s=o[1],re("details","running"),e.next=4,n(ee,ie(t,l));case 4:if(!("status"in(c=e.sent))||"error"!==c.status){e.next=8;break}return re("details","failed"),e.abrupt("return",!1);case 8:return re("details","done"),re("images","running"),e.next=12,Promise.allSettled(K.uploadCollageImages(s,c,ne,Q.images,ee));case 12:return u=e.sent,re("images","done"),re("finalizing","running"),d=K.verifyPromises(u),re("finalizing",!0===d?"done":"failed"),e.abrupt("return",d);case 18:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),le=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",oe(t,X.Z.newCollage));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),se=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",oe(t,X.Z.saveCollage));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ce=function(){return 0===Object.keys(L.tree).length};return(0,o.useEffect)((function(){var e="Saving Images (".concat(M," / ").concat(Q.imgCount,")"),t=(0,s.Z)((0,s.Z)({},_.images),{},{text:e});M===Q.imgCount&&Q.imgCount>0&&(t=(0,s.Z)((0,s.Z)({},t),{},{status:"done"})),$((function(e){return(0,s.Z)((0,s.Z)({},e),{},{images:t})}))}),[M,Q.imgCount]),(0,o.useEffect)((function(){if(Z(e),"details"in e){var r=e.details;"name"in r&&b===t&&y(r.name),"collage_type"in r&&R===n&&T(e.details.collage_type)}}),[e]),(0,o.useEffect)((function(){var e=W.width,t=W.height,n=W.setTextHeight,r=W.setImageWidth,a=W.setImageHeight,o=O.options.text;if(!ce()){var l=P.wrapText(o,0,0,e,g,p),s=o.length>0?l.length*p+2*x*t:0,c=P.getCollageDimension(e,t-s,L.tree.root.value.aspectRatio),u=(0,i.Z)(c,2),d=u[0],h=u[1];n(s),r(d),a(h)}}),[W.width,W.height,L.tree,O.options.text]),(0,o.useEffect)((function(){var e=te();if(!ce()&&"aspectRatio"in L.tree.root.value&&L.tree.root.value.aspectRatio!==e){var t=L.tree.copy();t.value=(0,s.Z)((0,s.Z)({},t.value),{},{aspectRatio:e}),t.root.value=(0,s.Z)((0,s.Z)({},t.root.value),{},{targetAspectRatio:e}),L.setTree(t),Q.images.length>1&&B.setRefresh(!0)}}),[R]),(0,o.useEffect)((function(){var e=te(),t=W.maxWidth,n=W.maxHeight,r=P.getCollageDimension(t,n,e),a=(0,i.Z)(r,2),o=a[0],l=a[1];W.setWidth(o),W.setHeight(l)}),[W.maxWidth,W.maxHeight,R]),(0,o.useEffect)((function(){(Q.newImgCount>0&&Q.newImgCount===Q.newImagesLoaded||B.refresh)&&(Q.setNewImageCount(0),Q.setNewImagesLoaded(0),L.reAdjust(Q.images,h,W.width,W.height-W.textHeight,O.options),B.setRefresh(!1))}),[Q.newImgCount,Q.newImagesLoaded,B.refresh]),[R,ie,b,V,ee,W,O,B,Q,L,function(){L.clear(),Q.clear(),O.clear()},function(){},function(e){var t=Q.remove(e);L.reAdjust(t,h,W.imageWidth,W.imageHeight,O.options)},le,_,se,function(e){return T(e)},function(e){return y(e)}]}var G=n(58467),_=n(69099),$=n(94469),ee=n(33604),te=n(4117),ne=n(96467),re=n(97762),ae=n(48310),ie=n(20527);function oe(e){var t=e.errors,n=e.children,r=e.handleClose,a=(0,o.useState)(!1),l=(0,i.Z)(a,2),s=l[0],c=l[1];return(0,o.useEffect)((function(){return c(!0)}),[]),t.length>0?(0,x.jsxs)($.Z,{open:s,fullWidth:!0,children:[(0,x.jsx)(ee.Z,{sx:{textAlign:"center",color:"red",fontWeight:"bold"},children:"Error(s)"}),(0,x.jsx)(ne.Z,{dividers:!0,sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:(0,x.jsxs)(re.Z,{sx:{display:"inline",pr:1},children:[(0,x.jsx)(M.Z,{sx:{fontWeight:"bold"},children:"Please fix the following errors"}),(0,x.jsx)(ae.Z,{sx:{px:2},children:t.map((function(e){return(0,x.jsx)(ie.ZP,{sx:{display:"list-item",listStyleType:"disc"},children:e})}))})]})}),(0,x.jsx)(te.Z,{children:(0,x.jsx)(_.Z,{variant:"outlined",onClick:function(){r(),c(!1)},children:"Close"})})]}):n}function le(e){var t=e.dimensionProps,n=e.imageProps,r=e.actionProps,a=e.collageCallback,l=e.handleRemoveImage,s=e.options,c=e.tree,u=(0,o.useState)(null),d=(0,i.Z)(u,2),h=d[0],f=d[1],g=n.images,p=n.setLoaded,x=r.generate,v=r.handleGenerateCallback,C=r.printOptions,A=r.removeImage,Z=t.height,w=t.width,j=t.imageHeight,b=t.imageWidth,y=m.fontSize,S=m.lineHeight,k=function(){return p((function(e){return e+1}))},R=function(e){return 0===Object.keys(e).length},I=function(){if(c.addSize(b,j,c.root.value.aspectRatio),c.addOptions(s),g.length>0){c.addImageData(g);var e=c.DOMDisplay(w,Z,A,l,k);f(e),a(c)}};(0,o.useEffect)((function(){R(c)||null==c.root.left||I()}),[]),(0,o.useEffect)((function(){R(c)||null==c.root.left?f(null):I()}),[c,s,b,j,A,g]);var E=function(e,t){var n=function(){var e=c.copy();return e.replaceImages(g),e}(),r=c.root.value.aspectRatio,a=e/w,o=P.getImageDimensions(e,t,s.text,0,0,y,S,a,c.root.value.aspectRatio),l=(0,i.Z)(o,2),u=l[0],d=l[1];return n.addSize(u,d,r),n},T=function(e,t,n){var r=t/w,a=function(e,t){var n=document.createElement("canvas");return n.width=e,n.height=t,n}(t,n);e.CanvasDisplay(t,n,a,r),setTimeout((function(){return e=t,r=n,void a.toBlob((function(t){var n=document.createElement("a");n.download="collage-".concat(e.toFixed(2),"X").concat(r.toFixed(2),"-").concat(Date.now(),".jpg"),n.href=URL.createObjectURL(t),n.click(),URL.revokeObjectURL(n.href),n.href=null,v()}),"image/jpeg");var e,r}),"5000")};return(0,o.useEffect)((function(){if(!0===x){var e=C.paperWidth,t=C.paperHeight,n=E(e,t),r=n.validateAddSize(),a=(0,i.Z)(r,2),o=a[0],l=a[1];if(o)T(n,e,t);else{var s=P.optimizeDimensions(e,t,l),c=(0,i.Z)(s,2),u=c[0],d=c[1],h=E(u,d),f=h.validateAddSize(),g=(0,i.Z)(f,2),p=g[0],m=g[1];p?T(h,u,d):console.log("unable to generate collage",m)}}}),[x]),h}var se=n(51405),ce=n(24256),ue=n(23306),de=n(1550);function he(e){var t=e.open,n=e.onClick,r=e.onClose,a=e.sizes,l=e.collageType,s=(0,o.useState)(""),c=(0,i.Z)(s,2),u=c[0],d=c[1];return(0,x.jsxs)($.Z,{open:t,fullWidth:!0,children:[(0,x.jsx)(ee.Z,{sx:{textAlign:"center"},children:"Download Collage"}),(0,x.jsxs)(ne.Z,{dividers:!0,sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,x.jsx)(re.Z,{sx:{display:"inline",pr:1},children:"Choose collage size"}),(0,x.jsxs)(de.Z,{fullWidth:!0,sx:{maxWidth:"60%"},children:[(0,x.jsx)(ue.Z,{id:"demo-simple-select-label",children:"Download Size"}),(0,x.jsx)(ce.Z,{labelId:"demo-simple-select-label",id:"demo-simple-select",defaultValue:"A4",value:u,label:"Download Size",onChange:function(e){return d(e.target.value)},inputProps:{sx:{fontWeight:"bold",color:"gray",alignItems:"end",display:"flex"}},children:"downloadSizes"in a[l]?a[l].downloadSizes.map((function(e){return(0,x.jsxs)(se.Z,{value:e,children:[a[e].icon,a[e].text]},a[e].text)})):(0,x.jsxs)(se.Z,{value:l,children:[a[l].icon,a[l].text]},a[l].text)})]})]}),(0,x.jsxs)(te.Z,{children:[(0,x.jsx)(_.Z,{variant:"outlined",disabled:0===u.length,onClick:function(){n(a[u].width,a[u].height),d("")},children:"Download"}),(0,x.jsx)(_.Z,{variant:"text",onClick:function(){d(""),r()},children:"Cancel"})]})]})}var fe=n(16783);function ge(e){var t=e.collageName,n=e.open,r=e.onClick,a=e.onClose,l=(0,o.useState)(t),s=(0,i.Z)(l,2),c=s[0],u=s[1],d=(0,o.useState)(""),h=(0,i.Z)(d,1)[0];return(0,x.jsxs)($.Z,{open:n,fullWidth:!0,children:[(0,x.jsx)(ee.Z,{sx:{textAlign:"center"},children:"Save Collage"}),(0,x.jsx)(ne.Z,{dividers:!0,sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:(0,x.jsx)(fe.Z,{variant:"outlined",label:"Set Collage Name",defaultValue:c,onChange:function(e){var t=e.target;u(t.value)},size:"small",sx:{width:"100%",mb:1},InputProps:{sx:{backgroundColor:(0,W.Fq)("#fff",.9)}},helperText:h,error:!!h})}),(0,x.jsxs)(te.Z,{children:[(0,x.jsx)(_.Z,{variant:"outlined",disabled:0===c.length,onClick:function(){r(c)},children:"Save"}),(0,x.jsx)(_.Z,{variant:"text",onClick:function(){u(""),a()},children:"Cancel"})]})]})}var pe=n(79632),xe=n(19536),me=n(11198);function ve(e){var t=e.collageName,n=e.collageType,r=e.open,a=e.onClose;return console.log(t,n),(0,x.jsxs)($.Z,{open:r,fullWidth:!0,children:[(0,x.jsx)(ee.Z,{sx:{textAlign:"center",color:"gray",fontWeight:"bold"},children:(0,x.jsxs)(H.Z,{direction:"row",justifyContent:"center",alignItems:"center",spacing:"5px",children:["Order Print(s)",(0,x.jsx)(Q.Z,{"aria-label":"close",onClick:a,sx:{position:"absolute",right:0,color:function(e){return e.palette.grey[500]},outline:"0 solid tranparent",borderRadius:"50%"},children:(0,x.jsx)(me.Z,{})})]})}),(0,x.jsx)(ne.Z,{dividers:!0,sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:(0,x.jsxs)(H.Z,{direction:"column",spacing:2,justifyContent:"center",sx:{width:"100%"},children:[(0,x.jsx)("img",{src:"data:image/jpeg;base64,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",alt:"comingsoon"}),(0,x.jsx)(M.Z,{sx:{fontWeight:"italic",textAlign:"center",fontSize:"2rem",backgroundColor:"primary.main",color:"secondary.main"},children:"COMING SOON"}),(0,x.jsx)(xe.Z,{}),(0,x.jsx)(M.Z,{sx:{fontWeight:"bold",color:"gray",textAlign:"center",fontSize:"1.2rem"},children:"Want early access?"})," ",(0,x.jsxs)(H.Z,{direction:"row",justifyContent:"center",alignItems:"center",spacing:2,children:[" ",(0,x.jsx)(M.Z,{sx:{color:"gray",textAlign:"center"},children:"Contact Us:"})," ",(0,x.jsx)("a",{href:"https://wa.link/t7s2h7",children:(0,x.jsx)(f.Z,{fontSize:"medium",sx:{backgroundColor:"#25D366",fill:"white"}})}),(0,x.jsx)("a",{href:"mailto:someone@example.com",children:(0,x.jsx)(pe.Z,{fontSize:"medium"})})]})]})}),(0,x.jsx)(te.Z,{children:(0,x.jsx)(_.Z,{variant:"text",onClick:a,children:"Cancel"})})]})}var Ce=n(85281),Ae=n(32499),Ze=n(37957);function we(){return(0,x.jsx)(me.Z,{color:"error",size:"0.875rem",sx:{border:"2px solid red",borderRadius:"50%"}})}function je(e){var t=e.status;return"running"===t?(0,x.jsx)(Ce.Z,{color:"info",size:"1rem"}):"pending"===t?(0,x.jsx)(Ae.Z,{color:"disabled",size:"0.875rem"}):"done"===t?(0,x.jsx)(Ze.Z,{color:"success",size:"0.875rem"}):"failed"===t?(0,x.jsx)(we,{}):void 0}function be(e){var t=e.text,n=e.status,r={pending:(0,W.Fq)("#000",.26),done:"black",running:"black",failed:"red"};return(0,x.jsxs)(H.Z,{direction:"row",justifyContent:"space-between",children:[(0,x.jsx)(M.Z,{sx:{fontWeight:"bold",fontSize:"1rem",color:r[n]},children:t}),(0,x.jsx)(je,{status:n})]})}function ye(e){var t=e.status,n=e.counter;return"failed"===t?(0,x.jsxs)(H.Z,{direction:"row",spacing:2,justifyContent:"center",alignItems:"center",sx:{width:"100%",p:1},children:[(0,x.jsx)(we,{}),(0,x.jsx)(M.Z,{children:"Collage creation failed"})]}):"running"===t||"pending"===t?null:"success"===t?(0,x.jsxs)(H.Z,{direction:"row",spacing:2,justifyContent:"center",alignItems:"center",sx:{width:"100%",p:1},children:[(0,x.jsx)(Ze.Z,{color:"success",sx:{fontSize:"2rem"}}),(0,x.jsxs)(M.Z,{children:["Collage creation successful. Navigation to collages in ",n," seconds..."]})]}):null}function Se(e){var t=e.open,n=e.status,r="pending",a=(0,o.useState)(-1),l=(0,i.Z)(a,2),s=l[0],c=l[1];(0,o.useEffect)((function(){var e;return s>0&&"success"===r&&(e=setTimeout((function(){return c(s-1)}),1e3)),function(){return clearTimeout(e)}}),[s,r]);var u=Object.values(n).map((function(e){return e.status}));return u.includes("failed")?r="failed":u.includes("running")?r="running":u.includes("pending")||(-1===s&&c(3),r="success"),(0,x.jsxs)($.Z,{open:t,fullWidth:!0,children:[(0,x.jsx)(ee.Z,{sx:{textAlign:"center"},children:"Save Collage"}),(0,x.jsx)(ne.Z,{dividers:!0,children:(0,x.jsx)(H.Z,{direction:"column",justifyContent:"center",spacing:2,children:Object.values(n).map((function(e){return(0,x.jsx)(be,{text:e.text,status:e.status},e.text)}))})}),(0,x.jsx)(ye,{status:r,counter:s})]})}var ke=n(28089),Re=n(24813),Pe=n(70501),Ie=n(90891),Ee=n(14647),Te=n(28737),De=n(53433);function ze(e){var t=e.name,n=e.handleChange,l=e.nameError,s=e.handleNameError,c=(0,o.useState)(!1),u=(0,i.Z)(c,2),d=u[0],h=u[1],f=(0,o.useState)(Math.min(8*(t.length+1),8*(m.maxNameLength+1))),g=(0,i.Z)(f,2),p=g[0],C=g[1],A=ke.Ry({name:ke.Z_().max(m.maxNameLength,"Max allowed length is ".concat(m.maxNameLength))}).required(),Z=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.Z.isFieldValid("name",t,s,A);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==t.target.value){e.next=4;break}n("Untitled"),e.next=10;break;case 4:return n(t.target.value),e.next=7,Z();case 7:if(!1!==e.sent){e.next=10;break}return e.abrupt("return");case 10:h(!1);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,o.useEffect)((function(){return Z()}),[t]),!0===d?(0,x.jsx)(fe.Z,{className:"collageName",margin:"dense",variant:"standard",defaultValue:t,autoFocus:!0,size:"small",onChange:function(e){C(Math.min(8*(e.target.value.length+1),8*(m.maxNameLength+1))),n(e.target.value)},onBlur:w,onKeyDown:function(e){13===e.keyCode&&!1===e.shiftKey&&w(e)},InputLabelProps:{color:"secondary",focused:!0},inputProps:{style:{textAlign:"center",color:"gray",backgroundColor:(0,W.Fq)("#000",.3),width:"".concat(p,"px"),marginX:"8px"}},helperText:(0,x.jsx)(M.Z,{variant:"body",sx:{fontWeight:"bold",color:"secondary.main",textAlign:"center"},children:l}),error:!!l,sx:{position:"absolute",left:"50%",transform:"translate(-50%, 0)",cursor:"text"}}):(0,x.jsx)(M.Z,{variant:"h5",onClick:function(){return h(!0)},className:"collageName",sx:{color:"gray",position:"absolute",left:"50%",transform:"translate(-50%, 0)",m:2},children:t})}function Me(e){var t=e.headerRef,n=e.name,r=e.handleNameChange,a=e.nameError,i=e.handleNameError,o=(0,Re.Z)((function(e){return e.breakpoints.down("md")}));return(0,x.jsxs)(Pe.Z,{ref:t,sx:{display:"flex",alignItems:"center",justifyContent:"space-between",p:1,backgroundColor:"primary.main",borderRadius:0},elevation:0,children:[(0,x.jsx)(z.Z,{sx:{postion:"absolute",left:"5px"},children:(0,x.jsxs)(H.Z,{direction:"row",alignItems:"center",spacing:2,children:[(0,x.jsx)(Ie.Z,{href:"/collages",color:"white",underline:"none",children:(0,x.jsx)(z.Z,{sx:{display:"flex",alignItems:"center"},children:(0,x.jsx)(Ee.Z,{fontSize:"medium"})})}),o?(0,x.jsx)(Ie.Z,{href:"/",color:"white",underline:"none",children:(0,x.jsx)(De.Oc,{width:"50px",height:"50px"})}):(0,x.jsx)(Ie.Z,{href:"/",color:"white",underline:"none",children:(0,x.jsx)(De.cd,{width:"50px",height:"50px"})})]})}),(0,x.jsx)(ze,{name:n,handleChange:r,nameError:a,handleNameError:i}),(0,x.jsx)(Te.Z,{})]})}var He=n(2244),We=n.p+"static/media/empty_collage.fb0b03dbe8015b78ebec.webp";function Oe(e){var t=e.width,n=e.height,r=e.loadComponent;return(0,x.jsx)(z.Z,{sx:{backgroundImage:"url(".concat(We,")"),backgroundSize:t,objectFit:"fill",width:t,height:n,display:"flex",justifyContent:"center",alignItems:"center"},children:r})}var Be=n(81998),Qe=n(78701);function Le(e){var t,n=e.open,r=e.saveOpen,a=e.saveStatusOpen,i=e.status,o=e.dimensionProps,l=e.imageProps,s=e.header,c=e.actions,u=e.downloadDialog,d=e.saveDialog,h=e.saveStatusDialog,f=e.collage,g=e.controls,p=e.collageMetaInfo,v=e.printOpen,C=e.printDialog,A=o.width,Z=o.height,w=o.maxWidth,j=o.maxHeight,b=o.collageMetaRef,y=b.current?b.current.offsetHeight:0,S=!1,k=l.images,R=l.imgCount,P=l.handleLoad;k.length>0&&(S=!0),"fetching"===i&&(t=(0,x.jsx)(Oe,{width:A,height:Z,loadComponent:(0,x.jsx)(He.Z,{title:"Fetching collage..."})})),"preparing"===i&&(t=(0,x.jsxs)(x.Fragment,{children:[f,(0,x.jsx)(He.Z,{title:"Preparing collage..."})]})),"loading"===i&&(t=(0,x.jsx)(Oe,{width:A,height:Z,loadComponent:(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(He.Z,{title:"Loading (".concat(l.newImagesLoaded," / ").concat(R,") images...")}),f]})})),"empty"===i&&(t=(0,x.jsx)(Oe,{width:A,height:Z,loadComponent:A?(0,x.jsxs)(H.Z,{direction:"column",spacing:2,justifyContent:"space-around",children:[(0,x.jsx)(z.Z,{className:"first-element",justifyContent:"center",sx:{display:"flex"},children:(0,x.jsx)(Be.Z,{handleChange:P})}),(0,x.jsxs)(M.Z,{sx:{backgroundColor:"faded.black",p:.5,color:"form.stepper",fontWeight:"bold",fontSize:"0.7rem",textAlign:"center"},children:["Tip: Select ",m.minImages," - ",m.maxImages," images"]}),(0,x.jsxs)(M.Z,{sx:{backgroundColor:"faded.black",p:.5,color:"form.stepper",fontWeight:"bold",fontSize:"0.7rem"},children:["Note: Images with size ",">"," ",m.maxImageSize,"MB will be resized"]})]}):(0,x.jsx)("div",{})})),"ready"===i&&(t=f);var I=(Math.min(window.innerWidth,window.screen.availWidth)-w)/2;return(0,x.jsxs)(z.Z,{component:"div",sx:{position:"relative"},children:[s,(0,x.jsxs)(Qe.Z,{children:[S?c:null,n?u:null,r?d:null,a?h:null,v?C:null,(0,x.jsxs)(H.Z,{direction:"column",width:w,height:j+y,sx:{position:"absolute",left:I,alignItems:"center",justifyContent:"center",backgroundColor:"gray"},children:[p,t]}),S?g:null]})]})}var Fe=n(83121),qe=n(44002),Ve=n(50324),Ue=n(89237);function Je(e){var t=e.label,n=e.icon,r=e.handleChange;return(0,x.jsx)(Ue.Z,{showLabel:!0,label:t,icon:n,sx:{py:1,fontWeight:"bold",color:"gray",outline:"none","&:focus":{color:"white",outline:"none"}},onClick:r})}Je.defaultProps={handleChange:function(){}};var Ne=n(33947);function Xe(e){var t=e.anchor,n=e.children,r=e.innerRef;return(0,x.jsx)(Ne.ZP,{anchor:t,variant:"permanent",PaperProps:{ref:r,sx:{height:"fit-content",top:"50%",backgroundColor:"transparent",color:"gray",fontWeight:"bold",borderRadius:"left"===t?"0 10px 10px 0":"10px 0 0 10px",transform:"translate(0, -50%)",border:0}},children:n})}function Ke(){return(0,x.jsx)(xe.Z,{sx:{backgroundColor:"gray",my:1},variant:"middle"})}function Ye(e){var t=e.actionsRef,n=e.onDownload,r=e.onSave,a=e.onPrint,i=function(e){"download"===e&&n(),"save"===e&&r(),"print"===e&&a()};return(0,x.jsx)(Xe,{anchor:"right",innerRef:t,children:(0,x.jsxs)(ae.Z,{sx:{backgroundColor:"black"},children:[(0,x.jsx)(Je,{label:"Save",icon:(0,x.jsx)(Fe.Z,{}),handleChange:function(){return i("save")}}),(0,x.jsx)(Ke,{}),(0,x.jsx)(Je,{label:"Download",icon:(0,x.jsx)(qe.Z,{}),handleChange:function(){return i("download")}}),(0,x.jsx)(Ke,{}),(0,x.jsx)(Je,{label:(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(M.Z,{sx:{fontSize:"0.75rem",fontWeight:"bold"},children:"Order"}),(0,x.jsx)(M.Z,{sx:{fontSize:"0.75rem",fontWeight:"bold"},children:"Print(s)"})]}),icon:(0,x.jsx)(Ve.Z,{}),handleChange:function(){return i("print")}})]})})}Xe.defaultProps={innerRef:function(){}};var Ge=n(32094),_e=n(65954),$e=n(43187),et=n(75005);function tt(e){var t=e.open,n=e.onSubmit,r=e.onCancel,a=e.saveType;return(0,x.jsxs)($.Z,{open:t,children:[(0,x.jsxs)(ee.Z,{sx:{textAlign:"center",fontWeight:"bold",color:(0,W.Fq)("#000",.8)},children:["new"===a?"Clear":"Delete"," Collage"]}),(0,x.jsxs)(ne.Z,{dividers:!0,children:[(0,x.jsxs)(re.Z,{sx:{fontWeight:"bold",color:"gray",pb:1},children:["Do you want to ","new"===a?"clear":"delete"," this collage?"]}),(0,x.jsx)(M.Z,{variant:"subtitle2",sx:{color:"red",fontWeight:"bold"},noWrap:!0,children:"Note:"}),(0,x.jsx)(M.Z,{sx:{fontSize:"0.8rem",color:"gray",fontWeight:"bold"},children:"This change is not reversible"})]}),(0,x.jsxs)(te.Z,{children:[(0,x.jsx)(_.Z,{onClick:n,sx:{color:"red"},children:"new"===a?"Clear":"Delete"}),(0,x.jsx)(_.Z,{variant:"outlined",onClick:r,children:"Cancel"})]})]})}function nt(e){var t=e.innerRef,n=e.onRefresh,r=e.photosComp,a=e.editComp,l=e.handleClear,s=e.clearDelete,c=e.saveType,u=(0,o.useState)(!1),d=(0,i.Z)(u,2),h=d[0],f=d[1],g=(0,o.useState)(!1),p=(0,i.Z)(g,2),m=p[0],v=p[1],C=(0,o.useState)(!1),A=(0,i.Z)(C,2),Z=A[0],w=A[1],j=(0,o.useRef)(null),b=function(){s(),f(!1),v(!1),w(!1)};(0,o.useEffect)((function(){function e(e){j.current&&!j.current.contains(e.target)&&b()}return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[j]);var y=function(){return w(!1)};return(0,x.jsx)(Xe,{anchor:"left",children:(0,x.jsxs)(H.Z,{direction:"row",spacing:2,alignItems:"center",ref:t,children:[(0,x.jsxs)(ae.Z,{sx:{backgroundColor:"black",borderRadius:"0 10px 10px 0"},children:[(0,x.jsx)(Je,{label:"Rearrange",icon:(0,x.jsx)(et.Z,{}),handleChange:function(){b(),n()}}),(0,x.jsx)(Ke,{}),(0,x.jsx)(Je,{label:"Photos",icon:(0,x.jsx)($e.Z,{}),handleChange:function(){var e=h;f((function(e){return!e})),!0===e&&b()}}),(0,x.jsx)(Ke,{}),(0,x.jsx)(Je,{label:"Edit",icon:(0,x.jsx)(_e.Z,{}),handleChange:function(){m?v(!1):(b(),v(!0))}}),(0,x.jsx)(Ke,{}),(0,x.jsx)(Je,{label:"new"===c?"Clear":"Delete",icon:"new"===c?(0,x.jsx)(Ge.Z,{}):(0,x.jsx)(L.Z,{}),handleChange:function(){Z?w(!1):(b(),w(!0))}})]}),h?r:null,m?(0,x.jsx)("div",{ref:j,children:a}):null,(0,x.jsx)(tt,{open:Z,onSubmit:function(){y(),l()},onCancel:y,saveType:c})]})})}var rt=n(59344);function at(e){var t=e.onDelete,n=e.onAdd,r=e.clearDelete;return(0,x.jsxs)(ae.Z,{sx:{backgroundColor:"black",borderRadius:"10px 10px 10px 10px",height:"fit-content"},children:[(0,x.jsx)(Je,{label:"Add",icon:(0,x.jsx)(rt.Z,{}),handleChange:function(){r(),n()}}),(0,x.jsx)(Ke,{}),(0,x.jsx)(Je,{label:"Delete",icon:(0,x.jsx)(L.Z,{}),handleChange:t})]})}function it(e){var t=e.paddingControl,n=e.radiusControl,r=e.colorControl,a=e.textControl;return(0,x.jsxs)(H.Z,{direction:"column",spacing:4,sx:{p:3,backgroundColor:"black",borderRadius:"10px 10px 10px 10px",boxShadow:"0 0 10px inset rgba(255, 0, 0, 0.3)"},children:[t,n,r,a]})}var ot=n(89856);function lt(e){var t=e.label,n=e.icon,r=e.handleChange;return(0,x.jsx)(Ue.Z,{showLabel:!0,label:t,value:t.toLowerCase(),icon:n,sx:{fontWeight:"bold",color:"gray","&.Mui-selected":{color:"white",outline:"none"}},onClick:r})}function st(e){var t=e.actionsRef,n=e.onDownload,r=e.onSave,a=e.onPrint;return(0,x.jsxs)(ot.Z,{ref:t,showLabels:!0,sx:{py:1,fontWeight:"bold",backgroundColor:(0,W.Fq)("#000",.6)},children:[(0,x.jsx)(lt,{label:"Save",icon:(0,x.jsx)(Fe.Z,{}),handleChange:r}),(0,x.jsx)(lt,{label:"Download",icon:(0,x.jsx)(qe.Z,{}),handleChange:n}),(0,x.jsx)(lt,{label:"Order Print(s)",icon:(0,x.jsx)(Ve.Z,{}),handleChange:a})]})}function ct(e){var t=e.value,n=e.handleChange,r=e.saveType;return(0,x.jsxs)(ot.Z,{showLabels:!0,value:t,onChange:n,sx:{fontWeight:"bold",backgroundColor:(0,W.Fq)("#fff",.2),"&.Mui-selected":{color:"white"}},children:[(0,x.jsx)(Ue.Z,{label:"Rearrange",value:"rearrange",icon:(0,x.jsx)(et.Z,{}),sx:{fontWeight:"bold",color:"gray","&.Mui-selected":{color:"white",outline:"none"}}}),(0,x.jsx)(Ue.Z,{label:"Photos",value:"photo",icon:(0,x.jsx)($e.Z,{}),sx:{fontWeight:"bold",color:"gray","&.Mui-selected":{color:"white",outline:"none"}}}),(0,x.jsx)(Ue.Z,{label:"Edit",value:"edit",icon:(0,x.jsx)(_e.Z,{}),sx:{fontWeight:"bold",color:"gray","&.Mui-selected":{color:"white",outline:"none"}}}),(0,x.jsx)(Ue.Z,{label:"new"===r?"Clear":"Delete",value:"clear",icon:"new"===r?(0,x.jsx)(Ge.Z,{}):(0,x.jsx)(L.Z,{}),sx:{fontWeight:"bold",color:"gray","&.Mui-selected":{color:"white",outline:"none"}}})]})}var ut=n(28351),dt=n(34733),ht=n(30627),ft=n(70339);function gt(e){var t=e.color,n=e.editOptionsValue,r=e.open,a=e.handleOptionsClose,i=e.handleEditOptionsClick;return r?(0,x.jsxs)(z.Z,{sx:{position:"relative"},children:[(0,x.jsxs)(ot.Z,{showLabels:!0,value:n,onChange:i,sx:{display:"flex",fontWeight:"bold",backgroundColor:(0,W.Fq)("#fff",.2),borderTop:"1px solid gray",position:"relative",alignItems:"center"},children:[(0,x.jsx)(Ue.Z,{label:(0,x.jsx)(M.Z,{fontSize:"0.70rem",fontWeight:"bold",children:"Padding"}),value:"padding",icon:(0,x.jsx)(ut.Z,{}),sx:{fontWeight:"bold",color:"gray","&.Mui-selected":{color:"white",outline:"none"}}}),(0,x.jsx)(Ue.Z,{label:(0,x.jsx)(M.Z,{fontSize:"0.70rem",fontWeight:"bold",children:"Corner"}),value:"border radius",icon:(0,x.jsx)(dt.Z,{}),sx:{fontWeight:"bold",color:"gray","&.Mui-selected":{color:"white",outline:"none"}}}),(0,x.jsx)(Ue.Z,{label:(0,x.jsx)(M.Z,{fontSize:"0.70rem",fontWeight:"bold",children:"Color"}),value:"color",icon:(0,x.jsx)(ht.Z,{sx:{fill:"rgba(".concat(t.r,", ").concat(t.g,", ").concat(t.b,", ").concat(t.a,")"),borderRadius:"5px"}}),sx:{fontWeight:"bold",color:"gray","&.Mui-selected":{color:"white",outline:"none"}}}),(0,x.jsx)(Ue.Z,{label:"Text",value:"text",icon:(0,x.jsx)(ft.Z,{}),sx:{fontWeight:"bold",color:"gray","&.Mui-selected":{color:"white",outline:"none"}}})]}),(0,x.jsx)(me.Z,{fontSize:"1rem",sx:{position:"absolute",top:5,right:5,fill:"white",backgroundColor:"gray",borderRadius:"50%",padding:"2px"},onClick:a})]}):null}function pt(e){var t=e.open,n=e.value,r=e.handleOptionsClose,a=e.handleDelete,i=e.handleAdd;return t?(0,x.jsxs)(z.Z,{sx:{position:"relative"},children:[(0,x.jsxs)(ot.Z,{showLabels:!0,value:n,sx:{fontWeight:"bold",backgroundColor:(0,W.Fq)("#fff",.2),borderTop:"1px solid gray","&.Mui-selected":{color:"white"}},children:[(0,x.jsx)(lt,{label:"Delete",icon:(0,x.jsx)(L.Z,{}),handleChange:a}),(0,x.jsx)(lt,{label:"Add",icon:(0,x.jsx)(rt.Z,{}),handleChange:i})]}),(0,x.jsx)(me.Z,{fontSize:"1rem",sx:{position:"absolute",top:5,right:5,fill:"white",backgroundColor:"gray",borderRadius:"50%",padding:"2px"},onClick:r})]}):null}function xt(e){var t=e.optionProps,n=e.actionProps,r=e.dimensionProps,a=e.handleClear,l=e.saveType,s=e.paddingControl,c=e.radiusControl,u=e.colorControl,d=e.textControl,h=e.editControl,f=e.handleEditControl,g=e.editOptionsValue,p=e.handleEditOptionsValue,m=t.options,v=t.handleColorClick,C=t.displayColorPicker,A=n.onRefresh,Z=n.onDelete,w=n.clearDelete,j=r.footerRef,b=r.handleImageAddClick,y=(0,o.useState)(!0),S=(0,i.Z)(y,2),k=S[0],R=S[1],P=(0,o.useState)(""),I=(0,i.Z)(P,2),E=I[0],T=I[1],D=(0,o.useState)(!1),M=(0,i.Z)(D,2),H=M[0],O=M[1],B=(0,o.useState)(!1),Q=(0,i.Z)(B,2),L=Q[0],F=Q[1],q=(0,o.useState)(!1),V=(0,i.Z)(q,2),U=V[0],J=V[1],N=(0,o.useState)(""),X=(0,i.Z)(N,2),K=X[0],Y=X[1],G=(0,o.useRef)(null);(0,o.useEffect)((function(){function e(e){G.current&&!G.current.contains(e.target)&&f(null)}return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[G]);var _=function(){O(!1),f(null),p(""),R(!0),T("")};(0,o.useEffect)((function(){H&&"padding"===g&&f(s)}),[m.padding,H]),(0,o.useEffect)((function(){H&&"border radius"===g&&f(c)}),[m.borderRadius,H]),(0,o.useEffect)((function(){H&&"color"===g&&C&&f(u)}),[m.color,H,C]),(0,o.useEffect)((function(){H&&"text"===g&&f(d)}),[m.text,H,m.topText]);return(0,x.jsxs)(Pe.Z,{ref:j,sx:{position:"fixed",top:Math.min(window.innerHeight,window.screen.availHeight),backgroundColor:"black",borderRadius:0,width:Math.min(window.innerWidth,window.screen.availWidth),transform:"translate(0, -100%)"},elevation:4,children:[(0,x.jsx)(tt,{open:L,onSubmit:function(){a(),F(!1),T("")},onCancel:function(){F(!1),T("")},saveType:l}),null!==h?(0,x.jsx)(z.Z,{ref:G,sx:{backgroundColor:(0,W.Fq)("#fff",.15),p:1},children:h}):null,(0,x.jsx)(pt,{open:U,value:K,handleDelete:Z,handleAdd:function(){w(),b()},handleOptionsClose:function(){J(!1),Y(""),R(!0),w(),T("")}}),(0,x.jsx)(gt,{color:m.color,editOptionsValue:g,open:H,handleOptionsClose:_,handleEditOptionsClick:function(e,t){p(t),"padding"===t?f(s):"border radius"===t?f(c):"color"===t?v():"text"===t&&f(d)}}),k?(0,x.jsx)(ct,{value:E,handleChange:function(e,t){w(),Y(""),J(!1),R(!0),_(),T(t),"rearrange"===t?A():"photo"===t?(R(!1),J(!0)):"edit"===t?(R(!1),O(!0)):"clear"===t&&F(!0)},saveType:l}):null]})}function mt(e){var t=e.type,n=e.handleChange,r=e.sizes;return(0,x.jsxs)(H.Z,{direction:"row",alignItems:"center",justifyContent:"center",children:[(0,x.jsxs)(M.Z,{sx:{color:"form.input",fontSize:"0.87rem",fontWeight:"bold"},children:["Type:"," "]}),(0,x.jsx)(de.Z,{variant:"standard",size:"small",margin:"none",hiddenLabel:!0,sx:{alignItems:"center"},children:(0,x.jsx)(ce.Z,{className:"collageType",id:"demo-simple-select-standard",value:t,onChange:n,label:"CollageType",disableUnderline:!0,inputProps:{sx:{p:0,fontWeight:"bold",fontSize:"0.82rem",color:"primary.main",pl:1,minWidth:"40px",alignItems:"end",display:"flex",minHeight:"30px"}},children:Object.keys(r).map((function(e){return!0===r[e].display?(0,x.jsxs)(se.Z,{divider:!0,value:e,sx:{alignItems:"center",px:1,minHeight:"35px",fontSize:"0.87rem",fontWeight:"bold",color:"gray"},children:[r[e].icon,r[e].text]},e):null}))})})]})}function vt(e){var t=e.count;return(0,x.jsxs)(H.Z,{direction:"row",alignItems:"center",justifyContent:"center",children:[(0,x.jsx)(M.Z,{sx:{color:"form.input",fontSize:"0.87rem",fontWeight:"bold",px:1},children:"Images:"}),(0,x.jsx)(M.Z,{sx:{color:"primary.main",fontSize:"0.87rem",fontWeight:"bold",p:0},children:t})]})}function Ct(e){var t=e.collageMetaRef,n=e.collageType,r=e.width,a=e.sizes,i=e.handleTypeChange,o=e.imageCount;return(0,x.jsxs)(H.Z,{ref:t,direction:"row",alignItems:"center",justifyContent:"space-around",sx:{width:r,textAlign:"middle",px:1},children:[(0,x.jsx)(mt,{type:n,sizes:a,handleChange:function(e){var t=e.target.value;i(t)}}),(0,x.jsx)(vt,{count:o})]})}xt.defaultProps={editControl:null};var At=n(84503);function Zt(e){var t=e.padding,n=e.handlePaddingChange;return(0,x.jsxs)(H.Z,{direction:"column",justifyContent:"center",alignItems:"start",sx:{backgroundColor:"transparent"},children:[(0,x.jsx)(M.Z,{sx:{fontWeight:"bold",color:"gray",fontSize:"0.87rem",mixBlendMode:"difference"},children:"Padding"}),(0,x.jsx)(At.ZP,{"aria-label":"Padding",defaultValue:0,value:t,valueLabelDisplay:"auto",step:.1,min:0,max:10,onChange:n,sx:{color:"white"}})]})}function wt(e){var t=e.radius,n=e.handleRadiusChange;return(0,x.jsxs)(H.Z,{direction:"column",justifyContent:"center",alignItems:"start",sx:{backgroundColor:"transparent"},children:[(0,x.jsx)(M.Z,{sx:{fontWeight:"bold",color:"gray",fontSize:"0.87rem"},children:"Corner Radius"}),(0,x.jsx)(At.ZP,{"aria-label":"Corner Radius",defaultValue:0,value:t,valueLabelDisplay:"auto",step:1,min:0,max:40,onChange:n,sx:{color:"white"}})]})}var jt=n(16429),bt=n(83929),yt=n(44758);function St(e){var t=e.text,n=e.handleTextChange,i=e.topText,l=e.handlePositionChange,s=e.handleTextSubmit,c=e.textError,u=e.handleTextError,d=ke.Ry({text:ke.Z_().max(m.maxColllageTextLength,"Max allowed length is ".concat(m.maxColllageTextLength))}).required(),h=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.Z.isFieldValid("text",t,u,d);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,o.useEffect)((function(){return h()}),[t]),(0,x.jsxs)(H.Z,{sx:{backgroundColor:"transparent"},children:[(0,x.jsxs)(H.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",spacing:2,children:[(0,x.jsx)(M.Z,{sx:{fontWeight:"bold",color:"gray",fontSize:"0.87rem"},children:"Collage Text"}),(0,x.jsxs)(jt.Z,{row:!0,children:[(0,x.jsx)(bt.Z,{disableTypography:!0,control:(0,x.jsx)(yt.Z,{size:"small",checked:!1===i,onChange:function(){return l(!1)},sx:{color:"white","&.Mui-checked":{color:"white"}}}),label:(0,x.jsx)(M.Z,{fontSize:"0.8rem",fontWeight:"bold",children:"Bottom"}),sx:{color:"gray",fontWeight:"bold"}}),(0,x.jsx)(bt.Z,{disableTypography:!0,control:(0,x.jsx)(yt.Z,{size:"small",checked:!0===i,onChange:function(){return l(!0)},sx:{color:"gray","&.Mui-checked":{color:"white"}}}),label:(0,x.jsx)(M.Z,{fontSize:"0.8rem",fontWeight:"bold",children:"Top"}),sx:{color:"gray",fontWeight:"bold",fontSize:"0.8rem"}})]})]}),(0,x.jsx)(fe.Z,{variant:"outlined",label:"",defaultValue:t,onKeyDown:function(e){13===e.keyCode&&!1===e.shiftKey&&s(e)},size:"small",sx:{width:"100%",mb:1},onChange:n,InputProps:{sx:{backgroundColor:(0,W.Fq)("#fff",.9)}},helperText:c,error:!!c})]})}var kt=n(36202);function Rt(e){var t=e.color,n=e.displayColorPicker,r=e.handleClick,a=e.handleClose,i=e.handleChange;return(0,x.jsxs)(H.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",spacing:2,sx:{my:2},children:[(0,x.jsx)(M.Z,{sx:{fontWeight:"bold",color:"gray",fontSize:"0.87rem"},children:"Background Color"}),(0,x.jsx)(z.Z,{component:"div",sx:{padding:"2px",background:"#fff",borderRadius:"5px",boxShadow:"0 0 0 1px rgba(0,0,0,.1)",display:"inline-block",cursor:"pointer"},onClick:r,children:(0,x.jsx)(z.Z,{component:"div",sx:{width:"70px",height:"30px",borderRadius:"18px",background:"rgba(".concat(t.r,", ").concat(t.g,", ").concat(t.b,", ").concat(t.a,")")}})}),(0,x.jsx)(Pt,{open:n,color:t,handleClose:a,handleChange:i})]})}function Pt(e){var t=e.open,n=e.color,r=e.handleClose,a=e.handleChange;return t?(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)(z.Z,{component:"div",sx:{position:"absolute",zIndex:3,bottom:10},children:[(0,x.jsx)(Q.Z,{sx:{position:"absolute",top:0,right:0,zIndex:2,backgroundColor:"button.main",p:0,transform:"translate(0, -110%)",border:"2px solid black"},onClick:r,children:(0,x.jsx)(me.Z,{})}),(0,x.jsx)(kt.AI,{color:n,onChange:a})]})}):null}function It(e){var t=e.open,n=e.message,r=e.progress,a=e.onClose;return(0,x.jsxs)($.Z,{open:t,children:[!0!==r?(0,x.jsx)(ee.Z,{sx:{textAlign:"center",color:"info",fontWeight:"bold"},children:"Info"}):null,(0,x.jsx)(ne.Z,{dividers:!0!==r,children:(0,x.jsxs)(H.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",spacing:2,children:[!0===r?(0,x.jsx)(Ce.Z,{}):null,(0,x.jsx)(M.Z,{variant:"h6",children:n})]})}),!1===r?(0,x.jsx)(te.Z,{children:(0,x.jsx)(_.Z,{variant:"text",onClick:a,children:"Close"})}):null]})}var Et=n(57615);function Tt(e){var t=e.getCollage,n=e.clearCollage,l=e.saveType,s=m.paperSizes,c=(0,G.s0)(),u=(0,o.useState)({}),d=(0,i.Z)(u,2),h=d[0],f=d[1],g=(0,o.useState)("fetching"),p=(0,i.Z)(g,2),v=p[0],C=p[1],A=(0,o.useState)(!1),Z=(0,i.Z)(A,2),w=Z[0],j=Z[1],b=(0,o.useState)(""),y=(0,i.Z)(b,2),S=y[0],k=y[1],R=(0,o.useState)(!1),P=(0,i.Z)(R,2),I=P[0],E=P[1],T=(0,o.useState)(""),D=(0,i.Z)(T,2),M=D[0],H=D[1],W=(0,o.useState)(""),O=(0,i.Z)(W,2),B=O[0],Q=O[1],L=Y(h),F=(0,i.Z)(L,18),q=F[0],V=F[2],U=F[5],J=F[6],N=F[7],X=F[8],K=F[9],_=F[10],$=F[11],ee=F[12],te=F[13],ne=F[14],re=F[15],ae=F[16],ie=F[17],se=function(e,t){""!==e&&(k(e),E(t),j(!0))},ce=function(){""!==X.imageCountMinError&&(_(),X.setImageCountMinError("")),""!==X.imageCountMaxError&&X.setImageCountMaxError(""),E(!1),k(""),j(!1)};(0,o.useEffect)((function(){return X.handleImageCount(X.imgCount)}),[X.imgCount]),(0,o.useEffect)((function(){""!==X.imageCountMinError&&se(X.imageCountMinError,!1),""!==X.imageCountMinError&&se(X.imageCountMaxError,!1)}),[X.imageCountMinError,X.imageCountMaxError]),X.imgCount===m.minImages&&!0===N.removeImage&&(N.setRemoveImage(!1),se("Need atleast ".concat(m.minImages," images for collage"),!1));var ue=[M,B,X.imageCountMaxError,X.imageCountMinError].filter((function(e){return""!==e})),de=J.options,fe=J.handlePaddingChange,pe=J.handleRadiusChange,xe=J.handleColorClose,me=J.handleColorClick,Ce=J.handleColorChange,Ae=J.handleTextChange,Ze=J.handlePositionChange,we=J.displayColorPicker,je=J.editControl,be=J.setEditControl,ye=J.editOptionsValue,ke=J.setEditOptionsValue,Re=J.handleTextSubmit;(0,o.useEffect)((0,a.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==Object.keys(h).length){e.next=7;break}if("existing"!==l){e.next=6;break}return e.next=4,t(X.setImageCount,X.incrementNewImageCount);case 4:n=e.sent,f(n);case 6:C("fetch end");case 7:case"end":return e.stop()}}),e)}))),[]),(0,o.useEffect)((function(){var e=v;"fetching"===e&&"new"===l&&(e="empty"),0===X.imgCount&&"ready"===e&&(e="empty"),0===X.imgCount&&0===Object.keys(h).length&&"fetch end"===e&&(e="empty"),X.images.length>0&&X.images.length===X.imgCount&&(e="preparing"),X.loaded>=X.imgCount&&X.imgCount>0&&(e="ready"),X.imgCount>=m.minImages&&X.images.length<X.imgCount&&(e="loading"),""!==X.imageCountMinError&&(e="empty",se(X.imageCountMinError,!1)),""!==X.imageCountMaxError&&(e=0===X.imgCount?"empty":"ready",se(X.imageCountMaxError,!1)),C(e)}),[X]);var Pe=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return se("Deleting Collage",!0),f({}),_(),e.next=5,n();case 5:C("fetch end"),ce(),"existing"===l&&(se("Navigating to collages page",!0),setTimeout((function(){ce(),c(Et.Z.COLLAGE_LIST_URL)}),3e3));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ie=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(N.onSaveClick(),"new"!==l){e.next=7;break}return e.next=4,te(t);case 4:e.t0=e.sent,e.next=10;break;case 7:return e.next=9,re(t);case 9:e.t0=e.sent;case 10:e.t0&&setTimeout((function(){"new"===l&&Pe(),N.setSaveStart(!1),c(Et.Z.COLLAGE_LIST_URL)}),3e3);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ee=(0,x.jsx)(oe,{errors:ue,handleClose:N.onDownloadClose,children:(0,x.jsx)(he,{open:N.open,onClick:N.onDownloadClick,onClose:N.onDownloadClose,sizes:s,collageType:q})}),Te=(0,x.jsx)(oe,{errors:ue,handleClose:N.onSaveClose,children:(0,x.jsx)(ge,{collageName:V,open:N.saveOpen,onClick:Ie,onClose:N.onSaveClose})}),De=(0,x.jsx)(oe,{errors:ue,handleClose:N.onPrintClose,children:(0,x.jsx)(ve,{collageName:V,collageType:q,open:N.printOpen,onClose:N.onPrintClose})}),ze=(0,x.jsx)(Se,{open:N.saveStart,status:ne}),We=(0,x.jsx)(le,{dimensionProps:U,imageProps:X,actionProps:N,collageCallback:$,handleRemoveImage:ee,options:J.options,tree:K.tree}),Oe=(0,x.jsx)(Zt,{padding:de.padding,handlePaddingChange:fe}),Be=(0,x.jsx)(wt,{radius:de.borderRadius,handleRadiusChange:pe}),Qe=(0,x.jsx)(Pt,{open:we,color:de.color,handleChange:Ce,handleClose:function(){be(null),xe()}}),Fe=(0,x.jsx)(Rt,{color:de.color,displayColorPicker:we,handleChange:Ce,handleClose:xe,handleClick:me}),qe=(0,x.jsx)(St,{text:de.text,handleTextChange:Ae,topText:de.topText,handlePositionChange:Ze,handleTextSubmit:Re,textError:B,handleTextError:Q}),Ve=(0,x.jsx)(xt,{optionProps:J,actionProps:N,dimensionProps:U,handleClear:Pe,saveType:l,paddingControl:Oe,radiusControl:Be,colorControl:Qe,textControl:qe,editControl:je,handleEditControl:be,editOptionsValue:ye,handleEditOptionsValue:ke}),Ue=(0,x.jsx)(Me,{headerRef:U.headerRef,name:V,handleNameChange:ie,nameError:M,handleNameError:H}),Je=(0,x.jsx)(at,{onDelete:N.onDelete,onAdd:U.handleImageAddClick,clearDelete:N.clearDelete}),Ne=(0,x.jsx)(it,{paddingControl:Oe,radiusControl:Be,colorControl:Fe,textControl:qe}),Xe=(0,x.jsx)(nt,{innerRef:U.footerRef,onRefresh:N.onRefresh,photosComp:Je,editComp:Ne,handleClear:Pe,clearDelete:N.clearDelete,saveType:l}),Ke=window.innerWidth<window.innerHeight,Ge=Ke?Ve:Xe,_e=Ke?(0,x.jsx)(st,{actionsRef:U.actionsRef,onDownload:N.handleDownload,onSave:N.handleSave,onPrint:N.handlePrint}):(0,x.jsx)(Ye,{actionsRef:U.actionsRef,onDownload:N.handleDownload,onSave:N.handleSave,onPrint:N.handlePrint}),$e=(0,x.jsx)(Ct,{collageMetaRef:U.collageMetaRef,collageType:q,width:U.width,sizes:s,handleTypeChange:ae,imageCount:X.imgCount});return(0,x.jsxs)(z.Z,{sx:{backgroundColor:"gray",height:Math.min(window.innerHeight,window.screen.availHeight),overflow:"hidden"},children:[(0,x.jsx)(Le,{open:N.open,saveOpen:N.saveOpen,saveStatusOpen:N.saveStart,printOpen:N.printOpen,printDialog:De,dimensionProps:U,imageProps:X,header:Ue,actions:_e,downloadDialog:Ee,saveDialog:Te,saveStatusDialog:ze,collage:We,controls:Ge,status:v,saveType:l,collageMetaInfo:$e}),(0,x.jsx)("input",{ref:U.addImageRef,type:"file",hidden:!0,multiple:!0,accept:"image/*",onChange:X.handleLoad}),N.generate?(0,x.jsx)(He.Z,{title:"Creating collage ..."}):null,(0,x.jsx)(It,{open:w,message:S,progress:I,onClose:ce})]})}Tt.defaultProps={getCollage:function(){},clearCollage:function(){}}}}]);