"use strict";(self.webpackChunkprelaunch=self.webpackChunkprelaunch||[]).push([[35],{8664:function(e,n,t){t.d(n,{Z:function(){return s}});var r=t(6360),a=t(3400),i=t(4697),o=t(2065),l=t(184);function s(e){var n=e.handleClick,t=e.caption;return(0,l.jsxs)(a.Z,{size:"small",label:"T",sx:{color:(0,o.Fq)("#000",.7),bgcolor:(0,o.Fq)("#fff",.7),position:"absolute",top:5,left:2,borderRadius:"0 5px 5px 0",py:0},onClick:n,children:[(0,l.jsx)(r.Z,{}),t.length>0?(0,l.jsx)(i.Z,{color:"error",variant:"dot",sx:{pl:1}}):null]})}s.defaultProps={caption:""}},3191:function(e,n,t){t.d(n,{Z:function(){return v}});var r=t(4165),a=t(5861),i=t(9439),o=t(2791),l=t(3400),s=t(9823),c=t(6151),u=t(5574),d=t(5661),h=t(9218),x=t(9157),f=t(7123),m=t(4554),p=t(2065),Z=t(2797),g=t(9052),j=t(184);function v(e){var n=e.index,t=e.imageCaption,v=e.src,b=e.open,C=e.handleClose,y=e.handleSubmit;console.log(n);var k=(0,o.useState)(t),S=(0,i.Z)(k,2),w=S[0],D=S[1],E=(0,o.useState)(""),P=(0,i.Z)(E,2),z=P[0],T=P[1];(0,o.useEffect)((function(){return D(t)}),[t]);var I=Z.Ry({caption:Z.Z_().max(40,"Maximum length of image caption is 40")}).required();(0,o.useEffect)((function(){w.length>0&&g.Z.isFieldValid("caption",w,T,I)}),[w]);var U=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.Z.isFieldValid("caption",w,T,I);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U();case 2:e.sent&&(y(n,w),C());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,j.jsxs)(u.Z,{open:b,sx:{border:"2px solid white",backgroundColor:(0,p.Fq)("#000",.8)},children:[(0,j.jsxs)(d.Z,{children:[(0,j.jsx)(l.Z,{"aria-label":"close",onClick:C,sx:{position:"absolute",right:8,top:8,color:function(e){return e.palette.grey[500]}},children:(0,j.jsx)(s.Z,{})}),"Add Image Caption"]}),(0,j.jsxs)(x.Z,{dividers:!0,children:[(0,j.jsx)(m.Z,{component:"img",alt:"test",src:v,width:"100%",sx:{pb:2,borderRadius:3,height:"50vh"}}),(0,j.jsx)(h.Z,{variant:"outlined",label:"Image Caption",defaultValue:w,onChange:function(e){D(e.target.value)},sx:{width:"100%"},helperText:z||"E.g. Birthday Cake Cutting",error:!!z})]}),(0,j.jsxs)(f.Z,{children:[(0,j.jsx)(c.Z,{variant:"outlined",onClick:M,children:"OK"}),(0,j.jsx)(c.Z,{variant:"text",onClick:C,children:"Cancel"})]})]})}},5794:function(e,n,t){t.d(n,{Z:function(){return i}});var r=t(6151),a=t(184);function i(e){var n=e.children,t=e.onClick,i=e.name;return(0,a.jsx)(r.Z,{id:i,variant:"contained",component:"label",onClick:t,sx:{color:"muted.main",borderRadius:15,backgroundColor:"button.main",padding:"6px 8px","&:hover":{color:"muted.main",backgroundColor:"button.main"}},children:n})}i.defaultProps={onClick:function(){}}},4166:function(e,n,t){t.d(n,{Z:function(){return s}});var r=t(3400),a=t(7247),i=t(68),o=t(2065),l=t(184);function s(e){var n=e.index,t=e.handleRemoveImage;return(0,l.jsx)(i.Z,{title:"Delete",children:(0,l.jsx)(r.Z,{size:"medium",sx:{color:(0,o.Fq)("#000",.7),bgcolor:(0,o.Fq)("#fff",.7),position:"absolute",top:5,right:2,padding:0,px:"4px",borderRadius:"5px 0 0 5px"},onClick:function(){return t(n)},children:(0,l.jsx)(a.Z,{size:"medium"})})})}},7900:function(e,n,t){t.d(n,{Z:function(){return s}});var r=t(5523),a=t(9055),i=t(2065),o=t(890),l=t(184);function s(e){var n=e.index,t=e.thumbnail,s=e.handleThumbnailChange;return(0,l.jsx)(r.Z,{control:(0,l.jsx)(a.Z,{sx:{padding:0}}),label:t===n?(0,l.jsx)(o.Z,{sx:{fontWeight:600,overflow:"hidden",fontSize:"0.8rem"},children:"Thumbnail"}):"",checked:t===n,onChange:function(){return s(n)},sx:{pr:1,position:"absolute",bgcolor:(0,i.Fq)("#fff",.7),color:(0,i.Fq)("#000",.7),borderRadius:"0px 5px 5px 0px",borderColor:"secondary.main",borderLeft:0,bottom:5,left:2,margin:0}})}},4125:function(e,n,t){t.d(n,{Z:function(){return i}});var r=t(9439),a=t(2791);function i(e){var n=(0,a.useState)(e),t=(0,r.Z)(n,2),i=t[0],o=t[1];return[i,o,function(e){var n=new Date(e);if(e){var t=n.toLocaleDateString("en-in",{day:"numeric",month:"long",year:"numeric"});o(t)}else o(null)}]}},1619:function(e,n,t){t.d(n,{Z:function(){return i}});var r=t(9439),a=t(2791);function i(e){var n=(0,a.useState)(e),t=(0,r.Z)(n,2),i=t[0],o=t[1];return[i,o,function(e){return o(e.target.value)}]}},2168:function(e,n,t){t.d(n,{Z:function(){return i}});var r=t(9439),a=t(2791);function i(e){var n=(0,a.useState)(e),t=(0,r.Z)(n,2),i=t[0],o=t[1];(0,a.useEffect)((function(){return o(e)}),[e]);return[i,o,function(e){o(e.target.value)}]}},6926:function(e,n,t){t.d(n,{Z:function(){return me}});var r=t(9439),a=t(2791),i=t(7689),o=t(7621),l=t(9585),s=t(4554),c=t(4721),u=t(3967),d=t(5193),h=t(4700),x=t(4165),f=t(5861),m=t(3400),p=t(184);function Z(e){var n=e.icon,t=e.label;return(0,p.jsxs)(s.Z,{sx:{alignItems:"center"},children:[(0,p.jsx)(m.Z,{"aria-label":"delete",sx:{bgcolor:"form.input"},children:n}),t]})}var g=t(5574),j=t(6151),v=t(890),b=t(3767),C=t(5661);function y(e){var n=e.confirm,t=e.handleCallback,i=e.handleCloseCallback,o=e.title,l=e.message,c=(0,a.useState)(n),u=(0,r.Z)(c,2),d=u[0],h=u[1];(0,a.useEffect)((function(){return h(n)}),[n]);var x=function(){h(!1),i()};return(0,p.jsxs)(g.Z,{open:d,sx:{backgroundColor:"faded.black"},children:[(0,p.jsx)(C.Z,{children:o}),(0,p.jsxs)(s.Z,{sx:{p:2},children:[(0,p.jsx)(v.Z,{sx:{pb:2},children:l}),(0,p.jsxs)(b.Z,{spacing:2,direction:"row",children:[(0,p.jsx)(j.Z,{variant:"contained",onClick:x,children:"Cancel"}),(0,p.jsx)(j.Z,{variant:"outlined",onClick:function(){x(),t()},children:"OK"})]})]})]})}var k=t(7247),S=t(5899);function w(){return(0,p.jsx)(Z,{icon:(0,p.jsx)(k.Z,{}),label:"Delete"})}function D(e){var n=e.callback,t=e.open,r=e.closeCallback;return(0,p.jsx)(y,{confirm:t,title:"Delete Memory",handleCallback:n,handleCloseCallback:function(){return r()},message:"Do you want to delete this memory?"})}function E(){return(E=(0,f.Z)((0,x.Z)().mark((function e(n,t,r,a){var i;return(0,x.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.Z.deleteMemory(n,t,r);case 3:i=e.sent,a(i),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}var P=t(2898),z=t(5422),T=t(3786),I=t(1286);function U(){return(0,p.jsx)(Z,{icon:(0,p.jsx)(I.Z,{}),label:"Edit"})}var M=t(580),R=t(3433),F=t(9052);function A(){var e=(0,a.useState)([]),n=(0,r.Z)(e,2),t=n[0],i=n[1],o=(0,a.useState)(""),l=(0,r.Z)(o,2),s=l[0],c=l[1],u=(0,a.useState)(null),d=(0,r.Z)(u,2),h=d[0],x=d[1],f=function(e){return t.includes(e)},m=function(e){var n=null;return f(e)&&(n="".concat(e," has already been added.")),function(e){return/[\w\d\.-]+@[\w\d\.-]+\.[\w\d\.-]+/.test(e)}(e)||(n="".concat(e," is not a valid email address.")),e===F.Z.getUserInfo().email&&(n="Cannot share memory with owner email."),!n||(x(n),!1)};return[t,s,h,i,function(e){if(["Enter","Tab",","].includes(e.key)){e.preventDefault();var n=s.trim();n&&m(n)&&(i([].concat((0,R.Z)(t),[n])),c(""))}},function(e){c(e.target.value.trim()),x(null)},function(e){i((function(n){return n.filter((function(n){return n!==e}))}))},function(e){e.preventDefault();var n=e.clipboardData.getData("text").match(/[\w\d\.-]+@[\w\d\.-]+\.[\w\d\.-]+/g);if(n){var r=n.filter((function(e){return!f(e.trim())}));i([].concat((0,R.Z)(t),(0,R.Z)(r)))}}]}var L=t(9218),B=t(1918),q=t(1889);function O(e){var n=e.items,t=e.value,r=e.error,a=e.handleKeyDown,i=e.handleChange,o=e.handleDelete,l=e.handlePaste;return(0,p.jsxs)(b.Z,{direction:"column",spacing:2,sx:{mb:3},children:[(0,p.jsx)(L.Z,{id:"outlined-error",value:t,label:"Email List",placeholder:"Type or paste email addresses and press `Enter`...",onKeyDown:a,onChange:i,onPaste:l,helperText:r||"Type or paste email addresses and press `Enter`...",error:!!r,sx:{my:1}}),(0,p.jsx)(q.ZP,{container:!0,spacing:2,children:n.map((function(e){return(0,p.jsx)(B.Z,{label:e,variant:"outlined",onDelete:function(){return o(e)},sx:{margin:.5},size:"small"},e)}))})]})}function W(e){var n=e.items,t=e.value,r=e.error,a=e.handleKeyDown,i=e.handleChange,o=e.handleDelete,l=e.handlePaste,c=e.handleClear,u=e.handleSubmit,d=e.sharing;return(0,p.jsxs)(s.Z,{sx:{p:2},children:[(0,p.jsx)(O,{items:n,value:t,error:r,handleKeyDown:a,handleChange:i,handleDelete:o,handlePaste:l}),!0===d?(0,p.jsx)(v.Z,{color:"primary",variant:"h6",sx:{pb:2},children:"Sharing Memory. Please wait..."}):null,(0,p.jsxs)(b.Z,{spacing:2,direction:"row",children:[(0,p.jsx)(j.Z,{variant:"outlined",onClick:c,children:"Clear"}),(0,p.jsx)(j.Z,{variant:"contained",onClick:u,disabled:0===n.length||!0===d,children:"Share"})]})]})}var H=t(9836),K=t(3382),N=t(9281),Y=t(4515),V=t(5527),X=t(6125),_=t(5855),G=t(3994),J=t(6890);function Q(e){var n=e.invitation,t=e.accept,r={pending:"warning",sent:"success",failed:"error",rejected:"error",accepted:"success"};return(0,p.jsxs)(H.Z,{size:"small","aria-label":"statuses",children:[(0,p.jsx)(J.Z,{children:(0,p.jsxs)(_.Z,{children:[(0,p.jsx)(G.Z,{align:"left",children:"Invitation"}),(0,p.jsx)(G.Z,{align:"left",children:"Accepted"})]})}),(0,p.jsx)(K.Z,{children:(0,p.jsxs)(_.Z,{children:[(0,p.jsx)(G.Z,{align:"left",children:(0,p.jsx)(B.Z,{color:r[n],size:"small",label:n})}),(0,p.jsx)(G.Z,{align:"left",children:(0,p.jsx)(B.Z,{color:r[t],size:"small",label:t})})]},new Date)})]})}var $=t(4454);function ee(e){var n=e.selected,t=e.handleChange,i=(0,a.useState)(n),o=(0,r.Z)(i,2),l=o[0],s=o[1];return(0,a.useEffect)((function(){s(n)}),[n]),(0,p.jsx)(G.Z,{padding:"checkbox",children:(0,p.jsx)($.Z,{color:"primary",checked:l,onChange:t})},"checkbox")}var ne=t(3044);function te(e){var n=e.email,t=e.picture,r=e.name;return(0,p.jsx)(G.Z,{component:"th",scope:"row",sx:{p:1},children:(0,p.jsx)(B.Z,{avatar:(0,p.jsx)(ne.Z,{alt:n,src:t,sx:{referrerPolicy:"no-referrer"}}),label:r,sx:{b:1,maxWidth:170},color:"primary",variant:"outlined"})},"personal-details")}var re=t(1283),ae=t(2885);function ie(e){var n=e.open,t=e.handleClick;return(0,p.jsx)(G.Z,{align:"center",style:{paddingBottom:0,paddingTop:0},colSpan:6,onClick:t,children:(0,p.jsx)(m.Z,{"aria-label":"expand row",size:"small",children:n?(0,p.jsx)(ae.Z,{}):(0,p.jsx)(re.Z,{})})},"expand-status")}function oe(e){var n=e.name,t=e.email,i=e.picture,o=e.invitation,l=e.accept,c=e.isSelected,u=e.onCheckBoxClick,d=(0,a.useState)(!1),h=(0,r.Z)(d,2),x=h[0],f=h[1];return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(_.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,p.jsx)(ee,{selected:c,handleChange:u}),(0,p.jsx)(te,{email:t,picture:i,name:n}),(0,p.jsx)(ie,{open:x,handleClick:function(){return f(!x)}})]},"".concat({email:t},"details")),(0,p.jsx)(_.Z,{children:(0,p.jsx)(G.Z,{style:{paddingBottom:0,paddingTop:0},colSpan:6,children:(0,p.jsx)(X.Z,{in:x,timeout:"auto",unmountOnExit:!0,children:(0,p.jsxs)(s.Z,{sx:{margin:1},children:[(0,p.jsxs)(v.Z,{gutterBottom:!0,component:"div",children:["Email:"," ",t]}),(0,p.jsx)(v.Z,{variant:"h6",gutterBottom:!0,component:"div",children:"Status"}),(0,p.jsx)(Q,{invitation:o,accept:l})]})})})},"".concat({email:t},"status"))]})}function le(e){var n=e.numSelected,t=e.rowCount,r=e.onSelectAllClick;return(0,p.jsx)(G.Z,{padding:"checkbox",children:(0,p.jsx)($.Z,{color:"primary",indeterminate:n>0&&n<t,checked:t>0&&n===t,onChange:r})},"selectAll")}function se(e){var n=e.numSelected,t=e.rowCount,r=e.onSelectAllClick,a=e.handleUnshareClick,i=e.unsharing;return(0,p.jsx)(J.Z,{children:(0,p.jsxs)(_.Z,{children:[(0,p.jsx)(le,{numSelected:n,rowCount:t,onSelectAllClick:r},"selectAll"),(0,p.jsx)(G.Z,{align:"center",sx:{fontWeight:"bold",fontSize:"1em"},children:0===n?"Shared With":"".concat(n," selected")},"message"),(0,p.jsx)(G.Z,{align:"center",sx:{fontWeight:"bold"},children:(0,p.jsx)(j.Z,{variant:"contained",color:"error",sx:{textTransform:"none"},disabled:0===n||!0===i,onClick:a,children:"Unshare"})},"action")]})})}function ce(e){var n=e.shareData,t=e.onUnShare,i=e.unsharing,o=(0,a.useState)(0),l=(0,r.Z)(o,2),s=l[0],c=l[1],u=(0,a.useState)(0),d=(0,r.Z)(u,2),h=d[0],x=d[1],f=(0,a.useState)(Array(n.length).fill(0)),m=(0,r.Z)(f,2),Z=m[0],g=m[1];(0,a.useEffect)((function(){g(Array(n.length).fill(0)),x(0)}),[n]);return n.length>0?(0,p.jsxs)(p.Fragment,{children:[!0===i?(0,p.jsx)(v.Z,{color:"primary",variant:"h6",sx:{p:2},children:"UnSharing Memory. Please wait..."}):null,(0,p.jsx)(N.Z,{component:V.Z,children:(0,p.jsxs)(H.Z,{stickyHeader:!0,"aria-label":"memory share table",children:[(0,p.jsx)(se,{numSelected:h,rowCount:n.length,onSelectAllClick:function(){Z.length>0&&h<Z.length?(g(Array(n.length).fill(1)),x(Z.length)):(g(Array(n.length).fill(0)),x(0))},handleUnshareClick:function(){for(var e=[],r=0;r<Z.length;r+=1)1===Z[r]&&e.push(n[r].email);t(e)},unsharing:i}),(0,p.jsx)(K.Z,{children:n.slice(5*s,5*s+5).map((function(e,n){return(0,p.jsx)(oe,{email:e.email,name:e.name,picture:e.picture,invitation:e.status.invitation,accept:e.status.accept,isSelected:1===Z[5*s+n],onCheckBoxClick:function(){return 1===Z[e=5*s+n]?x((function(e){return e-1})):x((function(e){return e+1})),void g([].concat((0,R.Z)(Z.slice(0,e)),[1-Z[e]],(0,R.Z)(Z.slice(e+1))));var e}},e.email)}))})]})}),(0,p.jsx)(Y.Z,{rowsPerPageOptions:[5],component:"div",count:Z.length,rowsPerPage:5,page:s,onPageChange:function(e,n){c(n)}})]}):null}var ue=t(9823);function de(e){var n=e.handleClose;return(0,p.jsx)(m.Z,{"aria-label":"close",onClick:n,sx:{position:"absolute",right:8,top:8,color:function(e){return e.palette.grey[500]}},children:(0,p.jsx)(ue.Z,{})})}function he(){return(0,p.jsx)(Z,{icon:(0,p.jsx)(M.Z,{}),label:"Share"})}function xe(e){var n=e.confirm,t=e.memoryShareCallback,i=e.memoryUnShareCallback,o=e.closeCallback,l=e.memoryID,s=A(),u=(0,r.Z)(s,8),d=u[0],h=u[1],m=u[2],Z=u[3],j=u[4],b=u[5],y=u[6],k=u[7],w=(0,a.useState)(null),D=(0,r.Z)(w,2),E=D[0],P=D[1],z=(0,a.useState)(!1),T=(0,r.Z)(z,2),I=T[0],U=T[1],M=(0,a.useState)(!1),R=(0,r.Z)(M,2),F=R[0],L=R[1];(0,a.useEffect)((0,f.Z)((0,x.Z)().mark((function e(){var n;return(0,x.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.Z.getShareData(l);case 3:n=e.sent,P(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[]);var B=(0,a.useState)(n),q=(0,r.Z)(B,2),O=q[0],H=q[1];(0,a.useEffect)((function(){return H(n)}),[n]);var K=function(){var e=(0,f.Z)((0,x.Z)().mark((function e(){var n,r;return(0,x.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,U(!0),e.next=4,S.Z.shareMemory(l,d);case 4:return n=e.sent,t(n),e.next=8,n.json();case 8:r=e.sent,Z([]),P(r),U(!1),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0),U(!1);case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=(0,f.Z)((0,x.Z)().mark((function e(n){var t,r;return(0,x.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,L(!0),e.next=4,S.Z.revokeShare(l,n);case 4:return t=e.sent,console.log(t),i(t),e.next=9,t.json();case 9:r=e.sent,P(r),L(!1),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0),L(!1);case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(n){return e.apply(this,arguments)}}(),Y=null!==E?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(v.Z,{sx:{m:2,fontSize:"1.2rem"},children:"Existing Shares"}),(0,p.jsx)(ce,{shareData:E,onUnShare:N,unsharing:F})]}):null;return(0,p.jsxs)(g.Z,{open:O,sx:{"& .MuiPaper-root":{m:0},backgroundColor:"faded.black"},children:[(0,p.jsxs)(C.Z,{children:["Share Memory",(0,p.jsx)(de,{handleClose:function(){H(!1),o()}})]}),(0,p.jsx)(c.Z,{}),(0,p.jsxs)(v.Z,{sx:{m:2},children:["New Shares (",d.length," ","added)"]}),(0,p.jsx)(W,{items:d,value:h,error:m,handleKeyDown:j,handleChange:b,handleDelete:y,handlePaste:k,handleClear:function(){return Z([])},handleSubmit:K,sharing:I}),(0,p.jsx)(c.Z,{}),Y]})}function fe(e){var n,t=e.snackBar,i=e.handleDelete,o=e.memoryShareCallback,l=e.memoryUnShareCallback,s=e.handleEditClick,c=e.memoryID,u=(0,a.useState)(null),d=(0,r.Z)(u,2),h=d[0],x=d[1],f=(0,a.useState)(null),m=(0,r.Z)(f,2),Z=m[0],g=m[1],j=Boolean(h),v=function(){return x(null)};"delete"===Z&&(n=(0,p.jsx)(D,{open:!0,callback:i,closeCallback:function(){return g(null)}})),"share"===Z&&(n=(0,p.jsx)(xe,{confirm:!0,memoryShareCallback:o,memoryUnShareCallback:l,closeCallback:function(){return g(null)},memoryID:c}));return(0,p.jsxs)("div",{children:[(0,p.jsx)(P.Z,{onClick:function(e){return x(e.currentTarget)}}),(0,p.jsxs)(z.Z,{id:"memory-actions",anchorEl:h,open:j,onClose:v,MenuListProps:{"aria-labelledby":"basic-button"},sx:{borderRadius:"10px"},children:[(0,p.jsx)(T.Z,{onClick:function(){s(),v()},children:(0,p.jsx)(U,{})}),(0,p.jsx)(T.Z,{onClick:function(){g("share"),v()},children:(0,p.jsx)(he,{})}),(0,p.jsx)(T.Z,{onClick:function(){g("delete"),v()},children:(0,p.jsx)(w,{})})]}),n,t]})}function me(e){var n,t=e.header,x=e.subheader,f=e.photoLayout,m=e.storyLayout,Z=e.bucket,g=e.memoryID,j=e.authURL,v=e.handleEditClick,b=e.memType,C=(0,a.useState)(null),y=(0,r.Z)(C,2),k=y[0],S=y[1],w=(0,a.useState)(null),D=(0,r.Z)(w,2),P=D[0],z=D[1],T=(0,a.useState)(null),I=(0,r.Z)(T,2),U=I[0],M=I[1],R=(0,a.useState)(null),F=(0,r.Z)(R,2),A=F[0],L=F[1],B=(0,u.Z)();n=(0,d.Z)(B.breakpoints.down("lg"))?"":"vertical-scroll";var q=function(e,n){z(e),M(n)},O=function(e){"ok"===e.status?q("Memory deleted successfully",!1):q("Error while deleting memory",!0),S(!0),L(!0)},W=(0,p.jsx)(h.Z,{snackBarOpen:k,message:P,onClose:function(){S(!1),z(null),M(null)},error:U}),H="own"===b?(0,p.jsx)(fe,{snackBar:W,handleDelete:function(){!function(e,n,t,r){E.apply(this,arguments)}(Z,j,g,O)},memoryID:g,memoryShareCallback:function(e){!0===e.ok?q("Memory shared successfully",!1):q("Error while sharing memory",!0),S(!0)},memoryUnShareCallback:function(e){!0===e.ok?q("Memory unshared successfully",!1):q("Error while unsharing memory",!0),S(!0)},handleEditClick:v}):null;return!1===k&&!0===A?(0,p.jsx)(i.Fg,{to:"/memories",replace:!0}):(0,p.jsxs)(o.Z,{sx:{boxShadow:0,bgcolor:"button.main",p:1},children:[(0,p.jsx)(l.Z,{title:t,subheader:x,action:H}),(0,p.jsx)(c.Z,{}),(0,p.jsxs)(s.Z,{sx:{display:"flex",justifyContent:"flex-start",flexDirection:{lg:"row",xs:"column"},height:{lg:"72vh"},my:1},children:[(0,p.jsx)(s.Z,{sx:{width:{lg:"70%",xs:"100%"},overflowY:"scroll",borderRadius:5},className:n,children:f}),(0,p.jsx)(s.Z,{sx:{width:{lg:"30%",sx:"100%"},overflowY:"scroll",mt:{lg:0,xs:2},p:{lg:1},px:1},className:n,children:m})]})]})}},8035:function(e,n,t){t.d(n,{Z:function(){return xe}});var r=t(7762),a=t(4165),i=t(5861),o=t(9439),l=t(2791),s=t(7689),c=t(4554),u=t(6151),d=t(7621),h=t(9504),x=t(9585),f=t(5574),m=t(4721),p=t(1428),Z=t(3767),g=t(890),j=t(4700),v=t(533),b=t(7394),C=t(184);function y(e){var n=e.memType,t="/memories/".concat(n);return"preview"!==n?(0,C.jsx)(Z.Z,{direction:"row",justifyContent:"flex-start",sx:{backgroundColor:"button.main",paddingX:2,paddingY:1},children:(0,C.jsx)(v.Z,{href:t,underline:"none",children:(0,C.jsxs)(u.Z,{variant:"contained",component:"label",sx:{color:"primary.main",backgroundColor:"button.main",padding:"6px 8px",boxShadow:0,"&:hover":{backgroundColor:"button.main"}},children:[(0,C.jsx)(b.Z,{size:"medium",sx:{paddingRight:1}}),(0,C.jsx)(g.Z,{variant:"body1",color:"muted.main",children:"Memories"})]})})}):null}var k=t(1133),S=t(5397),w=t(3400),D=t(9823),E=t(2065);function P(e){var n=e.size,t=e.handleClick;return(0,C.jsx)(w.Z,{size:n,sx:{color:"black",bgcolor:(0,E.Fq)("#fff",.4),position:"absolute",top:10,right:12},onClick:t,children:(0,C.jsx)(D.Z,{size:n})})}P.defaultProps={size:"small"};var z=t(1065),T=t(8894),I=(0,T.yP)((0,T.bH)((0,T.p6)(z.ZP)));function U(e){var n=e.ind,t=e.images,r=e.handleNext,a=e.handleStepChange,i=(0,l.useState)(n),s=(0,o.Z)(i,2),d=s[0],h=s[1],f=(0,l.useState)(0),m=(0,o.Z)(f,2),p=m[0],Z=m[1],g=(0,l.useState)(null),j=(0,o.Z)(g,2),v=j[0],b=j[1];(0,l.useEffect)((function(){h(n)}),[n]),(0,l.useEffect)((function(){p<t.length?b("none"):b("flex")}),[p]);var y=function(){return Z((function(e){return e+1}))};return(0,C.jsx)(I,{index:d,onChangeIndex:a,enableMouseEvents:!0,animateTransitions:!0,interval:1e4,onClick:r,style:{backgroundColor:"muted.main"},slideRenderer:function(e){var n=e.index,r=e.key,a=function(e,n){var t=e%n;return t<0?t+n:t}(n,t.length),i=(t[a].images?t[a].images.map((function(e){var n=e.src,t=e.width;return"".concat(n," ").concat(t,"w")})):[]).join(","),o={display:"block",boxSizing:"content-box",cursor:"pointer",objectFit:"contain",height:"100vh"};return(0,C.jsxs)(u.Z,{style:o,sx:{display:"flex",justifyContents:"center",width:"100%",bgcolor:"#1c1c1c",padding:0},children:[t[a].caption?(0,C.jsx)(x.Z,{title:t[a].caption,sx:{position:"absolute",bottom:40,left:"50%",bgcolor:(0,E.Fq)("#1c1c1c",.4),borderRadius:2,padding:1,color:"button.main",transform:"translate(-50%, 0)"},children:t[a].caption}):null,(0,C.jsx)(c.Z,{component:"img",onLoad:y,sx:{display:{display:v},justifyContents:"center",width:"100%",bgcolor:"#1c1c1c"},src:t[a].src,srcSet:i,style:o,alt:t[a].src},r)]},r)}})}function M(e){var n=e.handleClick;return(0,C.jsx)(w.Z,{edge:"start",color:"primary","aria-label":"close",onClick:n,sx:{position:"absolute",top:"50%",right:0,transform:"translate(0%, -50%)"},children:(0,C.jsx)(S.Z,{sx:{color:"button.main",fontSize:"4.5rem"}})})}function R(e){var n=e.handleClick;return(0,C.jsx)(w.Z,{edge:"start",color:"primary","aria-label":"close",onClick:n,sx:{position:"absolute",top:"50%",left:0,transform:"translate(0%, -50%)"},children:(0,C.jsx)(k.Z,{sx:{color:"button.main",fontSize:"4.5rem"}})})}function F(e){var n=e.open,t=e.title,r=e.date,a=e.images,i=e.index,o=e.handleNext,l=e.handleBack,s=e.handleClose,c=e.handleChange;return(0,C.jsxs)(f.Z,{open:n,fullScreen:!0,children:[(0,C.jsx)(U,{images:a,ind:i,handleNext:o,handleStepChange:c}),(0,C.jsx)(x.Z,{title:t,subheader:r,sx:{position:"absolute",top:10,left:10,bgcolor:"button.main",borderRadius:3,padding:1}}),(0,C.jsx)(R,{handleClick:l}),(0,C.jsx)(M,{handleClick:o}),(0,C.jsx)(P,{size:"large",handleClick:s})]})}U.defaultProps={ind:0},F.defaultProps={index:0};var A=t(6926),L=t(1413),B=t(9218),q=t(9906),O=t(5130),W=t(1286),H=t(7089),K=t(6571),N=t(41),Y=t(4125);function V(e){var n=e.editable,t=e.prevDate,r=e.handleDateUpdate,a=(0,l.useState)(n),i=(0,o.Z)(a,2),s=i[0],c=i[1],u=(0,l.useState)(!1),d=(0,o.Z)(u,2),h=d[0],x=d[1],f=(0,Y.Z)(t),m=(0,o.Z)(f,3),p=m[0],j=m[1],v=m[2];return(0,l.useEffect)((function(){c(n),j(t),x(!1)}),[n,t]),s||h?s&&!h?(0,C.jsxs)(Z.Z,{direction:"row",sx:{alignItems:"center"},spacing:2,children:[(0,C.jsx)(g.Z,{children:p}),(0,C.jsx)(W.Z,{fontSize:"medium",onClick:function(){return x(!0)}})]}):s&&h?(0,C.jsxs)(Z.Z,{direction:"row",sx:{alignItems:"flex-end",justifyContent:"flex-start",mt:3},spacing:2,children:[(0,C.jsx)(K._,{dateAdapter:N.H,children:(0,C.jsx)(H.M,{label:"Memory Date",value:p,onChange:v,placeholder:"dd/MM/yyyy",inputFormat:"dd/MM/yyyy",maxDate:new Date,renderInput:function(e){return(0,C.jsx)(B.Z,(0,L.Z)({readOnly:!0,required:!0},e))}})}),(0,C.jsx)(q.Z,{fontSize:"medium",onClick:function(){r(p),x(!1)}}),(0,C.jsx)(O.Z,{fontSize:"medium",onClick:function(){j(t),x(!1)}})]}):void 0:(0,C.jsx)(g.Z,{children:p})}var X=t(5987),_=t(5684),G=t(2913),J=t(9052),Q=t(5794),$=t(7900),ee=t(8664),ne=t(4166),te=t(3191),re=["alt","style","title"];function ae(e){var n=e.handleChange,t=e.onClick;return(0,C.jsxs)(Q.Z,{onClick:t,name:"add",children:[(0,C.jsx)("input",{type:"file",hidden:!0,multiple:!0,accept:"image/*",onChange:n}),(0,C.jsx)(G.Z,{sx:{fontSize:"2rem"}}),"Add Images"]})}function ie(e){var n=e.images,t=e.handlePhotoClick,r=e.renderPhoto,a=(0,l.useState)(null),i=(0,o.Z)(a,2),s=i[0],c=i[1];return(0,l.useEffect)((function(){return J.Z.handleArrangement(n,c)}),[n]),r?(0,C.jsx)(_.Z,{layout:s,photos:n,onClick:t,spacing:2,renderPhoto:r,rowConstraints:J.Z.handleMaxPhotos,columns:J.Z.handleColumns}):(0,C.jsx)(_.Z,{layout:s,photos:n,onClick:t,spacing:2,rowConstraints:J.Z.handleMaxPhotos,columns:J.Z.handleColumns})}function oe(e){var n=e.editable,t=e.images,r=e.handlePhotoClick,a=e.handleThumbnailUpdate,i=e.deleteImage,s=e.addImage,c=(0,l.useState)(n),d=(0,o.Z)(c,2),h=d[0],x=d[1],f=(0,l.useState)(null),m=(0,o.Z)(f,2),p=m[0],j=m[1],v=(0,l.useState)(null),b=(0,o.Z)(v,2),y=b[0],k=b[1],S=(0,l.useState)(!1),w=(0,o.Z)(S,2),D=w[0],E=w[1],P=(0,l.useState)(""),z=(0,o.Z)(P,2),T=z[0],I=z[1];(0,l.useEffect)((function(){return x(n)}),[n]);var U=function(e){j(e),a(t[e].title)},M=function(e){return i(t[e].title)};console.log(p,U,M);var R=(0,C.jsxs)(Z.Z,{direction:"row",spacing:2,justifyContent:"space-between",alignItems:"center",children:[(0,C.jsxs)(g.Z,{variant:"h6",color:"muted.main",children:["Images:"," ",t.length]}),(0,C.jsx)(ae,{handleChange:s,onClick:function(){}})]});return h?(0,C.jsxs)(Z.Z,{direction:"column",spacing:2,sx:{p:2},children:[R,(0,C.jsx)(ie,{images:t,handlePhotoClick:function(){},renderPhoto:function(e){var n=e.layout,t=e.imageProps,r=t.alt,a=t.style,i=t.title,o=(0,X.Z)(t,re);return console.log(n.index,i),(0,C.jsxs)(u.Z,{component:"div",sx:{padding:"2px"},children:[(0,C.jsx)("img",(0,L.Z)({alt:r,style:(0,L.Z)((0,L.Z)({},a),{},{width:n.width,padding:0})},o)),(0,C.jsx)(ne.Z,{index:n.index,handleRemoveImage:M}),(0,C.jsx)($.Z,{index:n.index,thumbnail:p,handleThumbnailChange:U}),(0,C.jsx)(ee.Z,{handleClick:function(){k(n.index),E(!0),I(i)},caption:i})]})}}),y?(0,C.jsx)(te.Z,{imageCaption:T,index:y,src:t[y].src,open:D,handleClose:function(){E(null),k(null),I("")},handleSubmit:function(){}}):null]}):(0,C.jsx)(ie,{images:t,handlePhotoClick:r})}ie.defaultProps={renderPhoto:null};var le=t(1747),se=t(1619);function ce(e){var n=e.editable,t=e.prevStory,r=e.handleStoryUpdate,a=(0,l.useState)(n),i=(0,o.Z)(a,2),s=i[0],u=i[1],d=(0,l.useState)(!1),h=(0,o.Z)(d,2),x=h[0],f=h[1],p=(0,se.Z)(t),j=(0,o.Z)(p,3),v=j[0],b=j[1],y=j[2],k=(0,l.useRef)();return(0,l.useEffect)((function(){u(n),b(t),f(!1)}),[n,t]),s||x?s&&!x?(0,C.jsxs)(Z.Z,{direction:"column",spacing:2,children:[(0,C.jsxs)(Z.Z,{direction:"row",spacing:2,justifyContent:"flex-end",children:[(0,C.jsx)(g.Z,{sx:{color:"muted.main"},children:"Edit Story"}),(0,C.jsx)(W.Z,{fontSize:"medium",onClick:function(){f(!0)}})]}),(0,C.jsx)(m.Z,{sx:{width:1}}),(0,C.jsx)(g.Z,{style:{whiteSpace:"pre-wrap"},children:v})]}):s&&x?(0,C.jsxs)(Z.Z,{direction:"column",spacing:2,children:[(0,C.jsxs)(Z.Z,{direction:"row",spacing:2,justifyContent:"flex-end",children:[(0,C.jsx)(g.Z,{sx:{color:"muted.main"},children:"Editing Story"}),(0,C.jsx)(q.Z,{fontSize:"medium",onClick:function(){r(v),f(!1)}}),(0,C.jsx)(O.Z,{fontSize:"medium",onClick:function(){b(t),f(!1)}})]}),(0,C.jsx)(m.Z,{sx:{width:1}}),(0,C.jsx)(c.Z,{sx:{p:2,m:1,my:2,border:1,borderColor:"primary.main",bgcolor:"input.background",minHeight:"70vh",borderRadius:5,width:"90%"},onClick:function(){return k.current.focus()},children:(0,C.jsx)(le.Z,{autoFocus:!0,"aria-label":"minimum height",placeholder:"Tell your story...",value:v,onChange:y,style:{width:"100%",minHeight:"184px",maxHeight:"70vh",boxSizing:"border-box",paddingTop:"5px",border:0,overflow:"auto",outline:"none",resize:"vertical",borderRadius:5,"&:focus":{border:0}},ref:k})})]}):void 0:(0,C.jsx)(g.Z,{style:{whiteSpace:"pre-wrap"},children:v})}var ue=t(2168);function de(e){var n=e.editable,t=e.text,r=e.handleTitleUpdate,a=(0,ue.Z)(t),i=(0,o.Z)(a,3),s=i[0],c=i[1],u=i[2],d=(0,l.useState)(n),h=(0,o.Z)(d,2),x=h[0],f=h[1],m=(0,l.useState)(!1),p=(0,o.Z)(m,2),j=p[0],v=p[1];return(0,l.useEffect)((function(){f(n),c(t),v(!1)}),[n]),x||j?x&&!j?(0,C.jsxs)(Z.Z,{direction:"row",sx:{alignItems:"center"},spacing:2,children:[(0,C.jsx)(g.Z,{variant:"h6",children:s}),(0,C.jsx)(W.Z,{fontSize:"medium",onClick:function(){return v(!0)}})]}):x&&j?(0,C.jsxs)(Z.Z,{direction:"row",sx:{alignItems:"flex-end",justifyContent:"flex-start"},spacing:2,children:[(0,C.jsx)(B.Z,{id:"standard-basic",size:"small",label:"Title",onChange:u,variant:"standard",defaultValue:s,sx:{maxWidth:"200px"}}),(0,C.jsx)(q.Z,{fontSize:"medium",onClick:function(){r(s),v(!1)}}),(0,C.jsx)(O.Z,{fontSize:"medium",onClick:function(){c(t),v(!1)}})]}):void 0:(0,C.jsx)(g.Z,{variant:"h6",children:s})}var he=t(5899);function xe(e){var n=e.memType,t=e.memTitle,v=e.memDate,b=e.memStory,k=e.memImages,S=e.bucket,w=e.memoryID,D=e.authURL,E=(0,l.useState)(!1),P=(0,o.Z)(E,2),z=P[0],T=P[1],I=(0,l.useState)(!1),U=(0,o.Z)(I,2),M=U[0],R=U[1],L=(0,l.useState)(0),B=(0,o.Z)(L,2),q=B[0],O=B[1],W=(0,l.useState)(t),H=(0,o.Z)(W,2),K=H[0],N=H[1],Y=(0,l.useState)(v),X=(0,o.Z)(Y,2),_=X[0],G=X[1],J=(0,l.useState)(b),Q=(0,o.Z)(J,2),$=Q[0],ee=Q[1],ne=(0,l.useState)(k),te=(0,o.Z)(ne,2),re=te[0],ae=te[1],ie=(0,l.useState)(null),le=(0,o.Z)(ie,2),se=le[0],ue=le[1],xe=(0,l.useState)(null),fe=(0,o.Z)(xe,2),me=fe[0],pe=fe[1],Ze=(0,l.useState)([]),ge=(0,o.Z)(Ze,2),je=ge[0],ve=ge[1],be=(0,l.useState)(null),Ce=(0,o.Z)(be,2),ye=Ce[0],ke=Ce[1],Se=(0,l.useState)([]),we=(0,o.Z)(Se,2),De=we[0],Ee=we[1],Pe=(0,l.useState)(!1),ze=(0,o.Z)(Pe,2),Te=ze[0],Ie=ze[1],Ue=(0,l.useState)(null),Me=(0,o.Z)(Ue,2),Re=Me[0],Fe=Me[1],Ae=(0,l.useState)(null),Le=(0,o.Z)(Ae,2),Be=Le[0],qe=Le[1],Oe=(0,l.useState)(null),We=(0,o.Z)(Oe,2),He=We[0],Ke=We[1],Ne=(0,l.useState)(!1),Ye=(0,o.Z)(Ne,2),Ve=Ye[0],Xe=Ye[1],_e=re.length;(0,l.useEffect)((function(){return N(t)}),[t]),(0,l.useEffect)((function(){return G(v)}),[v]),(0,l.useEffect)((function(){return ee(b)}),[b]),(0,l.useEffect)((function(){return ae(k)}),[k]);var Ge=function(e,n){pe(e),Ke(n)},Je=function(e,n,t){401===e.status?Ge("You have been logged out. Please login to continue.",!0):403===e.status?Ge("You do not have permissions to do this operation.",!0):Ge("Unknown error occured in ".concat(n),!0),t(e.status)},Qe=function(e){ue(!0),Xe(e)},$e=function(e,n,t,r){e.ok?(Ge("".concat(n," successful"),!1),ue(!0),r(t)):Je(e,n,Qe)},en=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(n){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,he.Z.updateTitle(w,n);case 2:t=e.sent,$e(t,"title update",n,N);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),nn=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(n){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,he.Z.updateDate(w,n);case 2:t=e.sent,$e(t,"date update",n,G);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),tn=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(n){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,he.Z.updateStory(w,n);case 2:t=e.sent,$e(t,"story update",n,ee);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),rn=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(n){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,he.Z.updateThumbnail(w,n);case 2:t=e.sent,$e(t,"thumbnail update",n,(function(){}));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),an=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(n){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,1!==re.length){e.next=5;break}Ge("Atleast 1 image is needed for memory. Unable to delete",!0),e.next=9;break;case 5:return e.next=7,he.Z.removeImage(w,n);case 7:t=e.sent,$e(t,"image delete",n,(function(){return ae(re.filter((function(e){return e.title!==n})))}));case 9:return ue(!0),e.abrupt("return",t);case 13:return e.prev=13,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(n){return e.apply(this,arguments)}}(),on=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(n){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,he.Z.addImage(w,n);case 3:return t=e.sent,e.abrupt("return",t);case 7:return e.prev=7,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n){return e.apply(this,arguments)}}(),ln=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var n,t,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=(0,r.Z)(je.entries()),e.prev=1,i=(0,a.Z)().mark((function e(){var n,r,i,l,s,c,u,d,h,x;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,o.Z)(t.value,2),r=n[0],i=n[1],l=(0,o.Z)(i,3),s=l[0],c=l[1],u=l[2],e.next=4,on(s).then((function(e){return e.ok?e.text():(Je(e,"add image",Qe),"")}));case 4:return d=e.sent,h={key:"memories/".concat(w,"/images/").concat(s.name),src:u,alt:s.name,title:s.name,width:s.width,height:s.height,images:[]},e.next=8,fetch(d,{body:c,method:"PUT"});case 8:(x=e.sent).ok?(Fe("Images uploaded: ".concat(r+1," / ").concat(ye," ")),ae((function(e){return e.concat([h])}))):(qe("Error while uploading memory image"),Ee((function(e){return e.concat([s.name])})),Je(x,"deleting image",Qe));case 10:case"end":return e.stop()}}),e)})),n.s();case 4:if((t=n.n()).done){e.next=8;break}return e.delegateYield(i(),"t0",6);case 6:e.next=4;break;case 8:e.next=13;break;case 10:e.prev=10,e.t1=e.catch(1),n.e(e.t1);case 13:return e.prev=13,n.f(),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,10,13,16]])})));return function(){return e.apply(this,arguments)}}();(0,l.useEffect)((0,i.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(je.length>0&&(Ie(!0),Fe("Preparing images for upload....")),je.length!==ye){e.next=9;break}return e.next=4,ln();case 4:De.length>0?qe("Error while uploading ".concat(De.length," images")):qe("".concat(je.length," image(s) uploaded successfully")),Ee([]),ke(null),ve([]),setTimeout((function(){Ie(!1),qe(null),Fe(null)}),3e3);case 9:case"end":return e.stop()}}),e)}))),[je]);var sn=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(n){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.target.files&&(t=Array.from(n.target.files),ke(t.length),re.length+t.length<=15?(t.forEach((function(e){var n=new Image;n.onload=function(){var n=(0,i.Z)((0,a.Z)().mark((function n(t){var r,i,o,l,s,c,u,d;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=t.target.naturalHeight,i=t.target.naturalWidth,o=e.size/1048576,l=e.name,s=[500,1e3,1500].map((function(e){return{height:e,width:Math.ceil(e*i/r)}})),c=Date.now(),u="".concat(c,"-").concat(l),d=[{name:u,size:o,height:r,width:i,images:s},e,t.target.src],ve((function(e){return e.concat([d])}));case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),n.src=URL.createObjectURL(e)})),t.map((function(e){return URL.revokeObjectURL(e)}))):(Ge("Unable to add ".concat(t.length," images. Maximum images allowed per memory is 15"),!0),ue(!0)));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),cn=(0,C.jsx)(de,{editable:M,text:K,handleTitleUpdate:en}),un=(0,C.jsx)(V,{editable:M,prevDate:_,handleDateUpdate:nn}),dn=(0,C.jsx)(ce,{editable:M,prevStory:$,handleStoryUpdate:tn}),hn=(0,C.jsx)(oe,{editable:M,images:re,handlePhotoClick:function(e,n,t){T(!0),O(t)},handleThumbnailUpdate:rn,deleteImage:an,addImage:sn}),xn=(0,C.jsxs)(u.Z,{variant:"contained",component:"label",onClick:function(){return R(!1)},sx:{color:"primary.main",borderRadius:5,backgroundColor:"button.main",padding:"6px 8px"},children:[(0,C.jsx)(p.Z,{size:"medium",sx:{paddingRight:1}}),(0,C.jsx)(g.Z,{variant:"body1",color:"muted.main",children:"Edit"})]});return 401===Ve&&!1===se?(0,C.jsx)(s.Fg,{to:"/login"}):(0,C.jsxs)(C.Fragment,{children:[M?(0,C.jsx)(Z.Z,{direction:"row",justifyContent:"flex-start",sx:{backgroundColor:"button.main",paddingX:2,paddingY:1},children:xn}):(0,C.jsx)(y,{memType:n}),(0,C.jsx)(c.Z,{component:"div",sx:{backgroundColor:"button.main",margin:M?"5px":0},children:(0,C.jsx)(A.Z,{header:cn,subheader:un,photoLayout:hn,storyLayout:dn,memoryID:w,bucket:S,authURL:D,handleEditClick:function(){return R(!0)},memType:n})}),(0,C.jsx)(F,{open:z,title:K,date:_,images:re,index:q,handleNext:function(){O((function(e){return(e+1)%_e}))},handleBack:function(){O((function(e){return(e-1+_e)%_e}))},handleClose:function(){return T(!1)},handleChange:function(e){return O(e)}}),(0,C.jsx)(j.Z,{snackBarOpen:se,message:me,onClose:function(){ue(!1),pe(null),Ke(null)},error:He}),(0,C.jsx)(f.Z,{open:Te,fullWidth:!0,sx:{p:1},children:(0,C.jsxs)(d.Z,{sx:{maxWidth:1,p:1},children:[(0,C.jsx)(x.Z,{title:"Adding Images",sx:{textAlign:"center"}}),(0,C.jsx)(m.Z,{}),(0,C.jsxs)(h.Z,{children:[(0,C.jsx)(g.Z,{variant:"h6",sx:{color:"muted.main"},children:Re}),(0,C.jsx)(Z.Z,{justifyContent:"center",sx:{py:2},children:(0,C.jsx)(g.Z,{variant:"h5",children:Be})})]})]})})]})}xe.defaultProps={memTitle:"Memory Title",memDate:"Memory Date",memStory:"Memory Text"}}}]);
//# sourceMappingURL=35.496d66ff.chunk.js.map