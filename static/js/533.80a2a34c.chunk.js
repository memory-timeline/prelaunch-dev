"use strict";(self.webpackChunkprelaunch=self.webpackChunkprelaunch||[]).push([[533],{1001:function(e,n,t){t.d(n,{Z:function(){return m}});var r=t(2169),a=t(9504),o=t(9585),i=t(890),c=t(1918),l=t(6608),s=t(184);function u(e){var n=e.imageSrc,t=e.imageSrcSet,a=e.title,o=e.handleImageLoad;return(0,s.jsx)(r.Z,{component:"img",src:n,srcSet:t,alt:a,sx:{textAlign:"center",objectFit:"cover",height:{lg:350,md:300,xs:250}},onLoad:o})}function d(e){var n=e.title,t=e.date,r=e.avatar,l=e.shared;return(0,s.jsx)(a.Z,{children:(0,s.jsx)(o.Z,{disableTypography:!0,avatar:r,title:(0,s.jsxs)(i.Z,{noWrap:!0,sx:{overflow:"hidden",textOverflow:"ellipsis",width:{xs:"calc(75%)",sm:"calc(100%)"},fontWeight:600},children:[n,""!==l?(0,s.jsxs)(s.Fragment,{children:[" ",(0,s.jsx)(c.Z,{label:l,size:"small",variant:"filled",color:"Shared"===l?"success":"default",sx:{height:"auto"}})]}):null]}),subheader:(0,s.jsx)(i.Z,{sx:{color:"muted.main"},children:t}),sx:{padding:0,color:"faded.black"}})})}function m(e){var n=e.title,t=e.date,r=e.avatar,a=e.shared,o=e.thumbnailImage,i=e.thumbnailImageSrcSet,c=e.handleClick,m=e.handleImageLoad;return(0,s.jsxs)(l.Z,{handleClick:c,children:[(0,s.jsx)(u,{imageSrc:o,imageSrcSet:i,title:n,handleImageLoad:m}),(0,s.jsx)(d,{title:n,date:t,avatar:r,shared:a})]})}d.defaultProps={title:"Memory Thumbnail Image",date:"Memory Date",avatar:"",shared:""},u.defaultProps={title:"Memory Thumbnail Image",imageSrc:"",imageSrcSet:"",handleImageLoad:function(){}},m.defaultProps={thumbnailImageSrcSet:"",handleImageLoad:function(){},avatar:"",shared:""}},6608:function(e,n,t){t.d(n,{Z:function(){return i}});var r=t(7621),a=t(6647),o=t(184);function i(e){var n=e.handleClick,t=e.children;return(0,o.jsx)(a.Z,{onClick:n,children:(0,o.jsx)(r.Z,{elevation:2,sx:{bgcolor:"#fff",borderRadius:5,color:"black",position:"relative",height:{lg:430,md:380,xs:330},"&:hover":{border:3,borderColor:"secondary.main",elevation:0}},children:t})})}},8533:function(e,n,t){t.r(n),t.d(n,{default:function(){return ie}});var r=t(9439),a=t(2791),o=t(7689),i=t(1087),c=t(388),l=t(3238),s=t(3767),u=t(4697),d=t(2766),m=t(4165),h=t(5861),x=t(4554),f=t(1889),g=t(3402),p=t(1001),j=t(4586),Z=t(184);function v(e){var n=e.memory;return(0,Z.jsx)(f.ZP,{item:!0,lg:3,md:4,sm:6,xs:12,sx:{p:1},children:(0,Z.jsx)(p.Z,{title:(0,Z.jsx)(g.Z,{type:"rectangular",sx:{width:"60%"}}),date:(0,Z.jsx)(g.Z,{type:"rectangular",sx:{width:"50%"}}),thumbnailImage:j,handleClick:function(){}})},n)}function b(e){var n=e.children;return(0,Z.jsx)(f.ZP,{container:!0,sx:{bgcolor:"button.main",py:1},justifyContent:"left",alignItems:"flex-start",children:n})}b.defaultProps={children:""};var y=t(6194),k=t(5193),w=t(890),S=t(8054),C=t(6608);function I(){var e=(0,o.s0)(),n=(0,k.Z)((function(e){return e.breakpoints.down("md")}));return(0,Z.jsx)(f.ZP,{item:!0,lg:3,md:4,sm:6,xs:12,sx:{p:1},children:(0,Z.jsxs)(C.Z,{handleClick:function(){e("/memory/create")},children:[(0,Z.jsx)(w.Z,{variant:n?"body1":"h5",color:"button.main",sx:{p:1,color:"secondary.main",bgcolor:"primary.main",borderRadius:"0px 10px 10px 0px",borderColor:"secondary.main",position:"absolute",bottom:15,left:0},children:"Create a memory"}),(0,Z.jsx)(S.Z,{sx:{position:"absolute",border:3,borderRadius:"50%",fontSize:"7.5rem",left:"50%",top:"50%",transform:"translate(-50%, -50%)",color:"muted.main"}})]})},"creatememory")}function M(e){var n=e.handleMoreClick;return(0,Z.jsx)(f.ZP,{item:!0,lg:3,md:4,sm:6,xs:12,sx:{p:1},children:(0,Z.jsx)(C.Z,{handleClick:n,children:(0,Z.jsx)(w.Z,{variant:"h5",sx:{p:2,color:"secondary.main",bgcolor:"primary.main",borderRadius:"30px",borderColor:"secondary.main",position:"absolute",bottom:"50%",left:"50%",transform:"translate(-50%, +50%)",textAlign:"center"},children:"Load More"})})},"creatememory")}function P(e){var n=e.memories,t=e.handleMoreClick,r=e.nextToken,a=e.handleImageLoad,o=e.create,i=e.handleClick,c=n.sort((function(e,n){return e.memory_id>n.memory_id?1:-1}));return(0,Z.jsxs)(f.ZP,{container:!0,sx:{bgcolor:"button.main",py:1},justifyContent:"left",alignItems:"flex-start",children:[o||0===n.length?(0,Z.jsx)(I,{}):null,c.map((function(e){return(0,Z.jsx)(f.ZP,{item:!0,lg:3,md:4,sm:6,xs:12,sx:{p:1},children:(0,Z.jsx)(p.Z,{title:e.title,date:e.date,avatar:e.owner?(0,Z.jsx)(y.S,{name:e.owner.name,picture:e.owner.picture,email:e.owner.email}):null,shared:e.shared,thumbnailImage:e.photo.src,thumbnailImageSrcSet:(n=e.photo,(n.images?n.images.map((function(e){var n=e.src,t=e.width;return"".concat(n," ").concat(t,"w")})):[]).join(",")),handleClick:function(){return i(e)},handleImageLoad:a})},e.title);var n})),r&&(0,Z.jsx)(M,{handleMoreClick:t})]})}P.defaultProps={memories:[]};var L=t(5899);function R(e,n,t){return _.apply(this,arguments)}function _(){return _=(0,h.Z)((0,m.Z)().mark((function e(n,t,r){var a,o,i,c=arguments;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>3&&void 0!==c[3]?c[3]:"",e.prev=1,e.next=4,L.Z.getMemories(a);case 4:if(!(o=e.sent)){e.next=13;break}if(!o.memories){e.next=13;break}return r(o.memories),e.next=10,Promise.all(L.Z.getThumbnails(o.memories));case 10:i=e.sent,n(i),t(o.next_continuation_token||"");case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[1,15]])}))),_.apply(this,arguments)}function D(){var e=(0,a.useState)(""),n=(0,r.Z)(e,2),t=n[0],i=n[1],c=(0,a.useState)([]),l=(0,r.Z)(c,2),s=l[0],u=l[1],d=(0,a.useState)([]),m=(0,r.Z)(d,2),h=m[0],f=m[1],g=(0,a.useState)(0),p=(0,r.Z)(g,2),j=p[0],y=p[1],k=(0,a.useState)(null),w=(0,r.Z)(k,2),S=w[0],C=w[1],M=(0,o.s0)(),L=function(e){M("/memory/".concat(e.memory_id),{state:e})},_=function(){return y((function(e){return e+1}))},D=function(e){return i(e)},T=function(e){return f((function(n){return n.concat(e)}))},E=function(e){return u((function(n){return n.concat(e)}))};return(0,a.useEffect)((function(){return R(T,D,E,t)}),[]),(0,a.useEffect)((function(){C((0,Z.jsx)(P,{create:!0,memories:h,nextToken:t,handleMoreClick:function(){return R(T,D,E,t)},handleImageLoad:_,handleClick:L}))}),[h,t]),console.log("I am in own memory",h),h.length===s.length&&j>=s.length?S:(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsxs)(b,{children:[(0,Z.jsx)(I,{}),s.map((function(e){return(0,Z.jsx)(v,{memory:e})}))]}),(0,Z.jsx)(x.Z,{component:"div",sx:{display:"none"},children:S})]})}var T=t(6151),E=t(6489);function A(e){var n=e.message,t=(0,o.s0)();return(0,Z.jsxs)(s.Z,{direction:"column",justifyContent:"center",alignItems:"center",sx:{width:"95%",maxWidth:"500px",position:"fixed",top:"50%",right:"50%",transform:"translate(50%, -50%)",border:"2px solid gray",height:"60%",borderRadius:"10px"},children:[(0,Z.jsx)(E.r,{fill:"gray",width:"64px",height:"64px"}),(0,Z.jsx)(w.Z,{color:"gray",sx:{fontSize:"1.3rem"},children:n}),(0,Z.jsx)(w.Z,{color:"gray",sx:{pb:8,fontSize:"1.3rem"},children:"Check again later."}),(0,Z.jsx)(w.Z,{color:"primary",children:"In the mean time, you can"}),(0,Z.jsx)(T.Z,{variant:"contained",onClick:function(){return t("/memory/create")},children:"Create a Memory"})]})}function W(e,n,t){return z.apply(this,arguments)}function z(){return z=(0,h.Z)((0,m.Z)().mark((function e(n,t,r){var a,o,i,c=arguments;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>3&&void 0!==c[3]?c[3]:"",e.prev=1,e.next=4,L.Z.getAcceptedMemories(a);case 4:if(!(o=e.sent)){e.next=13;break}if(!o.memories){e.next=13;break}return r(o.memories),e.next=10,Promise.all(L.Z.getAcceptedThumbnails(o.memories));case 10:i=e.sent,n(i),t(o.next_continuation_token||"");case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[1,15]])}))),z.apply(this,arguments)}function F(){var e=(0,a.useState)(""),n=(0,r.Z)(e,2),t=n[0],i=n[1],c=(0,a.useState)([]),l=(0,r.Z)(c,2),s=l[0],u=l[1],d=(0,a.useState)([]),m=(0,r.Z)(d,2),h=m[0],f=m[1],g=(0,a.useState)(0),p=(0,r.Z)(g,2),j=p[0],y=p[1],k=(0,a.useState)(null),w=(0,r.Z)(k,2),S=w[0],C=w[1],I=(0,o.s0)(),M=function(e){I("/memory/shared/".concat(e.memory_id),{state:e})},L=function(){return y((function(e){return e+1}))},R=function(e){return i(e)},_=function(e){e.map((function(e){var n=e.thumbnail;return n.owner=e.owner_details,console.log("combined shared memory details",n),f((function(e){return e.concat([n])})),0}))},D=function(e){return u((function(n){return n.concat(e)}))};return(0,a.useEffect)((function(){return W(_,R,D,t)}),[]),(0,a.useEffect)((function(){h.length>0?C((0,Z.jsx)(P,{create:!1,memories:h,nextToken:t,handleMoreClick:function(){return W(_,R,D,t)},handleImageLoad:L,handleClick:M})):C((0,Z.jsx)(A,{message:"No shared memories right now."}))}),[h,t]),h.length===s.length&&j>=s.length?S:(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(b,{children:s.map((function(e){return(0,Z.jsx)(v,{memory:e})}))}),(0,Z.jsx)(x.Z,{component:"div",sx:{display:"none"},children:S})]})}function O(e){var n=e.label,t=e.handleClick,r=e.color;return(0,Z.jsx)(T.Z,{variant:"contained",color:r,sx:{m:1},onClick:t,children:(0,Z.jsx)(w.Z,{variant:"h6",children:n})})}function U(e){var n=e.name,t=e.email,r=e.picture;return(0,Z.jsxs)(s.Z,{direction:"row",justifyContent:"center",alignItems:"center",sx:{width:"100%"},children:[(0,Z.jsx)(y.S,{name:n,email:t,picture:r}),(0,Z.jsx)(w.Z,{variant:"h6",sx:{px:1},children:n})]})}var N=t(4700),B=t(9052),q=t(2169),G=t(9504),H=t(9585),J=t(7621),K=t(6647);function Q(e){var n=e.handleClick,t=e.children;return(0,Z.jsx)(K.Z,{onClick:n,sx:{display:"flex"},children:(0,Z.jsx)(J.Z,{elevation:0,sx:{bgcolor:"#fff",borderRadius:5,position:"relative",maxWidth:"700px",width:"95%"},children:t})})}function V(e){var n=e.imageSrc,t=e.imageSrcSet,r=e.title,a=e.handleImageLoad;return(0,Z.jsx)(q.Z,{component:"img",src:n,srcSet:t,alt:r,sx:{borderColor:"muted.main",borderRadius:4,textAlign:"center",objectFit:"cover",height:{lg:400,sm:350,xs:350}},onLoad:a})}function X(e){var n=e.title,t=e.date;return console.log("title, date",n,t),(0,Z.jsx)(G.Z,{children:(0,Z.jsx)(H.Z,{disableTypography:!0,title:(0,Z.jsx)(w.Z,{noWrap:!0,sx:{overflow:"hidden",textOverflow:"ellipsis",width:{xs:"calc(75%)",sm:"calc(100%)"},fontWeight:600},children:n}),subheader:(0,Z.jsx)(w.Z,{sx:{color:"muted.main"},children:t}),sx:{padding:0,color:"faded.black"}})})}function Y(e){var n=e.title,t=e.date,r=e.thumbnailImage,a=e.thumbnailImageSrcSet,o=e.handleClick,i=e.handleImageLoad;return console.log("rendering review item"),(0,Z.jsxs)(Q,{handleClick:o,children:[(0,Z.jsx)(V,{imageSrc:r,imageSrcSet:a,title:n,handleImageLoad:i}),(0,Z.jsx)(X,{title:n,date:t})]})}X.defaultProps={title:"",date:""},V.defaultProps={title:"Review Image",imageSrc:"",imageSrcSet:"",handleImageLoad:function(){}},Y.defaultProps={title:"",date:"",thumbnailImageSrcSet:"",handleImageLoad:function(){}};function $(e,n,t){return ee.apply(this,arguments)}function ee(){return ee=(0,h.Z)((0,m.Z)().mark((function e(n,t,r){var a,o,i,c=arguments;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>3&&void 0!==c[3]?c[3]:"",e.prev=1,e.next=4,L.Z.getPendingMemories(a);case 4:if(!(o=e.sent)){e.next=14;break}if(r(o.count),!o.memory){e.next=14;break}return t(o.memory),console.log("review memories",o),e.next=12,L.Z.getPendingThumbnails(o.memory);case 12:i=e.sent,n(i);case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[1,16]])}))),ee.apply(this,arguments)}function ne(){return(ne=(0,h.Z)((0,m.Z)().mark((function e(n,t){var r,a;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=B.Z.getUserInfo(),e.next=4,L.Z.acceptShare(n,r.email);case 4:a=e.sent,console.log(a),t(a),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function te(){return(te=(0,h.Z)((0,m.Z)().mark((function e(n,t){var r,a;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=B.Z.getUserInfo(),e.next=4,L.Z.rejectShare(n,r.email);case 4:a=e.sent,console.log(a),t(a),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function re(e){var n=e.memoryID,t=e.count,o=e.handleReviewCount,i=(0,a.useState)(!1),c=(0,r.Z)(i,2),l=c[0],u=c[1],d=(0,a.useState)(null),m=(0,r.Z)(d,2),h=m[0],f=m[1],p=(0,a.useState)(null),v=(0,r.Z)(p,2),b=v[0],y=v[1],k=(0,a.useState)(null),S=(0,r.Z)(k,2),C=S[0],I=S[1],M=(0,a.useState)(null),P=(0,r.Z)(M,2),L=P[0],R=P[1],_=(0,a.useState)(null),D=(0,r.Z)(_,2),T=D[0],E=D[1],W=(0,a.useState)(null),z=(0,r.Z)(W,2),F=z[0],B=z[1];console.log(n);var q=function(e,n){R(!0),E(e),B(n)},G=function(){R(!1),E(null),B(null)},H=function(){y(null),I(null),$(y,f,o,n)};(0,a.useEffect)((function(){return $(y,f,o,n)}),[]);var J=function(e){console.log("accept response",e),e.ok?(q("Memory share accepted",!1),u(!1),H()):q("Error while accepting memory share",!0)},K=function(e){console.log("reject response",e),e.ok?(q("Memory share rejected",!1),u(!1),H()):q("Error while rejecting memory share",!0)},Q=function(){!function(e,n){ne.apply(this,arguments)}(b.thumbnail.memory_id,J),console.log("accepting memoryID",b.thumbnail.memory_id)},V=function(){!function(e,n){te.apply(this,arguments)}(b.thumbnail.memory_id,K),console.log("rejecting memoryID",b.thumbnail.memory_id)},X=function(){return u(!0)};return console.log("pending memory",b),0===t&&null===C&&I((0,Z.jsx)(A,{message:"Nothing to review right now."})),(0,a.useEffect)((function(){return function(){if(null!==b){var e=(0,Z.jsxs)(x.Z,{sx:{display:"flex",width:"100%",backgroundColor:"transparent",backgroundSize:"cover",backgroundImage:"linear-gradient(white, #0e516a)",justifyContent:"center"},children:[(0,Z.jsxs)(s.Z,{direction:"column",alignItems:"center",sx:{width:"100%",my:3},children:[(0,Z.jsx)(U,{name:b.owner_details.name||"",email:b.owner_details.email||"P",picture:b.owner_details.picture||""}),(0,Z.jsx)(w.Z,{sx:{mb:2},children:"has shared a memory with you"}),(0,Z.jsx)(s.Z,{direction:"column",spacing:1,alignItems:"center",children:(0,Z.jsx)(Y,{title:b.thumbnail.title,date:b.thumbnail.date,thumbnailImage:b.thumbnail.photo.src,thumbnailImageSrcSet:(n=b.thumbnail.photo,(n.images?n.images.map((function(e){var n=e.src,t=e.width;return"".concat(n," ").concat(t,"w")})):[]).join(",")),handleImageLoad:X,handleClick:function(){}})},b.thumbnail.memory_id),(0,Z.jsxs)(s.Z,{direction:"row",sx:{m:1},children:[(0,Z.jsx)(O,{label:"Accept",color:"primary",handleClick:Q}),(0,Z.jsx)(O,{label:"Reject",color:"error",handleClick:V})]})]}),(0,Z.jsx)(N.Z,{snackBarOpen:L,message:T,onClose:G,error:F})]});I(e)}var n}()}),[b,n]),console.log(b,h,l,null!==b&&l||0===t),null!==b&&l||0===t?C:(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(x.Z,{sx:{display:"flex",width:"100%",backgroundColor:"transparent",backgroundSize:"cover",backgroundImage:"linear-gradient(white, #0e516a)",justifyContent:"center"},children:(0,Z.jsxs)(s.Z,{direction:"column",alignItems:"center",sx:{width:"100%",my:3},children:[(0,Z.jsx)(U,{name:(0,Z.jsx)(g.Z,{type:"rectangular",sx:{width:"35%"}}),email:"P",picture:""}),(0,Z.jsx)(w.Z,{sx:{mb:2},children:"has shared a memory with you"}),(0,Z.jsx)(s.Z,{direction:"column",spacing:1,alignItems:"center",children:(0,Z.jsx)(Y,{title:"",date:"",thumbnailImage:j,thumbnailImageSrcSet:"",handleImageLoad:function(){},handleClick:function(){}})},"loading"),(0,Z.jsxs)(s.Z,{direction:"row",sx:{m:1},children:[(0,Z.jsx)(O,{label:"Accept",color:"primary",handleClick:Q}),(0,Z.jsx)(O,{label:"Reject",color:"error",handleClick:V})]})]})}),(0,Z.jsx)(x.Z,{component:"div",sx:{display:"none"},children:C})]})}function ae(e){var n=e.mode,t=e.handleChange,r=e.count;return console.log("I am in memory modes"),(0,Z.jsx)(s.Z,{direction:"row",justifyContent:"center",sx:{py:1,backgroundColor:"button.main"},children:(0,Z.jsxs)(l.Z,{color:"primary",value:n,exclusive:!0,"aria-label":"Memory Modes",children:[(0,Z.jsx)(c.Z,{value:"own",sx:{borderRadius:"30px"},onClick:t,children:"My Memories"}),(0,Z.jsx)(c.Z,{value:"shared",onClick:t,children:"Shared With Me"}),(0,Z.jsx)(c.Z,{value:"review",sx:{borderRadius:"30px"},onClick:t,children:(0,Z.jsx)(u.Z,{badgeContent:r,color:"primary",children:"Review"})})]})})}function oe(e){var n=e.mode,t=e.memoryID,r=e.count,a=e.handleReviewCount;return"own"===n?(0,Z.jsx)(D,{}):"shared"===n?(0,Z.jsx)(F,{}):"review"===n?(0,Z.jsx)(re,{memoryID:t,count:r,handleReviewCount:a}):void 0}function ie(e){var n=e.initMode,t=(0,o.UO)(),c=t.memoryMode,l=(0,i.lr)(),u=(0,r.Z)(l,1)[0],m=(0,a.useState)(n),h=(0,r.Z)(m,2),x=h[0],f=h[1],g=(0,a.useState)(0),p=(0,r.Z)(g,2),j=p[0],v=p[1];(0,a.useEffect)((function(){f(c||n)}),[c,n]),console.log(n,c,t,u);return(0,Z.jsx)(d.Z,{create:!0,children:(0,Z.jsxs)(s.Z,{direction:"column",children:[(0,Z.jsx)(ae,{mode:x,handleChange:function(e,n){f(n)},count:j}),(0,Z.jsx)(oe,{mode:x,memoryID:u.get("memoryID"),count:j,handleReviewCount:v})]})})}re.defaultProps={memoryID:""},oe.defaultProps={memoryID:""}},4586:function(e,n,t){e.exports=t.p+"static/media/image-loading.f1b4462988545d9c460a.png"}}]);
//# sourceMappingURL=533.80a2a34c.chunk.js.map